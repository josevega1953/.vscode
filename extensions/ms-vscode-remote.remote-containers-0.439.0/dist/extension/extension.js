/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------------------------------------------*/

var H9=Object.create;var PC=Object.defineProperty;var B9=Object.getOwnPropertyDescriptor;var W9=Object.getOwnPropertyNames;var j9=Object.getPrototypeOf,V9=Object.prototype.hasOwnProperty;var ne=(t,e)=>()=>(t&&(e=t(t=0)),e);var M=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),bC=(t,e)=>{for(var n in e)PC(t,n,{get:e[n],enumerable:!0})},VO=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of W9(e))!V9.call(t,o)&&o!==n&&PC(t,o,{get:()=>e[o],enumerable:!(r=B9(e,o))||r.enumerable});return t};var Y=(t,e,n)=>(n=t!=null?H9(j9(t)):{},VO(e||!t||!t.__esModule?PC(n,"default",{value:t,enumerable:!0}):n,t)),Y9=t=>VO(PC({},"__esModule",{value:!0}),t);var Mr=M((bve,zO)=>{"use strict";var B0=Object.defineProperty,q9=Object.getOwnPropertyDescriptor,G9=Object.getOwnPropertyNames,z9=Object.prototype.hasOwnProperty,K9=(t,e)=>{for(var n in e)B0(t,n,{get:e[n],enumerable:!0})},J9=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of G9(e))!z9.call(t,o)&&o!==n&&B0(t,o,{get:()=>e[o],enumerable:!(r=q9(e,o))||r.enumerable});return t},X9=t=>J9(B0({},"__esModule",{value:!0}),t),qO={};K9(qO,{config:()=>n7,t:()=>GO});zO.exports=X9(qO);var Z9=require("fs"),Q9=require("fs/promises");async function e7(t){if(t.protocol==="file:")return await(0,Q9.readFile)(t,"utf8");if(t.protocol==="http:"||t.protocol==="https:"){let e=await fetch(t.toString(),{headers:{"Accept-Encoding":"gzip, deflate",Accept:"application/json"},redirect:"follow"});if(!e.ok){let r=`Unexpected ${e.status} response while trying to read ${t}`;try{r+=`: ${await e.text()}`}catch{}throw new Error(r)}return await e.text()}throw new Error("Unsupported protocol")}function t7(t){return(0,Z9.readFileSync)(t,"utf8")}var sf;function n7(t){if("contents"in t){typeof t.contents=="string"?sf=JSON.parse(t.contents):sf=t.contents;return}if("fsPath"in t){let e=t7(t.fsPath),n=JSON.parse(e);sf=YO(n)?n.contents.bundle:n;return}if(t.uri){let e=t.uri;return typeof t.uri=="string"&&(e=new URL(t.uri)),new Promise((n,r)=>{e7(e).then(o=>{try{let i=JSON.parse(o);sf=YO(i)?i.contents.bundle:i,n()}catch(i){r(i)}}).catch(o=>{r(o)})})}}function GO(...t){let e=t[0],n,r,o;if(typeof e=="string")n=e,r=e,t.splice(0,1),o=!t||typeof t[0]!="object"?t:t[0];else if(e instanceof Array){let s=t.slice(1);if(e.length!==s.length+1)throw new Error("expected a string as the first argument to l10n.t");let a=e[0];for(let c=1;c<e.length;c++)a+=`{${c-1}}`+e[c];return GO(a,...s)}else r=e.message,n=r,e.comment&&e.comment.length>0&&(n+=`/${Array.isArray(e.comment)?e.comment.join(""):e.comment}`),o=e.args??{};let i=sf==null?void 0:sf[n];return i?typeof i=="string"?TC(i,o):i.comment?TC(i.message,o):TC(r,o):TC(r,o)}var r7=/{([^}]+)}/g;function TC(t,e){return Object.keys(e).length===0?t:t.replace(r7,(n,r)=>e[r]??n)}function YO(t){var e;return typeof((e=t==null?void 0:t.contents)==null?void 0:e.bundle)=="object"&&typeof(t==null?void 0:t.version)=="string"}});var v1=M((Zve,g1)=>{var Pm=1e3,bm=Pm*60,Tm=bm*60,ff=Tm*24,E7=ff*7,S7=ff*365.25;g1.exports=function(t,e){e=e||{};var n=typeof t;if(n==="string"&&t.length>0)return x7(t);if(n==="number"&&isFinite(t))return e.long?D7(t):_7(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function x7(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*S7;case"weeks":case"week":case"w":return n*E7;case"days":case"day":case"d":return n*ff;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Tm;case"minutes":case"minute":case"mins":case"min":case"m":return n*bm;case"seconds":case"second":case"secs":case"sec":case"s":return n*Pm;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function _7(t){var e=Math.abs(t);return e>=ff?Math.round(t/ff)+"d":e>=Tm?Math.round(t/Tm)+"h":e>=bm?Math.round(t/bm)+"m":e>=Pm?Math.round(t/Pm)+"s":t+"ms"}function D7(t){var e=Math.abs(t);return e>=ff?MC(t,e,ff,"day"):e>=Tm?MC(t,e,Tm,"hour"):e>=bm?MC(t,e,bm,"minute"):e>=Pm?MC(t,e,Pm,"second"):t+" ms"}function MC(t,e,n,r){var o=e>=n*1.5;return Math.round(t/n)+" "+r+(o?"s":"")}});var Z0=M((Qve,w1)=>{function I7(t){n.debug=n,n.default=n,n.coerce=c,n.disable=s,n.enable=o,n.enabled=a,n.humanize=v1(),n.destroy=l,Object.keys(t).forEach(u=>{n[u]=t[u]}),n.names=[],n.skips=[],n.formatters={};function e(u){let f=0;for(let m=0;m<u.length;m++)f=(f<<5)-f+u.charCodeAt(m),f|=0;return n.colors[Math.abs(f)%n.colors.length]}n.selectColor=e;function n(u){let f,m=null,d,p;function g(...h){if(!g.enabled)return;let v=g,C=Number(new Date),w=C-(f||C);v.diff=w,v.prev=f,v.curr=C,f=C,h[0]=n.coerce(h[0]),typeof h[0]!="string"&&h.unshift("%O");let y=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,(D,_)=>{if(D==="%%")return"%";y++;let A=n.formatters[_];if(typeof A=="function"){let U=h[y];D=A.call(v,U),h.splice(y,1),y--}return D}),n.formatArgs.call(v,h),(v.log||n.log).apply(v,h)}return g.namespace=u,g.useColors=n.useColors(),g.color=n.selectColor(u),g.extend=r,g.destroy=n.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(d!==n.namespaces&&(d=n.namespaces,p=n.enabled(u)),p),set:h=>{m=h}}),typeof n.init=="function"&&n.init(g),g}function r(u,f){let m=n(this.namespace+(typeof f>"u"?":":f)+u);return m.log=this.log,m}function o(u){n.save(u),n.namespaces=u,n.names=[],n.skips=[];let f=(typeof u=="string"?u:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let m of f)m[0]==="-"?n.skips.push(m.slice(1)):n.names.push(m)}function i(u,f){let m=0,d=0,p=-1,g=0;for(;m<u.length;)if(d<f.length&&(f[d]===u[m]||f[d]==="*"))f[d]==="*"?(p=d,g=m,d++):(m++,d++);else if(p!==-1)d=p+1,g++,m=g;else return!1;for(;d<f.length&&f[d]==="*";)d++;return d===f.length}function s(){let u=[...n.names,...n.skips.map(f=>"-"+f)].join(",");return n.enable(""),u}function a(u){for(let f of n.skips)if(i(u,f))return!1;for(let f of n.names)if(i(u,f))return!0;return!1}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}w1.exports=I7});var y1=M((Po,$C)=>{Po.formatArgs=b7;Po.save=T7;Po.load=R7;Po.useColors=P7;Po.storage=k7();Po.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Po.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function P7(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function b7(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+$C.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let n=0,r=0;t[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(n++,o==="%c"&&(r=n))}),t.splice(r,0,e)}Po.log=console.debug||console.log||(()=>{});function T7(t){try{t?Po.storage.setItem("debug",t):Po.storage.removeItem("debug")}catch{}}function R7(){let t;try{t=Po.storage.getItem("debug")||Po.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function k7(){try{return localStorage}catch{}}$C.exports=Z0()(Po);var{formatters:N7}=$C.exports;N7.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var E1=M((ewe,C1)=>{"use strict";C1.exports=(t,e)=>{e=e||process.argv;let n=t.startsWith("-")?"":t.length===1?"-":"--",r=e.indexOf(n+t),o=e.indexOf("--");return r!==-1&&(o===-1?!0:r<o)}});var x1=M((twe,S1)=>{"use strict";var L7=require("os"),is=E1(),$r=process.env,Rm;is("no-color")||is("no-colors")||is("color=false")?Rm=!1:(is("color")||is("colors")||is("color=true")||is("color=always"))&&(Rm=!0);"FORCE_COLOR"in $r&&(Rm=$r.FORCE_COLOR.length===0||parseInt($r.FORCE_COLOR,10)!==0);function A7(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function F7(t){if(Rm===!1)return 0;if(is("color=16m")||is("color=full")||is("color=truecolor"))return 3;if(is("color=256"))return 2;if(t&&!t.isTTY&&Rm!==!0)return 0;let e=Rm?1:0;if(process.platform==="win32"){let n=L7.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in $r)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(n=>n in $r)||$r.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in $r)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test($r.TEAMCITY_VERSION)?1:0;if($r.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in $r){let n=parseInt(($r.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch($r.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test($r.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test($r.TERM)||"COLORTERM"in $r?1:($r.TERM==="dumb",e)}function Q0(t){let e=F7(t);return A7(e)}S1.exports={supportsColor:Q0,stdout:Q0(process.stdout),stderr:Q0(process.stderr)}});var D1=M((rr,BC)=>{var O7=require("tty"),HC=require("util");rr.init=j7;rr.log=H7;rr.formatArgs=M7;rr.save=B7;rr.load=W7;rr.useColors=U7;rr.destroy=HC.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");rr.colors=[6,2,3,4,5,1];try{let t=x1();t&&(t.stderr||t).level>=2&&(rr.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}rr.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let n=e.substring(6).toLowerCase().replace(/_([a-z])/g,(o,i)=>i.toUpperCase()),r=process.env[e];return/^(yes|on|true|enabled)$/i.test(r)?r=!0:/^(no|off|false|disabled)$/i.test(r)?r=!1:r==="null"?r=null:r=Number(r),t[n]=r,t},{});function U7(){return"colors"in rr.inspectOpts?!!rr.inspectOpts.colors:O7.isatty(process.stderr.fd)}function M7(t){let{namespace:e,useColors:n}=this;if(n){let r=this.color,o="\x1B[3"+(r<8?r:"8;5;"+r),i=`  ${o};1m${e} \x1B[0m`;t[0]=i+t[0].split(`
`).join(`
`+i),t.push(o+"m+"+BC.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=$7()+e+" "+t[0]}function $7(){return rr.inspectOpts.hideDate?"":new Date().toISOString()+" "}function H7(...t){return process.stderr.write(HC.formatWithOptions(rr.inspectOpts,...t)+`
`)}function B7(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function W7(){return process.env.DEBUG}function j7(t){t.inspectOpts={};let e=Object.keys(rr.inspectOpts);for(let n=0;n<e.length;n++)t.inspectOpts[e[n]]=rr.inspectOpts[e[n]]}BC.exports=Z0()(rr);var{formatters:_1}=BC.exports;_1.o=function(t){return this.inspectOpts.colors=this.useColors,HC.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};_1.O=function(t){return this.inspectOpts.colors=this.useColors,HC.inspect(t,this.inspectOpts)}});var WC=M((nwe,eP)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?eP.exports=y1():eP.exports=D1()});var P1=M((rwe,I1)=>{var Og;I1.exports=function(){if(!Og){try{Og=WC()("follow-redirects")}catch{}typeof Og!="function"&&(Og=function(){})}Og.apply(null,arguments)}});var jC=M((owe,dP)=>{var Mg=require("url"),Ug=Mg.URL,V7=require("http"),Y7=require("https"),iP=require("stream").Writable,sP=require("assert"),b1=P1();(function(){var e=typeof process<"u",n=typeof window<"u"&&typeof document<"u",r=mf(Error.captureStackTrace);!e&&(n||!r)&&console.warn("The follow-redirects package should be excluded from browser builds.")})();var aP=!1;try{sP(new Ug(""))}catch(t){aP=t.code==="ERR_INVALID_URL"}var q7=["auth","host","hostname","href","path","pathname","port","protocol","query","search","hash"],cP=["abort","aborted","connect","error","socket","timeout"],lP=Object.create(null);cP.forEach(function(t){lP[t]=function(e,n,r){this._redirectable.emit(t,e,n,r)}});var nP=$g("ERR_INVALID_URL","Invalid URL",TypeError),rP=$g("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),G7=$g("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded",rP),z7=$g("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),K7=$g("ERR_STREAM_WRITE_AFTER_END","write after end"),J7=iP.prototype.destroy||R1;function bo(t,e){iP.call(this),this._sanitizeOptions(t),this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var n=this;this._onNativeResponse=function(r){try{n._processResponse(r)}catch(o){n.emit("error",o instanceof rP?o:new rP({cause:o}))}},this._performRequest()}bo.prototype=Object.create(iP.prototype);bo.prototype.abort=function(){fP(this._currentRequest),this._currentRequest.abort(),this.emit("abort")};bo.prototype.destroy=function(t){return fP(this._currentRequest,t),J7.call(this,t),this};bo.prototype.write=function(t,e,n){if(this._ending)throw new K7;if(!df(t)&&!Q7(t))throw new TypeError("data should be a string, Buffer or Uint8Array");if(mf(e)&&(n=e,e=null),t.length===0){n&&n();return}this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,n)):(this.emit("error",new z7),this.abort())};bo.prototype.end=function(t,e,n){if(mf(t)?(n=t,t=e=null):mf(e)&&(n=e,e=null),!t)this._ended=this._ending=!0,this._currentRequest.end(null,null,n);else{var r=this,o=this._currentRequest;this.write(t,e,function(){r._ended=!0,o.end(null,null,n)}),this._ending=!0}};bo.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)};bo.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)};bo.prototype.setTimeout=function(t,e){var n=this;function r(s){s.setTimeout(t),s.removeListener("timeout",s.destroy),s.addListener("timeout",s.destroy)}function o(s){n._timeout&&clearTimeout(n._timeout),n._timeout=setTimeout(function(){n.emit("timeout"),i()},t),r(s)}function i(){n._timeout&&(clearTimeout(n._timeout),n._timeout=null),n.removeListener("abort",i),n.removeListener("error",i),n.removeListener("response",i),n.removeListener("close",i),e&&n.removeListener("timeout",e),n.socket||n._currentRequest.removeListener("socket",o)}return e&&this.on("timeout",e),this.socket?o(this.socket):this._currentRequest.once("socket",o),this.on("socket",r),this.on("abort",i),this.on("error",i),this.on("response",i),this.on("close",i),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(t){bo.prototype[t]=function(e,n){return this._currentRequest[t](e,n)}});["aborted","connection","socket"].forEach(function(t){Object.defineProperty(bo.prototype,t,{get:function(){return this._currentRequest[t]}})});bo.prototype._sanitizeOptions=function(t){if(t.headers||(t.headers={}),t.host&&(t.hostname||(t.hostname=t.host),delete t.host),!t.pathname&&t.path){var e=t.path.indexOf("?");e<0?t.pathname=t.path:(t.pathname=t.path.substring(0,e),t.search=t.path.substring(e))}};bo.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(!e)throw new TypeError("Unsupported protocol "+t);if(this._options.agents){var n=t.slice(0,-1);this._options.agent=this._options.agents[n]}var r=this._currentRequest=e.request(this._options,this._onNativeResponse);r._redirectable=this;for(var o of cP)r.on(o,lP[o]);if(this._currentUrl=/^\//.test(this._options.path)?Mg.format(this._options):this._options.path,this._isRedirect){var i=0,s=this,a=this._requestBodyBuffers;(function c(l){if(r===s._currentRequest)if(l)s.emit("error",l);else if(i<a.length){var u=a[i++];r.finished||r.write(u.data,u.encoding,c)}else s._ended&&r.end()})()}};bo.prototype._processResponse=function(t){var e=t.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:e});var n=t.headers.location;if(!n||this._options.followRedirects===!1||e<300||e>=400){t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[];return}if(fP(this._currentRequest),t.destroy(),++this._redirectCount>this._options.maxRedirects)throw new G7;var r,o=this._options.beforeRedirect;o&&(r=Object.assign({Host:t.req.getHeader("host")},this._options.headers));var i=this._options.method;((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],tP(/^content-/i,this._options.headers));var s=tP(/^host$/i,this._options.headers),a=uP(this._currentUrl),c=s||a.host,l=/^\w+:/.test(n)?this._currentUrl:Mg.format(Object.assign(a,{host:c})),u=X7(n,l);if(b1("redirecting to",u.href),this._isRedirect=!0,oP(u,this._options),(u.protocol!==a.protocol&&u.protocol!=="https:"||u.host!==c&&!Z7(u.host,c))&&tP(/^(?:(?:proxy-)?authorization|cookie)$/i,this._options.headers),mf(o)){var f={headers:t.headers,statusCode:e},m={url:l,method:i,headers:r};o(this._options,f,m),this._sanitizeOptions(this._options)}this._performRequest()};function T1(t){var e={maxRedirects:21,maxBodyLength:10485760},n={};return Object.keys(t).forEach(function(r){var o=r+":",i=n[o]=t[r],s=e[r]=Object.create(i);function a(l,u,f){return eJ(l)?l=oP(l):df(l)?l=oP(uP(l)):(f=u,u=k1(l),l={protocol:o}),mf(u)&&(f=u,u=null),u=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},l,u),u.nativeProtocols=n,!df(u.host)&&!df(u.hostname)&&(u.hostname="::1"),sP.equal(u.protocol,o,"protocol mismatch"),b1("options",u),new bo(u,f)}function c(l,u,f){var m=s.request(l,u,f);return m.end(),m}Object.defineProperties(s,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),e}function R1(){}function uP(t){var e;if(aP)e=new Ug(t);else if(e=k1(Mg.parse(t)),!df(e.protocol))throw new nP({input:t});return e}function X7(t,e){return aP?new Ug(t,e):uP(Mg.resolve(e,t))}function k1(t){if(/^\[/.test(t.hostname)&&!/^\[[:0-9a-f]+\]$/i.test(t.hostname))throw new nP({input:t.href||t});if(/^\[/.test(t.host)&&!/^\[[:0-9a-f]+\](:\d+)?$/i.test(t.host))throw new nP({input:t.href||t});return t}function oP(t,e){var n=e||{};for(var r of q7)n[r]=t[r];return n.hostname.startsWith("[")&&(n.hostname=n.hostname.slice(1,-1)),n.port!==""&&(n.port=Number(n.port)),n.path=n.search?n.pathname+n.search:n.pathname,n}function tP(t,e){var n;for(var r in e)t.test(r)&&(n=e[r],delete e[r]);return n===null||typeof n>"u"?void 0:String(n).trim()}function $g(t,e,n){function r(o){mf(Error.captureStackTrace)&&Error.captureStackTrace(this,this.constructor),Object.assign(this,o||{}),this.code=t,this.message=this.cause?e+": "+this.cause.message:e}return r.prototype=new(n||Error),Object.defineProperties(r.prototype,{constructor:{value:r,enumerable:!1},name:{value:"Error ["+t+"]",enumerable:!1}}),r}function fP(t,e){for(var n of cP)t.removeListener(n,lP[n]);t.on("error",R1),t.destroy(e)}function Z7(t,e){sP(df(t)&&df(e));var n=t.length-e.length-1;return n>0&&t[n]==="."&&t.endsWith(e)}function df(t){return typeof t=="string"||t instanceof String}function mf(t){return typeof t=="function"}function Q7(t){return typeof t=="object"&&"length"in t}function eJ(t){return Ug&&t instanceof Ug}dP.exports=T1({http:V7,https:Y7});dP.exports.wrap=T1});var km=M((iwe,L1)=>{"use strict";var N1=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);L1.exports=t=>t?Object.keys(t).map(e=>[N1.has(e)?N1.get(e):e,t[e]]).reduce((e,n)=>(e[n[0]]=n[1],e),Object.create(null)):{}});var JC=M(j1=>{"use strict";var A1=typeof process=="object"&&process?process:{stdout:null,stderr:null},tJ=require("events"),F1=require("stream"),nJ=require("string_decoder"),O1=nJ.StringDecoder,Ga=Symbol("EOF"),za=Symbol("maybeEmitEnd"),ll=Symbol("emittedEnd"),VC=Symbol("emittingEnd"),Hg=Symbol("emittedError"),YC=Symbol("closed"),U1=Symbol("read"),qC=Symbol("flush"),M1=Symbol("flushChunk"),To=Symbol("encoding"),Ka=Symbol("decoder"),GC=Symbol("flowing"),Bg=Symbol("paused"),Nm=Symbol("resume"),Cn=Symbol("buffer"),Ys=Symbol("pipes"),or=Symbol("bufferLength"),mP=Symbol("bufferPush"),pP=Symbol("bufferShift"),Er=Symbol("objectMode"),En=Symbol("destroyed"),hP=Symbol("error"),gP=Symbol("emitData"),$1=Symbol("emitEnd"),vP=Symbol("emitEnd2"),Ja=Symbol("async"),wP=Symbol("abort"),zC=Symbol("aborted"),pf=Symbol("signal"),Wg=t=>Promise.resolve().then(t),W1=global._MP_NO_ITERATOR_SYMBOLS_!=="1",H1=W1&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),B1=W1&&Symbol.iterator||Symbol("iterator not implemented"),rJ=t=>t==="end"||t==="finish"||t==="prefinish",oJ=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,iJ=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),KC=class{constructor(e,n,r){this.src=e,this.dest=n,this.opts=r,this.ondrain=()=>e[Nm](),n.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},yP=class extends KC{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,n,r){super(e,n,r),this.proxyErrors=o=>n.emit("error",o),e.on("error",this.proxyErrors)}},CP=class t extends F1{constructor(e){super(),this[GC]=!1,this[Bg]=!1,this[Ys]=[],this[Cn]=[],this[Er]=e&&e.objectMode||!1,this[Er]?this[To]=null:this[To]=e&&e.encoding||null,this[To]==="buffer"&&(this[To]=null),this[Ja]=e&&!!e.async||!1,this[Ka]=this[To]?new O1(this[To]):null,this[Ga]=!1,this[ll]=!1,this[VC]=!1,this[YC]=!1,this[Hg]=null,this.writable=!0,this.readable=!0,this[or]=0,this[En]=!1,e&&e.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Cn]}),e&&e.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[Ys]}),this[pf]=e&&e.signal,this[zC]=!1,this[pf]&&(this[pf].addEventListener("abort",()=>this[wP]()),this[pf].aborted&&this[wP]())}get bufferLength(){return this[or]}get encoding(){return this[To]}set encoding(e){if(this[Er])throw new Error("cannot set encoding in objectMode");if(this[To]&&e!==this[To]&&(this[Ka]&&this[Ka].lastNeed||this[or]))throw new Error("cannot change encoding");this[To]!==e&&(this[Ka]=e?new O1(e):null,this[Cn].length&&(this[Cn]=this[Cn].map(n=>this[Ka].write(n)))),this[To]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Er]}set objectMode(e){this[Er]=this[Er]||!!e}get async(){return this[Ja]}set async(e){this[Ja]=this[Ja]||!!e}[wP](){this[zC]=!0,this.emit("abort",this[pf].reason),this.destroy(this[pf].reason)}get aborted(){return this[zC]}set aborted(e){}write(e,n,r){if(this[zC])return!1;if(this[Ga])throw new Error("write after end");if(this[En])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof n=="function"&&(r=n,n="utf8"),n||(n="utf8");let o=this[Ja]?Wg:i=>i();return!this[Er]&&!Buffer.isBuffer(e)&&(iJ(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):oJ(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[Er]?(this.flowing&&this[or]!==0&&this[qC](!0),this.flowing?this.emit("data",e):this[mP](e),this[or]!==0&&this.emit("readable"),r&&o(r),this.flowing):e.length?(typeof e=="string"&&!(n===this[To]&&!this[Ka].lastNeed)&&(e=Buffer.from(e,n)),Buffer.isBuffer(e)&&this[To]&&(e=this[Ka].write(e)),this.flowing&&this[or]!==0&&this[qC](!0),this.flowing?this.emit("data",e):this[mP](e),this[or]!==0&&this.emit("readable"),r&&o(r),this.flowing):(this[or]!==0&&this.emit("readable"),r&&o(r),this.flowing)}read(e){if(this[En])return null;if(this[or]===0||e===0||e>this[or])return this[za](),null;this[Er]&&(e=null),this[Cn].length>1&&!this[Er]&&(this.encoding?this[Cn]=[this[Cn].join("")]:this[Cn]=[Buffer.concat(this[Cn],this[or])]);let n=this[U1](e||null,this[Cn][0]);return this[za](),n}[U1](e,n){return e===n.length||e===null?this[pP]():(this[Cn][0]=n.slice(e),n=n.slice(0,e),this[or]-=e),this.emit("data",n),!this[Cn].length&&!this[Ga]&&this.emit("drain"),n}end(e,n,r){return typeof e=="function"&&(r=e,e=null),typeof n=="function"&&(r=n,n="utf8"),e&&this.write(e,n),r&&this.once("end",r),this[Ga]=!0,this.writable=!1,(this.flowing||!this[Bg])&&this[za](),this}[Nm](){this[En]||(this[Bg]=!1,this[GC]=!0,this.emit("resume"),this[Cn].length?this[qC]():this[Ga]?this[za]():this.emit("drain"))}resume(){return this[Nm]()}pause(){this[GC]=!1,this[Bg]=!0}get destroyed(){return this[En]}get flowing(){return this[GC]}get paused(){return this[Bg]}[mP](e){this[Er]?this[or]+=1:this[or]+=e.length,this[Cn].push(e)}[pP](){return this[Er]?this[or]-=1:this[or]-=this[Cn][0].length,this[Cn].shift()}[qC](e){do;while(this[M1](this[pP]())&&this[Cn].length);!e&&!this[Cn].length&&!this[Ga]&&this.emit("drain")}[M1](e){return this.emit("data",e),this.flowing}pipe(e,n){if(this[En])return;let r=this[ll];return n=n||{},e===A1.stdout||e===A1.stderr?n.end=!1:n.end=n.end!==!1,n.proxyErrors=!!n.proxyErrors,r?n.end&&e.end():(this[Ys].push(n.proxyErrors?new yP(this,e,n):new KC(this,e,n)),this[Ja]?Wg(()=>this[Nm]()):this[Nm]()),e}unpipe(e){let n=this[Ys].find(r=>r.dest===e);n&&(this[Ys].splice(this[Ys].indexOf(n),1),n.unpipe())}addListener(e,n){return this.on(e,n)}on(e,n){let r=super.on(e,n);return e==="data"&&!this[Ys].length&&!this.flowing?this[Nm]():e==="readable"&&this[or]!==0?super.emit("readable"):rJ(e)&&this[ll]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[Hg]&&(this[Ja]?Wg(()=>n.call(this,this[Hg])):n.call(this,this[Hg])),r}get emittedEnd(){return this[ll]}[za](){!this[VC]&&!this[ll]&&!this[En]&&this[Cn].length===0&&this[Ga]&&(this[VC]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[YC]&&this.emit("close"),this[VC]=!1)}emit(e,n,...r){if(e!=="error"&&e!=="close"&&e!==En&&this[En])return;if(e==="data")return!this[Er]&&!n?!1:this[Ja]?Wg(()=>this[gP](n)):this[gP](n);if(e==="end")return this[$1]();if(e==="close"){if(this[YC]=!0,!this[ll]&&!this[En])return;let i=super.emit("close");return this.removeAllListeners("close"),i}else if(e==="error"){this[Hg]=n,super.emit(hP,n);let i=!this[pf]||this.listeners("error").length?super.emit("error",n):!1;return this[za](),i}else if(e==="resume"){let i=super.emit("resume");return this[za](),i}else if(e==="finish"||e==="prefinish"){let i=super.emit(e);return this.removeAllListeners(e),i}let o=super.emit(e,n,...r);return this[za](),o}[gP](e){for(let r of this[Ys])r.dest.write(e)===!1&&this.pause();let n=super.emit("data",e);return this[za](),n}[$1](){this[ll]||(this[ll]=!0,this.readable=!1,this[Ja]?Wg(()=>this[vP]()):this[vP]())}[vP](){if(this[Ka]){let n=this[Ka].end();if(n){for(let r of this[Ys])r.dest.write(n);super.emit("data",n)}}for(let n of this[Ys])n.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[Er]||(e.dataLength=0);let n=this.promise();return this.on("data",r=>{e.push(r),this[Er]||(e.dataLength+=r.length)}),n.then(()=>e)}concat(){return this[Er]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Er]?Promise.reject(new Error("cannot concat in objectMode")):this[To]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,n)=>{this.on(En,()=>n(new Error("stream destroyed"))),this.on("error",r=>n(r)),this.on("end",()=>e())})}[H1](){let e=!1,n=()=>(this.pause(),e=!0,Promise.resolve({done:!0}));return{next:()=>{if(e)return n();let o=this.read();if(o!==null)return Promise.resolve({done:!1,value:o});if(this[Ga])return n();let i=null,s=null,a=f=>{this.removeListener("data",c),this.removeListener("end",l),this.removeListener(En,u),n(),s(f)},c=f=>{this.removeListener("error",a),this.removeListener("end",l),this.removeListener(En,u),this.pause(),i({value:f,done:!!this[Ga]})},l=()=>{this.removeListener("error",a),this.removeListener("data",c),this.removeListener(En,u),n(),i({done:!0})},u=()=>a(new Error("stream destroyed"));return new Promise((f,m)=>{s=m,i=f,this.once(En,u),this.once("error",a),this.once("end",l),this.once("data",c)})},throw:n,return:n,[H1](){return this}}}[B1](){let e=!1,n=()=>(this.pause(),this.removeListener(hP,n),this.removeListener(En,n),this.removeListener("end",n),e=!0,{done:!0}),r=()=>{if(e)return n();let o=this.read();return o===null?n():{value:o}};return this.once("end",n),this.once(hP,n),this.once(En,n),{next:r,throw:n,return:n,[B1](){return this}}}destroy(e){return this[En]?(e?this.emit("error",e):this.emit(En),this):(this[En]=!0,this[Cn].length=0,this[or]=0,typeof this.close=="function"&&!this[YC]&&this.close(),e?this.emit("error",e):this.emit(En),this)}static isStream(e){return!!e&&(e instanceof t||e instanceof F1||e instanceof tJ&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}};j1.Minipass=CP});var Y1=M((awe,V1)=>{var sJ=require("zlib").constants||{ZLIB_VERNUM:4736};V1.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},sJ))});var tU=M((cwe,eU)=>{"use strict";var q1=typeof process=="object"&&process?process:{stdout:null,stderr:null},aJ=require("events"),G1=require("stream"),z1=require("string_decoder").StringDecoder,Xa=Symbol("EOF"),Za=Symbol("maybeEmitEnd"),ul=Symbol("emittedEnd"),XC=Symbol("emittingEnd"),jg=Symbol("emittedError"),ZC=Symbol("closed"),K1=Symbol("read"),QC=Symbol("flush"),J1=Symbol("flushChunk"),Ro=Symbol("encoding"),Qa=Symbol("decoder"),eE=Symbol("flowing"),Vg=Symbol("paused"),Lm=Symbol("resume"),ir=Symbol("bufferLength"),EP=Symbol("bufferPush"),SP=Symbol("bufferShift"),Hr=Symbol("objectMode"),Br=Symbol("destroyed"),xP=Symbol("emitData"),X1=Symbol("emitEnd"),_P=Symbol("emitEnd2"),ec=Symbol("async"),Yg=t=>Promise.resolve().then(t),Z1=global._MP_NO_ITERATOR_SYMBOLS_!=="1",cJ=Z1&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),lJ=Z1&&Symbol.iterator||Symbol("iterator not implemented"),uJ=t=>t==="end"||t==="finish"||t==="prefinish",fJ=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,dJ=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),tE=class{constructor(e,n,r){this.src=e,this.dest=n,this.opts=r,this.ondrain=()=>e[Lm](),n.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},DP=class extends tE{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,n,r){super(e,n,r),this.proxyErrors=o=>n.emit("error",o),e.on("error",this.proxyErrors)}};eU.exports=class Q1 extends G1{constructor(e){super(),this[eE]=!1,this[Vg]=!1,this.pipes=[],this.buffer=[],this[Hr]=e&&e.objectMode||!1,this[Hr]?this[Ro]=null:this[Ro]=e&&e.encoding||null,this[Ro]==="buffer"&&(this[Ro]=null),this[ec]=e&&!!e.async||!1,this[Qa]=this[Ro]?new z1(this[Ro]):null,this[Xa]=!1,this[ul]=!1,this[XC]=!1,this[ZC]=!1,this[jg]=null,this.writable=!0,this.readable=!0,this[ir]=0,this[Br]=!1}get bufferLength(){return this[ir]}get encoding(){return this[Ro]}set encoding(e){if(this[Hr])throw new Error("cannot set encoding in objectMode");if(this[Ro]&&e!==this[Ro]&&(this[Qa]&&this[Qa].lastNeed||this[ir]))throw new Error("cannot change encoding");this[Ro]!==e&&(this[Qa]=e?new z1(e):null,this.buffer.length&&(this.buffer=this.buffer.map(n=>this[Qa].write(n)))),this[Ro]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Hr]}set objectMode(e){this[Hr]=this[Hr]||!!e}get async(){return this[ec]}set async(e){this[ec]=this[ec]||!!e}write(e,n,r){if(this[Xa])throw new Error("write after end");if(this[Br])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof n=="function"&&(r=n,n="utf8"),n||(n="utf8");let o=this[ec]?Yg:i=>i();return!this[Hr]&&!Buffer.isBuffer(e)&&(dJ(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):fJ(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[Hr]?(this.flowing&&this[ir]!==0&&this[QC](!0),this.flowing?this.emit("data",e):this[EP](e),this[ir]!==0&&this.emit("readable"),r&&o(r),this.flowing):e.length?(typeof e=="string"&&!(n===this[Ro]&&!this[Qa].lastNeed)&&(e=Buffer.from(e,n)),Buffer.isBuffer(e)&&this[Ro]&&(e=this[Qa].write(e)),this.flowing&&this[ir]!==0&&this[QC](!0),this.flowing?this.emit("data",e):this[EP](e),this[ir]!==0&&this.emit("readable"),r&&o(r),this.flowing):(this[ir]!==0&&this.emit("readable"),r&&o(r),this.flowing)}read(e){if(this[Br])return null;if(this[ir]===0||e===0||e>this[ir])return this[Za](),null;this[Hr]&&(e=null),this.buffer.length>1&&!this[Hr]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[ir])]);let n=this[K1](e||null,this.buffer[0]);return this[Za](),n}[K1](e,n){return e===n.length||e===null?this[SP]():(this.buffer[0]=n.slice(e),n=n.slice(0,e),this[ir]-=e),this.emit("data",n),!this.buffer.length&&!this[Xa]&&this.emit("drain"),n}end(e,n,r){return typeof e=="function"&&(r=e,e=null),typeof n=="function"&&(r=n,n="utf8"),e&&this.write(e,n),r&&this.once("end",r),this[Xa]=!0,this.writable=!1,(this.flowing||!this[Vg])&&this[Za](),this}[Lm](){this[Br]||(this[Vg]=!1,this[eE]=!0,this.emit("resume"),this.buffer.length?this[QC]():this[Xa]?this[Za]():this.emit("drain"))}resume(){return this[Lm]()}pause(){this[eE]=!1,this[Vg]=!0}get destroyed(){return this[Br]}get flowing(){return this[eE]}get paused(){return this[Vg]}[EP](e){this[Hr]?this[ir]+=1:this[ir]+=e.length,this.buffer.push(e)}[SP](){return this.buffer.length&&(this[Hr]?this[ir]-=1:this[ir]-=this.buffer[0].length),this.buffer.shift()}[QC](e){do;while(this[J1](this[SP]()));!e&&!this.buffer.length&&!this[Xa]&&this.emit("drain")}[J1](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,n){if(this[Br])return;let r=this[ul];return n=n||{},e===q1.stdout||e===q1.stderr?n.end=!1:n.end=n.end!==!1,n.proxyErrors=!!n.proxyErrors,r?n.end&&e.end():(this.pipes.push(n.proxyErrors?new DP(this,e,n):new tE(this,e,n)),this[ec]?Yg(()=>this[Lm]()):this[Lm]()),e}unpipe(e){let n=this.pipes.find(r=>r.dest===e);n&&(this.pipes.splice(this.pipes.indexOf(n),1),n.unpipe())}addListener(e,n){return this.on(e,n)}on(e,n){let r=super.on(e,n);return e==="data"&&!this.pipes.length&&!this.flowing?this[Lm]():e==="readable"&&this[ir]!==0?super.emit("readable"):uJ(e)&&this[ul]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[jg]&&(this[ec]?Yg(()=>n.call(this,this[jg])):n.call(this,this[jg])),r}get emittedEnd(){return this[ul]}[Za](){!this[XC]&&!this[ul]&&!this[Br]&&this.buffer.length===0&&this[Xa]&&(this[XC]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[ZC]&&this.emit("close"),this[XC]=!1)}emit(e,n,...r){if(e!=="error"&&e!=="close"&&e!==Br&&this[Br])return;if(e==="data")return n?this[ec]?Yg(()=>this[xP](n)):this[xP](n):!1;if(e==="end")return this[X1]();if(e==="close"){if(this[ZC]=!0,!this[ul]&&!this[Br])return;let i=super.emit("close");return this.removeAllListeners("close"),i}else if(e==="error"){this[jg]=n;let i=super.emit("error",n);return this[Za](),i}else if(e==="resume"){let i=super.emit("resume");return this[Za](),i}else if(e==="finish"||e==="prefinish"){let i=super.emit(e);return this.removeAllListeners(e),i}let o=super.emit(e,n,...r);return this[Za](),o}[xP](e){for(let r of this.pipes)r.dest.write(e)===!1&&this.pause();let n=super.emit("data",e);return this[Za](),n}[X1](){this[ul]||(this[ul]=!0,this.readable=!1,this[ec]?Yg(()=>this[_P]()):this[_P]())}[_P](){if(this[Qa]){let n=this[Qa].end();if(n){for(let r of this.pipes)r.dest.write(n);super.emit("data",n)}}for(let n of this.pipes)n.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[Hr]||(e.dataLength=0);let n=this.promise();return this.on("data",r=>{e.push(r),this[Hr]||(e.dataLength+=r.length)}),n.then(()=>e)}concat(){return this[Hr]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Hr]?Promise.reject(new Error("cannot concat in objectMode")):this[Ro]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,n)=>{this.on(Br,()=>n(new Error("stream destroyed"))),this.on("error",r=>n(r)),this.on("end",()=>e())})}[cJ](){return{next:()=>{let n=this.read();if(n!==null)return Promise.resolve({done:!1,value:n});if(this[Xa])return Promise.resolve({done:!0});let r=null,o=null,i=l=>{this.removeListener("data",s),this.removeListener("end",a),o(l)},s=l=>{this.removeListener("error",i),this.removeListener("end",a),this.pause(),r({value:l,done:!!this[Xa]})},a=()=>{this.removeListener("error",i),this.removeListener("data",s),r({done:!0})},c=()=>i(new Error("stream destroyed"));return new Promise((l,u)=>{o=u,r=l,this.once(Br,c),this.once("error",i),this.once("end",a),this.once("data",s)})}}}[lJ](){return{next:()=>{let n=this.read();return{value:n,done:n===null}}}}destroy(e){return this[Br]?(e?this.emit("error",e):this.emit(Br),this):(this[Br]=!0,this.buffer.length=0,this[ir]=0,typeof this.close=="function"&&!this[ZC]&&this.close(),e?this.emit("error",e):this.emit(Br),this)}static isStream(e){return!!e&&(e instanceof Q1||e instanceof G1||e instanceof aJ&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var BP=M(Zo=>{"use strict";var RP=require("assert"),fl=require("buffer").Buffer,oU=require("zlib"),hf=Zo.constants=Y1(),mJ=tU(),nU=fl.concat,gf=Symbol("_superWrite"),Fm=class extends Error{constructor(e){super("zlib: "+e.message),this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},pJ=Symbol("opts"),qg=Symbol("flushFlag"),rU=Symbol("finishFlushFlag"),HP=Symbol("fullFlushFlag"),Tt=Symbol("handle"),nE=Symbol("onError"),Am=Symbol("sawError"),IP=Symbol("level"),PP=Symbol("strategy"),bP=Symbol("ended"),lwe=Symbol("_defaultFullFlush"),rE=class extends mJ{constructor(e,n){if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");super(e),this[Am]=!1,this[bP]=!1,this[pJ]=e,this[qg]=e.flush,this[rU]=e.finishFlush;try{this[Tt]=new oU[n](e)}catch(r){throw new Fm(r)}this[nE]=r=>{this[Am]||(this[Am]=!0,this.close(),this.emit("error",r))},this[Tt].on("error",r=>this[nE](new Fm(r))),this.once("end",()=>this.close)}close(){this[Tt]&&(this[Tt].close(),this[Tt]=null,this.emit("close"))}reset(){if(!this[Am])return RP(this[Tt],"zlib binding closed"),this[Tt].reset()}flush(e){this.ended||(typeof e!="number"&&(e=this[HP]),this.write(Object.assign(fl.alloc(0),{[qg]:e})))}end(e,n,r){return e&&this.write(e,n),this.flush(this[rU]),this[bP]=!0,super.end(null,null,r)}get ended(){return this[bP]}write(e,n,r){if(typeof n=="function"&&(r=n,n="utf8"),typeof e=="string"&&(e=fl.from(e,n)),this[Am])return;RP(this[Tt],"zlib binding closed");let o=this[Tt]._handle,i=o.close;o.close=()=>{};let s=this[Tt].close;this[Tt].close=()=>{},fl.concat=l=>l;let a;try{let l=typeof e[qg]=="number"?e[qg]:this[qg];a=this[Tt]._processChunk(e,l),fl.concat=nU}catch(l){fl.concat=nU,this[nE](new Fm(l))}finally{this[Tt]&&(this[Tt]._handle=o,o.close=i,this[Tt].close=s,this[Tt].removeAllListeners("error"))}this[Tt]&&this[Tt].on("error",l=>this[nE](new Fm(l)));let c;if(a)if(Array.isArray(a)&&a.length>0){c=this[gf](fl.from(a[0]));for(let l=1;l<a.length;l++)c=this[gf](a[l])}else c=this[gf](fl.from(a));return r&&r(),c}[gf](e){return super.write(e)}},tc=class extends rE{constructor(e,n){e=e||{},e.flush=e.flush||hf.Z_NO_FLUSH,e.finishFlush=e.finishFlush||hf.Z_FINISH,super(e,n),this[HP]=hf.Z_FULL_FLUSH,this[IP]=e.level,this[PP]=e.strategy}params(e,n){if(!this[Am]){if(!this[Tt])throw new Error("cannot switch params when binding is closed");if(!this[Tt].params)throw new Error("not supported in this implementation");if(this[IP]!==e||this[PP]!==n){this.flush(hf.Z_SYNC_FLUSH),RP(this[Tt],"zlib binding closed");let r=this[Tt].flush;this[Tt].flush=(o,i)=>{this.flush(o),i()};try{this[Tt].params(e,n)}finally{this[Tt].flush=r}this[Tt]&&(this[IP]=e,this[PP]=n)}}}},kP=class extends tc{constructor(e){super(e,"Deflate")}},NP=class extends tc{constructor(e){super(e,"Inflate")}},TP=Symbol("_portable"),LP=class extends tc{constructor(e){super(e,"Gzip"),this[TP]=e&&!!e.portable}[gf](e){return this[TP]?(this[TP]=!1,e[9]=255,super[gf](e)):super[gf](e)}},AP=class extends tc{constructor(e){super(e,"Gunzip")}},FP=class extends tc{constructor(e){super(e,"DeflateRaw")}},OP=class extends tc{constructor(e){super(e,"InflateRaw")}},UP=class extends tc{constructor(e){super(e,"Unzip")}},oE=class extends rE{constructor(e,n){e=e||{},e.flush=e.flush||hf.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||hf.BROTLI_OPERATION_FINISH,super(e,n),this[HP]=hf.BROTLI_OPERATION_FLUSH}},MP=class extends oE{constructor(e){super(e,"BrotliCompress")}},$P=class extends oE{constructor(e){super(e,"BrotliDecompress")}};Zo.Deflate=kP;Zo.Inflate=NP;Zo.Gzip=LP;Zo.Gunzip=AP;Zo.DeflateRaw=FP;Zo.InflateRaw=OP;Zo.Unzip=UP;typeof oU.BrotliCompress=="function"?(Zo.BrotliCompress=MP,Zo.BrotliDecompress=$P):Zo.BrotliCompress=Zo.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var Om=M((dwe,iU)=>{var hJ=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;iU.exports=hJ!=="win32"?t=>t:t=>t&&t.replace(/\\/g,"/")});var iE=M((pwe,sU)=>{"use strict";var{Minipass:gJ}=JC(),WP=Om(),jP=Symbol("slurp");sU.exports=class extends gJ{constructor(e,n,r){switch(super(),this.pause(),this.extended=n,this.globalExtended=r,this.header=e,this.startBlockSize=512*Math.ceil(e.size/512),this.blockRemain=this.startBlockSize,this.remain=e.size,this.type=e.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=WP(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=e.size,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=WP(e.linkpath),this.uname=e.uname,this.gname=e.gname,n&&this[jP](n),r&&this[jP](r,!0)}write(e){let n=e.length;if(n>this.blockRemain)throw new Error("writing more to entry than is appropriate");let r=this.remain,o=this.blockRemain;return this.remain=Math.max(0,r-n),this.blockRemain=Math.max(0,o-n),this.ignore?!0:r>=n?super.write(e):super.write(e.slice(0,r))}[jP](e,n){for(let r in e)e[r]!==null&&e[r]!==void 0&&!(n&&r==="path")&&(this[r]=r==="path"||r==="linkpath"?WP(e[r]):e[r])}}});var VP=M(sE=>{"use strict";sE.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);sE.code=new Map(Array.from(sE.name).map(t=>[t[1],t[0]]))});var uU=M((gwe,lU)=>{"use strict";var vJ=(t,e)=>{if(Number.isSafeInteger(t))t<0?yJ(t,e):wJ(t,e);else throw Error("cannot encode number outside of javascript safe integer range");return e},wJ=(t,e)=>{e[0]=128;for(var n=e.length;n>1;n--)e[n-1]=t&255,t=Math.floor(t/256)},yJ=(t,e)=>{e[0]=255;var n=!1;t=t*-1;for(var r=e.length;r>1;r--){var o=t&255;t=Math.floor(t/256),n?e[r-1]=aU(o):o===0?e[r-1]=0:(n=!0,e[r-1]=cU(o))}},CJ=t=>{let e=t[0],n=e===128?SJ(t.slice(1,t.length)):e===255?EJ(t):null;if(n===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(n))throw Error("parsed number outside of javascript safe integer range");return n},EJ=t=>{for(var e=t.length,n=0,r=!1,o=e-1;o>-1;o--){var i=t[o],s;r?s=aU(i):i===0?s=i:(r=!0,s=cU(i)),s!==0&&(n-=s*Math.pow(256,e-o-1))}return n},SJ=t=>{for(var e=t.length,n=0,r=e-1;r>-1;r--){var o=t[r];o!==0&&(n+=o*Math.pow(256,e-r-1))}return n},aU=t=>(255^t)&255,cU=t=>(255^t)+1&255;lU.exports={encode:vJ,parse:CJ}});var Mm=M((vwe,dU)=>{"use strict";var YP=VP(),Um=require("path").posix,fU=uU(),qP=Symbol("slurp"),Qo=Symbol("type"),KP=class{constructor(e,n,r,o){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[Qo]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(e)?this.decode(e,n||0,r,o):e&&this.set(e)}decode(e,n,r,o){if(n||(n=0),!e||!(e.length>=n+512))throw new Error("need 512 bytes for header");if(this.path=vf(e,n,100),this.mode=dl(e,n+100,8),this.uid=dl(e,n+108,8),this.gid=dl(e,n+116,8),this.size=dl(e,n+124,12),this.mtime=GP(e,n+136,12),this.cksum=dl(e,n+148,12),this[qP](r),this[qP](o,!0),this[Qo]=vf(e,n+156,1),this[Qo]===""&&(this[Qo]="0"),this[Qo]==="0"&&this.path.slice(-1)==="/"&&(this[Qo]="5"),this[Qo]==="5"&&(this.size=0),this.linkpath=vf(e,n+157,100),e.slice(n+257,n+265).toString()==="ustar\x0000")if(this.uname=vf(e,n+265,32),this.gname=vf(e,n+297,32),this.devmaj=dl(e,n+329,8),this.devmin=dl(e,n+337,8),e[n+475]!==0){let s=vf(e,n+345,155);this.path=s+"/"+this.path}else{let s=vf(e,n+345,130);s&&(this.path=s+"/"+this.path),this.atime=GP(e,n+476,12),this.ctime=GP(e,n+488,12)}let i=256;for(let s=n;s<n+148;s++)i+=e[s];for(let s=n+156;s<n+512;s++)i+=e[s];this.cksumValid=i===this.cksum,this.cksum===null&&i===256&&(this.nullBlock=!0)}[qP](e,n){for(let r in e)e[r]!==null&&e[r]!==void 0&&!(n&&r==="path")&&(this[r]=e[r])}encode(e,n){if(e||(e=this.block=Buffer.alloc(512),n=0),n||(n=0),!(e.length>=n+512))throw new Error("need 512 bytes for header");let r=this.ctime||this.atime?130:155,o=xJ(this.path||"",r),i=o[0],s=o[1];this.needPax=o[2],this.needPax=wf(e,n,100,i)||this.needPax,this.needPax=ml(e,n+100,8,this.mode)||this.needPax,this.needPax=ml(e,n+108,8,this.uid)||this.needPax,this.needPax=ml(e,n+116,8,this.gid)||this.needPax,this.needPax=ml(e,n+124,12,this.size)||this.needPax,this.needPax=zP(e,n+136,12,this.mtime)||this.needPax,e[n+156]=this[Qo].charCodeAt(0),this.needPax=wf(e,n+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",n+257,8),this.needPax=wf(e,n+265,32,this.uname)||this.needPax,this.needPax=wf(e,n+297,32,this.gname)||this.needPax,this.needPax=ml(e,n+329,8,this.devmaj)||this.needPax,this.needPax=ml(e,n+337,8,this.devmin)||this.needPax,this.needPax=wf(e,n+345,r,s)||this.needPax,e[n+475]!==0?this.needPax=wf(e,n+345,155,s)||this.needPax:(this.needPax=wf(e,n+345,130,s)||this.needPax,this.needPax=zP(e,n+476,12,this.atime)||this.needPax,this.needPax=zP(e,n+488,12,this.ctime)||this.needPax);let a=256;for(let c=n;c<n+148;c++)a+=e[c];for(let c=n+156;c<n+512;c++)a+=e[c];return this.cksum=a,ml(e,n+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(e){for(let n in e)e[n]!==null&&e[n]!==void 0&&(this[n]=e[n])}get type(){return YP.name.get(this[Qo])||this[Qo]}get typeKey(){return this[Qo]}set type(e){YP.code.has(e)?this[Qo]=YP.code.get(e):this[Qo]=e}},xJ=(t,e)=>{let r=t,o="",i,s=Um.parse(t).root||".";if(Buffer.byteLength(r)<100)i=[r,o,!1];else{o=Um.dirname(r),r=Um.basename(r);do Buffer.byteLength(r)<=100&&Buffer.byteLength(o)<=e?i=[r,o,!1]:Buffer.byteLength(r)>100&&Buffer.byteLength(o)<=e?i=[r.slice(0,99),o,!0]:(r=Um.join(Um.basename(o),r),o=Um.dirname(o));while(o!==s&&!i);i||(i=[t.slice(0,99),"",!0])}return i},vf=(t,e,n)=>t.slice(e,e+n).toString("utf8").replace(/\0.*/,""),GP=(t,e,n)=>_J(dl(t,e,n)),_J=t=>t===null?null:new Date(t*1e3),dl=(t,e,n)=>t[e]&128?fU.parse(t.slice(e,e+n)):IJ(t,e,n),DJ=t=>isNaN(t)?null:t,IJ=(t,e,n)=>DJ(parseInt(t.slice(e,e+n).toString("utf8").replace(/\0.*$/,"").trim(),8)),PJ={12:8589934591,8:2097151},ml=(t,e,n,r)=>r===null?!1:r>PJ[n]||r<0?(fU.encode(r,t.slice(e,e+n)),!0):(bJ(t,e,n,r),!1),bJ=(t,e,n,r)=>t.write(TJ(r,n),e,n,"ascii"),TJ=(t,e)=>RJ(Math.floor(t).toString(8),e),RJ=(t,e)=>(t.length===e-1?t:new Array(e-t.length-1).join("0")+t+" ")+"\0",zP=(t,e,n,r)=>r===null?!1:ml(t,e,n,r.getTime()/1e3),kJ=new Array(156).join("\0"),wf=(t,e,n,r)=>r===null?!1:(t.write(r+kJ,e,n,"utf8"),r.length!==Buffer.byteLength(r)||r.length>n);dU.exports=KP});var aE=M((wwe,mU)=>{"use strict";var NJ=Mm(),LJ=require("path"),Gg=class{constructor(e,n){this.atime=e.atime||null,this.charset=e.charset||null,this.comment=e.comment||null,this.ctime=e.ctime||null,this.gid=e.gid||null,this.gname=e.gname||null,this.linkpath=e.linkpath||null,this.mtime=e.mtime||null,this.path=e.path||null,this.size=e.size||null,this.uid=e.uid||null,this.uname=e.uname||null,this.dev=e.dev||null,this.ino=e.ino||null,this.nlink=e.nlink||null,this.global=n||!1}encode(){let e=this.encodeBody();if(e==="")return null;let n=Buffer.byteLength(e),r=512*Math.ceil(1+n/512),o=Buffer.allocUnsafe(r);for(let i=0;i<512;i++)o[i]=0;new NJ({path:("PaxHeader/"+LJ.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:n,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(o),o.write(e,512,n,"utf8");for(let i=n+512;i<o.length;i++)o[i]=0;return o}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===null||this[e]===void 0)return"";let n=this[e]instanceof Date?this[e].getTime()/1e3:this[e],r=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+n+`
`,o=Buffer.byteLength(r),i=Math.floor(Math.log(o)/Math.log(10))+1;return o+i>=Math.pow(10,i)&&(i+=1),i+o+r}};Gg.parse=(t,e,n)=>new Gg(AJ(FJ(t),e),n);var AJ=(t,e)=>e?Object.keys(t).reduce((n,r)=>(n[r]=t[r],n),e):t,FJ=t=>t.replace(/\n$/,"").split(`
`).reduce(OJ,Object.create(null)),OJ=(t,e)=>{let n=parseInt(e,10);if(n!==Buffer.byteLength(e)+1)return t;e=e.slice((n+" ").length);let r=e.split("="),o=r.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!o)return t;let i=r.join("=");return t[o]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(o)?new Date(i*1e3):/^[0-9]+$/.test(i)?+i:i,t};mU.exports=Gg});var $m=M((ywe,pU)=>{pU.exports=t=>{let e=t.length-1,n=-1;for(;e>-1&&t.charAt(e)==="/";)n=e,e--;return n===-1?t:t.slice(0,n)}});var cE=M((Cwe,hU)=>{"use strict";hU.exports=t=>class extends t{warn(e,n,r={}){this.file&&(r.file=this.file),this.cwd&&(r.cwd=this.cwd),r.code=n instanceof Error&&n.code||e,r.tarCode=e,!this.strict&&r.recoverable!==!1?(n instanceof Error&&(r=Object.assign(n,r),n=n.message),this.emit("warn",r.tarCode,n,r)):n instanceof Error?this.emit("error",Object.assign(n,r)):this.emit("error",Object.assign(new Error(`${e}: ${n}`),r))}}});var XP=M((Swe,gU)=>{"use strict";var lE=["|","<",">","?",":"],JP=lE.map(t=>String.fromCharCode(61440+t.charCodeAt(0))),UJ=new Map(lE.map((t,e)=>[t,JP[e]])),MJ=new Map(JP.map((t,e)=>[t,lE[e]]));gU.exports={encode:t=>lE.reduce((e,n)=>e.split(n).join(UJ.get(n)),t),decode:t=>JP.reduce((e,n)=>e.split(n).join(MJ.get(n)),t)}});var ZP=M((xwe,wU)=>{var{isAbsolute:$J,parse:vU}=require("path").win32;wU.exports=t=>{let e="",n=vU(t);for(;$J(t)||n.root;){let r=t.charAt(0)==="/"&&t.slice(0,4)!=="//?/"?"/":n.root;t=t.slice(r.length),e+=r,n=vU(t)}return[e,t]}});var CU=M((_we,yU)=>{"use strict";yU.exports=(t,e,n)=>(t&=4095,n&&(t=(t|384)&-19),e&&(t&256&&(t|=64),t&32&&(t|=8),t&4&&(t|=1)),t)});var lb=M((Pwe,AU)=>{"use strict";var{Minipass:PU}=JC(),bU=aE(),TU=Mm(),Gs=require("fs"),EU=require("path"),qs=Om(),HJ=$m(),RU=(t,e)=>e?(t=qs(t).replace(/^\.(\/|$)/,""),HJ(e)+"/"+t):qs(t),BJ=16*1024*1024,SU=Symbol("process"),xU=Symbol("file"),_U=Symbol("directory"),eb=Symbol("symlink"),DU=Symbol("hardlink"),zg=Symbol("header"),uE=Symbol("read"),tb=Symbol("lstat"),fE=Symbol("onlstat"),nb=Symbol("onread"),rb=Symbol("onreadlink"),ob=Symbol("openfile"),ib=Symbol("onopenfile"),pl=Symbol("close"),dE=Symbol("mode"),sb=Symbol("awaitDrain"),QP=Symbol("ondrain"),zs=Symbol("prefix"),IU=Symbol("hadError"),kU=cE(),WJ=XP(),NU=ZP(),LU=CU(),mE=kU(class extends PU{constructor(e,n){if(n=n||{},super(n),typeof e!="string")throw new TypeError("path is required");this.path=qs(e),this.portable=!!n.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=n.maxReadSize||BJ,this.linkCache=n.linkCache||new Map,this.statCache=n.statCache||new Map,this.preservePaths=!!n.preservePaths,this.cwd=qs(n.cwd||process.cwd()),this.strict=!!n.strict,this.noPax=!!n.noPax,this.noMtime=!!n.noMtime,this.mtime=n.mtime||null,this.prefix=n.prefix?qs(n.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof n.onwarn=="function"&&this.on("warn",n.onwarn);let r=!1;if(!this.preservePaths){let[o,i]=NU(this.path);o&&(this.path=i,r=o)}this.win32=!!n.win32||process.platform==="win32",this.win32&&(this.path=WJ.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=qs(n.absolute||EU.resolve(this.cwd,e)),this.path===""&&(this.path="./"),r&&this.warn("TAR_ENTRY_INFO",`stripping ${r} from absolute path`,{entry:this,path:r+this.path}),this.statCache.has(this.absolute)?this[fE](this.statCache.get(this.absolute)):this[tb]()}emit(e,...n){return e==="error"&&(this[IU]=!0),super.emit(e,...n)}[tb](){Gs.lstat(this.absolute,(e,n)=>{if(e)return this.emit("error",e);this[fE](n)})}[fE](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=VJ(e),this.emit("stat",e),this[SU]()}[SU](){switch(this.type){case"File":return this[xU]();case"Directory":return this[_U]();case"SymbolicLink":return this[eb]();default:return this.end()}}[dE](e){return LU(e,this.type==="Directory",this.portable)}[zs](e){return RU(e,this.prefix)}[zg](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new TU({path:this[zs](this.path),linkpath:this.type==="Link"?this[zs](this.linkpath):this.linkpath,mode:this[dE](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new bU({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[zs](this.path),linkpath:this.type==="Link"?this[zs](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[_U](){this.path.slice(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[zg](),this.end()}[eb](){Gs.readlink(this.absolute,(e,n)=>{if(e)return this.emit("error",e);this[rb](n)})}[rb](e){this.linkpath=qs(e),this[zg](),this.end()}[DU](e){this.type="Link",this.linkpath=qs(EU.relative(this.cwd,e)),this.stat.size=0,this[zg](),this.end()}[xU](){if(this.stat.nlink>1){let e=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(e)){let n=this.linkCache.get(e);if(n.indexOf(this.cwd)===0)return this[DU](n)}this.linkCache.set(e,this.absolute)}if(this[zg](),this.stat.size===0)return this.end();this[ob]()}[ob](){Gs.open(this.absolute,"r",(e,n)=>{if(e)return this.emit("error",e);this[ib](n)})}[ib](e){if(this.fd=e,this[IU])return this[pl]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let n=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(n),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[uE]()}[uE](){let{fd:e,buf:n,offset:r,length:o,pos:i}=this;Gs.read(e,n,r,o,i,(s,a)=>{if(s)return this[pl](()=>this.emit("error",s));this[nb](a)})}[pl](e){Gs.close(this.fd,e)}[nb](e){if(e<=0&&this.remain>0){let o=new Error("encountered unexpected EOF");return o.path=this.absolute,o.syscall="read",o.code="EOF",this[pl](()=>this.emit("error",o))}if(e>this.remain){let o=new Error("did not encounter expected EOF");return o.path=this.absolute,o.syscall="read",o.code="EOF",this[pl](()=>this.emit("error",o))}if(e===this.remain)for(let o=e;o<this.length&&e<this.blockRemain;o++)this.buf[o+this.offset]=0,e++,this.remain++;let n=this.offset===0&&e===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+e);this.write(n)?this[QP]():this[sb](()=>this[QP]())}[sb](e){this.once("drain",e)}write(e){if(this.blockRemain<e.length){let n=new Error("writing more data than expected");return n.path=this.absolute,this.emit("error",n)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e)}[QP](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[pl](e=>e?this.emit("error",e):this.end());this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[uE]()}}),ab=class extends mE{[tb](){this[fE](Gs.lstatSync(this.absolute))}[eb](){this[rb](Gs.readlinkSync(this.absolute))}[ob](){this[ib](Gs.openSync(this.absolute,"r"))}[uE](){let e=!0;try{let{fd:n,buf:r,offset:o,length:i,pos:s}=this,a=Gs.readSync(n,r,o,i,s);this[nb](a),e=!1}finally{if(e)try{this[pl](()=>{})}catch{}}}[sb](e){e()}[pl](e){Gs.closeSync(this.fd),e()}},jJ=kU(class extends PU{constructor(e,n){n=n||{},super(n),this.preservePaths=!!n.preservePaths,this.portable=!!n.portable,this.strict=!!n.strict,this.noPax=!!n.noPax,this.noMtime=!!n.noMtime,this.readEntry=e,this.type=e.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=n.prefix||null,this.path=qs(e.path),this.mode=this[dE](e.mode),this.uid=this.portable?null:e.uid,this.gid=this.portable?null:e.gid,this.uname=this.portable?null:e.uname,this.gname=this.portable?null:e.gname,this.size=e.size,this.mtime=this.noMtime?null:n.mtime||e.mtime,this.atime=this.portable?null:e.atime,this.ctime=this.portable?null:e.ctime,this.linkpath=qs(e.linkpath),typeof n.onwarn=="function"&&this.on("warn",n.onwarn);let r=!1;if(!this.preservePaths){let[o,i]=NU(this.path);o&&(this.path=i,r=o)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.header=new TU({path:this[zs](this.path),linkpath:this.type==="Link"?this[zs](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),r&&this.warn("TAR_ENTRY_INFO",`stripping ${r} from absolute path`,{entry:this,path:r+this.path}),this.header.encode()&&!this.noPax&&super.write(new bU({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[zs](this.path),linkpath:this.type==="Link"?this[zs](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),e.pipe(this)}[zs](e){return RU(e,this.prefix)}[dE](e){return LU(e,this.type==="Directory",this.portable)}write(e){let n=e.length;if(n>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=n,super.write(e)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});mE.Sync=ab;mE.Tar=jJ;var VJ=t=>t.isFile()?"File":t.isDirectory()?"Directory":t.isSymbolicLink()?"SymbolicLink":"Unsupported";AU.exports=mE});var OU=M((bwe,FU)=>{"use strict";FU.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var ub=M((Twe,UU)=>{"use strict";UU.exports=ft;ft.Node=yf;ft.create=ft;function ft(t){var e=this;if(e instanceof ft||(e=new ft),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(o){e.push(o)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)e.push(arguments[n]);return e}ft.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,e};ft.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};ft.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};ft.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)qJ(this,arguments[t]);return this.length};ft.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)GJ(this,arguments[t]);return this.length};ft.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};ft.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};ft.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,r=0;n!==null;r++)t.call(e,n.value,r,this),n=n.next};ft.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,r=this.length-1;n!==null;r--)t.call(e,n.value,r,this),n=n.prev};ft.prototype.get=function(t){for(var e=0,n=this.head;n!==null&&e<t;e++)n=n.next;if(e===t&&n!==null)return n.value};ft.prototype.getReverse=function(t){for(var e=0,n=this.tail;n!==null&&e<t;e++)n=n.prev;if(e===t&&n!==null)return n.value};ft.prototype.map=function(t,e){e=e||this;for(var n=new ft,r=this.head;r!==null;)n.push(t.call(e,r.value,this)),r=r.next;return n};ft.prototype.mapReverse=function(t,e){e=e||this;for(var n=new ft,r=this.tail;r!==null;)n.push(t.call(e,r.value,this)),r=r.prev;return n};ft.prototype.reduce=function(t,e){var n,r=this.head;if(arguments.length>1)n=e;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=0;r!==null;o++)n=t(n,r.value,o),r=r.next;return n};ft.prototype.reduceReverse=function(t,e){var n,r=this.tail;if(arguments.length>1)n=e;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=this.length-1;r!==null;o--)n=t(n,r.value,o),r=r.prev;return n};ft.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;n!==null;e++)t[e]=n.value,n=n.next;return t};ft.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;n!==null;e++)t[e]=n.value,n=n.prev;return t};ft.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new ft;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=0,o=this.head;o!==null&&r<t;r++)o=o.next;for(;o!==null&&r<e;r++,o=o.next)n.push(o.value);return n};ft.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new ft;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=this.length,o=this.tail;o!==null&&r>e;r--)o=o.prev;for(;o!==null&&r>t;r--,o=o.prev)n.push(o.value);return n};ft.prototype.splice=function(t,e,...n){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var r=0,o=this.head;o!==null&&r<t;r++)o=o.next;for(var i=[],r=0;o&&r<e;r++)i.push(o.value),o=this.removeNode(o);o===null&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev);for(var r=0;r<n.length;r++)o=YJ(this,o,n[r]);return i};ft.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=e,this.tail=t,this};function YJ(t,e,n){var r=e===t.head?new yf(n,null,e,t):new yf(n,e,e.next,t);return r.next===null&&(t.tail=r),r.prev===null&&(t.head=r),t.length++,r}function qJ(t,e){t.tail=new yf(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function GJ(t,e){t.head=new yf(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function yf(t,e,n,r){if(!(this instanceof yf))return new yf(t,e,n,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{OU()(ft)}catch{}});var SE=M((kwe,YU)=>{"use strict";var CE=class{constructor(e,n){this.path=e||"./",this.absolute=n,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},{Minipass:zJ}=JC(),MU=BP(),KJ=iE(),yb=lb(),JJ=yb.Sync,XJ=yb.Tar,ZJ=ub(),$U=Buffer.alloc(1024),gE=Symbol("onStat"),pE=Symbol("ended"),Ks=Symbol("queue"),Hm=Symbol("current"),Cf=Symbol("process"),hE=Symbol("processing"),HU=Symbol("processJob"),Js=Symbol("jobs"),fb=Symbol("jobDone"),vE=Symbol("addFSEntry"),BU=Symbol("addTarEntry"),hb=Symbol("stat"),gb=Symbol("readdir"),wE=Symbol("onreaddir"),yE=Symbol("pipe"),WU=Symbol("entry"),db=Symbol("entryOpt"),vb=Symbol("writeEntryClass"),VU=Symbol("write"),mb=Symbol("ondrain"),EE=require("fs"),jU=require("path"),QJ=cE(),pb=Om(),Cb=QJ(class extends zJ{constructor(e){if(super(e),e=e||Object.create(null),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=pb(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this[vb]=yb,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,this.zip=null,e.gzip||e.brotli){if(e.gzip&&e.brotli)throw new TypeError("gzip and brotli are mutually exclusive");e.gzip&&(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new MU.Gzip(e.gzip)),e.brotli&&(typeof e.brotli!="object"&&(e.brotli={}),this.zip=new MU.BrotliCompress(e.brotli)),this.zip.on("data",n=>super.write(n)),this.zip.on("end",n=>super.end()),this.zip.on("drain",n=>this[mb]()),this.on("resume",n=>this.zip.resume())}else this.on("drain",this[mb]);this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,this.filter=typeof e.filter=="function"?e.filter:n=>!0,this[Ks]=new ZJ,this[Js]=0,this.jobs=+e.jobs||4,this[hE]=!1,this[pE]=!1}[VU](e){return super.write(e)}add(e){return this.write(e),this}end(e){return e&&this.write(e),this[pE]=!0,this[Cf](),this}write(e){if(this[pE])throw new Error("write after end");return e instanceof KJ?this[BU](e):this[vE](e),this.flowing}[BU](e){let n=pb(jU.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let r=new CE(e.path,n,!1);r.entry=new XJ(e,this[db](r)),r.entry.on("end",o=>this[fb](r)),this[Js]+=1,this[Ks].push(r)}this[Cf]()}[vE](e){let n=pb(jU.resolve(this.cwd,e));this[Ks].push(new CE(e,n)),this[Cf]()}[hb](e){e.pending=!0,this[Js]+=1;let n=this.follow?"stat":"lstat";EE[n](e.absolute,(r,o)=>{e.pending=!1,this[Js]-=1,r?this.emit("error",r):this[gE](e,o)})}[gE](e,n){this.statCache.set(e.absolute,n),e.stat=n,this.filter(e.path,n)||(e.ignore=!0),this[Cf]()}[gb](e){e.pending=!0,this[Js]+=1,EE.readdir(e.absolute,(n,r)=>{if(e.pending=!1,this[Js]-=1,n)return this.emit("error",n);this[wE](e,r)})}[wE](e,n){this.readdirCache.set(e.absolute,n),e.readdir=n,this[Cf]()}[Cf](){if(!this[hE]){this[hE]=!0;for(let e=this[Ks].head;e!==null&&this[Js]<this.jobs;e=e.next)if(this[HU](e.value),e.value.ignore){let n=e.next;this[Ks].removeNode(e),e.next=n}this[hE]=!1,this[pE]&&!this[Ks].length&&this[Js]===0&&(this.zip?this.zip.end($U):(super.write($U),super.end()))}}get[Hm](){return this[Ks]&&this[Ks].head&&this[Ks].head.value}[fb](e){this[Ks].shift(),this[Js]-=1,this[Cf]()}[HU](e){if(!e.pending){if(e.entry){e===this[Hm]&&!e.piped&&this[yE](e);return}if(e.stat||(this.statCache.has(e.absolute)?this[gE](e,this.statCache.get(e.absolute)):this[hb](e)),!!e.stat&&!e.ignore&&!(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir&&(this.readdirCache.has(e.absolute)?this[wE](e,this.readdirCache.get(e.absolute)):this[gb](e),!e.readdir))){if(e.entry=this[WU](e),!e.entry){e.ignore=!0;return}e===this[Hm]&&!e.piped&&this[yE](e)}}}[db](e){return{onwarn:(n,r,o)=>this.warn(n,r,o),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[WU](e){this[Js]+=1;try{return new this[vb](e.path,this[db](e)).on("end",()=>this[fb](e)).on("error",n=>this.emit("error",n))}catch(n){this.emit("error",n)}}[mb](){this[Hm]&&this[Hm].entry&&this[Hm].entry.resume()}[yE](e){e.piped=!0,e.readdir&&e.readdir.forEach(o=>{let i=e.path,s=i==="./"?"":i.replace(/\/*$/,"/");this[vE](s+o)});let n=e.entry,r=this.zip;r?n.on("data",o=>{r.write(o)||n.pause()}):n.on("data",o=>{super.write(o)||n.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),wb=class extends Cb{constructor(e){super(e),this[vb]=JJ}pause(){}resume(){}[hb](e){let n=this.follow?"statSync":"lstatSync";this[gE](e,EE[n](e.absolute))}[gb](e,n){this[wE](e,EE.readdirSync(e.absolute))}[yE](e){let n=e.entry,r=this.zip;e.readdir&&e.readdir.forEach(o=>{let i=e.path,s=i==="./"?"":i.replace(/\/*$/,"/");this[vE](s+o)}),r?n.on("data",o=>{r.write(o)}):n.on("data",o=>{super[VU](o)})}};Cb.Sync=wb;YU.exports=Cb});var tM=M((Nwe,eM)=>{"use strict";var qU=typeof process=="object"&&process?process:{stdout:null,stderr:null},eX=require("events"),GU=require("stream"),zU=require("string_decoder").StringDecoder,nc=Symbol("EOF"),rc=Symbol("maybeEmitEnd"),hl=Symbol("emittedEnd"),xE=Symbol("emittingEnd"),Kg=Symbol("emittedError"),_E=Symbol("closed"),KU=Symbol("read"),DE=Symbol("flush"),JU=Symbol("flushChunk"),ko=Symbol("encoding"),oc=Symbol("decoder"),IE=Symbol("flowing"),Jg=Symbol("paused"),Bm=Symbol("resume"),sr=Symbol("bufferLength"),Eb=Symbol("bufferPush"),Sb=Symbol("bufferShift"),Wr=Symbol("objectMode"),jr=Symbol("destroyed"),xb=Symbol("emitData"),XU=Symbol("emitEnd"),_b=Symbol("emitEnd2"),ic=Symbol("async"),Xg=t=>Promise.resolve().then(t),ZU=global._MP_NO_ITERATOR_SYMBOLS_!=="1",tX=ZU&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),nX=ZU&&Symbol.iterator||Symbol("iterator not implemented"),rX=t=>t==="end"||t==="finish"||t==="prefinish",oX=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,iX=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),PE=class{constructor(e,n,r){this.src=e,this.dest=n,this.opts=r,this.ondrain=()=>e[Bm](),n.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Db=class extends PE{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,n,r){super(e,n,r),this.proxyErrors=o=>n.emit("error",o),e.on("error",this.proxyErrors)}};eM.exports=class QU extends GU{constructor(e){super(),this[IE]=!1,this[Jg]=!1,this.pipes=[],this.buffer=[],this[Wr]=e&&e.objectMode||!1,this[Wr]?this[ko]=null:this[ko]=e&&e.encoding||null,this[ko]==="buffer"&&(this[ko]=null),this[ic]=e&&!!e.async||!1,this[oc]=this[ko]?new zU(this[ko]):null,this[nc]=!1,this[hl]=!1,this[xE]=!1,this[_E]=!1,this[Kg]=null,this.writable=!0,this.readable=!0,this[sr]=0,this[jr]=!1}get bufferLength(){return this[sr]}get encoding(){return this[ko]}set encoding(e){if(this[Wr])throw new Error("cannot set encoding in objectMode");if(this[ko]&&e!==this[ko]&&(this[oc]&&this[oc].lastNeed||this[sr]))throw new Error("cannot change encoding");this[ko]!==e&&(this[oc]=e?new zU(e):null,this.buffer.length&&(this.buffer=this.buffer.map(n=>this[oc].write(n)))),this[ko]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Wr]}set objectMode(e){this[Wr]=this[Wr]||!!e}get async(){return this[ic]}set async(e){this[ic]=this[ic]||!!e}write(e,n,r){if(this[nc])throw new Error("write after end");if(this[jr])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof n=="function"&&(r=n,n="utf8"),n||(n="utf8");let o=this[ic]?Xg:i=>i();return!this[Wr]&&!Buffer.isBuffer(e)&&(iX(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):oX(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[Wr]?(this.flowing&&this[sr]!==0&&this[DE](!0),this.flowing?this.emit("data",e):this[Eb](e),this[sr]!==0&&this.emit("readable"),r&&o(r),this.flowing):e.length?(typeof e=="string"&&!(n===this[ko]&&!this[oc].lastNeed)&&(e=Buffer.from(e,n)),Buffer.isBuffer(e)&&this[ko]&&(e=this[oc].write(e)),this.flowing&&this[sr]!==0&&this[DE](!0),this.flowing?this.emit("data",e):this[Eb](e),this[sr]!==0&&this.emit("readable"),r&&o(r),this.flowing):(this[sr]!==0&&this.emit("readable"),r&&o(r),this.flowing)}read(e){if(this[jr])return null;if(this[sr]===0||e===0||e>this[sr])return this[rc](),null;this[Wr]&&(e=null),this.buffer.length>1&&!this[Wr]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[sr])]);let n=this[KU](e||null,this.buffer[0]);return this[rc](),n}[KU](e,n){return e===n.length||e===null?this[Sb]():(this.buffer[0]=n.slice(e),n=n.slice(0,e),this[sr]-=e),this.emit("data",n),!this.buffer.length&&!this[nc]&&this.emit("drain"),n}end(e,n,r){return typeof e=="function"&&(r=e,e=null),typeof n=="function"&&(r=n,n="utf8"),e&&this.write(e,n),r&&this.once("end",r),this[nc]=!0,this.writable=!1,(this.flowing||!this[Jg])&&this[rc](),this}[Bm](){this[jr]||(this[Jg]=!1,this[IE]=!0,this.emit("resume"),this.buffer.length?this[DE]():this[nc]?this[rc]():this.emit("drain"))}resume(){return this[Bm]()}pause(){this[IE]=!1,this[Jg]=!0}get destroyed(){return this[jr]}get flowing(){return this[IE]}get paused(){return this[Jg]}[Eb](e){this[Wr]?this[sr]+=1:this[sr]+=e.length,this.buffer.push(e)}[Sb](){return this.buffer.length&&(this[Wr]?this[sr]-=1:this[sr]-=this.buffer[0].length),this.buffer.shift()}[DE](e){do;while(this[JU](this[Sb]()));!e&&!this.buffer.length&&!this[nc]&&this.emit("drain")}[JU](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,n){if(this[jr])return;let r=this[hl];return n=n||{},e===qU.stdout||e===qU.stderr?n.end=!1:n.end=n.end!==!1,n.proxyErrors=!!n.proxyErrors,r?n.end&&e.end():(this.pipes.push(n.proxyErrors?new Db(this,e,n):new PE(this,e,n)),this[ic]?Xg(()=>this[Bm]()):this[Bm]()),e}unpipe(e){let n=this.pipes.find(r=>r.dest===e);n&&(this.pipes.splice(this.pipes.indexOf(n),1),n.unpipe())}addListener(e,n){return this.on(e,n)}on(e,n){let r=super.on(e,n);return e==="data"&&!this.pipes.length&&!this.flowing?this[Bm]():e==="readable"&&this[sr]!==0?super.emit("readable"):rX(e)&&this[hl]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[Kg]&&(this[ic]?Xg(()=>n.call(this,this[Kg])):n.call(this,this[Kg])),r}get emittedEnd(){return this[hl]}[rc](){!this[xE]&&!this[hl]&&!this[jr]&&this.buffer.length===0&&this[nc]&&(this[xE]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[_E]&&this.emit("close"),this[xE]=!1)}emit(e,n,...r){if(e!=="error"&&e!=="close"&&e!==jr&&this[jr])return;if(e==="data")return n?this[ic]?Xg(()=>this[xb](n)):this[xb](n):!1;if(e==="end")return this[XU]();if(e==="close"){if(this[_E]=!0,!this[hl]&&!this[jr])return;let i=super.emit("close");return this.removeAllListeners("close"),i}else if(e==="error"){this[Kg]=n;let i=super.emit("error",n);return this[rc](),i}else if(e==="resume"){let i=super.emit("resume");return this[rc](),i}else if(e==="finish"||e==="prefinish"){let i=super.emit(e);return this.removeAllListeners(e),i}let o=super.emit(e,n,...r);return this[rc](),o}[xb](e){for(let r of this.pipes)r.dest.write(e)===!1&&this.pause();let n=super.emit("data",e);return this[rc](),n}[XU](){this[hl]||(this[hl]=!0,this.readable=!1,this[ic]?Xg(()=>this[_b]()):this[_b]())}[_b](){if(this[oc]){let n=this[oc].end();if(n){for(let r of this.pipes)r.dest.write(n);super.emit("data",n)}}for(let n of this.pipes)n.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[Wr]||(e.dataLength=0);let n=this.promise();return this.on("data",r=>{e.push(r),this[Wr]||(e.dataLength+=r.length)}),n.then(()=>e)}concat(){return this[Wr]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Wr]?Promise.reject(new Error("cannot concat in objectMode")):this[ko]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,n)=>{this.on(jr,()=>n(new Error("stream destroyed"))),this.on("error",r=>n(r)),this.on("end",()=>e())})}[tX](){return{next:()=>{let n=this.read();if(n!==null)return Promise.resolve({done:!1,value:n});if(this[nc])return Promise.resolve({done:!0});let r=null,o=null,i=l=>{this.removeListener("data",s),this.removeListener("end",a),o(l)},s=l=>{this.removeListener("error",i),this.removeListener("end",a),this.pause(),r({value:l,done:!!this[nc]})},a=()=>{this.removeListener("error",i),this.removeListener("data",s),r({done:!0})},c=()=>i(new Error("stream destroyed"));return new Promise((l,u)=>{o=u,r=l,this.once(jr,c),this.once("error",i),this.once("end",a),this.once("data",s)})}}}[nX](){return{next:()=>{let n=this.read();return{value:n,done:n===null}}}}destroy(e){return this[jr]?(e?this.emit("error",e):this.emit(jr),this):(this[jr]=!0,this.buffer.length=0,this[sr]=0,typeof this.close=="function"&&!this[_E]&&this.close(),e?this.emit("error",e):this.emit(jr),this)}static isStream(e){return!!e&&(e instanceof QU||e instanceof GU||e instanceof eX&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var Km=M(Qg=>{"use strict";var sX=tM(),aX=require("events").EventEmitter,No=require("fs"),bb=No.writev;if(!bb){let t=process.binding("fs"),e=t.FSReqWrap||t.FSReqCallback;bb=(n,r,o,i)=>{let s=(c,l)=>i(c,l,r),a=new e;a.oncomplete=s,t.writeBuffers(n,r,o,a)}}var Gm=Symbol("_autoClose"),ss=Symbol("_close"),Zg=Symbol("_ended"),Et=Symbol("_fd"),nM=Symbol("_finished"),vl=Symbol("_flags"),Ib=Symbol("_flush"),Tb=Symbol("_handleChunk"),Rb=Symbol("_makeBuf"),NE=Symbol("_mode"),bE=Symbol("_needDrain"),Ym=Symbol("_onerror"),zm=Symbol("_onopen"),Pb=Symbol("_onread"),jm=Symbol("_onwrite"),wl=Symbol("_open"),sc=Symbol("_path"),Ef=Symbol("_pos"),Xs=Symbol("_queue"),Vm=Symbol("_read"),rM=Symbol("_readSize"),gl=Symbol("_reading"),TE=Symbol("_remain"),oM=Symbol("_size"),RE=Symbol("_write"),Wm=Symbol("_writing"),kE=Symbol("_defaultFlag"),qm=Symbol("_errored"),LE=class extends sX{constructor(e,n){if(n=n||{},super(n),this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[qm]=!1,this[Et]=typeof n.fd=="number"?n.fd:null,this[sc]=e,this[rM]=n.readSize||16*1024*1024,this[gl]=!1,this[oM]=typeof n.size=="number"?n.size:1/0,this[TE]=this[oM],this[Gm]=typeof n.autoClose=="boolean"?n.autoClose:!0,typeof this[Et]=="number"?this[Vm]():this[wl]()}get fd(){return this[Et]}get path(){return this[sc]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[wl](){No.open(this[sc],"r",(e,n)=>this[zm](e,n))}[zm](e,n){e?this[Ym](e):(this[Et]=n,this.emit("open",n),this[Vm]())}[Rb](){return Buffer.allocUnsafe(Math.min(this[rM],this[TE]))}[Vm](){if(!this[gl]){this[gl]=!0;let e=this[Rb]();if(e.length===0)return process.nextTick(()=>this[Pb](null,0,e));No.read(this[Et],e,0,e.length,null,(n,r,o)=>this[Pb](n,r,o))}}[Pb](e,n,r){this[gl]=!1,e?this[Ym](e):this[Tb](n,r)&&this[Vm]()}[ss](){if(this[Gm]&&typeof this[Et]=="number"){let e=this[Et];this[Et]=null,No.close(e,n=>n?this.emit("error",n):this.emit("close"))}}[Ym](e){this[gl]=!0,this[ss](),this.emit("error",e)}[Tb](e,n){let r=!1;return this[TE]-=e,e>0&&(r=super.write(e<n.length?n.slice(0,e):n)),(e===0||this[TE]<=0)&&(r=!1,this[ss](),super.end()),r}emit(e,n){switch(e){case"prefinish":case"finish":break;case"drain":typeof this[Et]=="number"&&this[Vm]();break;case"error":return this[qm]?void 0:(this[qm]=!0,super.emit(e,n));default:return super.emit(e,n)}}},kb=class extends LE{[wl](){let e=!0;try{this[zm](null,No.openSync(this[sc],"r")),e=!1}finally{e&&this[ss]()}}[Vm](){let e=!0;try{if(!this[gl]){this[gl]=!0;do{let n=this[Rb](),r=n.length===0?0:No.readSync(this[Et],n,0,n.length,null);if(!this[Tb](r,n))break}while(!0);this[gl]=!1}e=!1}finally{e&&this[ss]()}}[ss](){if(this[Gm]&&typeof this[Et]=="number"){let e=this[Et];this[Et]=null,No.closeSync(e),this.emit("close")}}},AE=class extends aX{constructor(e,n){n=n||{},super(n),this.readable=!1,this.writable=!0,this[qm]=!1,this[Wm]=!1,this[Zg]=!1,this[bE]=!1,this[Xs]=[],this[sc]=e,this[Et]=typeof n.fd=="number"?n.fd:null,this[NE]=n.mode===void 0?438:n.mode,this[Ef]=typeof n.start=="number"?n.start:null,this[Gm]=typeof n.autoClose=="boolean"?n.autoClose:!0;let r=this[Ef]!==null?"r+":"w";this[kE]=n.flags===void 0,this[vl]=this[kE]?r:n.flags,this[Et]===null&&this[wl]()}emit(e,n){if(e==="error"){if(this[qm])return;this[qm]=!0}return super.emit(e,n)}get fd(){return this[Et]}get path(){return this[sc]}[Ym](e){this[ss](),this[Wm]=!0,this.emit("error",e)}[wl](){No.open(this[sc],this[vl],this[NE],(e,n)=>this[zm](e,n))}[zm](e,n){this[kE]&&this[vl]==="r+"&&e&&e.code==="ENOENT"?(this[vl]="w",this[wl]()):e?this[Ym](e):(this[Et]=n,this.emit("open",n),this[Ib]())}end(e,n){return e&&this.write(e,n),this[Zg]=!0,!this[Wm]&&!this[Xs].length&&typeof this[Et]=="number"&&this[jm](null,0),this}write(e,n){return typeof e=="string"&&(e=Buffer.from(e,n)),this[Zg]?(this.emit("error",new Error("write() after end()")),!1):this[Et]===null||this[Wm]||this[Xs].length?(this[Xs].push(e),this[bE]=!0,!1):(this[Wm]=!0,this[RE](e),!0)}[RE](e){No.write(this[Et],e,0,e.length,this[Ef],(n,r)=>this[jm](n,r))}[jm](e,n){e?this[Ym](e):(this[Ef]!==null&&(this[Ef]+=n),this[Xs].length?this[Ib]():(this[Wm]=!1,this[Zg]&&!this[nM]?(this[nM]=!0,this[ss](),this.emit("finish")):this[bE]&&(this[bE]=!1,this.emit("drain"))))}[Ib](){if(this[Xs].length===0)this[Zg]&&this[jm](null,0);else if(this[Xs].length===1)this[RE](this[Xs].pop());else{let e=this[Xs];this[Xs]=[],bb(this[Et],e,this[Ef],(n,r)=>this[jm](n,r))}}[ss](){if(this[Gm]&&typeof this[Et]=="number"){let e=this[Et];this[Et]=null,No.close(e,n=>n?this.emit("error",n):this.emit("close"))}}},Nb=class extends AE{[wl](){let e;if(this[kE]&&this[vl]==="r+")try{e=No.openSync(this[sc],this[vl],this[NE])}catch(n){if(n.code==="ENOENT")return this[vl]="w",this[wl]();throw n}else e=No.openSync(this[sc],this[vl],this[NE]);this[zm](null,e)}[ss](){if(this[Gm]&&typeof this[Et]=="number"){let e=this[Et];this[Et]=null,No.closeSync(e),this.emit("close")}}[RE](e){let n=!0;try{this[jm](null,No.writeSync(this[Et],e,0,e.length,this[Ef])),n=!1}finally{if(n)try{this[ss]()}catch{}}}};Qg.ReadStream=LE;Qg.ReadStreamSync=kb;Qg.WriteStream=AE;Qg.WriteStreamSync=Nb});var BE=M((Fwe,pM)=>{"use strict";var cX=cE(),iM=Mm(),lX=require("events"),uX=ub(),fX=1024*1024,dX=iE(),sM=aE(),aM=BP(),{nextTick:mX}=require("process"),Lb=Buffer.from([31,139]),Ii=Symbol("state"),Sf=Symbol("writeEntry"),ac=Symbol("readEntry"),Ab=Symbol("nextEntry"),cM=Symbol("processEntry"),Pi=Symbol("extendedHeader"),ev=Symbol("globalExtendedHeader"),yl=Symbol("meta"),lM=Symbol("emitMeta"),Rt=Symbol("buffer"),cc=Symbol("queue"),Cl=Symbol("ended"),uM=Symbol("emittedEnd"),xf=Symbol("emit"),ar=Symbol("unzip"),FE=Symbol("consumeChunk"),OE=Symbol("consumeChunkSub"),Fb=Symbol("consumeBody"),fM=Symbol("consumeMeta"),dM=Symbol("consumeHeader"),UE=Symbol("consuming"),Ob=Symbol("bufferConcat"),Ub=Symbol("maybeEnd"),tv=Symbol("writing"),El=Symbol("aborted"),ME=Symbol("onDone"),_f=Symbol("sawValidEntry"),$E=Symbol("sawNullBlock"),HE=Symbol("sawEOF"),mM=Symbol("closeStream"),pX=t=>!0;pM.exports=cX(class extends lX{constructor(e){e=e||{},super(e),this.file=e.file||"",this[_f]=null,this.on(ME,r=>{(this[Ii]==="begin"||this[_f]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(ME,e.ondone):this.on(ME,r=>{this.emit("prefinish"),this.emit("finish"),this.emit("end")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||fX,this.filter=typeof e.filter=="function"?e.filter:pX;let n=e.file&&(e.file.endsWith(".tar.br")||e.file.endsWith(".tbr"));this.brotli=!e.gzip&&e.brotli!==void 0?e.brotli:n?void 0:!1,this.writable=!0,this.readable=!1,this[cc]=new uX,this[Rt]=null,this[ac]=null,this[Sf]=null,this[Ii]="begin",this[yl]="",this[Pi]=null,this[ev]=null,this[Cl]=!1,this[ar]=null,this[El]=!1,this[$E]=!1,this[HE]=!1,this.on("end",()=>this[mM]()),typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onentry=="function"&&this.on("entry",e.onentry)}[dM](e,n){this[_f]===null&&(this[_f]=!1);let r;try{r=new iM(e,n,this[Pi],this[ev])}catch(o){return this.warn("TAR_ENTRY_INVALID",o)}if(r.nullBlock)this[$E]?(this[HE]=!0,this[Ii]==="begin"&&(this[Ii]="header"),this[xf]("eof")):(this[$E]=!0,this[xf]("nullBlock"));else if(this[$E]=!1,!r.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:r});else if(!r.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:r});else{let o=r.type;if(/^(Symbolic)?Link$/.test(o)&&!r.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:r});else if(!/^(Symbolic)?Link$/.test(o)&&r.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:r});else{let i=this[Sf]=new dX(r,this[Pi],this[ev]);if(!this[_f])if(i.remain){let s=()=>{i.invalid||(this[_f]=!0)};i.on("end",s)}else this[_f]=!0;i.meta?i.size>this.maxMetaEntrySize?(i.ignore=!0,this[xf]("ignoredEntry",i),this[Ii]="ignore",i.resume()):i.size>0&&(this[yl]="",i.on("data",s=>this[yl]+=s),this[Ii]="meta"):(this[Pi]=null,i.ignore=i.ignore||!this.filter(i.path,i),i.ignore?(this[xf]("ignoredEntry",i),this[Ii]=i.remain?"ignore":"header",i.resume()):(i.remain?this[Ii]="body":(this[Ii]="header",i.end()),this[ac]?this[cc].push(i):(this[cc].push(i),this[Ab]())))}}}[mM](){mX(()=>this.emit("close"))}[cM](e){let n=!0;return e?Array.isArray(e)?this.emit.apply(this,e):(this[ac]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",r=>this[Ab]()),n=!1)):(this[ac]=null,n=!1),n}[Ab](){do;while(this[cM](this[cc].shift()));if(!this[cc].length){let e=this[ac];!e||e.flowing||e.size===e.remain?this[tv]||this.emit("drain"):e.once("drain",r=>this.emit("drain"))}}[Fb](e,n){let r=this[Sf],o=r.blockRemain,i=o>=e.length&&n===0?e:e.slice(n,n+o);return r.write(i),r.blockRemain||(this[Ii]="header",this[Sf]=null,r.end()),i.length}[fM](e,n){let r=this[Sf],o=this[Fb](e,n);return this[Sf]||this[lM](r),o}[xf](e,n,r){!this[cc].length&&!this[ac]?this.emit(e,n,r):this[cc].push([e,n,r])}[lM](e){switch(this[xf]("meta",this[yl]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[Pi]=sM.parse(this[yl],this[Pi],!1);break;case"GlobalExtendedHeader":this[ev]=sM.parse(this[yl],this[ev],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[Pi]=this[Pi]||Object.create(null),this[Pi].path=this[yl].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[Pi]=this[Pi]||Object.create(null),this[Pi].linkpath=this[yl].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+e.type)}}abort(e){this[El]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e){if(this[El])return;if((this[ar]===null||this.brotli===void 0&&this[ar]===!1)&&e){if(this[Rt]&&(e=Buffer.concat([this[Rt],e]),this[Rt]=null),e.length<Lb.length)return this[Rt]=e,!0;for(let i=0;this[ar]===null&&i<Lb.length;i++)e[i]!==Lb[i]&&(this[ar]=!1);let o=this.brotli===void 0;if(this[ar]===!1&&o)if(e.length<512)if(this[Cl])this.brotli=!0;else return this[Rt]=e,!0;else try{new iM(e.slice(0,512)),this.brotli=!1}catch{this.brotli=!0}if(this[ar]===null||this[ar]===!1&&this.brotli){let i=this[Cl];this[Cl]=!1,this[ar]=this[ar]===null?new aM.Unzip:new aM.BrotliDecompress,this[ar].on("data",a=>this[FE](a)),this[ar].on("error",a=>this.abort(a)),this[ar].on("end",a=>{this[Cl]=!0,this[FE]()}),this[tv]=!0;let s=this[ar][i?"end":"write"](e);return this[tv]=!1,s}}this[tv]=!0,this[ar]?this[ar].write(e):this[FE](e),this[tv]=!1;let r=this[cc].length?!1:this[ac]?this[ac].flowing:!0;return!r&&!this[cc].length&&this[ac].once("drain",o=>this.emit("drain")),r}[Ob](e){e&&!this[El]&&(this[Rt]=this[Rt]?Buffer.concat([this[Rt],e]):e)}[Ub](){if(this[Cl]&&!this[uM]&&!this[El]&&!this[UE]){this[uM]=!0;let e=this[Sf];if(e&&e.blockRemain){let n=this[Rt]?this[Rt].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${n} available)`,{entry:e}),this[Rt]&&e.write(this[Rt]),e.end()}this[xf](ME)}}[FE](e){if(this[UE])this[Ob](e);else if(!e&&!this[Rt])this[Ub]();else{if(this[UE]=!0,this[Rt]){this[Ob](e);let n=this[Rt];this[Rt]=null,this[OE](n)}else this[OE](e);for(;this[Rt]&&this[Rt].length>=512&&!this[El]&&!this[HE];){let n=this[Rt];this[Rt]=null,this[OE](n)}this[UE]=!1}(!this[Rt]||this[Cl])&&this[Ub]()}[OE](e){let n=0,r=e.length;for(;n+512<=r&&!this[El]&&!this[HE];)switch(this[Ii]){case"begin":case"header":this[dM](e,n),n+=512;break;case"ignore":case"body":n+=this[Fb](e,n);break;case"meta":n+=this[fM](e,n);break;default:throw new Error("invalid state: "+this[Ii])}n<r&&(this[Rt]?this[Rt]=Buffer.concat([e.slice(n),this[Rt]]):this[Rt]=e.slice(n))}end(e){this[El]||(this[ar]?this[ar].end(e):(this[Cl]=!0,this.brotli===void 0&&(e=e||Buffer.alloc(0)),this.write(e)))}})});var WE=M((Owe,wM)=>{"use strict";var hX=km(),gM=BE(),Jm=require("fs"),gX=Km(),hM=require("path"),Mb=$m();wM.exports=(t,e,n)=>{typeof t=="function"?(n=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(n=e,e=null),e?e=Array.from(e):e=[];let r=hX(t);if(r.sync&&typeof n=="function")throw new TypeError("callback not supported for sync tar functions");if(!r.file&&typeof n=="function")throw new TypeError("callback only supported with file option");return e.length&&wX(r,e),r.noResume||vX(r),r.file&&r.sync?yX(r):r.file?CX(r,n):vM(r)};var vX=t=>{let e=t.onentry;t.onentry=e?n=>{e(n),n.resume()}:n=>n.resume()},wX=(t,e)=>{let n=new Map(e.map(i=>[Mb(i),!0])),r=t.filter,o=(i,s)=>{let a=s||hM.parse(i).root||".",c=i===a?!1:n.has(i)?n.get(i):o(hM.dirname(i),a);return n.set(i,c),c};t.filter=r?(i,s)=>r(i,s)&&o(Mb(i)):i=>o(Mb(i))},yX=t=>{let e=vM(t),n=t.file,r=!0,o;try{let i=Jm.statSync(n),s=t.maxReadSize||16*1024*1024;if(i.size<s)e.end(Jm.readFileSync(n));else{let a=0,c=Buffer.allocUnsafe(s);for(o=Jm.openSync(n,"r");a<i.size;){let l=Jm.readSync(o,c,0,s,a);a+=l,e.write(c.slice(0,l))}e.end()}r=!1}finally{if(r&&o)try{Jm.closeSync(o)}catch{}}},CX=(t,e)=>{let n=new gM(t),r=t.maxReadSize||16*1024*1024,o=t.file,i=new Promise((s,a)=>{n.on("error",a),n.on("end",s),Jm.stat(o,(c,l)=>{if(c)a(c);else{let u=new gX.ReadStream(o,{readSize:r,size:l.size});u.on("error",a),u.pipe(n)}})});return e?i.then(e,e):i},vM=t=>new gM(t)});var _M=M((Uwe,xM)=>{"use strict";var EX=km(),jE=SE(),yM=Km(),CM=WE(),EM=require("path");xM.exports=(t,e,n)=>{if(typeof e=="function"&&(n=e),Array.isArray(t)&&(e=t,t={}),!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");e=Array.from(e);let r=EX(t);if(r.sync&&typeof n=="function")throw new TypeError("callback not supported for sync tar functions");if(!r.file&&typeof n=="function")throw new TypeError("callback only supported with file option");return r.file&&r.sync?SX(r,e):r.file?xX(r,e,n):r.sync?_X(r,e):DX(r,e)};var SX=(t,e)=>{let n=new jE.Sync(t),r=new yM.WriteStreamSync(t.file,{mode:t.mode||438});n.pipe(r),SM(n,e)},xX=(t,e,n)=>{let r=new jE(t),o=new yM.WriteStream(t.file,{mode:t.mode||438});r.pipe(o);let i=new Promise((s,a)=>{o.on("error",a),o.on("close",s),r.on("error",a)});return $b(r,e),n?i.then(n,n):i},SM=(t,e)=>{e.forEach(n=>{n.charAt(0)==="@"?CM({file:EM.resolve(t.cwd,n.slice(1)),sync:!0,noResume:!0,onentry:r=>t.add(r)}):t.add(n)}),t.end()},$b=(t,e)=>{for(;e.length;){let n=e.shift();if(n.charAt(0)==="@")return CM({file:EM.resolve(t.cwd,n.slice(1)),noResume:!0,onentry:r=>t.add(r)}).then(r=>$b(t,e));t.add(n)}t.end()},_X=(t,e)=>{let n=new jE.Sync(t);return SM(n,e),n},DX=(t,e)=>{let n=new jE(t);return $b(n,e),n}});var Hb=M((Mwe,kM)=>{"use strict";var IX=km(),DM=SE(),ei=require("fs"),IM=Km(),PM=WE(),bM=require("path"),TM=Mm();kM.exports=(t,e,n)=>{let r=IX(t);if(!r.file)throw new TypeError("file is required");if(r.gzip||r.brotli||r.file.endsWith(".br")||r.file.endsWith(".tbr"))throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),r.sync?PX(r,e):TX(r,e,n)};var PX=(t,e)=>{let n=new DM.Sync(t),r=!0,o,i;try{try{o=ei.openSync(t.file,"r+")}catch(c){if(c.code==="ENOENT")o=ei.openSync(t.file,"w+");else throw c}let s=ei.fstatSync(o),a=Buffer.alloc(512);e:for(i=0;i<s.size;i+=512){for(let u=0,f=0;u<512;u+=f){if(f=ei.readSync(o,a,u,a.length-u,i+u),i===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!f)break e}let c=new TM(a);if(!c.cksumValid)break;let l=512*Math.ceil(c.size/512);if(i+l+512>s.size)break;i+=l,t.mtimeCache&&t.mtimeCache.set(c.path,c.mtime)}r=!1,bX(t,n,i,o,e)}finally{if(r)try{ei.closeSync(o)}catch{}}},bX=(t,e,n,r,o)=>{let i=new IM.WriteStreamSync(t.file,{fd:r,start:n});e.pipe(i),RX(e,o)},TX=(t,e,n)=>{e=Array.from(e);let r=new DM(t),o=(s,a,c)=>{let l=(p,g)=>{p?ei.close(s,h=>c(p)):c(null,g)},u=0;if(a===0)return l(null,0);let f=0,m=Buffer.alloc(512),d=(p,g)=>{if(p)return l(p);if(f+=g,f<512&&g)return ei.read(s,m,f,m.length-f,u+f,d);if(u===0&&m[0]===31&&m[1]===139)return l(new Error("cannot append to compressed archives"));if(f<512)return l(null,u);let h=new TM(m);if(!h.cksumValid)return l(null,u);let v=512*Math.ceil(h.size/512);if(u+v+512>a||(u+=v+512,u>=a))return l(null,u);t.mtimeCache&&t.mtimeCache.set(h.path,h.mtime),f=0,ei.read(s,m,0,512,u,d)};ei.read(s,m,0,512,u,d)},i=new Promise((s,a)=>{r.on("error",a);let c="r+",l=(u,f)=>{if(u&&u.code==="ENOENT"&&c==="r+")return c="w+",ei.open(t.file,c,l);if(u)return a(u);ei.fstat(f,(m,d)=>{if(m)return ei.close(f,()=>a(m));o(f,d.size,(p,g)=>{if(p)return a(p);let h=new IM.WriteStream(t.file,{fd:f,start:g});r.pipe(h),h.on("error",a),h.on("close",s),RM(r,e)})})};ei.open(t.file,c,l)});return n?i.then(n,n):i},RX=(t,e)=>{e.forEach(n=>{n.charAt(0)==="@"?PM({file:bM.resolve(t.cwd,n.slice(1)),sync:!0,noResume:!0,onentry:r=>t.add(r)}):t.add(n)}),t.end()},RM=(t,e)=>{for(;e.length;){let n=e.shift();if(n.charAt(0)==="@")return PM({file:bM.resolve(t.cwd,n.slice(1)),noResume:!0,onentry:r=>t.add(r)}).then(r=>RM(t,e));t.add(n)}t.end()}});var LM=M(($we,NM)=>{"use strict";var kX=km(),NX=Hb();NM.exports=(t,e,n)=>{let r=kX(t);if(!r.file)throw new TypeError("file is required");if(r.gzip||r.brotli||r.file.endsWith(".br")||r.file.endsWith(".tbr"))throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),LX(r),NX(r,e,n)};var LX=t=>{let e=t.filter;t.mtimeCache||(t.mtimeCache=new Map),t.filter=e?(n,r)=>e(n,r)&&!(t.mtimeCache.get(n)>r.mtime):(n,r)=>!(t.mtimeCache.get(n)>r.mtime)}});var OM=M((Hwe,FM)=>{var{promisify:AM}=require("util"),Sl=require("fs"),AX=t=>{if(!t)t={mode:511,fs:Sl};else if(typeof t=="object")t={mode:511,fs:Sl,...t};else if(typeof t=="number")t={mode:t,fs:Sl};else if(typeof t=="string")t={mode:parseInt(t,8),fs:Sl};else throw new TypeError("invalid options argument");return t.mkdir=t.mkdir||t.fs.mkdir||Sl.mkdir,t.mkdirAsync=AM(t.mkdir),t.stat=t.stat||t.fs.stat||Sl.stat,t.statAsync=AM(t.stat),t.statSync=t.statSync||t.fs.statSync||Sl.statSync,t.mkdirSync=t.mkdirSync||t.fs.mkdirSync||Sl.mkdirSync,t};FM.exports=AX});var MM=M((Bwe,UM)=>{var FX=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:OX,parse:UX}=require("path"),MX=t=>{if(/\0/.test(t))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:t,code:"ERR_INVALID_ARG_VALUE"});if(t=OX(t),FX==="win32"){let e=/[*|"<>?:]/,{root:n}=UX(t);if(e.test(t.substr(n.length)))throw Object.assign(new Error("Illegal characters in path."),{path:t,code:"EINVAL"})}return t};UM.exports=MX});var jM=M((Wwe,WM)=>{var{dirname:$M}=require("path"),HM=(t,e,n=void 0)=>n===e?Promise.resolve():t.statAsync(e).then(r=>r.isDirectory()?n:void 0,r=>r.code==="ENOENT"?HM(t,$M(e),e):void 0),BM=(t,e,n=void 0)=>{if(n!==e)try{return t.statSync(e).isDirectory()?n:void 0}catch(r){return r.code==="ENOENT"?BM(t,$M(e),e):void 0}};WM.exports={findMade:HM,findMadeSync:BM}});var jb=M((jwe,YM)=>{var{dirname:VM}=require("path"),Bb=(t,e,n)=>{e.recursive=!1;let r=VM(t);return r===t?e.mkdirAsync(t,e).catch(o=>{if(o.code!=="EISDIR")throw o}):e.mkdirAsync(t,e).then(()=>n||t,o=>{if(o.code==="ENOENT")return Bb(r,e).then(i=>Bb(t,e,i));if(o.code!=="EEXIST"&&o.code!=="EROFS")throw o;return e.statAsync(t).then(i=>{if(i.isDirectory())return n;throw o},()=>{throw o})})},Wb=(t,e,n)=>{let r=VM(t);if(e.recursive=!1,r===t)try{return e.mkdirSync(t,e)}catch(o){if(o.code!=="EISDIR")throw o;return}try{return e.mkdirSync(t,e),n||t}catch(o){if(o.code==="ENOENT")return Wb(t,e,Wb(r,e,n));if(o.code!=="EEXIST"&&o.code!=="EROFS")throw o;try{if(!e.statSync(t).isDirectory())throw o}catch{throw o}}};YM.exports={mkdirpManual:Bb,mkdirpManualSync:Wb}});var zM=M((Vwe,GM)=>{var{dirname:qM}=require("path"),{findMade:$X,findMadeSync:HX}=jM(),{mkdirpManual:BX,mkdirpManualSync:WX}=jb(),jX=(t,e)=>(e.recursive=!0,qM(t)===t?e.mkdirAsync(t,e):$X(e,t).then(r=>e.mkdirAsync(t,e).then(()=>r).catch(o=>{if(o.code==="ENOENT")return BX(t,e);throw o}))),VX=(t,e)=>{if(e.recursive=!0,qM(t)===t)return e.mkdirSync(t,e);let r=HX(e,t);try{return e.mkdirSync(t,e),r}catch(o){if(o.code==="ENOENT")return WX(t,e);throw o}};GM.exports={mkdirpNative:jX,mkdirpNativeSync:VX}});var ZM=M((Ywe,XM)=>{var KM=require("fs"),YX=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,Vb=YX.replace(/^v/,"").split("."),JM=+Vb[0]>10||+Vb[0]==10&&+Vb[1]>=12,qX=JM?t=>t.mkdir===KM.mkdir:()=>!1,GX=JM?t=>t.mkdirSync===KM.mkdirSync:()=>!1;XM.exports={useNative:qX,useNativeSync:GX}});var o$=M((qwe,r$)=>{var Xm=OM(),Zm=MM(),{mkdirpNative:QM,mkdirpNativeSync:e$}=zM(),{mkdirpManual:t$,mkdirpManualSync:n$}=jb(),{useNative:zX,useNativeSync:KX}=ZM(),Qm=(t,e)=>(t=Zm(t),e=Xm(e),zX(e)?QM(t,e):t$(t,e)),JX=(t,e)=>(t=Zm(t),e=Xm(e),KX(e)?e$(t,e):n$(t,e));Qm.sync=JX;Qm.native=(t,e)=>QM(Zm(t),Xm(e));Qm.manual=(t,e)=>t$(Zm(t),Xm(e));Qm.nativeSync=(t,e)=>e$(Zm(t),Xm(e));Qm.manualSync=(t,e)=>n$(Zm(t),Xm(e));r$.exports=Qm});var f$=M((Gwe,u$)=>{"use strict";var bi=require("fs"),Df=require("path"),XX=bi.lchown?"lchown":"chown",ZX=bi.lchownSync?"lchownSync":"chownSync",s$=bi.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),i$=(t,e,n)=>{try{return bi[ZX](t,e,n)}catch(r){if(r.code!=="ENOENT")throw r}},QX=(t,e,n)=>{try{return bi.chownSync(t,e,n)}catch(r){if(r.code!=="ENOENT")throw r}},eZ=s$?(t,e,n,r)=>o=>{!o||o.code!=="EISDIR"?r(o):bi.chown(t,e,n,r)}:(t,e,n,r)=>r,Yb=s$?(t,e,n)=>{try{return i$(t,e,n)}catch(r){if(r.code!=="EISDIR")throw r;QX(t,e,n)}}:(t,e,n)=>i$(t,e,n),tZ=process.version,a$=(t,e,n)=>bi.readdir(t,e,n),nZ=(t,e)=>bi.readdirSync(t,e);/^v4\./.test(tZ)&&(a$=(t,e,n)=>bi.readdir(t,n));var VE=(t,e,n,r)=>{bi[XX](t,e,n,eZ(t,e,n,o=>{r(o&&o.code!=="ENOENT"?o:null)}))},c$=(t,e,n,r,o)=>{if(typeof e=="string")return bi.lstat(Df.resolve(t,e),(i,s)=>{if(i)return o(i.code!=="ENOENT"?i:null);s.name=e,c$(t,s,n,r,o)});if(e.isDirectory())qb(Df.resolve(t,e.name),n,r,i=>{if(i)return o(i);let s=Df.resolve(t,e.name);VE(s,n,r,o)});else{let i=Df.resolve(t,e.name);VE(i,n,r,o)}},qb=(t,e,n,r)=>{a$(t,{withFileTypes:!0},(o,i)=>{if(o){if(o.code==="ENOENT")return r();if(o.code!=="ENOTDIR"&&o.code!=="ENOTSUP")return r(o)}if(o||!i.length)return VE(t,e,n,r);let s=i.length,a=null,c=l=>{if(!a){if(l)return r(a=l);if(--s===0)return VE(t,e,n,r)}};i.forEach(l=>c$(t,l,e,n,c))})},rZ=(t,e,n,r)=>{if(typeof e=="string")try{let o=bi.lstatSync(Df.resolve(t,e));o.name=e,e=o}catch(o){if(o.code==="ENOENT")return;throw o}e.isDirectory()&&l$(Df.resolve(t,e.name),n,r),Yb(Df.resolve(t,e.name),n,r)},l$=(t,e,n)=>{let r;try{r=nZ(t,{withFileTypes:!0})}catch(o){if(o.code==="ENOENT")return;if(o.code==="ENOTDIR"||o.code==="ENOTSUP")return Yb(t,e,n);throw o}return r&&r.length&&r.forEach(o=>rZ(t,o,e,n)),Yb(t,e,n)};u$.exports=qb;qb.sync=l$});var h$=M((zwe,Gb)=>{"use strict";var d$=o$(),Ti=require("fs"),YE=require("path"),m$=f$(),as=Om(),qE=class extends Error{constructor(e,n){super("Cannot extract through symbolic link"),this.path=n,this.symlink=e}get name(){return"SylinkError"}},GE=class extends Error{constructor(e,n){super(n+": Cannot cd into '"+e+"'"),this.path=e,this.code=n}get name(){return"CwdError"}},zE=(t,e)=>t.get(as(e)),nv=(t,e,n)=>t.set(as(e),n),oZ=(t,e)=>{Ti.stat(t,(n,r)=>{(n||!r.isDirectory())&&(n=new GE(t,n&&n.code||"ENOTDIR")),e(n)})};Gb.exports=(t,e,n)=>{t=as(t);let r=e.umask,o=e.mode|448,i=(o&r)!==0,s=e.uid,a=e.gid,c=typeof s=="number"&&typeof a=="number"&&(s!==e.processUid||a!==e.processGid),l=e.preserve,u=e.unlink,f=e.cache,m=as(e.cwd),d=(h,v)=>{h?n(h):(nv(f,t,!0),v&&c?m$(v,s,a,C=>d(C)):i?Ti.chmod(t,o,n):n())};if(f&&zE(f,t)===!0)return d();if(t===m)return oZ(t,d);if(l)return d$(t,{mode:o}).then(h=>d(null,h),d);let g=as(YE.relative(m,t)).split("/");KE(m,g,o,f,u,m,null,d)};var KE=(t,e,n,r,o,i,s,a)=>{if(!e.length)return a(null,s);let c=e.shift(),l=as(YE.resolve(t+"/"+c));if(zE(r,l))return KE(l,e,n,r,o,i,s,a);Ti.mkdir(l,n,p$(l,e,n,r,o,i,s,a))},p$=(t,e,n,r,o,i,s,a)=>c=>{c?Ti.lstat(t,(l,u)=>{if(l)l.path=l.path&&as(l.path),a(l);else if(u.isDirectory())KE(t,e,n,r,o,i,s,a);else if(o)Ti.unlink(t,f=>{if(f)return a(f);Ti.mkdir(t,n,p$(t,e,n,r,o,i,s,a))});else{if(u.isSymbolicLink())return a(new qE(t,t+"/"+e.join("/")));a(c)}}):(s=s||t,KE(t,e,n,r,o,i,s,a))},iZ=t=>{let e=!1,n="ENOTDIR";try{e=Ti.statSync(t).isDirectory()}catch(r){n=r.code}finally{if(!e)throw new GE(t,n)}};Gb.exports.sync=(t,e)=>{t=as(t);let n=e.umask,r=e.mode|448,o=(r&n)!==0,i=e.uid,s=e.gid,a=typeof i=="number"&&typeof s=="number"&&(i!==e.processUid||s!==e.processGid),c=e.preserve,l=e.unlink,u=e.cache,f=as(e.cwd),m=h=>{nv(u,t,!0),h&&a&&m$.sync(h,i,s),o&&Ti.chmodSync(t,r)};if(u&&zE(u,t)===!0)return m();if(t===f)return iZ(f),m();if(c)return m(d$.sync(t,r));let p=as(YE.relative(f,t)).split("/"),g=null;for(let h=p.shift(),v=f;h&&(v+="/"+h);h=p.shift())if(v=as(YE.resolve(v)),!zE(u,v))try{Ti.mkdirSync(v,r),g=g||v,nv(u,v,!0)}catch{let w=Ti.lstatSync(v);if(w.isDirectory()){nv(u,v,!0);continue}else if(l){Ti.unlinkSync(v),Ti.mkdirSync(v,r),g=g||v,nv(u,v,!0);continue}else if(w.isSymbolicLink())return new qE(v,v+"/"+p.join("/"))}return m(g)}});var Kb=M((Kwe,g$)=>{var zb=Object.create(null),{hasOwnProperty:sZ}=Object.prototype;g$.exports=t=>(sZ.call(zb,t)||(zb[t]=t.normalize("NFD")),zb[t])});var C$=M((Jwe,y$)=>{var v$=require("assert"),aZ=Kb(),cZ=$m(),{join:w$}=require("path"),lZ=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,uZ=lZ==="win32";y$.exports=()=>{let t=new Map,e=new Map,n=l=>l.split("/").slice(0,-1).reduce((f,m)=>(f.length&&(m=w$(f[f.length-1],m)),f.push(m||"/"),f),[]),r=new Set,o=l=>{let u=e.get(l);if(!u)throw new Error("function does not have any path reservations");return{paths:u.paths.map(f=>t.get(f)),dirs:[...u.dirs].map(f=>t.get(f))}},i=l=>{let{paths:u,dirs:f}=o(l);return u.every(m=>m[0]===l)&&f.every(m=>m[0]instanceof Set&&m[0].has(l))},s=l=>r.has(l)||!i(l)?!1:(r.add(l),l(()=>a(l)),!0),a=l=>{if(!r.has(l))return!1;let{paths:u,dirs:f}=e.get(l),m=new Set;return u.forEach(d=>{let p=t.get(d);v$.equal(p[0],l),p.length===1?t.delete(d):(p.shift(),typeof p[0]=="function"?m.add(p[0]):p[0].forEach(g=>m.add(g)))}),f.forEach(d=>{let p=t.get(d);v$(p[0]instanceof Set),p[0].size===1&&p.length===1?t.delete(d):p[0].size===1?(p.shift(),m.add(p[0])):p[0].delete(l)}),r.delete(l),m.forEach(d=>s(d)),!0};return{check:i,reserve:(l,u)=>{l=uZ?["win32 parallelization disabled"]:l.map(m=>cZ(w$(aZ(m))).toLowerCase());let f=new Set(l.map(m=>n(m)).reduce((m,d)=>m.concat(d)));return e.set(u,{dirs:f,paths:l}),l.forEach(m=>{let d=t.get(m);d?d.push(u):t.set(m,[u])}),f.forEach(m=>{let d=t.get(m);d?d[d.length-1]instanceof Set?d[d.length-1].add(u):d.push(new Set([u])):t.set(m,[new Set([u])])}),s(u)}}}});var x$=M((Xwe,S$)=>{var fZ=process.env.__FAKE_PLATFORM__||process.platform,dZ=fZ==="win32",mZ=global.__FAKE_TESTING_FS__||require("fs"),{O_CREAT:pZ,O_TRUNC:hZ,O_WRONLY:gZ,UV_FS_O_FILEMAP:E$=0}=mZ.constants,vZ=dZ&&!!E$,wZ=512*1024,yZ=E$|hZ|pZ|gZ;S$.exports=vZ?t=>t<wZ?yZ:"w":()=>"w"});var oT=M((Zwe,U$)=>{"use strict";var CZ=require("assert"),EZ=BE(),dt=require("fs"),SZ=Km(),lc=require("path"),A$=h$(),_$=XP(),xZ=C$(),_Z=ZP(),Ri=Om(),DZ=$m(),IZ=Kb(),D$=Symbol("onEntry"),Zb=Symbol("checkFs"),I$=Symbol("checkFs2"),ZE=Symbol("pruneCache"),Qb=Symbol("isReusable"),ki=Symbol("makeFs"),eT=Symbol("file"),tT=Symbol("directory"),QE=Symbol("link"),P$=Symbol("symlink"),b$=Symbol("hardlink"),T$=Symbol("unsupported"),R$=Symbol("checkPath"),xl=Symbol("mkdir"),Vr=Symbol("onError"),JE=Symbol("pending"),k$=Symbol("pend"),ep=Symbol("unpend"),Jb=Symbol("ended"),Xb=Symbol("maybeClose"),nT=Symbol("skip"),rv=Symbol("doChown"),ov=Symbol("uid"),iv=Symbol("gid"),sv=Symbol("checkedCwd"),F$=require("crypto"),O$=x$(),PZ=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,av=PZ==="win32",bZ=1024,TZ=(t,e)=>{if(!av)return dt.unlink(t,e);let n=t+".DELETE."+F$.randomBytes(16).toString("hex");dt.rename(t,n,r=>{if(r)return e(r);dt.unlink(n,e)})},RZ=t=>{if(!av)return dt.unlinkSync(t);let e=t+".DELETE."+F$.randomBytes(16).toString("hex");dt.renameSync(t,e),dt.unlinkSync(e)},N$=(t,e,n)=>t===t>>>0?t:e===e>>>0?e:n,L$=t=>DZ(Ri(IZ(t))).toLowerCase(),kZ=(t,e)=>{e=L$(e);for(let n of t.keys()){let r=L$(n);(r===e||r.indexOf(e+"/")===0)&&t.delete(n)}},NZ=t=>{for(let e of t.keys())t.delete(e)},cv=class extends EZ{constructor(e){if(e||(e={}),e.ondone=n=>{this[Jb]=!0,this[Xb]()},super(e),this[sv]=!1,this.reservations=xZ(),this.transform=typeof e.transform=="function"?e.transform:null,this.writable=!0,this.readable=!1,this[JE]=0,this[Jb]=!1,this.dirCache=e.dirCache||new Map,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.maxDepth=typeof e.maxDepth=="number"?e.maxDepth:bZ,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||av,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=Ri(lc.resolve(e.cwd||process.cwd())),this.strip=+e.strip||0,this.processUmask=e.noChmod?0:process.umask(),this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",n=>this[D$](n))}warn(e,n,r={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(r.recoverable=!1),super.warn(e,n,r)}[Xb](){this[Jb]&&this[JE]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"))}[R$](e){let n=Ri(e.path),r=n.split("/");if(this.strip){if(r.length<this.strip)return!1;if(e.type==="Link"){let o=Ri(e.linkpath).split("/");if(o.length>=this.strip)e.linkpath=o.slice(this.strip).join("/");else return!1}r.splice(0,this.strip),e.path=r.join("/")}if(isFinite(this.maxDepth)&&r.length>this.maxDepth)return this.warn("TAR_ENTRY_ERROR","path excessively deep",{entry:e,path:n,depth:r.length,maxDepth:this.maxDepth}),!1;if(!this.preservePaths){if(r.includes("..")||av&&/^[a-z]:\.\.$/i.test(r[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:n}),!1;let[o,i]=_Z(n);o&&(e.path=i,this.warn("TAR_ENTRY_INFO",`stripping ${o} from absolute path`,{entry:e,path:n}))}if(lc.isAbsolute(e.path)?e.absolute=Ri(lc.resolve(e.path)):e.absolute=Ri(lc.resolve(this.cwd,e.path)),!this.preservePaths&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:Ri(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:o}=lc.win32.parse(e.absolute);e.absolute=o+_$.encode(e.absolute.slice(o.length));let{root:i}=lc.win32.parse(e.path);e.path=i+_$.encode(e.path.slice(i.length))}return!0}[D$](e){if(!this[R$](e))return e.resume();switch(CZ.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[Zb](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[T$](e)}}[Vr](e,n){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:n}),this[ep](),n.resume())}[xl](e,n,r){A$(Ri(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:n,noChmod:this.noChmod},r)}[rv](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[ov](e){return N$(this.uid,e.uid,this.processUid)}[iv](e){return N$(this.gid,e.gid,this.processGid)}[eT](e,n){let r=e.mode&4095||this.fmode,o=new SZ.WriteStream(e.absolute,{flags:O$(e.size),mode:r,autoClose:!1});o.on("error",c=>{o.fd&&dt.close(o.fd,()=>{}),o.write=()=>!0,this[Vr](c,e),n()});let i=1,s=c=>{if(c){o.fd&&dt.close(o.fd,()=>{}),this[Vr](c,e),n();return}--i===0&&dt.close(o.fd,l=>{l?this[Vr](l,e):this[ep](),n()})};o.on("finish",c=>{let l=e.absolute,u=o.fd;if(e.mtime&&!this.noMtime){i++;let f=e.atime||new Date,m=e.mtime;dt.futimes(u,f,m,d=>d?dt.utimes(l,f,m,p=>s(p&&d)):s())}if(this[rv](e)){i++;let f=this[ov](e),m=this[iv](e);dt.fchown(u,f,m,d=>d?dt.chown(l,f,m,p=>s(p&&d)):s())}s()});let a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",c=>{this[Vr](c,e),n()}),e.pipe(a)),a.pipe(o)}[tT](e,n){let r=e.mode&4095||this.dmode;this[xl](e.absolute,r,o=>{if(o){this[Vr](o,e),n();return}let i=1,s=a=>{--i===0&&(n(),this[ep](),e.resume())};e.mtime&&!this.noMtime&&(i++,dt.utimes(e.absolute,e.atime||new Date,e.mtime,s)),this[rv](e)&&(i++,dt.chown(e.absolute,this[ov](e),this[iv](e),s)),s()})}[T$](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[P$](e,n){this[QE](e,e.linkpath,"symlink",n)}[b$](e,n){let r=Ri(lc.resolve(this.cwd,e.linkpath));this[QE](e,r,"link",n)}[k$](){this[JE]++}[ep](){this[JE]--,this[Xb]()}[nT](e){this[ep](),e.resume()}[Qb](e,n){return e.type==="File"&&!this.unlink&&n.isFile()&&n.nlink<=1&&!av}[Zb](e){this[k$]();let n=[e.path];e.linkpath&&n.push(e.linkpath),this.reservations.reserve(n,r=>this[I$](e,r))}[ZE](e){e.type==="SymbolicLink"?NZ(this.dirCache):e.type!=="Directory"&&kZ(this.dirCache,e.absolute)}[I$](e,n){this[ZE](e);let r=a=>{this[ZE](e),n(a)},o=()=>{this[xl](this.cwd,this.dmode,a=>{if(a){this[Vr](a,e),r();return}this[sv]=!0,i()})},i=()=>{if(e.absolute!==this.cwd){let a=Ri(lc.dirname(e.absolute));if(a!==this.cwd)return this[xl](a,this.dmode,c=>{if(c){this[Vr](c,e),r();return}s()})}s()},s=()=>{dt.lstat(e.absolute,(a,c)=>{if(c&&(this.keep||this.newer&&c.mtime>e.mtime)){this[nT](e),r();return}if(a||this[Qb](e,c))return this[ki](null,e,r);if(c.isDirectory()){if(e.type==="Directory"){let l=!this.noChmod&&e.mode&&(c.mode&4095)!==e.mode,u=f=>this[ki](f,e,r);return l?dt.chmod(e.absolute,e.mode,u):u()}if(e.absolute!==this.cwd)return dt.rmdir(e.absolute,l=>this[ki](l,e,r))}if(e.absolute===this.cwd)return this[ki](null,e,r);TZ(e.absolute,l=>this[ki](l,e,r))})};this[sv]?i():o()}[ki](e,n,r){if(e){this[Vr](e,n),r();return}switch(n.type){case"File":case"OldFile":case"ContiguousFile":return this[eT](n,r);case"Link":return this[b$](n,r);case"SymbolicLink":return this[P$](n,r);case"Directory":case"GNUDumpDir":return this[tT](n,r)}}[QE](e,n,r,o){dt[r](n,e.absolute,i=>{i?this[Vr](i,e):(this[ep](),e.resume()),o()})}},XE=t=>{try{return[null,t()]}catch(e){return[e,null]}},rT=class extends cv{[ki](e,n){return super[ki](e,n,()=>{})}[Zb](e){if(this[ZE](e),!this[sv]){let i=this[xl](this.cwd,this.dmode);if(i)return this[Vr](i,e);this[sv]=!0}if(e.absolute!==this.cwd){let i=Ri(lc.dirname(e.absolute));if(i!==this.cwd){let s=this[xl](i,this.dmode);if(s)return this[Vr](s,e)}}let[n,r]=XE(()=>dt.lstatSync(e.absolute));if(r&&(this.keep||this.newer&&r.mtime>e.mtime))return this[nT](e);if(n||this[Qb](e,r))return this[ki](null,e);if(r.isDirectory()){if(e.type==="Directory"){let s=!this.noChmod&&e.mode&&(r.mode&4095)!==e.mode,[a]=s?XE(()=>{dt.chmodSync(e.absolute,e.mode)}):[];return this[ki](a,e)}let[i]=XE(()=>dt.rmdirSync(e.absolute));this[ki](i,e)}let[o]=e.absolute===this.cwd?[]:XE(()=>RZ(e.absolute));this[ki](o,e)}[eT](e,n){let r=e.mode&4095||this.fmode,o=a=>{let c;try{dt.closeSync(i)}catch(l){c=l}(a||c)&&this[Vr](a||c,e),n()},i;try{i=dt.openSync(e.absolute,O$(e.size),r)}catch(a){return o(a)}let s=this.transform&&this.transform(e)||e;s!==e&&(s.on("error",a=>this[Vr](a,e)),e.pipe(s)),s.on("data",a=>{try{dt.writeSync(i,a,0,a.length)}catch(c){o(c)}}),s.on("end",a=>{let c=null;if(e.mtime&&!this.noMtime){let l=e.atime||new Date,u=e.mtime;try{dt.futimesSync(i,l,u)}catch(f){try{dt.utimesSync(e.absolute,l,u)}catch{c=f}}}if(this[rv](e)){let l=this[ov](e),u=this[iv](e);try{dt.fchownSync(i,l,u)}catch(f){try{dt.chownSync(e.absolute,l,u)}catch{c=c||f}}}o(c)})}[tT](e,n){let r=e.mode&4095||this.dmode,o=this[xl](e.absolute,r);if(o){this[Vr](o,e),n();return}if(e.mtime&&!this.noMtime)try{dt.utimesSync(e.absolute,e.atime||new Date,e.mtime)}catch{}if(this[rv](e))try{dt.chownSync(e.absolute,this[ov](e),this[iv](e))}catch{}n(),e.resume()}[xl](e,n){try{return A$.sync(Ri(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:n})}catch(r){return r}}[QE](e,n,r,o){try{dt[r+"Sync"](n,e.absolute),o(),e.resume()}catch(i){return this[Vr](i,e)}}};cv.Sync=rT;U$.exports=cv});var W$=M((Qwe,B$)=>{"use strict";var LZ=km(),eS=oT(),$$=require("fs"),H$=Km(),M$=require("path"),iT=$m();B$.exports=(t,e,n)=>{typeof t=="function"?(n=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(n=e,e=null),e?e=Array.from(e):e=[];let r=LZ(t);if(r.sync&&typeof n=="function")throw new TypeError("callback not supported for sync tar functions");if(!r.file&&typeof n=="function")throw new TypeError("callback only supported with file option");return e.length&&AZ(r,e),r.file&&r.sync?FZ(r):r.file?OZ(r,n):r.sync?UZ(r):MZ(r)};var AZ=(t,e)=>{let n=new Map(e.map(i=>[iT(i),!0])),r=t.filter,o=(i,s)=>{let a=s||M$.parse(i).root||".",c=i===a?!1:n.has(i)?n.get(i):o(M$.dirname(i),a);return n.set(i,c),c};t.filter=r?(i,s)=>r(i,s)&&o(iT(i)):i=>o(iT(i))},FZ=t=>{let e=new eS.Sync(t),n=t.file,r=$$.statSync(n),o=t.maxReadSize||16*1024*1024;new H$.ReadStreamSync(n,{readSize:o,size:r.size}).pipe(e)},OZ=(t,e)=>{let n=new eS(t),r=t.maxReadSize||16*1024*1024,o=t.file,i=new Promise((s,a)=>{n.on("error",a),n.on("close",s),$$.stat(o,(c,l)=>{if(c)a(c);else{let u=new H$.ReadStream(o,{readSize:r,size:l.size});u.on("error",a),u.pipe(n)}})});return e?i.then(e,e):i},UZ=t=>new eS.Sync(t),MZ=t=>new eS(t)});var tS=M(jn=>{"use strict";jn.c=jn.create=_M();jn.r=jn.replace=Hb();jn.t=jn.list=WE();jn.u=jn.update=LM();jn.x=jn.extract=W$();jn.Pack=SE();jn.Unpack=oT();jn.Parse=BE();jn.ReadEntry=iE();jn.WriteEntry=lb();jn.Header=Mm();jn.Pax=aE();jn.types=VP()});var lv=M((tye,j$)=>{"use strict";var $Z="2.0.0",HZ=Number.MAX_SAFE_INTEGER||9007199254740991,BZ=16,WZ=250,jZ=["major","premajor","minor","preminor","patch","prepatch","prerelease"];j$.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:BZ,MAX_SAFE_BUILD_LENGTH:WZ,MAX_SAFE_INTEGER:HZ,RELEASE_TYPES:jZ,SEMVER_SPEC_VERSION:$Z,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var uv=M((nye,V$)=>{"use strict";var VZ=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};V$.exports=VZ});var tp=M((Zs,Y$)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:sT,MAX_SAFE_BUILD_LENGTH:YZ,MAX_LENGTH:qZ}=lv(),GZ=uv();Zs=Y$.exports={};var zZ=Zs.re=[],KZ=Zs.safeRe=[],he=Zs.src=[],JZ=Zs.safeSrc=[],ge=Zs.t={},XZ=0,aT="[a-zA-Z0-9-]",ZZ=[["\\s",1],["\\d",qZ],[aT,YZ]],QZ=t=>{for(let[e,n]of ZZ)t=t.split(`${e}*`).join(`${e}{0,${n}}`).split(`${e}+`).join(`${e}{1,${n}}`);return t},je=(t,e,n)=>{let r=QZ(e),o=XZ++;GZ(t,o,e),ge[t]=o,he[o]=e,JZ[o]=r,zZ[o]=new RegExp(e,n?"g":void 0),KZ[o]=new RegExp(r,n?"g":void 0)};je("NUMERICIDENTIFIER","0|[1-9]\\d*");je("NUMERICIDENTIFIERLOOSE","\\d+");je("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${aT}*`);je("MAINVERSION",`(${he[ge.NUMERICIDENTIFIER]})\\.(${he[ge.NUMERICIDENTIFIER]})\\.(${he[ge.NUMERICIDENTIFIER]})`);je("MAINVERSIONLOOSE",`(${he[ge.NUMERICIDENTIFIERLOOSE]})\\.(${he[ge.NUMERICIDENTIFIERLOOSE]})\\.(${he[ge.NUMERICIDENTIFIERLOOSE]})`);je("PRERELEASEIDENTIFIER",`(?:${he[ge.NONNUMERICIDENTIFIER]}|${he[ge.NUMERICIDENTIFIER]})`);je("PRERELEASEIDENTIFIERLOOSE",`(?:${he[ge.NONNUMERICIDENTIFIER]}|${he[ge.NUMERICIDENTIFIERLOOSE]})`);je("PRERELEASE",`(?:-(${he[ge.PRERELEASEIDENTIFIER]}(?:\\.${he[ge.PRERELEASEIDENTIFIER]})*))`);je("PRERELEASELOOSE",`(?:-?(${he[ge.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${he[ge.PRERELEASEIDENTIFIERLOOSE]})*))`);je("BUILDIDENTIFIER",`${aT}+`);je("BUILD",`(?:\\+(${he[ge.BUILDIDENTIFIER]}(?:\\.${he[ge.BUILDIDENTIFIER]})*))`);je("FULLPLAIN",`v?${he[ge.MAINVERSION]}${he[ge.PRERELEASE]}?${he[ge.BUILD]}?`);je("FULL",`^${he[ge.FULLPLAIN]}$`);je("LOOSEPLAIN",`[v=\\s]*${he[ge.MAINVERSIONLOOSE]}${he[ge.PRERELEASELOOSE]}?${he[ge.BUILD]}?`);je("LOOSE",`^${he[ge.LOOSEPLAIN]}$`);je("GTLT","((?:<|>)?=?)");je("XRANGEIDENTIFIERLOOSE",`${he[ge.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);je("XRANGEIDENTIFIER",`${he[ge.NUMERICIDENTIFIER]}|x|X|\\*`);je("XRANGEPLAIN",`[v=\\s]*(${he[ge.XRANGEIDENTIFIER]})(?:\\.(${he[ge.XRANGEIDENTIFIER]})(?:\\.(${he[ge.XRANGEIDENTIFIER]})(?:${he[ge.PRERELEASE]})?${he[ge.BUILD]}?)?)?`);je("XRANGEPLAINLOOSE",`[v=\\s]*(${he[ge.XRANGEIDENTIFIERLOOSE]})(?:\\.(${he[ge.XRANGEIDENTIFIERLOOSE]})(?:\\.(${he[ge.XRANGEIDENTIFIERLOOSE]})(?:${he[ge.PRERELEASELOOSE]})?${he[ge.BUILD]}?)?)?`);je("XRANGE",`^${he[ge.GTLT]}\\s*${he[ge.XRANGEPLAIN]}$`);je("XRANGELOOSE",`^${he[ge.GTLT]}\\s*${he[ge.XRANGEPLAINLOOSE]}$`);je("COERCEPLAIN",`(^|[^\\d])(\\d{1,${sT}})(?:\\.(\\d{1,${sT}}))?(?:\\.(\\d{1,${sT}}))?`);je("COERCE",`${he[ge.COERCEPLAIN]}(?:$|[^\\d])`);je("COERCEFULL",he[ge.COERCEPLAIN]+`(?:${he[ge.PRERELEASE]})?(?:${he[ge.BUILD]})?(?:$|[^\\d])`);je("COERCERTL",he[ge.COERCE],!0);je("COERCERTLFULL",he[ge.COERCEFULL],!0);je("LONETILDE","(?:~>?)");je("TILDETRIM",`(\\s*)${he[ge.LONETILDE]}\\s+`,!0);Zs.tildeTrimReplace="$1~";je("TILDE",`^${he[ge.LONETILDE]}${he[ge.XRANGEPLAIN]}$`);je("TILDELOOSE",`^${he[ge.LONETILDE]}${he[ge.XRANGEPLAINLOOSE]}$`);je("LONECARET","(?:\\^)");je("CARETTRIM",`(\\s*)${he[ge.LONECARET]}\\s+`,!0);Zs.caretTrimReplace="$1^";je("CARET",`^${he[ge.LONECARET]}${he[ge.XRANGEPLAIN]}$`);je("CARETLOOSE",`^${he[ge.LONECARET]}${he[ge.XRANGEPLAINLOOSE]}$`);je("COMPARATORLOOSE",`^${he[ge.GTLT]}\\s*(${he[ge.LOOSEPLAIN]})$|^$`);je("COMPARATOR",`^${he[ge.GTLT]}\\s*(${he[ge.FULLPLAIN]})$|^$`);je("COMPARATORTRIM",`(\\s*)${he[ge.GTLT]}\\s*(${he[ge.LOOSEPLAIN]}|${he[ge.XRANGEPLAIN]})`,!0);Zs.comparatorTrimReplace="$1$2$3";je("HYPHENRANGE",`^\\s*(${he[ge.XRANGEPLAIN]})\\s+-\\s+(${he[ge.XRANGEPLAIN]})\\s*$`);je("HYPHENRANGELOOSE",`^\\s*(${he[ge.XRANGEPLAINLOOSE]})\\s+-\\s+(${he[ge.XRANGEPLAINLOOSE]})\\s*$`);je("STAR","(<|>)?=?\\s*\\*");je("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");je("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var nS=M((rye,q$)=>{"use strict";var eQ=Object.freeze({loose:!0}),tQ=Object.freeze({}),nQ=t=>t?typeof t!="object"?eQ:t:tQ;q$.exports=nQ});var cT=M((oye,K$)=>{"use strict";var G$=/^[0-9]+$/,z$=(t,e)=>{if(typeof t=="number"&&typeof e=="number")return t===e?0:t<e?-1:1;let n=G$.test(t),r=G$.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1},rQ=(t,e)=>z$(e,t);K$.exports={compareIdentifiers:z$,rcompareIdentifiers:rQ}});var Yr=M((iye,X$)=>{"use strict";var rS=uv(),{MAX_LENGTH:J$,MAX_SAFE_INTEGER:oS}=lv(),{safeRe:iS,t:sS}=tp(),oQ=nS(),{compareIdentifiers:lT}=cT(),uT=class t{constructor(e,n){if(n=oQ(n),e instanceof t){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>J$)throw new TypeError(`version is longer than ${J$} characters`);rS("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let r=e.trim().match(n.loose?iS[sS.LOOSE]:iS[sS.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>oS||this.major<0)throw new TypeError("Invalid major version");if(this.minor>oS||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>oS||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){let i=+o;if(i>=0&&i<oS)return i}return o}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(rS("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),this.major<e.major?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:this.patch>e.patch?1:0}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{let r=this.prerelease[n],o=e.prerelease[n];if(rS("prerelease compare",n,r,o),r===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(r===void 0)return-1;if(r===o)continue;return lT(r,o)}while(++n)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let n=0;do{let r=this.build[n],o=e.build[n];if(rS("build compare",n,r,o),r===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(r===void 0)return-1;if(r===o)continue;return lT(r,o)}while(++n)}inc(e,n,r){if(e.startsWith("pre")){if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(n){let o=`-${n}`.match(this.options.loose?iS[sS.PRERELEASELOOSE]:iS[sS.PRERELEASE]);if(!o||o[1]!==n)throw new Error(`invalid identifier: ${n}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let o=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[o];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(o)}}if(n){let i=[n,o];r===!1&&(i=[n]),lT(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};X$.exports=uT});var If=M((sye,Q$)=>{"use strict";var Z$=Yr(),iQ=(t,e,n=!1)=>{if(t instanceof Z$)return t;try{return new Z$(t,e)}catch(r){if(!n)return null;throw r}};Q$.exports=iQ});var tH=M((aye,eH)=>{"use strict";var sQ=If(),aQ=(t,e)=>{let n=sQ(t,e);return n?n.version:null};eH.exports=aQ});var rH=M((cye,nH)=>{"use strict";var cQ=If(),lQ=(t,e)=>{let n=cQ(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null};nH.exports=lQ});var sH=M((lye,iH)=>{"use strict";var oH=Yr(),uQ=(t,e,n,r,o)=>{typeof n=="string"&&(o=r,r=n,n=void 0);try{return new oH(t instanceof oH?t.version:t,n).inc(e,r,o).version}catch{return null}};iH.exports=uQ});var lH=M((uye,cH)=>{"use strict";var aH=If(),fQ=(t,e)=>{let n=aH(t,null,!0),r=aH(e,null,!0),o=n.compare(r);if(o===0)return null;let i=o>0,s=i?n:r,a=i?r:n,c=!!s.prerelease.length;if(!!a.prerelease.length&&!c){if(!a.patch&&!a.minor)return"major";if(a.compareMain(s)===0)return a.minor&&!a.patch?"minor":"patch"}let u=c?"pre":"";return n.major!==r.major?u+"major":n.minor!==r.minor?u+"minor":n.patch!==r.patch?u+"patch":"prerelease"};cH.exports=fQ});var fH=M((fye,uH)=>{"use strict";var dQ=Yr(),mQ=(t,e)=>new dQ(t,e).major;uH.exports=mQ});var mH=M((dye,dH)=>{"use strict";var pQ=Yr(),hQ=(t,e)=>new pQ(t,e).minor;dH.exports=hQ});var hH=M((mye,pH)=>{"use strict";var gQ=Yr(),vQ=(t,e)=>new gQ(t,e).patch;pH.exports=vQ});var vH=M((pye,gH)=>{"use strict";var wQ=If(),yQ=(t,e)=>{let n=wQ(t,e);return n&&n.prerelease.length?n.prerelease:null};gH.exports=yQ});var Ni=M((hye,yH)=>{"use strict";var wH=Yr(),CQ=(t,e,n)=>new wH(t,n).compare(new wH(e,n));yH.exports=CQ});var EH=M((gye,CH)=>{"use strict";var EQ=Ni(),SQ=(t,e,n)=>EQ(e,t,n);CH.exports=SQ});var xH=M((vye,SH)=>{"use strict";var xQ=Ni(),_Q=(t,e)=>xQ(t,e,!0);SH.exports=_Q});var aS=M((wye,DH)=>{"use strict";var _H=Yr(),DQ=(t,e,n)=>{let r=new _H(t,n),o=new _H(e,n);return r.compare(o)||r.compareBuild(o)};DH.exports=DQ});var PH=M((yye,IH)=>{"use strict";var IQ=aS(),PQ=(t,e)=>t.sort((n,r)=>IQ(n,r,e));IH.exports=PQ});var TH=M((Cye,bH)=>{"use strict";var bQ=aS(),TQ=(t,e)=>t.sort((n,r)=>bQ(r,n,e));bH.exports=TQ});var fv=M((Eye,RH)=>{"use strict";var RQ=Ni(),kQ=(t,e,n)=>RQ(t,e,n)>0;RH.exports=kQ});var cS=M((Sye,kH)=>{"use strict";var NQ=Ni(),LQ=(t,e,n)=>NQ(t,e,n)<0;kH.exports=LQ});var fT=M((xye,NH)=>{"use strict";var AQ=Ni(),FQ=(t,e,n)=>AQ(t,e,n)===0;NH.exports=FQ});var dT=M((_ye,LH)=>{"use strict";var OQ=Ni(),UQ=(t,e,n)=>OQ(t,e,n)!==0;LH.exports=UQ});var lS=M((Dye,AH)=>{"use strict";var MQ=Ni(),$Q=(t,e,n)=>MQ(t,e,n)>=0;AH.exports=$Q});var uS=M((Iye,FH)=>{"use strict";var HQ=Ni(),BQ=(t,e,n)=>HQ(t,e,n)<=0;FH.exports=BQ});var mT=M((Pye,OH)=>{"use strict";var WQ=fT(),jQ=dT(),VQ=fv(),YQ=lS(),qQ=cS(),GQ=uS(),zQ=(t,e,n,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return WQ(t,n,r);case"!=":return jQ(t,n,r);case">":return VQ(t,n,r);case">=":return YQ(t,n,r);case"<":return qQ(t,n,r);case"<=":return GQ(t,n,r);default:throw new TypeError(`Invalid operator: ${e}`)}};OH.exports=zQ});var MH=M((bye,UH)=>{"use strict";var KQ=Yr(),JQ=If(),{safeRe:fS,t:dS}=tp(),XQ=(t,e)=>{if(t instanceof KQ)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let n=null;if(!e.rtl)n=t.match(e.includePrerelease?fS[dS.COERCEFULL]:fS[dS.COERCE]);else{let c=e.includePrerelease?fS[dS.COERCERTLFULL]:fS[dS.COERCERTL],l;for(;(l=c.exec(t))&&(!n||n.index+n[0].length!==t.length);)(!n||l.index+l[0].length!==n.index+n[0].length)&&(n=l),c.lastIndex=l.index+l[1].length+l[2].length;c.lastIndex=-1}if(n===null)return null;let r=n[2],o=n[3]||"0",i=n[4]||"0",s=e.includePrerelease&&n[5]?`-${n[5]}`:"",a=e.includePrerelease&&n[6]?`+${n[6]}`:"";return JQ(`${r}.${o}.${i}${s}${a}`,e)};UH.exports=XQ});var HH=M((Tye,$H)=>{"use strict";var pT=class{constructor(){this.max=1e3,this.map=new Map}get(e){let n=this.map.get(e);if(n!==void 0)return this.map.delete(e),this.map.set(e,n),n}delete(e){return this.map.delete(e)}set(e,n){if(!this.delete(e)&&n!==void 0){if(this.map.size>=this.max){let o=this.map.keys().next().value;this.delete(o)}this.map.set(e,n)}return this}};$H.exports=pT});var Li=M((Rye,VH)=>{"use strict";var ZQ=/\s+/g,hT=class t{constructor(e,n){if(n=eee(n),e instanceof t)return e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease?e:new t(e.raw,n);if(e instanceof gT)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=e.trim().replace(ZQ," "),this.set=this.raw.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(o=>!WH(o[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let o of this.set)if(o.length===1&&aee(o[0])){this.set=[o];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let n=this.set[e];for(let r=0;r<n.length;r++)r>0&&(this.formatted+=" "),this.formatted+=n[r].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let r=((this.options.includePrerelease&&iee)|(this.options.loose&&see))+":"+e,o=BH.get(r);if(o)return o;let i=this.options.loose,s=i?oo[qr.HYPHENRANGELOOSE]:oo[qr.HYPHENRANGE];e=e.replace(s,vee(this.options.includePrerelease)),Ft("hyphen replace",e),e=e.replace(oo[qr.COMPARATORTRIM],nee),Ft("comparator trim",e),e=e.replace(oo[qr.TILDETRIM],ree),Ft("tilde trim",e),e=e.replace(oo[qr.CARETTRIM],oee),Ft("caret trim",e);let a=e.split(" ").map(f=>cee(f,this.options)).join(" ").split(/\s+/).map(f=>gee(f,this.options));i&&(a=a.filter(f=>(Ft("loose invalid filter",f,this.options),!!f.match(oo[qr.COMPARATORLOOSE])))),Ft("range list",a);let c=new Map,l=a.map(f=>new gT(f,this.options));for(let f of l){if(WH(f))return[f];c.set(f.value,f)}c.size>1&&c.has("")&&c.delete("");let u=[...c.values()];return BH.set(r,u),u}intersects(e,n){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(r=>jH(r,n)&&e.set.some(o=>jH(o,n)&&r.every(i=>o.every(s=>i.intersects(s,n)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new tee(e,this.options)}catch{return!1}for(let n=0;n<this.set.length;n++)if(wee(this.set[n],e,this.options))return!0;return!1}};VH.exports=hT;var QQ=HH(),BH=new QQ,eee=nS(),gT=dv(),Ft=uv(),tee=Yr(),{safeRe:oo,t:qr,comparatorTrimReplace:nee,tildeTrimReplace:ree,caretTrimReplace:oee}=tp(),{FLAG_INCLUDE_PRERELEASE:iee,FLAG_LOOSE:see}=lv(),WH=t=>t.value==="<0.0.0-0",aee=t=>t.value==="",jH=(t,e)=>{let n=!0,r=t.slice(),o=r.pop();for(;n&&r.length;)n=r.every(i=>o.intersects(i,e)),o=r.pop();return n},cee=(t,e)=>(t=t.replace(oo[qr.BUILD],""),Ft("comp",t,e),t=fee(t,e),Ft("caret",t),t=lee(t,e),Ft("tildes",t),t=mee(t,e),Ft("xrange",t),t=hee(t,e),Ft("stars",t),t),io=t=>!t||t.toLowerCase()==="x"||t==="*",lee=(t,e)=>t.trim().split(/\s+/).map(n=>uee(n,e)).join(" "),uee=(t,e)=>{let n=e.loose?oo[qr.TILDELOOSE]:oo[qr.TILDE];return t.replace(n,(r,o,i,s,a)=>{Ft("tilde",t,r,o,i,s,a);let c;return io(o)?c="":io(i)?c=`>=${o}.0.0 <${+o+1}.0.0-0`:io(s)?c=`>=${o}.${i}.0 <${o}.${+i+1}.0-0`:a?(Ft("replaceTilde pr",a),c=`>=${o}.${i}.${s}-${a} <${o}.${+i+1}.0-0`):c=`>=${o}.${i}.${s} <${o}.${+i+1}.0-0`,Ft("tilde return",c),c})},fee=(t,e)=>t.trim().split(/\s+/).map(n=>dee(n,e)).join(" "),dee=(t,e)=>{Ft("caret",t,e);let n=e.loose?oo[qr.CARETLOOSE]:oo[qr.CARET],r=e.includePrerelease?"-0":"";return t.replace(n,(o,i,s,a,c)=>{Ft("caret",t,o,i,s,a,c);let l;return io(i)?l="":io(s)?l=`>=${i}.0.0${r} <${+i+1}.0.0-0`:io(a)?i==="0"?l=`>=${i}.${s}.0${r} <${i}.${+s+1}.0-0`:l=`>=${i}.${s}.0${r} <${+i+1}.0.0-0`:c?(Ft("replaceCaret pr",c),i==="0"?s==="0"?l=`>=${i}.${s}.${a}-${c} <${i}.${s}.${+a+1}-0`:l=`>=${i}.${s}.${a}-${c} <${i}.${+s+1}.0-0`:l=`>=${i}.${s}.${a}-${c} <${+i+1}.0.0-0`):(Ft("no pr"),i==="0"?s==="0"?l=`>=${i}.${s}.${a}${r} <${i}.${s}.${+a+1}-0`:l=`>=${i}.${s}.${a}${r} <${i}.${+s+1}.0-0`:l=`>=${i}.${s}.${a} <${+i+1}.0.0-0`),Ft("caret return",l),l})},mee=(t,e)=>(Ft("replaceXRanges",t,e),t.split(/\s+/).map(n=>pee(n,e)).join(" ")),pee=(t,e)=>{t=t.trim();let n=e.loose?oo[qr.XRANGELOOSE]:oo[qr.XRANGE];return t.replace(n,(r,o,i,s,a,c)=>{Ft("xRange",t,r,o,i,s,a,c);let l=io(i),u=l||io(s),f=u||io(a),m=f;return o==="="&&m&&(o=""),c=e.includePrerelease?"-0":"",l?o===">"||o==="<"?r="<0.0.0-0":r="*":o&&m?(u&&(s=0),a=0,o===">"?(o=">=",u?(i=+i+1,s=0,a=0):(s=+s+1,a=0)):o==="<="&&(o="<",u?i=+i+1:s=+s+1),o==="<"&&(c="-0"),r=`${o+i}.${s}.${a}${c}`):u?r=`>=${i}.0.0${c} <${+i+1}.0.0-0`:f&&(r=`>=${i}.${s}.0${c} <${i}.${+s+1}.0-0`),Ft("xRange return",r),r})},hee=(t,e)=>(Ft("replaceStars",t,e),t.trim().replace(oo[qr.STAR],"")),gee=(t,e)=>(Ft("replaceGTE0",t,e),t.trim().replace(oo[e.includePrerelease?qr.GTE0PRE:qr.GTE0],"")),vee=t=>(e,n,r,o,i,s,a,c,l,u,f,m)=>(io(r)?n="":io(o)?n=`>=${r}.0.0${t?"-0":""}`:io(i)?n=`>=${r}.${o}.0${t?"-0":""}`:s?n=`>=${n}`:n=`>=${n}${t?"-0":""}`,io(l)?c="":io(u)?c=`<${+l+1}.0.0-0`:io(f)?c=`<${l}.${+u+1}.0-0`:m?c=`<=${l}.${u}.${f}-${m}`:t?c=`<${l}.${u}.${+f+1}-0`:c=`<=${c}`,`${n} ${c}`.trim()),wee=(t,e,n)=>{for(let r=0;r<t.length;r++)if(!t[r].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(let r=0;r<t.length;r++)if(Ft(t[r].semver),t[r].semver!==gT.ANY&&t[r].semver.prerelease.length>0){let o=t[r].semver;if(o.major===e.major&&o.minor===e.minor&&o.patch===e.patch)return!0}return!1}return!0}});var dv=M((kye,JH)=>{"use strict";var mv=Symbol("SemVer ANY"),yT=class t{static get ANY(){return mv}constructor(e,n){if(n=YH(n),e instanceof t){if(e.loose===!!n.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),wT("comparator",e,n),this.options=n,this.loose=!!n.loose,this.parse(e),this.semver===mv?this.value="":this.value=this.operator+this.semver.version,wT("comp",this)}parse(e){let n=this.options.loose?qH[GH.COMPARATORLOOSE]:qH[GH.COMPARATOR],r=e.match(n);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new zH(r[2],this.options.loose):this.semver=mv}toString(){return this.value}test(e){if(wT("Comparator.test",e,this.options.loose),this.semver===mv||e===mv)return!0;if(typeof e=="string")try{e=new zH(e,this.options)}catch{return!1}return vT(e,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new KH(e.value,n).test(this.value):e.operator===""?e.value===""?!0:new KH(this.value,n).test(e.semver):(n=YH(n),n.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!n.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||vT(this.semver,"<",e.semver,n)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||vT(this.semver,">",e.semver,n)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};JH.exports=yT;var YH=nS(),{safeRe:qH,t:GH}=tp(),vT=mT(),wT=uv(),zH=Yr(),KH=Li()});var pv=M((Nye,XH)=>{"use strict";var yee=Li(),Cee=(t,e,n)=>{try{e=new yee(e,n)}catch{return!1}return e.test(t)};XH.exports=Cee});var QH=M((Lye,ZH)=>{"use strict";var Eee=Li(),See=(t,e)=>new Eee(t,e).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" "));ZH.exports=See});var t2=M((Aye,e2)=>{"use strict";var xee=Yr(),_ee=Li(),Dee=(t,e,n)=>{let r=null,o=null,i=null;try{i=new _ee(e,n)}catch{return null}return t.forEach(s=>{i.test(s)&&(!r||o.compare(s)===-1)&&(r=s,o=new xee(r,n))}),r};e2.exports=Dee});var r2=M((Fye,n2)=>{"use strict";var Iee=Yr(),Pee=Li(),bee=(t,e,n)=>{let r=null,o=null,i=null;try{i=new Pee(e,n)}catch{return null}return t.forEach(s=>{i.test(s)&&(!r||o.compare(s)===1)&&(r=s,o=new Iee(r,n))}),r};n2.exports=bee});var s2=M((Oye,i2)=>{"use strict";var CT=Yr(),Tee=Li(),o2=fv(),Ree=(t,e)=>{t=new Tee(t,e);let n=new CT("0.0.0");if(t.test(n)||(n=new CT("0.0.0-0"),t.test(n)))return n;n=null;for(let r=0;r<t.set.length;++r){let o=t.set[r],i=null;o.forEach(s=>{let a=new CT(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||o2(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),i&&(!n||o2(n,i))&&(n=i)}return n&&t.test(n)?n:null};i2.exports=Ree});var c2=M((Uye,a2)=>{"use strict";var kee=Li(),Nee=(t,e)=>{try{return new kee(t,e).range||"*"}catch{return null}};a2.exports=Nee});var mS=M((Mye,d2)=>{"use strict";var Lee=Yr(),f2=dv(),{ANY:Aee}=f2,Fee=Li(),Oee=pv(),l2=fv(),u2=cS(),Uee=uS(),Mee=lS(),$ee=(t,e,n,r)=>{t=new Lee(t,r),e=new Fee(e,r);let o,i,s,a,c;switch(n){case">":o=l2,i=Uee,s=u2,a=">",c=">=";break;case"<":o=u2,i=Mee,s=l2,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Oee(t,e,r))return!1;for(let l=0;l<e.set.length;++l){let u=e.set[l],f=null,m=null;if(u.forEach(d=>{d.semver===Aee&&(d=new f2(">=0.0.0")),f=f||d,m=m||d,o(d.semver,f.semver,r)?f=d:s(d.semver,m.semver,r)&&(m=d)}),f.operator===a||f.operator===c||(!m.operator||m.operator===a)&&i(t,m.semver))return!1;if(m.operator===c&&s(t,m.semver))return!1}return!0};d2.exports=$ee});var p2=M(($ye,m2)=>{"use strict";var Hee=mS(),Bee=(t,e,n)=>Hee(t,e,">",n);m2.exports=Bee});var g2=M((Hye,h2)=>{"use strict";var Wee=mS(),jee=(t,e,n)=>Wee(t,e,"<",n);h2.exports=jee});var y2=M((Bye,w2)=>{"use strict";var v2=Li(),Vee=(t,e,n)=>(t=new v2(t,n),e=new v2(e,n),t.intersects(e,n));w2.exports=Vee});var E2=M((Wye,C2)=>{"use strict";var Yee=pv(),qee=Ni();C2.exports=(t,e,n)=>{let r=[],o=null,i=null,s=t.sort((u,f)=>qee(u,f,n));for(let u of s)Yee(u,e,n)?(i=u,o||(o=u)):(i&&r.push([o,i]),i=null,o=null);o&&r.push([o,null]);let a=[];for(let[u,f]of r)u===f?a.push(u):!f&&u===s[0]?a.push("*"):f?u===s[0]?a.push(`<=${f}`):a.push(`${u} - ${f}`):a.push(`>=${u}`);let c=a.join(" || "),l=typeof e.raw=="string"?e.raw:String(e);return c.length<l.length?c:e}});var P2=M((jye,I2)=>{"use strict";var S2=Li(),ST=dv(),{ANY:ET}=ST,hv=pv(),xT=Ni(),Gee=(t,e,n={})=>{if(t===e)return!0;t=new S2(t,n),e=new S2(e,n);let r=!1;e:for(let o of t.set){for(let i of e.set){let s=Kee(o,i,n);if(r=r||s!==null,s)continue e}if(r)return!1}return!0},zee=[new ST(">=0.0.0-0")],x2=[new ST(">=0.0.0")],Kee=(t,e,n)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===ET){if(e.length===1&&e[0].semver===ET)return!0;n.includePrerelease?t=zee:t=x2}if(e.length===1&&e[0].semver===ET){if(n.includePrerelease)return!0;e=x2}let r=new Set,o,i;for(let d of t)d.operator===">"||d.operator===">="?o=_2(o,d,n):d.operator==="<"||d.operator==="<="?i=D2(i,d,n):r.add(d.semver);if(r.size>1)return null;let s;if(o&&i){if(s=xT(o.semver,i.semver,n),s>0)return null;if(s===0&&(o.operator!==">="||i.operator!=="<="))return null}for(let d of r){if(o&&!hv(d,String(o),n)||i&&!hv(d,String(i),n))return null;for(let p of e)if(!hv(d,String(p),n))return!1;return!0}let a,c,l,u,f=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1,m=o&&!n.includePrerelease&&o.semver.prerelease.length?o.semver:!1;f&&f.prerelease.length===1&&i.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(let d of e){if(u=u||d.operator===">"||d.operator===">=",l=l||d.operator==="<"||d.operator==="<=",o){if(m&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===m.major&&d.semver.minor===m.minor&&d.semver.patch===m.patch&&(m=!1),d.operator===">"||d.operator===">="){if(a=_2(o,d,n),a===d&&a!==o)return!1}else if(o.operator===">="&&!hv(o.semver,String(d),n))return!1}if(i){if(f&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===f.major&&d.semver.minor===f.minor&&d.semver.patch===f.patch&&(f=!1),d.operator==="<"||d.operator==="<="){if(c=D2(i,d,n),c===d&&c!==i)return!1}else if(i.operator==="<="&&!hv(i.semver,String(d),n))return!1}if(!d.operator&&(i||o)&&s!==0)return!1}return!(o&&l&&!i&&s!==0||i&&u&&!o&&s!==0||m||f)},_2=(t,e,n)=>{if(!t)return e;let r=xT(t.semver,e.semver,n);return r>0?t:r<0||e.operator===">"&&t.operator===">="?e:t},D2=(t,e,n)=>{if(!t)return e;let r=xT(t.semver,e.semver,n);return r<0?t:r>0||e.operator==="<"&&t.operator==="<="?e:t};I2.exports=Gee});var DT=M((Vye,R2)=>{"use strict";var _T=tp(),b2=lv(),Jee=Yr(),T2=cT(),Xee=If(),Zee=tH(),Qee=rH(),ete=sH(),tte=lH(),nte=fH(),rte=mH(),ote=hH(),ite=vH(),ste=Ni(),ate=EH(),cte=xH(),lte=aS(),ute=PH(),fte=TH(),dte=fv(),mte=cS(),pte=fT(),hte=dT(),gte=lS(),vte=uS(),wte=mT(),yte=MH(),Cte=dv(),Ete=Li(),Ste=pv(),xte=QH(),_te=t2(),Dte=r2(),Ite=s2(),Pte=c2(),bte=mS(),Tte=p2(),Rte=g2(),kte=y2(),Nte=E2(),Lte=P2();R2.exports={parse:Xee,valid:Zee,clean:Qee,inc:ete,diff:tte,major:nte,minor:rte,patch:ote,prerelease:ite,compare:ste,rcompare:ate,compareLoose:cte,compareBuild:lte,sort:ute,rsort:fte,gt:dte,lt:mte,eq:pte,neq:hte,gte,lte:vte,cmp:wte,coerce:yte,Comparator:Cte,Range:Ete,satisfies:Ste,toComparators:xte,maxSatisfying:_te,minSatisfying:Dte,minVersion:Ite,validRange:Pte,outside:bte,gtr:Tte,ltr:Rte,intersects:kte,simplifyRange:Nte,subset:Lte,SemVer:Jee,re:_T.re,src:_T.src,tokens:_T.t,SEMVER_SPEC_VERSION:b2.SEMVER_SPEC_VERSION,RELEASE_TYPES:b2.RELEASE_TYPES,compareIdentifiers:T2.compareIdentifiers,rcompareIdentifiers:T2.rcompareIdentifiers}});var IT=M((Yye,k2)=>{k2.exports={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,END64HDR:20,END64SIG:117853008,END64START:4,END64OFF:8,END64NUMDISKS:16,ZIP64SIG:101075792,ZIP64HDR:56,ZIP64LEAD:12,ZIP64SIZE:4,ZIP64VEM:12,ZIP64VER:14,ZIP64DSK:16,ZIP64DSKDIR:20,ZIP64SUB:24,ZIP64TOT:32,ZIP64SIZB:40,ZIP64OFF:48,ZIP64EXTRA:56,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,AES_ENCRYPT:99,FLG_ENC:1,FLG_COMP1:2,FLG_COMP2:4,FLG_DESC:8,FLG_ENH:16,FLG_PATCH:32,FLG_STR:64,FLG_EFS:2048,FLG_MSK:4096,FILE:2,BUFFER:1,NONE:0,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535,EF_ZIP64_SUNCOMP:0,EF_ZIP64_SCOMP:8,EF_ZIP64_RHO:16,EF_ZIP64_DSN:24}});var pS=M(L2=>{var N2={INVALID_LOC:"Invalid LOC header (bad signature)",INVALID_CEN:"Invalid CEN header (bad signature)",INVALID_END:"Invalid END header (bad signature)",DESCRIPTOR_NOT_EXIST:"No descriptor present",DESCRIPTOR_UNKNOWN:"Unknown descriptor format",DESCRIPTOR_FAULTY:"Descriptor data is malformed",NO_DATA:"Nothing to decompress",BAD_CRC:"CRC32 checksum failed {0}",FILE_IN_THE_WAY:"There is a file in the way: {0}",UNKNOWN_METHOD:"Invalid/unsupported compression method",AVAIL_DATA:"inflate::Available inflate data did not terminate",INVALID_DISTANCE:"inflate::Invalid literal/length or distance code in fixed or dynamic block",TO_MANY_CODES:"inflate::Dynamic block code description: too many length or distance codes",INVALID_REPEAT_LEN:"inflate::Dynamic block code description: repeat more than specified lengths",INVALID_REPEAT_FIRST:"inflate::Dynamic block code description: repeat lengths with no first length",INCOMPLETE_CODES:"inflate::Dynamic block code description: code lengths codes incomplete",INVALID_DYN_DISTANCE:"inflate::Dynamic block code description: invalid distance code lengths",INVALID_CODES_LEN:"inflate::Dynamic block code description: invalid literal/length code lengths",INVALID_STORE_BLOCK:"inflate::Stored block length did not match one's complement",INVALID_BLOCK_TYPE:"inflate::Invalid block type (type == 3)",CANT_EXTRACT_FILE:"Could not extract the file",CANT_OVERRIDE:"Target file already exists",DISK_ENTRY_TOO_LARGE:"Number of disk entries is too large",NO_ZIP:"No zip file was loaded",NO_ENTRY:"Entry doesn't exist",DIRECTORY_CONTENT_ERROR:"A directory cannot have content",FILE_NOT_FOUND:'File not found: "{0}"',NOT_IMPLEMENTED:"Not implemented",INVALID_FILENAME:"Invalid filename",INVALID_FORMAT:"Invalid or unsupported zip format. No END header found",INVALID_PASS_PARAM:"Incompatible password parameter",WRONG_PASSWORD:"Wrong Password",COMMENT_TOO_LONG:"Comment is too long",EXTRA_FIELD_PARSE_ERROR:"Extra field parsing error"};function Ate(t){return function(...e){return e.length&&(t=t.replace(/\{(\d)\}/g,(n,r)=>e[r]||"")),new Error("ADM-ZIP: "+t)}}for(let t of Object.keys(N2))L2[t]=Ate(N2[t])});var M2=M((Gye,U2)=>{var Fte=require("fs"),Vn=require("path"),A2=IT(),Ote=pS(),Ute=typeof process=="object"&&process.platform==="win32",F2=t=>typeof t=="object"&&t!==null,O2=new Uint32Array(256).map((t,e)=>{for(let n=0;n<8;n++)(e&1)!==0?e=3988292384^e>>>1:e>>>=1;return e>>>0});function an(t){this.sep=Vn.sep,this.fs=Fte,F2(t)&&F2(t.fs)&&typeof t.fs.statSync=="function"&&(this.fs=t.fs)}U2.exports=an;an.prototype.makeDir=function(t){let e=this;function n(r){let o=r.split(e.sep)[0];r.split(e.sep).forEach(function(i){if(!(!i||i.substr(-1,1)===":")){o+=e.sep+i;var s;try{s=e.fs.statSync(o)}catch{e.fs.mkdirSync(o)}if(s&&s.isFile())throw Ote.FILE_IN_THE_WAY(`"${o}"`)}})}n(t)};an.prototype.writeFileTo=function(t,e,n,r){let o=this;if(o.fs.existsSync(t)){if(!n)return!1;var i=o.fs.statSync(t);if(i.isDirectory())return!1}var s=Vn.dirname(t);o.fs.existsSync(s)||o.makeDir(s);var a;try{a=o.fs.openSync(t,"w",438)}catch{o.fs.chmodSync(t,438),a=o.fs.openSync(t,"w",438)}if(a)try{o.fs.writeSync(a,e,0,e.length,0)}finally{o.fs.closeSync(a)}return o.fs.chmodSync(t,r||438),!0};an.prototype.writeFileToAsync=function(t,e,n,r,o){typeof r=="function"&&(o=r,r=void 0);let i=this;i.fs.exists(t,function(s){if(s&&!n)return o(!1);i.fs.stat(t,function(a,c){if(s&&c.isDirectory())return o(!1);var l=Vn.dirname(t);i.fs.exists(l,function(u){u||i.makeDir(l),i.fs.open(t,"w",438,function(f,m){f?i.fs.chmod(t,438,function(){i.fs.open(t,"w",438,function(d,p){i.fs.write(p,e,0,e.length,0,function(){i.fs.close(p,function(){i.fs.chmod(t,r||438,function(){o(!0)})})})})}):m?i.fs.write(m,e,0,e.length,0,function(){i.fs.close(m,function(){i.fs.chmod(t,r||438,function(){o(!0)})})}):i.fs.chmod(t,r||438,function(){o(!0)})})})})})};an.prototype.findFiles=function(t){let e=this;function n(r,o,i){typeof o=="boolean"&&(i=o,o=void 0);let s=[];return e.fs.readdirSync(r).forEach(function(a){let c=Vn.join(r,a),l=e.fs.statSync(c);(!o||o.test(c))&&s.push(Vn.normalize(c)+(l.isDirectory()?e.sep:"")),l.isDirectory()&&i&&(s=s.concat(n(c,o,i)))}),s}return n(t,void 0,!0)};an.prototype.findFilesAsync=function(t,e){let n=this,r=[];n.fs.readdir(t,function(o,i){if(o)return e(o);let s=i.length;if(!s)return e(null,r);i.forEach(function(a){a=Vn.join(t,a),n.fs.stat(a,function(c,l){if(c)return e(c);l&&(r.push(Vn.normalize(a)+(l.isDirectory()?n.sep:"")),l.isDirectory()?n.findFilesAsync(a,function(u,f){if(u)return e(u);r=r.concat(f),--s||e(null,r)}):--s||e(null,r))})})})};an.prototype.getAttributes=function(){};an.prototype.setAttributes=function(){};an.crc32update=function(t,e){return O2[(t^e)&255]^t>>>8};an.crc32=function(t){typeof t=="string"&&(t=Buffer.from(t,"utf8"));let e=t.length,n=-1;for(let r=0;r<e;)n=an.crc32update(n,t[r++]);return~n>>>0};an.methodToString=function(t){switch(t){case A2.STORED:return"STORED ("+t+")";case A2.DEFLATED:return"DEFLATED ("+t+")";default:return"UNSUPPORTED ("+t+")"}};an.canonical=function(t){if(!t)return"";let e=Vn.posix.normalize("/"+t.split("\\").join("/"));return Vn.join(".",e)};an.zipnamefix=function(t){if(!t)return"";let e=Vn.posix.normalize("/"+t.split("\\").join("/"));return Vn.posix.join(".",e)};an.findLast=function(t,e){if(!Array.isArray(t))throw new TypeError("arr is not array");let n=t.length>>>0;for(let r=n-1;r>=0;r--)if(e(t[r],r,t))return t[r]};an.sanitize=function(t,e){t=Vn.resolve(Vn.normalize(t));for(var n=e.split("/"),r=0,o=n.length;r<o;r++){var i=Vn.normalize(Vn.join(t,n.slice(r,o).join(Vn.sep)));if(i.indexOf(t)===0)return i}return Vn.normalize(Vn.join(t,Vn.basename(e)))};an.toBuffer=function(e,n){return Buffer.isBuffer(e)?e:e instanceof Uint8Array?Buffer.from(e):typeof e=="string"?n(e):Buffer.alloc(0)};an.readBigUInt64LE=function(t,e){var n=Buffer.from(t.slice(e,e+8));return n.swap64(),parseInt(`0x${n.toString("hex")}`)};an.fromDOS2Date=function(t){return new Date((t>>25&127)+1980,Math.max((t>>21&15)-1,0),Math.max(t>>16&31,1),t>>11&31,t>>5&63,(t&31)<<1)};an.fromDate2DOS=function(t){let e=0,n=0;return t.getFullYear()>1979&&(e=(t.getFullYear()-1980&127)<<9|t.getMonth()+1<<5|t.getDate(),n=t.getHours()<<11|t.getMinutes()<<5|t.getSeconds()>>1),e<<16|n};an.isWin=Ute;an.crcTable=O2});var H2=M((zye,$2)=>{var Mte=require("path");$2.exports=function(t,{fs:e}){var n=t||"",r=i(),o=null;function i(){return{directory:!1,readonly:!1,hidden:!1,executable:!1,mtime:0,atime:0}}return n&&e.existsSync(n)?(o=e.statSync(n),r.directory=o.isDirectory(),r.mtime=o.mtime,r.atime=o.atime,r.executable=(73&o.mode)!==0,r.readonly=(128&o.mode)===0,r.hidden=Mte.basename(n)[0]==="."):console.warn("Invalid path: "+n),{get directory(){return r.directory},get readOnly(){return r.readonly},get hidden(){return r.hidden},get mtime(){return r.mtime},get atime(){return r.atime},get executable(){return r.executable},decodeAttributes:function(){},encodeAttributes:function(){},toJSON:function(){return{path:n,isDirectory:r.directory,isReadOnly:r.readonly,isHidden:r.hidden,isExecutable:r.executable,mTime:r.mtime,aTime:r.atime}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var W2=M((Kye,B2)=>{B2.exports={efs:!0,encode:t=>Buffer.from(t,"utf8"),decode:t=>t.toString("utf8")}});var rp=M((Jye,np)=>{np.exports=M2();np.exports.Constants=IT();np.exports.Errors=pS();np.exports.FileAttr=H2();np.exports.decoder=W2()});var V2=M((Xye,j2)=>{var _l=rp(),de=_l.Constants;j2.exports=function(){var t=20,e=10,n=0,r=0,o=0,i=0,s=0,a=0,c=0,l=0,u=0,f=0,m=0,d=0,p=0;t|=_l.isWin?2560:768,n|=de.FLG_EFS;let g={extraLen:0},h=w=>Math.max(0,w)>>>0,v=w=>Math.max(0,w)&65535,C=w=>Math.max(0,w)&255;return o=_l.fromDate2DOS(new Date),{get made(){return t},set made(w){t=w},get version(){return e},set version(w){e=w},get flags(){return n},set flags(w){n=w},get flags_efs(){return(n&de.FLG_EFS)>0},set flags_efs(w){w?n|=de.FLG_EFS:n&=~de.FLG_EFS},get flags_desc(){return(n&de.FLG_DESC)>0},set flags_desc(w){w?n|=de.FLG_DESC:n&=~de.FLG_DESC},get method(){return r},set method(w){switch(w){case de.STORED:this.version=10;case de.DEFLATED:default:this.version=20}r=w},get time(){return _l.fromDOS2Date(this.timeval)},set time(w){this.timeval=_l.fromDate2DOS(w)},get timeval(){return o},set timeval(w){o=h(w)},get timeHighByte(){return C(o>>>8)},get crc(){return i},set crc(w){i=h(w)},get compressedSize(){return s},set compressedSize(w){s=h(w)},get size(){return a},set size(w){a=h(w)},get fileNameLength(){return c},set fileNameLength(w){c=w},get extraLength(){return l},set extraLength(w){l=w},get extraLocalLength(){return g.extraLen},set extraLocalLength(w){g.extraLen=w},get commentLength(){return u},set commentLength(w){u=w},get diskNumStart(){return f},set diskNumStart(w){f=h(w)},get inAttr(){return m},set inAttr(w){m=h(w)},get attr(){return d},set attr(w){d=h(w)},get fileAttr(){return(d||0)>>16&4095},get offset(){return p},set offset(w){p=h(w)},get encrypted(){return(n&de.FLG_ENC)===de.FLG_ENC},get centralHeaderSize(){return de.CENHDR+c+l+u},get realDataOffset(){return p+de.LOCHDR+g.fnameLen+g.extraLen},get localHeader(){return g},loadLocalHeaderFromBinary:function(w){var y=w.slice(p,p+de.LOCHDR);if(y.readUInt32LE(0)!==de.LOCSIG)throw _l.Errors.INVALID_LOC();g.version=y.readUInt16LE(de.LOCVER),g.flags=y.readUInt16LE(de.LOCFLG),g.method=y.readUInt16LE(de.LOCHOW),g.time=y.readUInt32LE(de.LOCTIM),g.crc=y.readUInt32LE(de.LOCCRC),g.compressedSize=y.readUInt32LE(de.LOCSIZ),g.size=y.readUInt32LE(de.LOCLEN),g.fnameLen=y.readUInt16LE(de.LOCNAM),g.extraLen=y.readUInt16LE(de.LOCEXT);let S=p+de.LOCHDR+g.fnameLen,D=S+g.extraLen;return w.slice(S,D)},loadFromBinary:function(w){if(w.length!==de.CENHDR||w.readUInt32LE(0)!==de.CENSIG)throw _l.Errors.INVALID_CEN();t=w.readUInt16LE(de.CENVEM),e=w.readUInt16LE(de.CENVER),n=w.readUInt16LE(de.CENFLG),r=w.readUInt16LE(de.CENHOW),o=w.readUInt32LE(de.CENTIM),i=w.readUInt32LE(de.CENCRC),s=w.readUInt32LE(de.CENSIZ),a=w.readUInt32LE(de.CENLEN),c=w.readUInt16LE(de.CENNAM),l=w.readUInt16LE(de.CENEXT),u=w.readUInt16LE(de.CENCOM),f=w.readUInt16LE(de.CENDSK),m=w.readUInt16LE(de.CENATT),d=w.readUInt32LE(de.CENATX),p=w.readUInt32LE(de.CENOFF)},localHeaderToBinary:function(){var w=Buffer.alloc(de.LOCHDR);return w.writeUInt32LE(de.LOCSIG,0),w.writeUInt16LE(e,de.LOCVER),w.writeUInt16LE(n,de.LOCFLG),w.writeUInt16LE(r,de.LOCHOW),w.writeUInt32LE(o,de.LOCTIM),w.writeUInt32LE(i,de.LOCCRC),w.writeUInt32LE(s,de.LOCSIZ),w.writeUInt32LE(a,de.LOCLEN),w.writeUInt16LE(c,de.LOCNAM),w.writeUInt16LE(g.extraLen,de.LOCEXT),w},centralHeaderToBinary:function(){var w=Buffer.alloc(de.CENHDR+c+l+u);return w.writeUInt32LE(de.CENSIG,0),w.writeUInt16LE(t,de.CENVEM),w.writeUInt16LE(e,de.CENVER),w.writeUInt16LE(n,de.CENFLG),w.writeUInt16LE(r,de.CENHOW),w.writeUInt32LE(o,de.CENTIM),w.writeUInt32LE(i,de.CENCRC),w.writeUInt32LE(s,de.CENSIZ),w.writeUInt32LE(a,de.CENLEN),w.writeUInt16LE(c,de.CENNAM),w.writeUInt16LE(l,de.CENEXT),w.writeUInt16LE(u,de.CENCOM),w.writeUInt16LE(f,de.CENDSK),w.writeUInt16LE(m,de.CENATT),w.writeUInt32LE(d,de.CENATX),w.writeUInt32LE(p,de.CENOFF),w},toJSON:function(){let w=function(y){return y+" bytes"};return{made:t,version:e,flags:n,method:_l.methodToString(r),time:this.time,crc:"0x"+i.toString(16).toUpperCase(),compressedSize:w(s),size:w(a),fileNameLength:w(c),extraLength:w(l),commentLength:w(u),diskNumStart:f,inAttr:m,attr:d,offset:p,centralHeaderSize:w(de.CENHDR+c+l+u)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var q2=M((Zye,Y2)=>{var op=rp(),Zt=op.Constants;Y2.exports=function(){var t=0,e=0,n=0,r=0,o=0;return{get diskEntries(){return t},set diskEntries(i){t=e=i},get totalEntries(){return e},set totalEntries(i){e=t=i},get size(){return n},set size(i){n=i},get offset(){return r},set offset(i){r=i},get commentLength(){return o},set commentLength(i){o=i},get mainHeaderSize(){return Zt.ENDHDR+o},loadFromBinary:function(i){if((i.length!==Zt.ENDHDR||i.readUInt32LE(0)!==Zt.ENDSIG)&&(i.length<Zt.ZIP64HDR||i.readUInt32LE(0)!==Zt.ZIP64SIG))throw op.Errors.INVALID_END();i.readUInt32LE(0)===Zt.ENDSIG?(t=i.readUInt16LE(Zt.ENDSUB),e=i.readUInt16LE(Zt.ENDTOT),n=i.readUInt32LE(Zt.ENDSIZ),r=i.readUInt32LE(Zt.ENDOFF),o=i.readUInt16LE(Zt.ENDCOM)):(t=op.readBigUInt64LE(i,Zt.ZIP64SUB),e=op.readBigUInt64LE(i,Zt.ZIP64TOT),n=op.readBigUInt64LE(i,Zt.ZIP64SIZE),r=op.readBigUInt64LE(i,Zt.ZIP64OFF),o=0)},toBinary:function(){var i=Buffer.alloc(Zt.ENDHDR+o);return i.writeUInt32LE(Zt.ENDSIG,0),i.writeUInt32LE(0,4),i.writeUInt16LE(t,Zt.ENDSUB),i.writeUInt16LE(e,Zt.ENDTOT),i.writeUInt32LE(n,Zt.ENDSIZ),i.writeUInt32LE(r,Zt.ENDOFF),i.writeUInt16LE(o,Zt.ENDCOM),i.fill(" ",Zt.ENDHDR),i},toJSON:function(){let i=function(s,a){let c=s.toString(16).toUpperCase();for(;c.length<a;)c="0"+c;return"0x"+c};return{diskEntries:t,totalEntries:e,size:n+" bytes",offset:i(r,4),commentLength:o}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var bT=M(PT=>{PT.EntryHeader=V2();PT.MainHeader=q2()});var z2=M((eCe,G2)=>{G2.exports=function(t){var e=require("zlib"),n={chunkSize:(parseInt(t.length/1024)+1)*1024};return{deflate:function(){return e.deflateRawSync(t,n)},deflateAsync:function(r){var o=e.createDeflateRaw(n),i=[],s=0;o.on("data",function(a){i.push(a),s+=a.length}),o.on("end",function(){var a=Buffer.alloc(s),c=0;a.fill(0);for(var l=0;l<i.length;l++){var u=i[l];u.copy(a,c),c+=u.length}r&&r(a)}),o.end(t)}}}});var J2=M((tCe,K2)=>{var $te=+(process.versions?process.versions.node:"").split(".")[0]||0;K2.exports=function(t,e){var n=require("zlib");let r=$te>=15&&e>0?{maxOutputLength:e}:{};return{inflate:function(){return n.inflateRawSync(t,r)},inflateAsync:function(o){var i=n.createInflateRaw(r),s=[],a=0;i.on("data",function(c){s.push(c),a+=c.length}),i.on("end",function(){var c=Buffer.alloc(a),l=0;c.fill(0);for(var u=0;u<s.length;u++){var f=s[u];f.copy(c,l),l+=f.length}o&&o(c)}),i.end(t)}}}});var tB=M((nCe,eB)=>{"use strict";var{randomFillSync:X2}=require("crypto"),Hte=pS(),Bte=new Uint32Array(256).map((t,e)=>{for(let n=0;n<8;n++)(e&1)!==0?e=e>>>1^3988292384:e>>>=1;return e>>>0}),Q2=(t,e)=>Math.imul(t,e)>>>0,Z2=(t,e)=>Bte[(t^e)&255]^t>>>8,gv=()=>typeof X2=="function"?X2(Buffer.alloc(12)):gv.node();gv.node=()=>{let t=Buffer.alloc(12),e=t.length;for(let n=0;n<e;n++)t[n]=Math.random()*256&255;return t};var hS={genSalt:gv};function gS(t){let e=Buffer.isBuffer(t)?t:Buffer.from(t);this.keys=new Uint32Array([305419896,591751049,878082192]);for(let n=0;n<e.length;n++)this.updateKeys(e[n])}gS.prototype.updateKeys=function(t){let e=this.keys;return e[0]=Z2(e[0],t),e[1]+=e[0]&255,e[1]=Q2(e[1],134775813)+1,e[2]=Z2(e[2],e[1]>>>24),t};gS.prototype.next=function(){let t=(this.keys[2]|2)>>>0;return Q2(t,t^1)>>8&255};function Wte(t){let e=new gS(t);return function(n){let r=Buffer.alloc(n.length),o=0;for(let i of n)r[o++]=e.updateKeys(i^e.next());return r}}function jte(t){let e=new gS(t);return function(n,r,o=0){r||(r=Buffer.alloc(n.length));for(let i of n){let s=e.next();r[o++]=i^s,e.updateKeys(i)}return r}}function Vte(t,e,n){if(!t||!Buffer.isBuffer(t)||t.length<12)return Buffer.alloc(0);let r=Wte(n),o=r(t.slice(0,12)),i=(e.flags&8)===8?e.timeHighByte:e.crc>>>24;if(o[11]!==i)throw Hte.WRONG_PASSWORD();return r(t.slice(12))}function Yte(t){Buffer.isBuffer(t)&&t.length>=12?hS.genSalt=function(){return t.slice(0,12)}:t==="node"?hS.genSalt=gv.node:hS.genSalt=gv}function qte(t,e,n,r=!1){t==null&&(t=Buffer.alloc(0)),Buffer.isBuffer(t)||(t=Buffer.from(t.toString()));let o=jte(n),i=hS.genSalt();i[11]=e.crc>>>24&255,r&&(i[10]=e.crc>>>16&255);let s=Buffer.alloc(t.length+12);return o(i,s),o(t,s,12)}eB.exports={decrypt:Vte,encrypt:qte,_salter:Yte}});var nB=M(vS=>{vS.Deflater=z2();vS.Inflater=J2();vS.ZipCrypto=tB()});var RT=M((oCe,rB)=>{var Ct=rp(),Gte=bT(),cn=Ct.Constants,TT=nB();rB.exports=function(t,e){var n=new Gte.EntryHeader,r=Buffer.alloc(0),o=Buffer.alloc(0),i=!1,s=null,a=Buffer.alloc(0),c=Buffer.alloc(0),l=!0;let u=t,f=typeof u.decoder=="object"?u.decoder:Ct.decoder;l=f.hasOwnProperty("efs")?f.efs:!1;function m(){return!e||!(e instanceof Uint8Array)?Buffer.alloc(0):(c=n.loadLocalHeaderFromBinary(e),e.slice(n.realDataOffset,n.realDataOffset+n.compressedSize))}function d(w){if(n.flags_desc){let y={},S=n.realDataOffset+n.compressedSize;if(e.readUInt32LE(S)==cn.LOCSIG||e.readUInt32LE(S)==cn.CENSIG)throw Ct.Errors.DESCRIPTOR_NOT_EXIST();if(e.readUInt32LE(S)==cn.EXTSIG)y.crc=e.readUInt32LE(S+cn.EXTCRC),y.compressedSize=e.readUInt32LE(S+cn.EXTSIZ),y.size=e.readUInt32LE(S+cn.EXTLEN);else if(e.readUInt16LE(S+12)===19280)y.crc=e.readUInt32LE(S+cn.EXTCRC-4),y.compressedSize=e.readUInt32LE(S+cn.EXTSIZ-4),y.size=e.readUInt32LE(S+cn.EXTLEN-4);else throw Ct.Errors.DESCRIPTOR_UNKNOWN();if(y.compressedSize!==n.compressedSize||y.size!==n.size||y.crc!==n.crc)throw Ct.Errors.DESCRIPTOR_FAULTY();if(Ct.crc32(w)!==y.crc)return!1}else if(Ct.crc32(w)!==n.localHeader.crc)return!1;return!0}function p(w,y,S){if(typeof y>"u"&&typeof w=="string"&&(S=w,w=void 0),i)return w&&y&&y(Buffer.alloc(0),Ct.Errors.DIRECTORY_CONTENT_ERROR()),Buffer.alloc(0);var D=m();if(D.length===0)return w&&y&&y(D),D;if(n.encrypted){if(typeof S!="string"&&!Buffer.isBuffer(S))throw Ct.Errors.INVALID_PASS_PARAM();D=TT.ZipCrypto.decrypt(D,n,S)}var _=Buffer.alloc(n.size);switch(n.method){case Ct.Constants.STORED:if(D.copy(_),d(_))return w&&y&&y(_),_;throw w&&y&&y(_,Ct.Errors.BAD_CRC()),Ct.Errors.BAD_CRC();case Ct.Constants.DEFLATED:var A=new TT.Inflater(D,n.size);if(w)A.inflateAsync(function(U){U.copy(U,0),y&&(d(U)?y(U):y(U,Ct.Errors.BAD_CRC()))});else{if(A.inflate(_).copy(_,0),!d(_))throw Ct.Errors.BAD_CRC(`"${f.decode(r)}"`);return _}break;default:throw w&&y&&y(Buffer.alloc(0),Ct.Errors.UNKNOWN_METHOD()),Ct.Errors.UNKNOWN_METHOD()}}function g(w,y){if((!s||!s.length)&&Buffer.isBuffer(e))return w&&y&&y(m()),m();if(s.length&&!i){var S;switch(n.method){case Ct.Constants.STORED:return n.compressedSize=n.size,S=Buffer.alloc(s.length),s.copy(S),w&&y&&y(S),S;default:case Ct.Constants.DEFLATED:var D=new TT.Deflater(s);if(w)D.deflateAsync(function(A){S=Buffer.alloc(A.length),n.compressedSize=A.length,A.copy(S),y&&y(S)});else{var _=D.deflate();return n.compressedSize=_.length,_}D=null;break}}else if(w&&y)y(Buffer.alloc(0));else return Buffer.alloc(0)}function h(w,y){return(w.readUInt32LE(y+4)<<4)+w.readUInt32LE(y)}function v(w){try{for(var y=0,S,D,_;y+4<w.length;)S=w.readUInt16LE(y),y+=2,D=w.readUInt16LE(y),y+=2,_=w.slice(y,y+D),y+=D,cn.ID_ZIP64===S&&C(_)}catch{throw Ct.Errors.EXTRA_FIELD_PARSE_ERROR()}}function C(w){var y,S,D,_;w.length>=cn.EF_ZIP64_SCOMP&&(y=h(w,cn.EF_ZIP64_SUNCOMP),n.size===cn.EF_ZIP64_OR_32&&(n.size=y)),w.length>=cn.EF_ZIP64_RHO&&(S=h(w,cn.EF_ZIP64_SCOMP),n.compressedSize===cn.EF_ZIP64_OR_32&&(n.compressedSize=S)),w.length>=cn.EF_ZIP64_DSN&&(D=h(w,cn.EF_ZIP64_RHO),n.offset===cn.EF_ZIP64_OR_32&&(n.offset=D)),w.length>=cn.EF_ZIP64_DSN+4&&(_=w.readUInt32LE(cn.EF_ZIP64_DSN),n.diskNumStart===cn.EF_ZIP64_OR_16&&(n.diskNumStart=_))}return{get entryName(){return f.decode(r)},get rawEntryName(){return r},set entryName(w){r=Ct.toBuffer(w,f.encode);var y=r[r.length-1];i=y===47||y===92,n.fileNameLength=r.length},get efs(){return typeof l=="function"?l(this.entryName):l},get extra(){return a},set extra(w){a=w,n.extraLength=w.length,v(w)},get comment(){return f.decode(o)},set comment(w){if(o=Ct.toBuffer(w,f.encode),n.commentLength=o.length,o.length>65535)throw Ct.Errors.COMMENT_TOO_LONG()},get name(){var w=f.decode(r);return i?w.substr(w.length-1).split("/").pop():w.split("/").pop()},get isDirectory(){return i},getCompressedData:function(){return g(!1,null)},getCompressedDataAsync:function(w){g(!0,w)},setData:function(w){s=Ct.toBuffer(w,Ct.decoder.encode),!i&&s.length?(n.size=s.length,n.method=Ct.Constants.DEFLATED,n.crc=Ct.crc32(w),n.changed=!0):n.method=Ct.Constants.STORED},getData:function(w){return n.changed?s:p(!1,null,w)},getDataAsync:function(w,y){n.changed?w(s):p(!0,w,y)},set attr(w){n.attr=w},get attr(){return n.attr},set header(w){n.loadFromBinary(w)},get header(){return n},packCentralHeader:function(){n.flags_efs=this.efs,n.extraLength=a.length;var w=n.centralHeaderToBinary(),y=Ct.Constants.CENHDR;return r.copy(w,y),y+=r.length,a.copy(w,y),y+=n.extraLength,o.copy(w,y),w},packLocalHeader:function(){let w=0;n.flags_efs=this.efs,n.extraLocalLength=c.length;let y=n.localHeaderToBinary(),S=Buffer.alloc(y.length+r.length+n.extraLocalLength);return y.copy(S,w),w+=y.length,r.copy(S,w),w+=r.length,c.copy(S,w),w+=c.length,S},toJSON:function(){let w=function(y){return"<"+(y&&y.length+" bytes buffer"||"null")+">"};return{entryName:this.entryName,name:this.name,comment:this.comment,isDirectory:this.isDirectory,header:n.toJSON(),compressedData:w(e),data:w(s)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var sB=M((iCe,iB)=>{var oB=RT(),zte=bT(),Sr=rp();iB.exports=function(t,e){var n=[],r={},o=Buffer.alloc(0),i=new zte.MainHeader,s=!1,a=null;let c=new Set,l=e,{noSort:u,decoder:f}=l;t?p(l.readEntries):s=!0;function m(){let h=new Set;for(let v of Object.keys(r)){let C=v.split("/");if(C.pop(),!!C.length)for(let w=0;w<C.length;w++){let y=C.slice(0,w+1).join("/")+"/";h.add(y)}}for(let v of h)if(!(v in r)){let C=new oB(l);C.entryName=v,C.attr=16,C.temporary=!0,n.push(C),r[C.entryName]=C,c.add(C)}}function d(){if(s=!0,r={},i.diskEntries>(t.length-i.offset)/Sr.Constants.CENHDR)throw Sr.Errors.DISK_ENTRY_TOO_LARGE();n=new Array(i.diskEntries);for(var h=i.offset,v=0;v<n.length;v++){var C=h,w=new oB(l,t);w.header=t.slice(C,C+=Sr.Constants.CENHDR),w.entryName=t.slice(C,C+=w.header.fileNameLength),w.header.extraLength&&(w.extra=t.slice(C,C+=w.header.extraLength)),w.header.commentLength&&(w.comment=t.slice(C,C+w.header.commentLength)),h+=w.header.centralHeaderSize,n[v]=w,r[w.entryName]=w}c.clear(),m()}function p(h){var v=t.length-Sr.Constants.ENDHDR,C=Math.max(0,v-65535),w=C,y=t.length,S=-1,D=0;for((typeof l.trailingSpace=="boolean"?l.trailingSpace:!1)&&(C=0),v;v>=w;v--)if(t[v]===80){if(t.readUInt32LE(v)===Sr.Constants.ENDSIG){S=v,D=v,y=v+Sr.Constants.ENDHDR,w=v-Sr.Constants.END64HDR;continue}if(t.readUInt32LE(v)===Sr.Constants.END64SIG){w=C;continue}if(t.readUInt32LE(v)===Sr.Constants.ZIP64SIG){S=v,y=v+Sr.readBigUInt64LE(t,v+Sr.Constants.ZIP64SIZE)+Sr.Constants.ZIP64LEAD;break}}if(S==-1)throw Sr.Errors.INVALID_FORMAT();i.loadFromBinary(t.slice(S,y)),i.commentLength&&(o=t.slice(D+Sr.Constants.ENDHDR)),h&&d()}function g(){n.length>1&&!u&&n.sort((h,v)=>h.entryName.toLowerCase().localeCompare(v.entryName.toLowerCase()))}return{get entries(){return s||d(),n.filter(h=>!c.has(h))},get comment(){return f.decode(o)},set comment(h){o=Sr.toBuffer(h,f.encode),i.commentLength=o.length},getEntryCount:function(){return s?n.length:i.diskEntries},forEach:function(h){this.entries.forEach(h)},getEntry:function(h){return s||d(),r[h]||null},setEntry:function(h){s||d(),n.push(h),r[h.entryName]=h,i.totalEntries=n.length},deleteFile:function(h,v=!0){s||d();let C=r[h];this.getEntryChildren(C,v).map(y=>y.entryName).forEach(this.deleteEntry)},deleteEntry:function(h){s||d();let v=r[h],C=n.indexOf(v);C>=0&&(n.splice(C,1),delete r[h],i.totalEntries=n.length)},getEntryChildren:function(h,v=!0){if(s||d(),typeof h=="object")if(h.isDirectory&&v){let C=[],w=h.entryName;for(let y of n)y.entryName.startsWith(w)&&C.push(y);return C}else return[h];return[]},getChildCount:function(h){if(h&&h.isDirectory){let v=this.getEntryChildren(h);return v.includes(h)?v.length-1:v.length}return 0},compressToBuffer:function(){s||d(),g();let h=[],v=[],C=0,w=0;i.size=0,i.offset=0;let y=0;for(let _ of this.entries){let A=_.getCompressedData();_.header.offset=w;let U=_.packLocalHeader(),k=U.length+A.length;w+=k,h.push(U),h.push(A);let E=_.packCentralHeader();v.push(E),i.size+=E.length,C+=k+E.length,y++}C+=i.mainHeaderSize,i.offset=w,i.totalEntries=y,w=0;let S=Buffer.alloc(C);for(let _ of h)_.copy(S,w),w+=_.length;for(let _ of v)_.copy(S,w),w+=_.length;let D=i.toBinary();return o&&o.copy(D,Sr.Constants.ENDHDR),D.copy(S,w),t=S,s=!1,S},toAsyncBuffer:function(h,v,C,w){try{s||d(),g();let y=[],S=[],D=0,_=0,A=0;i.size=0,i.offset=0;let U=function(k){if(k.length>0){let E=k.shift(),x=E.entryName+E.extra.toString();C&&C(x),E.getCompressedDataAsync(function(b){w&&w(x),E.header.offset=_;let I=E.packLocalHeader(),T=I.length+b.length;_+=T,y.push(I),y.push(b);let R=E.packCentralHeader();S.push(R),i.size+=R.length,D+=T+R.length,A++,U(k)})}else{D+=i.mainHeaderSize,i.offset=_,i.totalEntries=A,_=0;let E=Buffer.alloc(D);y.forEach(function(b){b.copy(E,_),_+=b.length}),S.forEach(function(b){b.copy(E,_),_+=b.length});let x=i.toBinary();o&&o.copy(x,Sr.Constants.ENDHDR),x.copy(E,_),t=E,s=!1,h(E)}};U(Array.from(this.entries))}catch(y){v(y)}}}}});var lB=M((sCe,cB)=>{var Qt=rp(),ln=require("path"),Kte=RT(),Jte=sB(),Pf=(...t)=>Qt.findLast(t,e=>typeof e=="boolean"),aB=(...t)=>Qt.findLast(t,e=>typeof e=="string"),Xte=(...t)=>Qt.findLast(t,e=>typeof e=="function"),Zte={noSort:!1,readEntries:!1,method:Qt.Constants.NONE,fs:null};cB.exports=function(t,e){let n=null,r=Object.assign(Object.create(null),Zte);t&&typeof t=="object"&&(t instanceof Uint8Array||(Object.assign(r,t),t=r.input?r.input:void 0,r.input&&delete r.input),Buffer.isBuffer(t)&&(n=t,r.method=Qt.Constants.BUFFER,t=void 0)),Object.assign(r,e);let o=new Qt(r);if((typeof r.decoder!="object"||typeof r.decoder.encode!="function"||typeof r.decoder.decode!="function")&&(r.decoder=Qt.decoder),t&&typeof t=="string")if(o.fs.existsSync(t))r.method=Qt.Constants.FILE,r.filename=t,n=o.fs.readFileSync(t);else throw Qt.Errors.INVALID_FILENAME();let i=new Jte(n,r),{canonical:s,sanitize:a,zipnamefix:c}=Qt;function l(d){if(d&&i){var p;if(typeof d=="string"&&(p=i.getEntry(ln.posix.normalize(d))),typeof d=="object"&&typeof d.entryName<"u"&&typeof d.header<"u"&&(p=i.getEntry(d.entryName)),p)return p}return null}function u(d){let{join:p,normalize:g,sep:h}=ln.posix;return p(".",g(h+d.split("\\").join(h)+h))}function f(d){return d instanceof RegExp?(function(p){return function(g){return p.test(g)}})(d):typeof d!="function"?()=>!0:d}let m=(d,p)=>{let g=p.slice(-1);return g=g===o.sep?o.sep:"",ln.relative(d,p)+g};return{readFile:function(d,p){var g=l(d);return g&&g.getData(p)||null},childCount:function(d){let p=l(d);if(p)return i.getChildCount(p)},readFileAsync:function(d,p){var g=l(d);g?g.getDataAsync(p):p(null,"getEntry failed for:"+d)},readAsText:function(d,p){var g=l(d);if(g){var h=g.getData();if(h&&h.length)return h.toString(p||"utf8")}return""},readAsTextAsync:function(d,p,g){var h=l(d);h?h.getDataAsync(function(v,C){if(C){p(v,C);return}v&&v.length?p(v.toString(g||"utf8")):p("")}):p("")},deleteFile:function(d,p=!0){var g=l(d);g&&i.deleteFile(g.entryName,p)},deleteEntry:function(d){var p=l(d);p&&i.deleteEntry(p.entryName)},addZipComment:function(d){i.comment=d},getZipComment:function(){return i.comment||""},addZipEntryComment:function(d,p){var g=l(d);g&&(g.comment=p)},getZipEntryComment:function(d){var p=l(d);return p&&p.comment||""},updateFile:function(d,p){var g=l(d);g&&g.setData(p)},addLocalFile:function(d,p,g,h){if(o.fs.existsSync(d)){p=p?u(p):"";let v=ln.win32.basename(ln.win32.normalize(d));p+=g||v;let C=o.fs.statSync(d),w=C.isFile()?o.fs.readFileSync(d):Buffer.alloc(0);C.isDirectory()&&(p+=o.sep),this.addFile(p,w,h,C)}else throw Qt.Errors.FILE_NOT_FOUND(d)},addLocalFileAsync:function(d,p){d=typeof d=="object"?d:{localPath:d};let g=ln.resolve(d.localPath),{comment:h}=d,{zipPath:v,zipName:C}=d,w=this;o.fs.stat(g,function(y,S){if(y)return p(y,!1);v=v?u(v):"";let D=ln.win32.basename(ln.win32.normalize(g));if(v+=C||D,S.isFile())o.fs.readFile(g,function(_,A){return _?p(_,!1):(w.addFile(v,A,h,S),setImmediate(p,void 0,!0))});else if(S.isDirectory())return v+=o.sep,w.addFile(v,Buffer.alloc(0),h,S),setImmediate(p,void 0,!0)})},addLocalFolder:function(d,p,g){if(g=f(g),p=p?u(p):"",d=ln.normalize(d),o.fs.existsSync(d)){let h=o.findFiles(d),v=this;if(h.length)for(let C of h){let w=ln.join(p,m(d,C));g(w)&&v.addLocalFile(C,ln.dirname(w))}}else throw Qt.Errors.FILE_NOT_FOUND(d)},addLocalFolderAsync:function(d,p,g,h){h=f(h),g=g?u(g):"",d=ln.normalize(d);var v=this;o.fs.open(d,"r",function(C){if(C&&C.code==="ENOENT")p(void 0,Qt.Errors.FILE_NOT_FOUND(d));else if(C)p(void 0,C);else{var w=o.findFiles(d),y=-1,S=function(){if(y+=1,y<w.length){var D=w[y],_=m(d,D).split("\\").join("/");_=_.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,""),h(_)?o.fs.stat(D,function(A,U){A&&p(void 0,A),U.isFile()?o.fs.readFile(D,function(k,E){k?p(void 0,k):(v.addFile(g+_,E,"",U),S())}):(v.addFile(g+_+"/",Buffer.alloc(0),"",U),S())}):process.nextTick(()=>{S()})}else p(!0,void 0)};S()}})},addLocalFolderAsync2:function(d,p){let g=this;d=typeof d=="object"?d:{localPath:d},localPath=ln.resolve(u(d.localPath));let{zipPath:h,filter:v,namefix:C}=d;v instanceof RegExp?v=(function(S){return function(D){return S.test(D)}})(v):typeof v!="function"&&(v=function(){return!0}),h=h?u(h):"",C=="latin1"&&(C=S=>S.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,"")),typeof C!="function"&&(C=S=>S);let w=S=>ln.join(h,C(m(localPath,S))),y=S=>ln.win32.basename(ln.win32.normalize(C(S)));o.fs.open(localPath,"r",function(S){S&&S.code==="ENOENT"?p(void 0,Qt.Errors.FILE_NOT_FOUND(localPath)):S?p(void 0,S):o.findFilesAsync(localPath,function(D,_){if(D)return p(D);_=_.filter(A=>v(w(A))),_.length||p(void 0,!1),setImmediate(_.reverse().reduce(function(A,U){return function(k,E){if(k||E===!1)return setImmediate(A,k,!1);g.addLocalFileAsync({localPath:U,zipPath:ln.dirname(w(U)),zipName:y(U)},A)}},p))})})},addLocalFolderPromise:function(d,p){return new Promise((g,h)=>{this.addLocalFolderAsync2(Object.assign({localPath:d},p),(v,C)=>{v&&h(v),C&&g(this)})})},addFile:function(d,p,g,h){d=c(d);let v=l(d),C=v!=null;C||(v=new Kte(r),v.entryName=d),v.comment=g||"";let w=typeof h=="object"&&h instanceof o.fs.Stats;w&&(v.header.time=h.mtime);var y=v.isDirectory?16:0;let S=v.isDirectory?16384:32768;return w?S|=4095&h.mode:typeof h=="number"?S|=4095&h:S|=v.isDirectory?493:420,y=(y|S<<16)>>>0,v.attr=y,v.setData(p),C||i.setEntry(v),v},getEntries:function(d){return i.password=d,i?i.entries:[]},getEntry:function(d){return l(d)},getEntryCount:function(){return i.getEntryCount()},forEach:function(d){return i.forEach(d)},extractEntryTo:function(d,p,g,h,v,C){h=Pf(!1,h),v=Pf(!1,v),g=Pf(!0,g),C=aB(v,C);var w=l(d);if(!w)throw Qt.Errors.NO_ENTRY();var y=s(w.entryName),S=a(p,C&&!w.isDirectory?C:g?y:ln.basename(y));if(w.isDirectory){var D=i.getEntryChildren(w);return D.forEach(function(U){if(U.isDirectory)return;var k=U.getData();if(!k)throw Qt.Errors.CANT_EXTRACT_FILE();var E=s(U.entryName),x=a(p,g?E:ln.basename(E));let b=v?U.header.fileAttr:void 0;o.writeFileTo(x,k,h,b)}),!0}var _=w.getData(i.password);if(!_)throw Qt.Errors.CANT_EXTRACT_FILE();if(o.fs.existsSync(S)&&!h)throw Qt.Errors.CANT_OVERRIDE();let A=v?d.header.fileAttr:void 0;return o.writeFileTo(S,_,h,A),!0},test:function(d){if(!i)return!1;for(var p in i.entries)try{if(p.isDirectory)continue;var g=i.entries[p].getData(d);if(!g)return!1}catch{return!1}return!0},extractAllTo:function(d,p,g,h){if(g=Pf(!1,g),h=aB(g,h),p=Pf(!1,p),!i)throw Qt.Errors.NO_ZIP();i.entries.forEach(function(v){var C=a(d,s(v.entryName));if(v.isDirectory){o.makeDir(C);return}var w=v.getData(h);if(!w)throw Qt.Errors.CANT_EXTRACT_FILE();let y=g?v.header.fileAttr:void 0;o.writeFileTo(C,w,p,y);try{o.fs.utimesSync(C,v.header.time,v.header.time)}catch{throw Qt.Errors.CANT_EXTRACT_FILE()}})},extractAllToAsync:function(d,p,g,h){if(h=Xte(p,g,h),g=Pf(!1,g),p=Pf(!1,p),!h)return new Promise((S,D)=>{this.extractAllToAsync(d,p,g,function(_){_?D(_):S(this)})});if(!i){h(Qt.Errors.NO_ZIP());return}d=ln.resolve(d);let v=S=>a(d,ln.normalize(s(S.entryName))),C=(S,D)=>new Error(S+': "'+D+'"'),w=[],y=[];i.entries.forEach(S=>{S.isDirectory?w.push(S):y.push(S)});for(let S of w){let D=v(S),_=g?S.header.fileAttr:void 0;try{o.makeDir(D),_&&o.fs.chmodSync(D,_),o.fs.utimesSync(D,S.header.time,S.header.time)}catch{h(C("Unable to create folder",D))}}y.reverse().reduce(function(S,D){return function(_){if(_)S(_);else{let A=ln.normalize(s(D.entryName)),U=a(d,A);D.getDataAsync(function(k,E){if(E)S(E);else if(!k)S(Qt.Errors.CANT_EXTRACT_FILE());else{let x=g?D.header.fileAttr:void 0;o.writeFileToAsync(U,k,p,x,function(b){b||S(C("Unable to write file",U)),o.fs.utimes(U,D.header.time,D.header.time,function(I){I?S(C("Unable to set times",U)):S()})})}})}}},h)()},writeZip:function(d,p){if(arguments.length===1&&typeof d=="function"&&(p=d,d=""),!d&&r.filename&&(d=r.filename),!!d){var g=i.compressToBuffer();if(g){var h=o.writeFileTo(d,g,!0);typeof p=="function"&&p(h?null:new Error("failed"),"")}}},writeZipPromise:function(d,p){let{overwrite:g,perm:h}=Object.assign({overwrite:!0},p);return new Promise((v,C)=>{!d&&r.filename&&(d=r.filename),d||C("ADM-ZIP: ZIP File Name Missing"),this.toBufferPromise().then(w=>{let y=S=>S?v(S):C("ADM-ZIP: Wasn't able to write zip file");o.writeFileToAsync(d,w,g,h,y)},C)})},toBufferPromise:function(){return new Promise((d,p)=>{i.toAsyncBuffer(d,p)})},toBuffer:function(d,p,g,h){return typeof d=="function"?(i.toAsyncBuffer(d,p,g,h),null):i.compressToBuffer()}}}});var fB=M((cCe,uB)=>{uB.exports=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}clear(){this.top=this.btm=0,this.next=null,this.buffer.fill(void 0)}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}});var kT=M((uCe,mB)=>{var dB=fB();mB.exports=class{constructor(e){this.hwm=e||16,this.head=new dB(this.hwm),this.tail=this.head,this.length=0}clear(){this.head=this.tail,this.head.clear(),this.length=0}push(e){if(this.length++,!this.head.push(e)){let n=this.head;this.head=n.next=new dB(2*this.head.buffer.length),this.head.push(e)}}shift(){this.length!==0&&this.length--;let e=this.tail.shift();if(e===void 0&&this.tail.next){let n=this.tail.next;return this.tail.next=null,this.tail=n,this.tail.shift()}return e}peek(){let e=this.tail.peek();return e===void 0&&this.tail.next?this.tail.next.peek():e}isEmpty(){return this.length===0}}});var ip=M((fCe,pB)=>{function Qte(t){return Buffer.isBuffer(t)||t instanceof Uint8Array}function ene(t){return Buffer.isEncoding(t)}function tne(t,e,n){return Buffer.alloc(t,e,n)}function nne(t){return Buffer.allocUnsafe(t)}function rne(t){return Buffer.allocUnsafeSlow(t)}function one(t,e){return Buffer.byteLength(t,e)}function ine(t,e){return Buffer.compare(t,e)}function sne(t,e){return Buffer.concat(t,e)}function ane(t,e,n,r,o){return St(t).copy(e,n,r,o)}function cne(t,e){return St(t).equals(e)}function lne(t,e,n,r,o){return St(t).fill(e,n,r,o)}function une(t,e,n){return Buffer.from(t,e,n)}function fne(t,e,n,r){return St(t).includes(e,n,r)}function dne(t,e,n,r){return St(t).indexOf(e,n,r)}function mne(t,e,n,r){return St(t).lastIndexOf(e,n,r)}function pne(t){return St(t).swap16()}function hne(t){return St(t).swap32()}function gne(t){return St(t).swap64()}function St(t){return Buffer.isBuffer(t)?t:Buffer.from(t.buffer,t.byteOffset,t.byteLength)}function vne(t,e,n,r){return St(t).toString(e,n,r)}function wne(t,e,n,r,o){return St(t).write(e,n,r,o)}function yne(t,e,n){return St(t).writeDoubleLE(e,n)}function Cne(t,e,n){return St(t).writeFloatLE(e,n)}function Ene(t,e,n){return St(t).writeUInt32LE(e,n)}function Sne(t,e,n){return St(t).writeInt32LE(e,n)}function xne(t,e){return St(t).readDoubleLE(e)}function _ne(t,e){return St(t).readFloatLE(e)}function Dne(t,e){return St(t).readUInt32LE(e)}function Ine(t,e){return St(t).readInt32LE(e)}function Pne(t,e,n){return St(t).writeDoubleBE(e,n)}function bne(t,e,n){return St(t).writeFloatBE(e,n)}function Tne(t,e,n){return St(t).writeUInt32BE(e,n)}function Rne(t,e,n){return St(t).writeInt32BE(e,n)}function kne(t,e){return St(t).readDoubleBE(e)}function Nne(t,e){return St(t).readFloatBE(e)}function Lne(t,e){return St(t).readUInt32BE(e)}function Ane(t,e){return St(t).readInt32BE(e)}pB.exports={isBuffer:Qte,isEncoding:ene,alloc:tne,allocUnsafe:nne,allocUnsafeSlow:rne,byteLength:one,compare:ine,concat:sne,copy:ane,equals:cne,fill:lne,from:une,includes:fne,indexOf:dne,lastIndexOf:mne,swap16:pne,swap32:hne,swap64:gne,toBuffer:St,toString:vne,write:wne,writeDoubleLE:yne,writeFloatLE:Cne,writeUInt32LE:Ene,writeInt32LE:Sne,readDoubleLE:xne,readFloatLE:_ne,readUInt32LE:Dne,readInt32LE:Ine,writeDoubleBE:Pne,writeFloatBE:bne,writeUInt32BE:Tne,writeInt32BE:Rne,readDoubleBE:kne,readFloatBE:Nne,readUInt32BE:Lne,readInt32BE:Ane}});var gB=M((mCe,hB)=>{var Fne=ip();hB.exports=class{constructor(e){this.encoding=e}get remaining(){return 0}decode(e){return Fne.toString(e,this.encoding)}flush(){return""}}});var wB=M((hCe,vB)=>{var One=ip();vB.exports=class{constructor(){this.codePoint=0,this.bytesSeen=0,this.bytesNeeded=0,this.lowerBoundary=128,this.upperBoundary=191}get remaining(){return this.bytesSeen}decode(e){if(this.bytesNeeded===0){let r=!0;for(let o=Math.max(0,e.byteLength-4),i=e.byteLength;o<i&&r;o++)r=e[o]<=127;if(r)return One.toString(e,"utf8")}let n="";for(let r=0,o=e.byteLength;r<o;r++){let i=e[r];if(this.bytesNeeded===0){i<=127?n+=String.fromCharCode(i):(this.bytesSeen=1,i>=194&&i<=223?(this.bytesNeeded=2,this.codePoint=i&31):i>=224&&i<=239?(i===224?this.lowerBoundary=160:i===237&&(this.upperBoundary=159),this.bytesNeeded=3,this.codePoint=i&15):i>=240&&i<=244?(i===240&&(this.lowerBoundary=144),i===244&&(this.upperBoundary=143),this.bytesNeeded=4,this.codePoint=i&7):n+="\uFFFD");continue}if(i<this.lowerBoundary||i>this.upperBoundary){this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,n+="\uFFFD";continue}this.lowerBoundary=128,this.upperBoundary=191,this.codePoint=this.codePoint<<6|i&63,this.bytesSeen++,this.bytesSeen===this.bytesNeeded&&(n+=String.fromCodePoint(this.codePoint),this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0)}return n}flush(){let e=this.bytesNeeded>0?"\uFFFD":"";return this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,e}}});var CB=M((vCe,yB)=>{var Une=gB(),Mne=wB();yB.exports=class{constructor(e="utf8"){switch(this.encoding=$ne(e),this.encoding){case"utf8":this.decoder=new Mne;break;case"utf16le":case"base64":throw new Error("Unsupported encoding: "+this.encoding);default:this.decoder=new Une(this.encoding)}}get remaining(){return this.decoder.remaining}push(e){return typeof e=="string"?e:this.decoder.decode(e)}write(e){return this.push(e)}end(e){let n="";return e&&(n=this.push(e)),n+=this.decoder.flush(),n}};function $ne(t){switch(t=t.toLowerCase(),t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:throw new Error("Unknown encoding: "+t)}}});var qT=M((wCe,jB)=>{var{EventEmitter:Hne}=require("events"),xS=new Error("Stream was destroyed"),NT=new Error("Premature close"),IB=kT(),Bne=CB(),en=(1<<29)-1,Qs=1,$T=2,bf=4,vv=8,PB=en^Qs,Wne=en^$T,Sv=16,sp=32,lp=64,Il=128,xv=256,HT=512,Tf=1024,LT=2048,BT=4096,WT=8192,cs=16384,Dl=32768,_S=65536,Rf=131072,bB=xv|HT,jne=Sv|_S,Vne=lp|Sv,Yne=BT|Il,jT=xv|Rf,qne=en^Sv,Gne=en^lp,zne=en^(lp|_S),EB=en^_S,Kne=en^xv,Jne=en^(Il|WT),Xne=en^Tf,SB=en^bB,TB=en^Dl,Zne=en^sp,RB=en^Rf,Qne=en^jT,uc=1<<18,cp=2<<18,_v=4<<18,kf=8<<18,Dv=16<<18,Pl=32<<18,AT=64<<18,ap=128<<18,VT=256<<18,Nf=512<<18,DS=1024<<18,ere=en^(uc|VT),kB=en^_v,tre=en^(uc|Nf),nre=en^Dv,rre=en^kf,NB=en^ap,ore=en^cp,LB=en^DS,wv=Sv|uc,AB=en^wv,YT=cs|Pl,ea=bf|vv|$T,ti=ea|Qs,FB=ea|YT,ire=kB&Gne,IS=ap|Dl,sre=IS&AB,OB=ti|sre,are=ti|Tf|cs,xB=ti|cs|Il,cre=ti|Tf|Il,lre=ti|BT|Il|WT,ure=ti|Sv|Tf|cs|_S|Rf,fre=ea|Tf|cs,dre=sp|ti|Dl|lp,mre=Dl|Qs,pre=ti|Nf|Pl,hre=kf|Dv,UB=kf|uc,gre=kf|Dv|ti|uc,_B=ti|uc|kf|DS,vre=_v|uc,wre=uc|VT,yre=ti|Nf|UB|Pl,Cre=Dv|ea|Nf|Pl,Ere=cp|ti|ap|_v,Sre=Nf|Pl|ea,wS=Symbol.asyncIterator||Symbol("asyncIterator"),yS=class{constructor(e,{highWaterMark:n=16384,map:r=null,mapWritable:o,byteLength:i,byteLengthWritable:s}={}){this.stream=e,this.queue=new IB,this.highWaterMark=n,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=s||i||WB,this.map=o||r,this.afterWrite=Dre.bind(this),this.afterUpdateNextTick=bre.bind(this)}get ended(){return(this.stream._duplexState&Pl)!==0}push(e){return(this.stream._duplexState&Sre)!==0?!1:(this.map!==null&&(e=this.map(e)),this.buffered+=this.byteLength(e),this.queue.push(e),this.buffered<this.highWaterMark?(this.stream._duplexState|=kf,!0):(this.stream._duplexState|=hre,!1))}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=rre),e}end(e){typeof e=="function"?this.stream.once("finish",e):e!=null&&this.push(e),this.stream._duplexState=(this.stream._duplexState|Nf)&kB}autoBatch(e,n){let r=[],o=this.stream;for(r.push(e);(o._duplexState&_B)===UB;)r.push(o._writableState.shift());if((o._duplexState&ti)!==0)return n(null);o._writev(r,n)}update(){let e=this.stream;e._duplexState|=cp;do{for(;(e._duplexState&_B)===kf;){let n=this.shift();e._duplexState|=wre,e._write(n,this.afterWrite)}(e._duplexState&vre)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=ore}updateNonPrimary(){let e=this.stream;if((e._duplexState&yre)===Nf){e._duplexState=e._duplexState|uc,e._final(_re.bind(this));return}if((e._duplexState&ea)===bf){(e._duplexState&IS)===0&&(e._duplexState|=wv,e._destroy(MB.bind(this)));return}(e._duplexState&OB)===Qs&&(e._duplexState=(e._duplexState|wv)&PB,e._open($B.bind(this)))}continueUpdate(){return(this.stream._duplexState&ap)===0?!1:(this.stream._duplexState&=NB,!0)}updateCallback(){(this.stream._duplexState&Ere)===_v?this.update():this.updateNextTick()}updateNextTick(){(this.stream._duplexState&ap)===0&&(this.stream._duplexState|=ap,(this.stream._duplexState&cp)===0&&queueMicrotask(this.afterUpdateNextTick))}},FT=class{constructor(e,{highWaterMark:n=16384,map:r=null,mapReadable:o,byteLength:i,byteLengthReadable:s}={}){this.stream=e,this.queue=new IB,this.highWaterMark=n===0?1:n,this.buffered=0,this.readAhead=n>0,this.error=null,this.pipeline=null,this.byteLength=s||i||WB,this.map=o||r,this.pipeTo=null,this.afterRead=Ire.bind(this),this.afterUpdateNextTick=Pre.bind(this)}get ended(){return(this.stream._duplexState&cs)!==0}pipe(e,n){if(this.pipeTo!==null)throw new Error("Can only pipe to one destination");if(typeof n!="function"&&(n=null),this.stream._duplexState|=HT,this.pipeTo=e,this.pipeline=new UT(this.stream,e,n),n&&this.stream.on("error",DB),Ev(e))e._writableState.pipeline=this.pipeline,n&&e.on("error",DB),e.on("finish",this.pipeline.finished.bind(this.pipeline));else{let r=this.pipeline.done.bind(this.pipeline,e),o=this.pipeline.done.bind(this.pipeline,e,null);e.on("error",r),e.on("close",o),e.on("finish",this.pipeline.finished.bind(this.pipeline))}e.on("drain",xre.bind(this)),this.stream.emit("piping",e),e.emit("pipe",this.stream)}push(e){let n=this.stream;return e===null?(this.highWaterMark=0,n._duplexState=(n._duplexState|Tf)&zne,!1):this.map!==null&&(e=this.map(e),e===null)?(n._duplexState&=EB,this.buffered<this.highWaterMark):(this.buffered+=this.byteLength(e),this.queue.push(e),n._duplexState=(n._duplexState|Il)&EB,this.buffered<this.highWaterMark)}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=Jne),e}unshift(e){let n=[this.map!==null?this.map(e):e];for(;this.buffered>0;)n.push(this.shift());for(let r=0;r<n.length-1;r++){let o=n[r];this.buffered+=this.byteLength(o),this.queue.push(o)}this.push(n[n.length-1])}read(){let e=this.stream;if((e._duplexState&xB)===Il){let n=this.shift();return this.pipeTo!==null&&this.pipeTo.write(n)===!1&&(e._duplexState&=SB),(e._duplexState&LT)!==0&&e.emit("data",n),n}return this.readAhead===!1&&(e._duplexState|=Rf,this.updateNextTick()),null}drain(){let e=this.stream;for(;(e._duplexState&xB)===Il&&(e._duplexState&bB)!==0;){let n=this.shift();this.pipeTo!==null&&this.pipeTo.write(n)===!1&&(e._duplexState&=SB),(e._duplexState&LT)!==0&&e.emit("data",n)}}update(){let e=this.stream;e._duplexState|=sp;do{for(this.drain();this.buffered<this.highWaterMark&&(e._duplexState&ure)===Rf;)e._duplexState|=jne,e._read(this.afterRead),this.drain();(e._duplexState&lre)===Yne&&(e._duplexState|=WT,e.emit("readable")),(e._duplexState&Vne)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=Zne}updateNonPrimary(){let e=this.stream;if((e._duplexState&cre)===Tf&&(e._duplexState=(e._duplexState|cs)&Xne,e.emit("end"),(e._duplexState&FB)===YT&&(e._duplexState|=bf),this.pipeTo!==null&&this.pipeTo.end()),(e._duplexState&ea)===bf){(e._duplexState&IS)===0&&(e._duplexState|=wv,e._destroy(MB.bind(this)));return}(e._duplexState&OB)===Qs&&(e._duplexState=(e._duplexState|wv)&PB,e._open($B.bind(this)))}continueUpdate(){return(this.stream._duplexState&Dl)===0?!1:(this.stream._duplexState&=TB,!0)}updateCallback(){(this.stream._duplexState&dre)===lp?this.update():this.updateNextTick()}updateNextTickIfOpen(){(this.stream._duplexState&mre)===0&&(this.stream._duplexState|=Dl,(this.stream._duplexState&sp)===0&&queueMicrotask(this.afterUpdateNextTick))}updateNextTick(){(this.stream._duplexState&Dl)===0&&(this.stream._duplexState|=Dl,(this.stream._duplexState&sp)===0&&queueMicrotask(this.afterUpdateNextTick))}},OT=class{constructor(e){this.data=null,this.afterTransform=Rre.bind(e),this.afterFinal=null}},UT=class{constructor(e,n,r){this.from=e,this.to=n,this.afterPipe=r,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(e,n){if(n&&(this.error=n),e===this.to&&(this.to=null,this.from!==null)){((this.from._duplexState&cs)===0||!this.pipeToFinished)&&this.from.destroy(this.error||new Error("Writable stream closed prematurely"));return}if(e===this.from&&(this.from=null,this.to!==null)){(e._duplexState&cs)===0&&this.to.destroy(this.error||new Error("Readable stream closed before ending"));return}this.afterPipe!==null&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null}};function xre(){this.stream._duplexState|=HT,this.updateCallback()}function _re(t){let e=this.stream;t&&e.destroy(t),(e._duplexState&ea)===0&&(e._duplexState|=Pl,e.emit("finish")),(e._duplexState&FB)===YT&&(e._duplexState|=bf),e._duplexState&=tre,(e._duplexState&cp)===0?this.update():this.updateNextTick()}function MB(t){let e=this.stream;!t&&this.error!==xS&&(t=this.error),t&&e.emit("error",t),e._duplexState|=vv,e.emit("close");let n=e._readableState,r=e._writableState;if(n!==null&&n.pipeline!==null&&n.pipeline.done(e,t),r!==null){for(;r.drains!==null&&r.drains.length>0;)r.drains.shift().resolve(!1);r.pipeline!==null&&r.pipeline.done(e,t)}}function Dre(t){let e=this.stream;t&&e.destroy(t),e._duplexState&=ere,this.drains!==null&&Tre(this.drains),(e._duplexState&gre)===Dv&&(e._duplexState&=nre,(e._duplexState&AT)===AT&&e.emit("drain")),this.updateCallback()}function Ire(t){t&&this.stream.destroy(t),this.stream._duplexState&=qne,this.readAhead===!1&&(this.stream._duplexState&xv)===0&&(this.stream._duplexState&=RB),this.updateCallback()}function Pre(){(this.stream._duplexState&sp)===0&&(this.stream._duplexState&=TB,this.update())}function bre(){(this.stream._duplexState&cp)===0&&(this.stream._duplexState&=NB,this.update())}function Tre(t){for(let e=0;e<t.length;e++)--t[e].writes===0&&(t.shift().resolve(!0),e--)}function $B(t){let e=this.stream;t&&e.destroy(t),(e._duplexState&bf)===0&&((e._duplexState&are)===0&&(e._duplexState|=lp),(e._duplexState&pre)===0&&(e._duplexState|=_v),e.emit("open")),e._duplexState&=AB,e._writableState!==null&&e._writableState.updateCallback(),e._readableState!==null&&e._readableState.updateCallback()}function Rre(t,e){e!=null&&this.push(e),this._writableState.afterWrite(t)}function kre(t){this._readableState!==null&&(t==="data"&&(this._duplexState|=LT|jT,this._readableState.updateNextTick()),t==="readable"&&(this._duplexState|=BT,this._readableState.updateNextTick())),this._writableState!==null&&t==="drain"&&(this._duplexState|=AT,this._writableState.updateNextTick())}var yv=class extends Hne{constructor(e){super(),this._duplexState=0,this._readableState=null,this._writableState=null,e&&(e.open&&(this._open=e.open),e.destroy&&(this._destroy=e.destroy),e.predestroy&&(this._predestroy=e.predestroy),e.signal&&e.signal.addEventListener("abort",Bre.bind(this))),this.on("newListener",kre)}_open(e){e(null)}_destroy(e){e(null)}_predestroy(){}get readable(){return this._readableState!==null?!0:void 0}get writable(){return this._writableState!==null?!0:void 0}get destroyed(){return(this._duplexState&vv)!==0}get destroying(){return(this._duplexState&ea)!==0}destroy(e){(this._duplexState&ea)===0&&(e||(e=xS),this._duplexState=(this._duplexState|bf)&ire,this._readableState!==null&&(this._readableState.highWaterMark=0,this._readableState.error=e),this._writableState!==null&&(this._writableState.highWaterMark=0,this._writableState.error=e),this._duplexState|=$T,this._predestroy(),this._duplexState&=Wne,this._readableState!==null&&this._readableState.updateNextTick(),this._writableState!==null&&this._writableState.updateNextTick())}},CS=class t extends yv{constructor(e){super(e),this._duplexState|=Qs|Pl|Rf,this._readableState=new FT(this,e),e&&(this._readableState.readAhead===!1&&(this._duplexState&=RB),e.read&&(this._read=e.read),e.eagerOpen&&this._readableState.updateNextTick(),e.encoding&&this.setEncoding(e.encoding))}setEncoding(e){let n=new Bne(e),r=this._readableState.map||Are;return this._readableState.map=o,this;function o(i){let s=n.push(i);return s===""&&(i.byteLength!==0||n.remaining>0)?null:r(s)}}_read(e){e(null)}pipe(e,n){return this._readableState.updateNextTick(),this._readableState.pipe(e,n),e}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(e){return this._readableState.updateNextTickIfOpen(),this._readableState.push(e)}unshift(e){return this._readableState.updateNextTickIfOpen(),this._readableState.unshift(e)}resume(){return this._duplexState|=jT,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=this._readableState.readAhead===!1?Qne:Kne,this}static _fromAsyncIterator(e,n){let r,o=new t({...n,read(s){e.next().then(i).then(s.bind(null,null)).catch(s)},predestroy(){r=e.return()},destroy(s){if(!r)return s(null);r.then(s.bind(null,null)).catch(s)}});return o;function i(s){s.done?o.push(null):o.push(s.value)}}static from(e,n){if(Mre(e))return e;if(e[wS])return this._fromAsyncIterator(e[wS](),n);Array.isArray(e)||(e=e===void 0?[]:[e]);let r=0;return new t({...n,read(o){this.push(r===e.length?null:e[r++]),o(null)}})}static isBackpressured(e){return(e._duplexState&fre)!==0||e._readableState.buffered>=e._readableState.highWaterMark}static isPaused(e){return(e._duplexState&xv)===0}[wS](){let e=this,n=null,r=null,o=null;return this.on("error",l=>{n=l}),this.on("readable",i),this.on("close",s),{[wS](){return this},next(){return new Promise(function(l,u){r=l,o=u;let f=e.read();f!==null?a(f):(e._duplexState&vv)!==0&&a(null)})},return(){return c(null)},throw(l){return c(l)}};function i(){r!==null&&a(e.read())}function s(){r!==null&&a(null)}function a(l){o!==null&&(n?o(n):l===null&&(e._duplexState&cs)===0?o(xS):r({value:l,done:l===null}),o=r=null)}function c(l){return e.destroy(l),new Promise((u,f)=>{if(e._duplexState&vv)return u({value:void 0,done:!0});e.once("close",function(){l?f(l):u({value:void 0,done:!0})})})}}},ES=class extends yv{constructor(e){super(e),this._duplexState|=Qs|cs,this._writableState=new yS(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final),e.eagerOpen&&this._writableState.updateNextTick())}cork(){this._duplexState|=DS}uncork(){this._duplexState&=LB,this._writableState.updateNextTick()}_writev(e,n){n(null)}_write(e,n){this._writableState.autoBatch(e,n)}_final(e){e(null)}static isBackpressured(e){return(e._duplexState&Cre)!==0}static drained(e){if(e.destroyed)return Promise.resolve(!1);let n=e._writableState,o=(Wre(e)?Math.min(1,n.queue.length):n.queue.length)+(e._duplexState&VT?1:0);return o===0?Promise.resolve(!0):(n.drains===null&&(n.drains=[]),new Promise(i=>{n.drains.push({writes:o,resolve:i})}))}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},Cv=class extends CS{constructor(e){super(e),this._duplexState=Qs|this._duplexState&Rf,this._writableState=new yS(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final))}cork(){this._duplexState|=DS}uncork(){this._duplexState&=LB,this._writableState.updateNextTick()}_writev(e,n){n(null)}_write(e,n){this._writableState.autoBatch(e,n)}_final(e){e(null)}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},SS=class extends Cv{constructor(e){super(e),this._transformState=new OT(this),e&&(e.transform&&(this._transform=e.transform),e.flush&&(this._flush=e.flush))}_write(e,n){this._readableState.buffered>=this._readableState.highWaterMark?this._transformState.data=e:this._transform(e,this._transformState.afterTransform)}_read(e){if(this._transformState.data!==null){let n=this._transformState.data;this._transformState.data=null,e(null),this._transform(n,this._transformState.afterTransform)}else e(null)}destroy(e){super.destroy(e),this._transformState.data!==null&&(this._transformState.data=null,this._transformState.afterTransform())}_transform(e,n){n(null,e)}_flush(e){e(null)}_final(e){this._transformState.afterFinal=e,this._flush(Nre.bind(this))}},MT=class extends SS{};function Nre(t,e){let n=this._transformState.afterFinal;if(t)return n(t);e!=null&&this.push(e),this.push(null),n(null)}function Lre(...t){return new Promise((e,n)=>HB(...t,r=>{if(r)return n(r);e()}))}function HB(t,...e){let n=Array.isArray(t)?[...t,...e]:[t,...e],r=n.length&&typeof n[n.length-1]=="function"?n.pop():null;if(n.length<2)throw new Error("Pipeline requires at least 2 streams");let o=n[0],i=null,s=null;for(let l=1;l<n.length;l++)i=n[l],Ev(o)?o.pipe(i,c):(a(o,!0,l>1,c),o.pipe(i)),o=i;if(r){let l=!1,u=Ev(i)||!!(i._writableState&&i._writableState.autoDestroy);i.on("error",f=>{s===null&&(s=f)}),i.on("finish",()=>{l=!0,u||r(s)}),u&&i.on("close",()=>r(s||(l?null:NT)))}return i;function a(l,u,f,m){l.on("error",m),l.on("close",d);function d(){if(u&&l._readableState&&!l._readableState.ended||f&&l._writableState&&!l._writableState.ended)return m(NT)}}function c(l){if(!(!l||s)){s=l;for(let u of n)u.destroy(l)}}}function Are(t){return t}function BB(t){return!!t._readableState||!!t._writableState}function Ev(t){return typeof t._duplexState=="number"&&BB(t)}function Fre(t){return!!t._readableState&&t._readableState.ended}function Ore(t){return!!t._writableState&&t._writableState.ended}function Ure(t,e={}){let n=t._readableState&&t._readableState.error||t._writableState&&t._writableState.error;return!e.all&&n===xS?null:n}function Mre(t){return Ev(t)&&t.readable}function $re(t){return(t._duplexState&Qs)!==Qs||(t._duplexState&IS)!==0}function Hre(t){return typeof t=="object"&&t!==null&&typeof t.byteLength=="number"}function WB(t){return Hre(t)?t.byteLength:1024}function DB(){}function Bre(){this.destroy(new Error("Stream aborted."))}function Wre(t){return t._writev!==ES.prototype._writev&&t._writev!==Cv.prototype._writev}jB.exports={pipeline:HB,pipelinePromise:Lre,isStream:BB,isStreamx:Ev,isEnded:Fre,isFinished:Ore,isDisturbed:$re,getStreamError:Ure,Stream:yv,Writable:ES,Readable:CS,Duplex:Cv,Transform:SS,PassThrough:MT}});var KT=M(fp=>{var ct=ip(),jre="0000000000000000000",Vre="7777777777777777777",PS=48,VB=ct.from([117,115,116,97,114,0]),Yre=ct.from([PS,PS]),qre=ct.from([117,115,116,97,114,32]),Gre=ct.from([32,0]),zre=4095,Iv=257,zT=263;fp.decodeLongPath=function(e,n){return up(e,0,e.length,n)};fp.encodePax=function(e){let n="";e.name&&(n+=GT(" path="+e.name+`
`)),e.linkname&&(n+=GT(" linkpath="+e.linkname+`
`));let r=e.pax;if(r)for(let o in r)n+=GT(" "+o+"="+r[o]+`
`);return ct.from(n)};fp.decodePax=function(e){let n={};for(;e.length;){let r=0;for(;r<e.length&&e[r]!==32;)r++;let o=parseInt(ct.toString(e.subarray(0,r)),10);if(!o)return n;let i=ct.toString(e.subarray(r+1,o-1)),s=i.indexOf("=");if(s===-1)return n;n[i.slice(0,s)]=i.slice(s+1),e=e.subarray(o)}return n};fp.encode=function(e){let n=ct.alloc(512),r=e.name,o="";if(e.typeflag===5&&r[r.length-1]!=="/"&&(r+="/"),ct.byteLength(r)!==r.length)return null;for(;ct.byteLength(r)>100;){let i=r.indexOf("/");if(i===-1)return null;o+=o?"/"+r.slice(0,i):r.slice(0,i),r=r.slice(i+1)}return ct.byteLength(r)>100||ct.byteLength(o)>155||e.linkname&&ct.byteLength(e.linkname)>100?null:(ct.write(n,r),ct.write(n,Tl(e.mode&zre,6),100),ct.write(n,Tl(e.uid,6),108),ct.write(n,Tl(e.gid,6),116),toe(e.size,n,124),ct.write(n,Tl(e.mtime.getTime()/1e3|0,11),136),n[156]=PS+Qre(e.type),e.linkname&&ct.write(n,e.linkname,157),ct.copy(VB,n,Iv),ct.copy(Yre,n,zT),e.uname&&ct.write(n,e.uname,265),e.gname&&ct.write(n,e.gname,297),ct.write(n,Tl(e.devmajor||0,6),329),ct.write(n,Tl(e.devminor||0,6),337),o&&ct.write(n,o,345),ct.write(n,Tl(qB(n),6),148),n)};fp.decode=function(e,n,r){let o=e[156]===0?0:e[156]-PS,i=up(e,0,100,n),s=bl(e,100,8),a=bl(e,108,8),c=bl(e,116,8),l=bl(e,124,12),u=bl(e,136,12),f=Zre(o),m=e[157]===0?null:up(e,157,100,n),d=up(e,265,32),p=up(e,297,32),g=bl(e,329,8),h=bl(e,337,8),v=qB(e);if(v===256)return null;if(v!==bl(e,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(Kre(e))e[345]&&(i=up(e,345,155,n)+"/"+i);else if(!Jre(e)){if(!r)throw new Error("Invalid tar header: unknown format.")}return o===0&&i&&i[i.length-1]==="/"&&(o=5),{name:i,mode:s,uid:a,gid:c,size:l,mtime:new Date(1e3*u),type:f,linkname:m,uname:d,gname:p,devmajor:g,devminor:h,pax:null}};function Kre(t){return ct.equals(VB,t.subarray(Iv,Iv+6))}function Jre(t){return ct.equals(qre,t.subarray(Iv,Iv+6))&&ct.equals(Gre,t.subarray(zT,zT+2))}function Xre(t,e,n){return typeof t!="number"?n:(t=~~t,t>=e?e:t>=0||(t+=e,t>=0)?t:0)}function Zre(t){switch(t){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}function Qre(t){switch(t){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}function YB(t,e,n,r){for(;n<r;n++)if(t[n]===e)return n;return r}function qB(t){let e=256;for(let n=0;n<148;n++)e+=t[n];for(let n=156;n<512;n++)e+=t[n];return e}function Tl(t,e){return t=t.toString(8),t.length>e?Vre.slice(0,e)+" ":jre.slice(0,e-t.length)+t+" "}function eoe(t,e,n){e[n]=128;for(let r=11;r>0;r--)e[n+r]=t&255,t=Math.floor(t/256)}function toe(t,e,n){t.toString(8).length>11?eoe(t,e,n):ct.write(e,Tl(t,11),n)}function noe(t){let e;if(t[0]===128)e=!0;else if(t[0]===255)e=!1;else return null;let n=[],r;for(r=t.length-1;r>0;r--){let s=t[r];e?n.push(s):n.push(255-s)}let o=0,i=n.length;for(r=0;r<i;r++)o+=n[r]*Math.pow(256,r);return e?o:-1*o}function bl(t,e,n){if(t=t.subarray(e,e+n),e=0,t[e]&128)return noe(t);{for(;e<t.length&&t[e]===32;)e++;let r=Xre(YB(t,32,e,t.length),t.length,t.length);for(;e<r&&t[e]===0;)e++;return r===e?0:parseInt(ct.toString(t.subarray(e,r)),8)}}function up(t,e,n,r){return ct.toString(t.subarray(e,YB(t,0,e,e+n)),r)}function GT(t){let e=ct.byteLength(t),n=Math.floor(Math.log(e)/Math.log(10))+1;return e+n>=Math.pow(10,n)&&n++,e+n+t}});var XB=M((CCe,JB)=>{var{Writable:roe,Readable:ooe,getStreamError:GB}=qT(),ioe=kT(),zB=ip(),dp=KT(),soe=zB.alloc(0),XT=class{constructor(){this.buffered=0,this.shifted=0,this.queue=new ioe,this._offset=0}push(e){this.buffered+=e.byteLength,this.queue.push(e)}shiftFirst(e){return this._buffered===0?null:this._next(e)}shift(e){if(e>this.buffered)return null;if(e===0)return soe;let n=this._next(e);if(e===n.byteLength)return n;let r=[n];for(;(e-=n.byteLength)>0;)n=this._next(e),r.push(n);return zB.concat(r)}_next(e){let n=this.queue.peek(),r=n.byteLength-this._offset;if(e>=r){let o=this._offset?n.subarray(this._offset,n.byteLength):n;return this.queue.shift(),this._offset=0,this.buffered-=r,this.shifted+=r,o}return this.buffered-=e,this.shifted+=e,n.subarray(this._offset,this._offset+=e)}},ZT=class extends ooe{constructor(e,n,r){super(),this.header=n,this.offset=r,this._parent=e}_read(e){this.header.size===0&&this.push(null),this._parent._stream===this&&this._parent._update(),e(null)}_predestroy(){this._parent.destroy(GB(this))}_detach(){this._parent._stream===this&&(this._parent._stream=null,this._parent._missing=KB(this.header.size),this._parent._update())}_destroy(e){this._detach(),e(null)}},QT=class extends roe{constructor(e){super(e),e||(e={}),this._buffer=new XT,this._offset=0,this._header=null,this._stream=null,this._missing=0,this._longHeader=!1,this._callback=JT,this._locked=!1,this._finished=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null,this._filenameEncoding=e.filenameEncoding||"utf-8",this._allowUnknownFormat=!!e.allowUnknownFormat,this._unlockBound=this._unlock.bind(this)}_unlock(e){if(this._locked=!1,e){this.destroy(e),this._continueWrite(e);return}this._update()}_consumeHeader(){if(this._locked)return!1;this._offset=this._buffer.shifted;try{this._header=dp.decode(this._buffer.shift(512),this._filenameEncoding,this._allowUnknownFormat)}catch(e){return this._continueWrite(e),!1}if(!this._header)return!0;switch(this._header.type){case"gnu-long-path":case"gnu-long-link-path":case"pax-global-header":case"pax-header":return this._longHeader=!0,this._missing=this._header.size,!0}return this._locked=!0,this._applyLongHeaders(),this._header.size===0||this._header.type==="directory"?(this.emit("entry",this._header,this._createStream(),this._unlockBound),!0):(this._stream=this._createStream(),this._missing=this._header.size,this.emit("entry",this._header,this._stream,this._unlockBound),!0)}_applyLongHeaders(){this._gnuLongPath&&(this._header.name=this._gnuLongPath,this._gnuLongPath=null),this._gnuLongLinkPath&&(this._header.linkname=this._gnuLongLinkPath,this._gnuLongLinkPath=null),this._pax&&(this._pax.path&&(this._header.name=this._pax.path),this._pax.linkpath&&(this._header.linkname=this._pax.linkpath),this._pax.size&&(this._header.size=parseInt(this._pax.size,10)),this._header.pax=this._pax,this._pax=null)}_decodeLongHeader(e){switch(this._header.type){case"gnu-long-path":this._gnuLongPath=dp.decodeLongPath(e,this._filenameEncoding);break;case"gnu-long-link-path":this._gnuLongLinkPath=dp.decodeLongPath(e,this._filenameEncoding);break;case"pax-global-header":this._paxGlobal=dp.decodePax(e);break;case"pax-header":this._pax=this._paxGlobal===null?dp.decodePax(e):Object.assign({},this._paxGlobal,dp.decodePax(e));break}}_consumeLongHeader(){this._longHeader=!1,this._missing=KB(this._header.size);let e=this._buffer.shift(this._header.size);try{this._decodeLongHeader(e)}catch(n){return this._continueWrite(n),!1}return!0}_consumeStream(){let e=this._buffer.shiftFirst(this._missing);if(e===null)return!1;this._missing-=e.byteLength;let n=this._stream.push(e);return this._missing===0?(this._stream.push(null),n&&this._stream._detach(),n&&this._locked===!1):n}_createStream(){return new ZT(this,this._header,this._offset)}_update(){for(;this._buffer.buffered>0&&!this.destroying;){if(this._missing>0){if(this._stream!==null){if(this._consumeStream()===!1)return;continue}if(this._longHeader===!0){if(this._missing>this._buffer.buffered)break;if(this._consumeLongHeader()===!1)return!1;continue}let e=this._buffer.shiftFirst(this._missing);e!==null&&(this._missing-=e.byteLength);continue}if(this._buffer.buffered<512)break;if(this._stream!==null||this._consumeHeader()===!1)return}this._continueWrite(null)}_continueWrite(e){let n=this._callback;this._callback=JT,n(e)}_write(e,n){this._callback=n,this._buffer.push(e),this._update()}_final(e){this._finished=this._missing===0&&this._buffer.buffered===0,e(this._finished?null:new Error("Unexpected end of data"))}_predestroy(){this._continueWrite(null)}_destroy(e){this._stream&&this._stream.destroy(GB(this)),e(null)}[Symbol.asyncIterator](){let e=null,n=null,r=null,o=null,i=null,s=this;return this.on("entry",l),this.on("error",m=>{e=m}),this.on("close",u),{[Symbol.asyncIterator](){return this},next(){return new Promise(c)},return(){return f(null)},throw(m){return f(m)}};function a(m){if(!i)return;let d=i;i=null,d(m)}function c(m,d){if(e)return d(e);if(o){m({value:o,done:!1}),o=null;return}n=m,r=d,a(null),s._finished&&n&&(n({value:void 0,done:!0}),n=r=null)}function l(m,d,p){i=p,d.on("error",JT),n?(n({value:d,done:!1}),n=r=null):o=d}function u(){a(e),n&&(e?r(e):n({value:void 0,done:!0}),n=r=null)}function f(m){return s.destroy(m),a(m),new Promise((d,p)=>{if(s.destroyed)return d({value:void 0,done:!0});s.once("close",function(){m?p(m):d({value:void 0,done:!0})})})}}};JB.exports=function(e){return new QT(e)};function JT(){}function KB(t){return t&=511,t&&512-t}});var QB=M((ECe,eR)=>{var ZB={S_IFMT:61440,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960};try{eR.exports=require("fs").constants||ZB}catch{eR.exports=ZB}});var oW=M((SCe,rW)=>{var{Readable:aoe,Writable:coe,getStreamError:eW}=qT(),Lf=ip(),mp=QB(),bS=KT(),loe=493,uoe=420,tW=Lf.alloc(1024),nR=class extends coe{constructor(e,n,r){super({mapWritable:doe,eagerOpen:!0}),this.written=0,this.header=n,this._callback=r,this._linkname=null,this._isLinkname=n.type==="symlink"&&!n.linkname,this._isVoid=n.type!=="file"&&n.type!=="contiguous-file",this._finished=!1,this._pack=e,this._openCallback=null,this._pack._stream===null?this._pack._stream=this:this._pack._pending.push(this)}_open(e){this._openCallback=e,this._pack._stream===this&&this._continueOpen()}_continuePack(e){if(this._callback===null)return;let n=this._callback;this._callback=null,n(e)}_continueOpen(){this._pack._stream===null&&(this._pack._stream=this);let e=this._openCallback;if(this._openCallback=null,e!==null){if(this._pack.destroying)return e(new Error("pack stream destroyed"));if(this._pack._finalized)return e(new Error("pack stream is already finalized"));this._pack._stream=this,this._isLinkname||this._pack._encode(this.header),this._isVoid&&(this._finish(),this._continuePack(null)),e(null)}}_write(e,n){if(this._isLinkname)return this._linkname=this._linkname?Lf.concat([this._linkname,e]):e,n(null);if(this._isVoid)return e.byteLength>0?n(new Error("No body allowed for this entry")):n();if(this.written+=e.byteLength,this._pack.push(e))return n();this._pack._drain=n}_finish(){this._finished||(this._finished=!0,this._isLinkname&&(this.header.linkname=this._linkname?Lf.toString(this._linkname,"utf-8"):"",this._pack._encode(this.header)),nW(this._pack,this.header.size),this._pack._done(this))}_final(e){if(this.written!==this.header.size)return e(new Error("Size mismatch"));this._finish(),e(null)}_getError(){return eW(this)||new Error("tar entry destroyed")}_predestroy(){this._pack.destroy(this._getError())}_destroy(e){this._pack._done(this),this._continuePack(this._finished?null:this._getError()),e()}},rR=class extends aoe{constructor(e){super(e),this._drain=tR,this._finalized=!1,this._finalizing=!1,this._pending=[],this._stream=null}entry(e,n,r){if(this._finalized||this.destroying)throw new Error("already finalized or destroyed");typeof n=="function"&&(r=n,n=null),r||(r=tR),(!e.size||e.type==="symlink")&&(e.size=0),e.type||(e.type=foe(e.mode)),e.mode||(e.mode=e.type==="directory"?loe:uoe),e.uid||(e.uid=0),e.gid||(e.gid=0),e.mtime||(e.mtime=new Date),typeof n=="string"&&(n=Lf.from(n));let o=new nR(this,e,r);return Lf.isBuffer(n)?(e.size=n.byteLength,o.write(n),o.end(),o):(o._isVoid,o)}finalize(){if(this._stream||this._pending.length>0){this._finalizing=!0;return}this._finalized||(this._finalized=!0,this.push(tW),this.push(null))}_done(e){e===this._stream&&(this._stream=null,this._finalizing&&this.finalize(),this._pending.length&&this._pending.shift()._continueOpen())}_encode(e){if(!e.pax){let n=bS.encode(e);if(n){this.push(n);return}}this._encodePax(e)}_encodePax(e){let n=bS.encodePax({name:e.name,linkname:e.linkname,pax:e.pax}),r={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:n.byteLength,mtime:e.mtime,type:"pax-header",linkname:e.linkname&&"PaxHeader",uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};this.push(bS.encode(r)),this.push(n),nW(this,n.byteLength),r.size=e.size,r.type=e.type,this.push(bS.encode(r))}_doDrain(){let e=this._drain;this._drain=tR,e()}_predestroy(){let e=eW(this);for(this._stream&&this._stream.destroy(e);this._pending.length;){let n=this._pending.shift();n.destroy(e),n._continueOpen()}this._doDrain()}_read(e){this._doDrain(),e()}};rW.exports=function(e){return new rR(e)};function foe(t){switch(t&mp.S_IFMT){case mp.S_IFBLK:return"block-device";case mp.S_IFCHR:return"character-device";case mp.S_IFDIR:return"directory";case mp.S_IFIFO:return"fifo";case mp.S_IFLNK:return"symlink"}return"file"}function tR(){}function nW(t,e){e&=511,e&&t.push(tW.subarray(0,512-e))}function doe(t){return Lf.isBuffer(t)?t:Lf.from(t)}});var iW=M(oR=>{oR.extract=XB();oR.pack=oW()});var iR=M((bCe,cW)=>{cW.exports=function(e,n,r){e(n),r&&r(n===!0?null:n)}});var RS=M((TCe,uW)=>{"use strict";var lW=iR();uW.exports=function(e,n){if(!e)return function(o,i){return o?lW(i,o,n):i(!0)};Array.isArray(e)||(e=Object.keys(e).map(function(o){return e[o]}));var r=0;return function(o,i){if(o)return lW(i,o,n);r>=e.length?i(!0):i(null,e[r++])}}});var dW=M((RCe,fW)=>{"use strict";var hoe=RS();fW.exports=function(t){return hoe(Object.keys(t))}});var sR=M((kCe,mW)=>{"use strict";var goe=iR();mW.exports=function(e,n){return function(r,o){if(r)return goe(o,r,n);if(e!=null){var i=e;e=null,o(null,i)}else o(!0)}}});var hW=M((NCe,pW)=>{"use strict";pW.exports=function(e){var n=0;return e=e||1/0,function(r,o){if(r)return o&&o(r);if(n>e)return o(!0);o(null,n++)}}});var vW=M((LCe,gW)=>{"use strict";gW.exports=function(e){return e=e||Math.random,function(n,r){return n?r&&r(n):r(null,e())}}});var yW=M((ACe,wW)=>{"use strict";wW.exports=function(){return function(e,n){n(!0)}}});var EW=M((FCe,CW)=>{"use strict";CW.exports=function(e){return function(n,r){r(e)}}});var xW=M((OCe,SW)=>{"use strict";SW.exports={keys:dW(),once:sR(),values:RS(),count:hW(),infinite:vW(),empty:yW(),error:EW()}});var pp=M((UCe,_W)=>{"use strict";_W.exports=function(e,n){var r,o,i;n||(i=new Error("no done callback supplied"));function s(a){if(r=a,o)return s.abort();(function c(){for(var l=!0,u=!1;l;)if(u=!1,r(null,function(f,m){if(u=!0,f=f||o){if(l=!1,n)n(f===!0?null:f);else if(f&&f!==!0)throw console.warn(i),f}else e&&e(m)===!1||o?(l=!1,r(o||!0,n||function(){})):l||c()}),!u){l=!1;return}})()}return s.abort=function(a,c){if(typeof a=="function"&&(c=a,a=!0),o=a||!0,r)return r(o,c||function(){})},s}});var IW=M((MCe,DW)=>{"use strict";var voe=pp();DW.exports=function(e){return voe(null,e)}});var bW=M(($Ce,PW)=>{"use strict";var woe=pp();PW.exports=function(e){return woe(function(n){console.log(n)},e)}});var hp=M((HCe,TW)=>{TW.exports=function(e){return e&&(typeof e=="string"?function(n){return n[e]}:typeof e=="object"&&typeof e.exec=="function"?function(n){var r=e.exec(n);return r&&r[0]}:e)}});var NW=M((BCe,kW)=>{"use strict";function RW(t){return t}var yoe=hp(),Coe=pp();kW.exports=function(e,n){var r=!1;return n?e=yoe(e)||RW:(n=e,e=RW),Coe(function(o){if(e(o))return r=!0,n(null,o),!1},function(o){r||n(o===!0?null:o,null)})}});var kS=M((WCe,LW)=>{"use strict";var Eoe=pp();LW.exports=function(e,n,r){r||(r=n,n=null);var o=Eoe(function(i){n=e(n,i)},function(i){r(i,n)});return arguments.length===2?function(i){i(null,function(s,a){if(s)return r(s===!0?null:s);n=a,o(i)})}:o}});var aR=M((jCe,AW)=>{"use strict";var Soe=kS();AW.exports=function(e){return Soe(function(n,r){return n.push(r),n},[],e)}});var OW=M((VCe,FW)=>{"use strict";var xoe=aR();FW.exports=function(){return e=>{let n,r,o=new Promise((i,s)=>{n=i,r=s});return xoe((i,s)=>{i?r(i):n(s)})(e),o}}});var MW=M((YCe,UW)=>{"use strict";var _oe=kS();UW.exports=function(e){return _oe(function(n,r){return n+r},"",e)}});var HW=M((qCe,$W)=>{"use strict";$W.exports={drain:pp(),onEnd:IW(),log:bW(),find:NW(),reduce:kS(),collect:aR(),collectAsPromise:OW(),concat:MW()}});var WW=M((GCe,BW)=>{"use strict";function Doe(t){return t}var Ioe=hp();BW.exports=function(e){return e?(e=Ioe(e),function(n){return function(r,o){n(r,function(i,s){try{s=i?null:e(s)}catch(a){return n(a,function(){return o(a)})}o(i,s)})}}):Doe}});var VW=M((zCe,jW)=>{"use strict";function Poe(t){return t}var boe=hp();jW.exports=function(e){if(!e)return Poe;e=boe(e);var n=!1,r,o;return function(i){return function s(a,c){if(o)return c(o);a?(o=a,n?i(a,function(l){n?r=c:c(a)}):i(a,function(l){c(a)})):i(null,function(l,u){l?c(l):o?c(o):(n=!0,e(u,function(f,m){n=!1,o?(c(o),r&&r(o)):f?s(f,c):c(null,m)}))})}}}});var cR=M((KCe,YW)=>{var Toe=hp();function Roe(t){return t}YW.exports=function(e){return typeof e=="object"&&typeof e.test=="function"?function(n){return e.test(n)}:Toe(e)||Roe}});var NS=M((JCe,qW)=>{"use strict";var koe=cR();qW.exports=function(e){return e=koe(e),function(n){return function r(o,i){for(var s,a=!0;a;)a=!1,s=!0,n(o,function(c,l){if(!c&&!e(l))return s?a=!0:r(c,i);i(c,l)}),s=!1}}}});var zW=M((XCe,GW)=>{"use strict";var Noe=cR(),Loe=NS();GW.exports=function(e){return e=Noe(e),Loe(function(n){return!e(n)})}});var JW=M((ZCe,KW)=>{"use strict";KW.exports=function(e,n){var r=!1;function o(i){r||!n||(r=!0,n(i===!0?null:i))}return function(i){return function(s,a){return s&&o(s),i(s,function(c,l){c?o(c):e&&e(l),a(c,l)})}}}});var ZW=M((QCe,XW)=>{"use strict";XW.exports=function(e,n){n=n||{};var r=n.last||!1,o=!1;if(typeof e=="number"){r=!0;var i=e;e=function(){return--i}}return function(s){function a(c){s(!0,function(l){r=!1,c(l||!0)})}return function(c,l){o&&!c?r?a(l):l(o):(o=c)?s(o,l):s(null,function(u,f){(o=o||u)?l(o):e(f)?l(null,f):(o=!0,r?l(null,f):a(l))})}}}});var lR=M((eEe,QW)=>{"use strict";function Aoe(t){return t}var Foe=hp(),Ooe=NS();QW.exports=function(e,n){e=Foe(e)||Aoe;var r={};return Ooe(function(o){var i=e(o);return r[i]?!!n:(r[i]=!0,!n)})}});var tj=M((tEe,ej)=>{"use strict";var Uoe=lR();ej.exports=function(e){return Uoe(e,!0)}});var rj=M((nEe,nj)=>{"use strict";var Moe=RS(),$oe=sR();nj.exports=function(){return function(e){var n;return function(r,o){r?n?n(r,function(a){e(a||r,o)}):e(r,o):n?i():s();function i(){n(null,function(a,c){a?a===!0?s():e(!0,function(l){o(a)}):o(null,c)})}function s(){n=null,e(null,function(a,c){if(a)return o(a);c&&typeof c=="object"?c=Moe(c):typeof c!="function"&&(c=$oe(c)),n=c,i()})}}}}});var ij=M((rEe,oj)=>{"use strict";oj.exports={map:WW(),asyncMap:VW(),filter:NS(),filterNot:zW(),through:JW(),take:ZW(),unique:lR(),nonUnique:tj(),flatten:rj()}});var uR=M((oEe,sj)=>{"use strict";sj.exports=function t(e){var n=arguments.length;if(typeof e=="function"&&e.length===1){for(var r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return function(a){if(r==null)throw new TypeError("partial sink should only be called once!");var c=r;switch(r=null,n){case 1:return t(a,c[0]);case 2:return t(a,c[0],c[1]);case 3:return t(a,c[0],c[1],c[2]);case 4:return t(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),t.apply(null,c)}}}var i=e;i&&typeof i.source=="function"&&(i=i.source);for(var o=1;o<n;o++){var s=arguments[o];typeof s=="function"?i=s(i):s&&typeof s=="object"&&(s.sink(i),i=s.source)}return i}});var bv=M((Af,uj)=>{"use strict";var aj=xW(),cj=HW(),lj=ij();Af=uj.exports=uR();Af.pull=Af;for(ls in aj)Af[ls]=aj[ls];var ls;for(ls in lj)Af[ls]=lj[ls];var ls;for(ls in cj)Af[ls]=cj[ls];var ls});var ER=M((LEe,Nj)=>{var NEe=Nj.exports=function(t){(function e(){var n=!0,r=!1,o=!1;do o=!0,n=!1,t.call(this,function(){o?n=!0:e()}),o=!1;while(n)})()}});var Aj=M((AEe,Lj)=>{var nie=ER();Lj.exports=function(t,e){return function(n){var r=[],o,i;function s(l){r.push(l)}t=t||function(l){this.queue(l)},e=e||function(){this.queue(null)};var a={emit:function(l,u){l=="data"&&s(u),l=="end"&&(o=!0,s(null)),l=="error"&&(i=u)},queue:s},c;return function(l,u){if(o=o||l,l)return n(l,function(){if(c){var f=c;c=null,f(l)}u(l)});c=u,nie(function f(m){if(c)if(u=c,i)c=null,u(i);else if(r.length){var d=r.shift();c=null,u(d===null,d)}else n(o,function(p,g){if(p&&p!==!0)return i=p,m();if(o=o||p)e.call(a);else if(g!==null&&(t.call(a,g),i||o))return n(i||o,function(){c=null,u(i||o)});m(f)})})}}}});var Oj=M((FEe,Fj)=>{Fj.exports=function(){var t=[],e=0;function n(){return t.reduce(function(r,o){return r+o.length},0)}return{length:e,data:this,add:function(r){if(!Buffer.isBuffer(r))throw new Error("data must be a buffer, was: "+JSON.stringify(r));return this.length=e=e+r.length,t.push(r),this},has:function(r){return r==null?e>0:e>=r},get:function(r){var o;if(r==null||r===e){e=0;var i=t;return t=[],i.length==1?i[0]:Buffer.concat(i)}else if(t.length>1&&r<=(o=t[0].length)){var s=t[0].slice(0,r);return r===o?t.shift():t[0]=t[0].slice(r,o),e-=r,s}else if(r<e){for(var a=[],c=0;c+t[0].length<r;){var l=t.shift();c+=l.length,a.push(l)}return c<r&&(a.push(t[0].slice(0,r-c)),t[0]=t[0].slice(r-c,t[0].length),this.length=e=e-r),Buffer.concat(a)}else throw new Error("could not get "+r+" bytes")}}}});var Hj=M((OEe,$j)=>{"use strict";var rie=Oj();function oie(t){return Number.isFinite(t)}function Uj(t){return typeof t=="function"}function Mj(t,e){return e?function(n,r){var o=setTimeout(function(){t(new Error("pull-reader: read exceeded timeout"),r)},e);t(n,function(i,s){clearTimeout(o),r(i,s)})}:t}$j.exports=function(t){var e=[],n,r,o=!1,i=rie(),s,a,c;function l(){for(;e.length;)if(e[0].length==null&&i.has(1))e.shift().cb(null,i.get());else if(i.has(e[0].length)){var m=e.shift();m.cb(null,i.get(m.length))}else if(s==!0&&e[0].length&&i.length<e[0].length){var d="stream ended with:"+i.length+" but wanted:"+e[0].length;e.shift().cb(new Error(d))}else if(s)e.shift().cb(s);else return!!e.length;return e.length||!i.has(1)||c}function u(){var m=l();m&&!o&&n&&!o&&!a&&(o=!0,r(null,function(d,p){if(o=!1,d)return s=d,l();i.add(p),u()}))}function f(m){if(c){for(;e.length;)e.shift().cb(c);return cb&&cb(c)}r=Mj(m,t),n=m,u()}return f.abort=function(m,d){c=m||!0,n?(o=!0,n(c,function(){for(;e.length;)e.shift().cb(c);d&&d(c)})):d()},f.read=function(m,d,p){if(Uj(d)&&(p=d,d=t),Uj(p))e.push({length:oie(m)?m:null,cb:p}),u();else return a=!0,function(g,h){if(o||i.has(1)){if(g)return n(g,h);e.push({length:null,cb:h}),u()}else Mj(n,d)(g,function(v,C){h(v,C)})}},f}});var Zj=M((Of,Xj)=>{var iie=Aj(),sie=Hj(),Bj=WC(),Wj=0,jj=1,Vj=2,Yj="GOODBYE";function qj(t){let e=Buffer.alloc(9),n=0,r=t.value!==void 0?t.value:t.end;return typeof t=="string"&&t===Yj?(e.fill(0),[e,null]):(typeof r=="string"?(n=jj,r=Buffer.from(r,"utf-8")):Buffer.isBuffer(r)?n=Wj:(n=Vj,r=Buffer.from(JSON.stringify(r),"utf-8")),n=t.stream<<3|t.end<<2|n,e[0]=n,e.writeUInt32BE(r.length,1),e.writeInt32BE(t.req||0,5),[e,r])}function Gj(t){if(t.length!==9)throw new Error("expected header to be 9 bytes long");let e=t[0],n=t.readUInt32BE(1);return{req:t.readInt32BE(5),stream:!!(e&8),end:!!(e&4),value:null,length:n,type:e&3}}function zj(t,e){if(t.length!==e.length)throw new Error("incorrect length, expected:"+e.length+" found:"+t.length);if(e.type===Wj)e.value=t;else if(e.type===jj)e.value=t.toString();else if(e.type===Vj)e.value=JSON.parse(t.toString());else throw new Error("unknown message type");return e}function Kj(t){return iie(function(n){t&&t("encoded: %o",n);let[r,o]=qj(n);this.queue(r),o!==null&&this.queue(o)})}function Jj(t){let e=sie(),n=!1;return function(o){return e(o),function(s,a){if(n)return a(!0);if(s)return e.abort(s,a);e.read(9,function(l,u){if(l)return a(l);let f=Gj(u);if(f.length===0)return n=!0,a(null,Yj);e.read(f.length,function(d,p){if(d)return a(d);try{zj(p,f)}catch(g){return a(g)}t&&t("decoded: %o",f),a(null,f)})})}}}Of=Xj.exports=function(e,n){let r=n===!0?Bj("packet-stream-codec"):typeof n=="string"?Bj(n):null;return{source:Kj(r)(e.source),sink(o){return e.sink(Jj(r)(o))}}};Of.encodePair=qj;Of.decodeHead=Gj;Of.decodeBody=zj;Of.encode=Kj;Of.decode=Jj});var SR=M((UEe,Qj)=>{function aie(t){return t&&(t===!0?!0:{message:t.message,name:t.name,stack:t.stack})}function cie(t){console.error("packet-stream asked to read after closed",t)}Qj.exports={flat:aie,closedread:cie}});var nV=M((MEe,tV)=>{var{flat:eV,closedread:lie}=SR();function OS(t,e,n){this.id=t,this.read=null,this.writeEnd=null,this.readEnd=null,this._ps=e,this._remove=n}OS.prototype.write=function(t,e){let n=this._ps;e?(this.writeEnd=e,n&&(n.read({req:this.id,stream:!0,end:!0,value:eV(e)}),this.readEnd&&this.destroy(e),n._maybedone(e))):n&&n.read({req:this.id,stream:!0,end:!1,value:t})};OS.prototype.end=function(t){this.write(null,eV(t||!0))};OS.prototype.destroy=function(t){if(this.writeEnd){if(!this.readEnd){this.readEnd=!0;try{this.read&&this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}}else{if(this.writeEnd=!0,!this.readEnd){this.readEnd=!0;try{this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}this.write(null,t)}this._ps&&(this._remove(),this._remove=null,this.read=lie,this._ps=null)};tV.exports=OS});var iV=M(($Ee,oV)=>{var rV=nV(),{flat:xR,closedread:uie}=SR();function Ui(t){this.ended=!1,this.opts=t,this._req_counter=1,this._requests=new Map,this._instreams=new Map,this._outstreams=new Map,this._closecbs=[],this._closing=!1,this._closed=!1,t.close&&this._closecbs.push(t.close)}Ui.prototype.message=function(t){this.read({req:0,stream:!1,end:!1,value:t})};Ui.prototype.request=function(t,e){if(this._closing)return e(new Error("parent stream is closing"));let n=this._req_counter++;this._requests.set(n,(r,o)=>{this._requests.delete(n),e(r,o),this._maybedone(r)}),this.read({req:n,stream:!1,end:!1,value:t})};Ui.prototype.stream=function(){if(this._closing)throw new Error("parent stream is closing");let t=this._req_counter++,e=new rV(t,this,()=>{this._outstreams.delete(t)});return this._outstreams.set(t,e),e};Ui.prototype.close=function(t){if(!t)throw new Error("packet-stream.close *must* have callback");if(this._closed)return t();this._closecbs.push(t),this._closing=!0,this._maybedone()};Ui.prototype.destroy=function(t){t=t||xR(t),this.ended=t,this._closing=!0;let e=t===!0?new Error("unexpected end of parent stream"):t,n=0;this._requests.forEach(r=>{n++,r(e)}),this._instreams.forEach(r=>{n++,r.writeEnd=!0,r.destroy(e)}),this._outstreams.forEach(r=>{n++,r.writeEnd=!0,r.destroy(e)}),n===0&&t===!0&&(e=null),this._maybedone(e)};Ui.prototype._maybedone=function(t){this._closed||!this._closing||this._requests.size!==0||this._instreams.size!==0||this._outstreams.size!==0||(this.read(null,t||!0),this._closed=!0,this._closecbs.forEach(e=>{e(t)}),this.opts=null,this._closecbs.length=0,this.read=uie,this._requests.clear(),this._instreams.clear(),this._outstreams.clear())};Ui.prototype.read=function(t){console.error("please overwrite read method to do IO",t)};Ui.prototype.write=function(t,e){this.ended||(e?this.destroy(e):t.req&&!t.stream?this._onrequest(t):t.req&&t.stream?this._onstream(t):this._onmessage(t))};Ui.prototype._onmessage=function(t){this.opts&&typeof this.opts.message=="function"&&this.opts.message(t.value)};Ui.prototype._onrequest=function(t){let e=t.req*-1;if(t.req<0)this._requests.has(e)&&this._requests.get(e)(t.end?t.value:null,t.end?null:t.value);else if(this.opts&&typeof this.opts.request=="function"){let n=!1;this.opts.request(t.value,(r,o)=>{if(n)throw new Error("cb called twice from local api");n=!0,r?this.read({value:xR(r),end:!0,req:e}):this.read({value:o,end:!1,req:e}),this._maybedone()})}else{if(this.ended){let n=this.ended===!0?new Error("unexpected end of parent stream"):this.ended;this.read({value:xR(n),end:!0,stream:!1,req:e})}else this.read({value:{message:"Unable to handle requests",name:"NO_REQUEST_HANDLER",stack:null},end:!0,stream:!1,req:e});this._maybedone()}};Ui.prototype._onstream=function(t){if(t.req<0){let e=t.req*-1,n=this._outstreams.get(e);if(!n)return console.error("no stream for incoming msg",t);t.end?(n.writeEnd&&this._outstreams.delete(e),n.readEnd=!0,n.read(null,t.value),this._maybedone()):n.read(t.value)}else{let e=t.req,n=this._instreams.get(e);n||(n=new rV(e*-1,this,()=>{this._instreams.delete(e)}),this._instreams.set(e,n),this.opts&&typeof this.opts.stream=="function"&&this.opts.stream(n)),t.end?(n.writeEnd&&this._instreams.delete(e),n.readEnd=!0,n.read&&n.read(null,t.value),this._maybedone()):n.read?n.read(t.value):console.error("no .read for stream:",n.id,"dropped:",t)}};oV.exports=t=>new Ui(t)});var aV=M((HEe,Nv)=>{"use strict";var fie=bv();function die(t){let e=!1;return(n,r)=>{e||(e=!0,t(n,r))}}function _R(t,e){let n=[],r=!1,o=!1,i,s,a=die((c,l)=>{e&&e(c,l),t=null,e=null,i=null,s&&s(c||!0,()=>{})});return t.read=function(c,l){if(r=r||l,i){let u=i;i=null,u(r,c)}else!r&&!o&&n.push(c);r&&a(r!==!0?r:null)},{source(c,l){c?(t&&t.write(null,c),l(c),n.length=0,o=!0,a(c!==!0?c:null)):n.length?l(null,n.shift()):r?l(r):i=l},sink(c){if(r)return s=null,c(r,()=>{});s=c,fie.drain(l=>{if(r)return!1;t.write(l)},l=>{t&&!t.writeEnd&&t.write(null,l||!0),a&&a(l)})(c)}}}function sV(t,e){return _R(t,n=>{t.writeEnd||t.write(null,n||!0),e&&e(n)})}function mie(t){return sV(t).source}function pie(t,e){return sV(t,e).sink}Nv.exports=_R;Nv.exports.source=mie;Nv.exports.sink=pie;Nv.exports.duplex=_R});var lV=M((BEe,cV)=>{cV.exports=function(e){var n,r,o;function i(s){return function(a,c){s(a,function(l,u){if(l&&!o)return o=!0,c(null,e);l&&n?c(l):l?r=c:c(null,u)})}}return i.end=function(){return n=!0,r&&r(n),i},i}});var fV=M((WEe,uV)=>{var hie=lV(),DR=bv();uV.exports=function(t,e){e=e||"GOODBYE";var n=hie(e);return{source:DR(t.source,n),sink:DR(DR.filter(function(r){if(r!==e)return!0;n.end()}),t.sink)}}});var Lv=M(fs=>{"use strict";var US=bv();function gie(t){return t?Object.keys(t).length===0:!0}fs.set=function(e,n,r){let o,i;for(let s=0;s<n.length;s++){let a=n[s];e[a]=e[a]||{},o=e,i=a,e=e[a]}o[i]=r};fs.get=function(e,n){if(typeof n=="string")return e[n];let r;for(let o=0;o<n.length;o++){let i=n[o];if(r=e=e[i],e==null)return e}return r};fs.prefix=function(e,n){let r;for(let o=0;o<n.length;o++){let i=n[o];if(r=e=e[i],typeof e!="object")return e}return typeof r!="object"?!!r:!1};function vie(t,e){for(let n in e){let r=e[n];t[r]||(t[r]={}),t=t[r]}return t}function wie(t,e){(function n(r,o){let i=e[o];if(r)e.length-1===o?delete r[i]:o<e.length&&n(r[i],o+1);else return;gie(r[i])&&delete r[i]})(t,0)}function yie(t,e){for(let n in e)t[n]=e[n];return t}fs.mount=function(e,n,r){if(!Array.isArray(n))throw new Error("path must be array of strings");return yie(vie(e,n),r)};fs.unmount=function(e,n){return wie(e,n)};var MS=t=>t==="source",$S=t=>t==="sink",IR=t=>t==="duplex",Cie=t=>t==="sync",Eie=t=>t==="async",dV=t=>Cie(t)||Eie(t),Sie=t=>MS(t)||$S(t)||IR(t);fs.isRequest=dV;fs.isStream=Sie;function PR(t){return function(e){e(t||!0,()=>{})}}function mV(t){return{source:US.error(t),sink:PR(t)}}fs.errorAsStream=function(e,n){return MS(e)?US.error(n):$S(e)?PR(n):mV(n)};fs.errorAsStreamOrCb=function(e,n,r){return dV(e)?r(n):IR(e)?mV(n):MS(e)?US.error(n):$S(e)?PR(n):r(n)};fs.pipeToStream=function(e,n,r){MS(e)?n(r):$S(e)?r(n):IR(e)&&US(n,r,n)}});var bR=M((VEe,pV)=>{"use strict";function xie(t){return typeof t=="string"?[`Error: ${t}`]:t.stack?t.stack.split(`
`):[`${t.name}: ${t.message}`]}pV.exports=function(e,n){let r=new Error(n),o=r.stack.split(`
`);o.splice(1,1);let i=xie(e);i[0]="  "+i[0];for(let s=1;s<o.length;s++)if(i.includes(o[s])){o.splice(s);break}return r.stack=o.concat(i).join(`
`),r}});var wV=M((YEe,vV)=>{"use strict";var _ie=iV(),TR=aV(),Die=fV(),wp=Lv(),hV=bR(),gV=WC()("muxrpc:psc");vV.exports=function(e,n,r){let o=_ie({message(){},request(s,a){if(!Array.isArray(s.args))return a(new Error(`invalid request, args should be array, was: ${JSON.stringify(s)}`));let c=s.name,l=s.args,u=!1,f=!1;l.push((m,d)=>{f=!0,u=!0,a(m,d)});try{e("async",c,l)}catch(m){if(u||f)throw hV(m,"no callback provided to muxrpc async funtion");a(m)}},stream(s){s.read=function(c,l){if(l)return s.write(null,l);let{name:u,type:f,args:m}=c,d,p;if(s.read=null,!wp.isStream(f))return s.write(null,new Error(`unsupported stream type: ${f}`));try{p=e(f,u,m)}catch(v){d=v}let h=TR[f==="source"?"sink":f==="sink"?"source":"duplex"](s);return wp.pipeToStream(f,h,d?wp.errorAsStream(f,d):p)}},close(s){if(o=null,i.ended=!0,!i.closed&&(i.closed=!0,r)){let a=r;r=null,a(s)}}}),i=Die(TR(o,()=>{}));return i=n?n(i,gV.enabled?gV.namespace:!1):i,i.remoteCall=function(s,a,c,l){if(a==="emit")return o.message(c);if(!(wp.isRequest(s)||wp.isStream(s)))throw new Error(`unsupported type: ${JSON.stringify(s)}`);if(wp.isRequest(s))return o.request({name:a,args:c},l);let u=o.stream(),f=TR[s](u,l);return u.write({name:a,args:c,type:s}),f},i.isOpen=function(){return!o.ended},i.close=function(s,a){if(typeof s=="function"&&(a=s,s=!1),!o){a&&a();return}if(s){o.destroy(s),a&&a();return}return o.close(c=>{if(a)a(c);else if(c)throw hV(c,"no callback provided for muxrpc close")}),this},i.closed=!1,i}});var CV=M((qEe,yV)=>{"use strict";var Iie=bR(),Pie=Lv();function RR(t,e,n,r){for(let o in e){let i=e[o],s=n?n.concat(o):[o];if(i&&typeof i=="object"){let a=i;t[o]=RR({},a,s,r)}else{let a=i;t[o]=(...c)=>r(a,s,c)}}return t}function bie(t){if(t)throw Iie(t,"callback not provided")}function Tie(t,e,n,r){t=t||{};function o(i,s,a){let c=typeof a[a.length-1]=="function"?a.pop():i==="sync"||i==="async"?null:bie;if(typeof c=="function"){let l;try{l=n(i,s,a,c)}catch(u){return Pie.errorAsStreamOrCb(i,u,c)}return l}else return new Promise((l,u)=>{n(i,s,a,(f,m)=>{f?u(f):l(m)})})}return r?o("async","manifest",[function(i,s){if(i)return r(i);RR(t,s,null,o),r(null,s,t)}]):RR(t,e,null,o),t}yV.exports=Tie});var xV=M((GEe,SV)=>{"use strict";var HS=Lv();function EV(t){return Array.isArray(t)?t:t.split(".")}function Rie(t){return t&&typeof t.pre=="function"&&typeof t.test=="function"&&typeof t.post=="function"}SV.exports=function(e){if(Rie(e))return e;if(typeof e=="function")return{pre:e};let n=null,r={};function o(i){if(i.allow){n={};for(let s of i.allow)HS.set(n,EV(s),!0)}else n=null;if(i.deny)for(let s of i.deny)HS.set(r,EV(s),!0);else r={};return this}return e&&o(e),o.pre=i=>{if(i=Array.isArray(i)?i:[i],n&&!HS.prefix(n,i))return new Error(`method:${i} is not in list of allowed methods`);if(r&&HS.prefix(r,i))return new Error(`method:${i} is on list of disallowed methods`)},o.post=()=>{},o.test=i=>o.pre(i),o.get=()=>({allow:n,deny:r}),o}});var DV=M((zEe,_V)=>{"use strict";var kie=xV(),kR=Lv();_V.exports=function(e,n,r){r=kie(r);function o(s,a){return s===kR.get(n,a)}function i(s,a,c){if(a==="emit")throw new Error("emit has been removed");if(s==="async"&&o("sync",a)){let l=c.pop(),u;try{u=kR.get(e,a).apply(this,c)}catch(f){return l(f)}return l(null,u)}if(!o(s,a))throw new Error(`no ${s}:${a}`);return kR.get(e,a).apply(this,c)}return function(a,c,l){let u=r.pre(c,l);if(u)throw u;return i.call(this,a,c,l)}}});var bV=M((KEe,PV)=>{"use strict";var Nie=Zj(),Lie=require("events").EventEmitter,Aie=wV(),Fie=CV(),Oie=DV();function IV(t,e,n,r,o,i,s){let a;typeof t=="function"&&(a=t,t={}),e=e||{},t=t||{};let c=new Lie;i||(i=Nie);let l,u={_emit(m,d){return c&&c._emit(m,d),u},id:r},f=Aie(Oie(n,e,o).bind(u),i,m=>{if(!c.closed&&(c.closed=!0,c.emit("closed"),l)){let d=l;l=null,d(m)}});if(Fie(c,t,(m,d,p,g)=>{if(f.closed)throw new Error("stream is closed");return f.remoteCall(m,d,p,g)},a),c._emit=c.emit,s){Object.__defineGetter__.call(c,"id",()=>u.id),Object.__defineSetter__.call(c,"id",d=>{u.id=d});let m=!0;c.createStream=d=>{if(l=d,m)return m=!1,f;throw new Error("one stream per rpc")}}else c.stream=f;return c.closed=!1,c.close=function(m,d){return f.close(m,d),this},c}PV.exports=function(t,e,n){return arguments.length>3?IV.apply(this,arguments):function(r,o,i){return IV(t,e,r,i,o,n,!0)}}});var VS=M((fc,kV)=>{var JEe=uR(),Uie=ER();function TV(t){t.destroy?t.destroy():console.error("warning, stream-to-pull-stream: \nthe wrapped node-stream does not implement `destroy`, \nthis may cause resource leaks.")}function RV(t,e,n){var r,o=!1,i;function s(){i||(i=!0,n&&n(r===!0?null:r))}function a(){o||(o=!0,l(),r?s():t(r=!0,s))}function c(u){l(),r||t(r=u,s)}function l(){e.on("finish",a),e.removeListener("close",a),e.removeListener("error",c)}e.on("close",a),e.on("finish",a),e.on("error",c),process.nextTick(function(){Uie(function(u){t(null,function(f,m){if(r=r||f,f===!0)return e._isStdio?s():e.end();if(r=r||f)return TV(e),s(r);if(e._isStdio)e.write(m,function(){u()});else{var d=e.write(m);d===!1?e.once("drain",u):u()}})})})}function Mie(t){var e=!1,n=!1,r;function o(){var i=t.read();if(i!==null&&r){var s=r;r=null,s(null,i)}}return t.on("readable",function(){n=!0,r&&o()}).on("end",function(){e=!0,r&&r(e)}).on("error",function(i){e=i,r&&r(e)}),function(i,s){r=s,e?s(e):n&&o()}}function BS(t){var e=[],n=[],r,o=!1,i;function s(){for(;(e.length||r)&&n.length;)n.shift()(e.length?null:r,e.shift());!e.length&&o&&(o=!1,t.resume())}return t.on("data",function(a){e.push(a),s(),e.length&&t.pause&&(o=!0,t.pause())}),t.on("end",function(){r=!0,s()}),t.on("close",function(){r=!0,s()}),t.on("error",function(a){r=a,s()}),function(a,c){if(!c)throw new Error("*must* provide cb");if(a){let u=function(){for(;n.length;)n.shift()(a);c(a)};var l=u;if(r)return u();t.once("close",u),TV(t)}else n.push(c),s()}}var $ie=BS,WS=function(t,e){return function(n){return RV(n,t,e)}},jS=function(t){return BS(t)};fc=kV.exports=function(t,e){return t.writable&&t.write?t.readable?function(n){return RV(n,t,e),BS(t)}:WS(t,e):jS(t)};fc.sink=WS;fc.source=jS;fc.read=$ie;fc.read1=BS;fc.read2=Mie;fc.duplex=function(t,e){return{source:jS(t),sink:WS(t,e)}};fc.transform=function(t){return function(e){var n=jS(t);return WS(t)(e),n}}});var LV=M((XEe,YS)=>{var Hie=require("stream");YS.exports=NR;YS.exports.source=function(t){return NR(null,t)};YS.exports.sink=function(t){return NR(t,null)};var NV=typeof setImmediate>"u"?process.nextTick:setImmediate;function NR(t,e){t&&typeof t=="object"&&(e=t.source,t=t.sink);var n=[],r=[],o,i,s=new Hie;s.writable=s.readable=!0,s.write=function(h){return n.length?n.shift()(null,h):r.push(h),n.length||(i=!0),!!n.length},s.end=function(){e?r.length?g():e(o=!0,n.length?n.shift():function(){}):n.length&&n.shift()(!0)},s.source=function(h,v){r.length?(v(null,r.shift()),r.length||s.emit("drain")):((o=o||h)?v(o):n.push(v),i&&(i=!1,s.emit("drain")))};var a;t&&(a=t(s.source)),a&&!e&&(e=a);var c=[],l=[],u=!1,f=!1,m=!1;if(s.sink=function(h){e=h,NV(g)},e){s.sink(e),s.paused=!0;var d=s.on.bind(s);s.on=(h,v)=>{var C=d(h,v);return h==="data"&&s.paused&&NV(s.resume.bind(s)),C};var p=s.pipe.bind(s);s.pipe=function(h,v){var C=p(h,v);return s.paused&&s.resume(),C}}function g(){if(f=!1,!(!e||m)){for(;c.length&&!s.paused;)s.emit("data",c.shift());if(!s.paused){if(u)return s.emit("end");m=!0,e(null,function h(v,C){m=!1,s.paused?(v===!0?u=v:v?s.emit("error",v):c.push(C),f=!0):v&&(o=v)!==!0?s.emit("error",v):(o=o||v)?s.emit("end"):(s.emit("data",C),m=!0,e(null,h))})}}}return s.pause=function(){return s.paused=!0,s},s.resume=function(){return s.paused=!1,g(),s},s.destroy=function(){!o&&e&&e(o=!0,function(){}),o=!0,n.length&&n.shift()(!0),s.emit("close")},s}});var FV=M((ZEe,AV)=>{AV.exports=Bie;function Bie(t,e){typeof t=="function"&&(e=t,t=!1);var n=[],r,o;function i(f,m){f&&(r=f,o&&u(r)),o=m,l()}var s;function a(f){s=s||f||!0,l()}function c(f){if(!s){if(o){u(r,f);return}n.push(f)}}if(t)return{push:c,end:a,source:i,buffer:n};return i.push=c,i.end=a,i.buffer=n,i;function l(){o&&(r?u(r):!n.length&&s?u(s):n.length&&u(null,n.shift()))}function u(f,m){var d=o;if(f&&e){var p=e;e=null,p(f===!0?null:f)}o=null,d(f,m)}}});var JR=M(KR=>{"use strict";Object.defineProperty(KR,"__esModule",{value:!0});var fY=require("child_process"),Ese=1024*1024,dY={exec(t,e){let n={maxBuffer:2*Ese,windowsHide:!0};(0,fY.exec)(t,n,e)},spawn(t,e,n){return(0,fY.spawn)(t,e,n)},stripLine(t,e){let n=0;for(;e-- >0;){let r=t.indexOf(`
`,n);r>=0&&(n=r+1)}return n>0?t.substring(n):t},split(t,e){let n=t.trim().split(/\s+/);return n.length>e&&(n[e-1]=n.slice(e-1).join(" ")),n},extractColumns(t,e,n){let r=t.split(/(\r\n|\n|\r)/),o=[];return n||(n=Math.max.apply(null,e)+1),r.forEach(i=>{let s=dY.split(i,n),a=[];e.forEach(c=>{a.push(s[c]||"")}),o.push(a)}),o},parseTable(t){let e=t.split(/(\r\n\r\n|\r\n\n|\n\r\n|\n\n)/).filter(n=>n&&n.trim().length>0).map(n=>n.split(/(\r\n|\n|\r)/).filter(r=>r.trim().length>0));return e.forEach(n=>{for(let r=0;n[r];){let o=n[r];o.startsWith(" ")?(n[r-1]+=o.trimLeft(),n.splice(r,1)):r+=1}}),e.map(n=>{let r={};return n.forEach(o=>{let i=o.indexOf(":"),s=o.slice(0,i).trim();r[s]=o.slice(i+1).trim()}),r})}};KR.default=dY});var pY=M((mY,px)=>{(function(t,e){"use strict";typeof define=="function"&&define.amd?define(e):typeof px=="object"&&px.exports?px.exports=e():t.log=e()})(mY,function(){"use strict";var t=function(){},e="undefined",n=typeof window!==e&&typeof window.navigator!==e&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],o={},i=null;function s(p,g){var h=p[g];if(typeof h.bind=="function")return h.bind(p);try{return Function.prototype.bind.call(h,p)}catch{return function(){return Function.prototype.apply.apply(h,[p,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(p){return p==="debug"&&(p="log"),typeof console===e?!1:p==="trace"&&n?a:console[p]!==void 0?s(console,p):console.log!==void 0?s(console,"log"):t}function l(){for(var p=this.getLevel(),g=0;g<r.length;g++){var h=r[g];this[h]=g<p?t:this.methodFactory(h,p,this.name)}if(this.log=this.debug,typeof console===e&&p<this.levels.SILENT)return"No console available for logging"}function u(p){return function(){typeof console!==e&&(l.call(this),this[p].apply(this,arguments))}}function f(p,g,h){return c(p)||u.apply(this,arguments)}function m(p,g){var h=this,v,C,w,y="loglevel";typeof p=="string"?y+=":"+p:typeof p=="symbol"&&(y=void 0);function S(k){var E=(r[k]||"silent").toUpperCase();if(!(typeof window===e||!y)){try{window.localStorage[y]=E;return}catch{}try{window.document.cookie=encodeURIComponent(y)+"="+E+";"}catch{}}}function D(){var k;if(!(typeof window===e||!y)){try{k=window.localStorage[y]}catch{}if(typeof k===e)try{var E=window.document.cookie,x=encodeURIComponent(y),b=E.indexOf(x+"=");b!==-1&&(k=/^([^;]+)/.exec(E.slice(b+x.length+1))[1])}catch{}return h.levels[k]===void 0&&(k=void 0),k}}function _(){if(!(typeof window===e||!y)){try{window.localStorage.removeItem(y)}catch{}try{window.document.cookie=encodeURIComponent(y)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function A(k){var E=k;if(typeof E=="string"&&h.levels[E.toUpperCase()]!==void 0&&(E=h.levels[E.toUpperCase()]),typeof E=="number"&&E>=0&&E<=h.levels.SILENT)return E;throw new TypeError("log.setLevel() called with invalid level: "+k)}h.name=p,h.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},h.methodFactory=g||f,h.getLevel=function(){return w??C??v},h.setLevel=function(k,E){return w=A(k),E!==!1&&S(w),l.call(h)},h.setDefaultLevel=function(k){C=A(k),D()||h.setLevel(k,!1)},h.resetLevel=function(){w=null,_(),l.call(h)},h.enableAll=function(k){h.setLevel(h.levels.TRACE,k)},h.disableAll=function(k){h.setLevel(h.levels.SILENT,k)},h.rebuild=function(){if(i!==h&&(v=A(i.getLevel())),l.call(h),i===h)for(var k in o)o[k].rebuild()},v=A(i?i.getLevel():"WARN");var U=D();U!=null&&(w=A(U)),l.call(h)}i=new m,i.getLogger=function(g){if(typeof g!="symbol"&&typeof g!="string"||g==="")throw new TypeError("You must supply a name when creating a logger.");var h=o[g];return h||(h=o[g]=new m(g,i.methodFactory)),h};var d=typeof window!==e?window.log:void 0;return i.noConflict=function(){return typeof window!==e&&window.log===i&&(window.log=d),i},i.getLoggers=function(){return o},i.default=i,i})});var XR=M(Vv=>{"use strict";var Sse=Vv&&Vv.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Vv,"__esModule",{value:!0});var xse=Sse(pY());Vv.default=xse.default});var vY=M(ms=>{"use strict";var _se=ms&&ms.__createBinding||(Object.create?(function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]})),Dse=ms&&ms.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),hY=ms&&ms.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(n){var r=[];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[r.length]=o);return r},t(e)};return function(e){if(e&&e.__esModule)return e;var n={};if(e!=null)for(var r=t(e),o=0;o<r.length;o++)r[o]!=="default"&&_se(n,e,r[o]);return Dse(n,e),n}})(),gY=ms&&ms.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ms,"__esModule",{value:!0});var Ise=hY(require("os")),hx=hY(require("fs")),oi=gY(JR()),Pse=gY(XR()),bse=t=>new Promise((e,n)=>{hx.existsSync(t)?e():hx.mkdir(t,r=>{r?n(r):e()})}),bp={darwin(t){return new Promise((e,n)=>{oi.default.exec("netstat -anv -p TCP && netstat -anv -p UDP",function(r,o,i){if(r)n(r);else{let s=i.toString().trim();if(s){n(new Error(s));return}let a=oi.default.stripLine(o.toString(),1),c=a.slice(0,a.indexOf(`
`)),l=oi.default.stripLine(a,1),u=c.indexOf("rxbytes")>=0?10:8,f=oi.default.extractColumns(l,[0,3,u],10).filter(m=>!!String(m[0]).match(/^(udp|tcp)/)).find(m=>{let d=String(m[1]).match(/\.(\d+)$/);return!!(d&&d[1]===String(t))});f&&f[2].length?e(parseInt(f[2],10)):n(new Error(`pid of port (${t}) not found`))}})})},linux(t){return new Promise((e,n)=>{oi.default.exec("netstat -tunlp",function(o,i,s){if(o)n(o);else{let a=s.toString().trim();a&&Pse.default.warn(a);let c=oi.default.stripLine(i.toString(),2),l=oi.default.extractColumns(c,[3,6],7).find(u=>{let f=String(u[0]).match(/:(\d+)$/);return!!(f&&f[1]===String(t))});if(l&&l[1]){let u=l[1].split("/",1)[0];u.length?e(parseInt(u,10)):n(new Error(`pid of port (${t}) not found`))}else n(new Error(`pid of port (${t}) not found`))}})})},win32(t){return new Promise((e,n)=>{oi.default.exec("netstat -ano",function(r,o,i){if(r)n(r);else{let s=i.toString().trim();if(s){n(new Error(s));return}let a=oi.default.stripLine(o.toString(),4),c=oi.default.extractColumns(a,[1,4],5).find(l=>{let u=String(l[0]).match(/:(\d+)$/);return!!(u&&u[1]===String(t))});c&&c[1].length&&parseInt(c[1],10)>0?e(parseInt(c[1],10)):n(new Error(`pid of port (${t}) not found`))}})})},android(t){return new Promise((e,n)=>{let r=Ise.tmpdir()+"/.find-process",o=r+"/"+process.pid,i='netstat -tunp >> "'+o+'"';bse(r).then(()=>{oi.default.exec(i,()=>{hx.readFile(o,"utf8",(s,a)=>{if(hx.unlink(o,()=>{}),s)n(s);else{a=oi.default.stripLine(a,2);let c=oi.default.extractColumns(a,[3,6],7).find(l=>{let u=String(l[0]).match(/:(\d+)$/);return!!(u&&u[1]===String(t))});if(c&&c[1]){let l=c[1].split("/",1)[0];l.length?e(parseInt(l,10)):n(new Error(`pid of port (${t}) not found`))}else n(new Error(`pid of port (${t}) not found`))}})})})})}};bp.freebsd=bp.darwin;bp.sunos=bp.darwin;function Tse(t){let e=process.platform;return new Promise((n,r)=>{if(!(e in bp))return r(new Error(`platform ${e} is unsupported`));let o=bp[e];o(t).then(n,r)})}ms.default=Tse});var CY=M(ps=>{"use strict";var Rse=ps&&ps.__createBinding||(Object.create?(function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]})),kse=ps&&ps.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),Nse=ps&&ps.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(n){var r=[];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[r.length]=o);return r},t(e)};return function(e){if(e&&e.__esModule)return e;var n={};if(e!=null)for(var r=t(e),o=0;o<r.length;o++)r[o]!=="default"&&Rse(n,e,r[o]);return kse(n,e),n}})(),Lse=ps&&ps.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ps,"__esModule",{value:!0});var gx=Nse(require("path")),$l=Lse(JR());function ZR(t,e){return e?t&&t.match?t.match(e)!==null:!1:!0}function wY(t){let e=t.split(gx.sep),n=e[e.length-1];n&&(e[e.length-1]=n.split(" ")[0]);let r=[];for(let o of e){let i=o.indexOf(" -");if(i>=0){r.push(o.substring(0,i).trim());break}else if(o.endsWith(" ")){r.push(o.trim());break}r.push(o)}return r.join(gx.sep)}function yY(t){if(process.platform==="darwin"){let e=t.indexOf(".app/");if(e>=0)return gx.basename(t.substring(0,e))}return gx.basename(t)}var Vf={darwin(t){return new Promise((e,n)=>{let r;"pid"in t&&t.pid!==void 0?r=`ps -p ${t.pid} -ww -o pid,ppid,uid,gid,args`:r="ps ax -ww -o pid,ppid,uid,gid,args",$l.default.exec(r,function(o,i,s){if(o)"pid"in t&&t.pid!==void 0?e([]):n(o);else{let a=s.toString().trim();if(a){n(new Error(a));return}let c=$l.default.stripLine(i.toString(),1),u=$l.default.extractColumns(c,[0,1,2,3,4],5).filter(f=>f[0]&&t.pid!==void 0?f[0]===String(t.pid):f[4]&&t.name?ZR(f[4],t.name):!!f[0]).map(f=>{let m=String(f[4]),d=wY(m);return{pid:parseInt(f[0],10),ppid:parseInt(f[1],10),uid:parseInt(f[2],10),gid:parseInt(f[3],10),name:yY(d),bin:d,cmd:f[4]}});t.config.strict&&t.name&&(u=u.filter(f=>f.name===t.name)),e(u)}})})},win32(t){return new Promise((e,n)=>{let r="[Console]::OutputEncoding = [System.Text.Encoding]::UTF8; Get-CimInstance -className win32_process | select Name,ProcessId,ParentProcessId,CommandLine,ExecutablePath",o=[],i=$l.default.spawn("powershell.exe",["/c",r],{detached:!1,windowsHide:!0});i.stdout.on("data",s=>{o.push(s.toString())}),i.on("error",s=>{n(new Error("Command '"+r+"' failed with reason: "+s.toString()))}),i.on("close",s=>{if(s!==0)return n(new Error("Command '"+r+"' terminated with code: "+s));let a=$l.default.parseTable(o.join("")).filter(c=>{if(t.pid!==void 0)return c.ProcessId===String(t.pid);if(t.name){let l=c.Name||"";return t.config.strict?l===t.name||l.endsWith(".exe")&&l.slice(0,-4)===t.name:ZR(c.CommandLine||l,t.name)}else return!0}).map(c=>({pid:parseInt(c.ProcessId,10),ppid:parseInt(c.ParentProcessId,10),bin:c.ExecutablePath,name:c.Name||"",cmd:c.CommandLine}));e(a)})})},android(t){return new Promise((e,n)=>{$l.default.exec("ps",function(o,i,s){if(o)t.pid!==void 0?e([]):n(o);else{let a=s.toString().trim();if(a){n(new Error(a));return}let c=$l.default.stripLine(i.toString(),1),u=$l.default.extractColumns(c,[0,3],4).filter(f=>f[0]&&t.pid!==void 0?f[0]===String(t.pid):f[1]&&t.name?ZR(f[1],t.name):!!f[0]).map(f=>{let m=String(f[1]),d=wY(m);return{pid:parseInt(f[0],10),ppid:0,name:yY(d),bin:d,cmd:f[1]}});t.config.strict&&t.name&&(u=u.filter(f=>f.name===t.name)),e(u)}})})}};Vf.linux=Vf.darwin;Vf.sunos=Vf.darwin;Vf.freebsd=Vf.darwin;function Ase(t){let e=process.platform,n=Vf[e];return n?n(t):Promise.reject(new Error(`Platform "${e}" is not supported`))}ps.default=Ase});var SY=M(Yv=>{"use strict";var ek=Yv&&Yv.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Yv,"__esModule",{value:!0});var Fse=ek(vY()),EY=ek(CY()),Ose=ek(XR()),QR={port(t,e){return(0,Fse.default)(t).then(n=>QR.pid(n,e),()=>[])},pid(t,e){return(0,EY.default)({pid:t,config:e})},name(t,e){return(0,EY.default)({name:t,config:e,skipSelf:!0})}};function Use(t,e,n){let r=Object.assign({logLevel:"warn",strict:typeof n=="boolean"?n:!1},typeof n=="object"?n:{});return r.logLevel&&Ose.default.setLevel(r.logLevel),new Promise((o,i)=>{if(!(t in QR))i(new Error(`do not support find by "${t}"`));else{let s=/^\d+$/.test(String(e));t==="pid"&&!s?i(new Error("pid must be a number")):t==="port"&&!s?i(new Error("port must be a number")):QR[t](e,r).then(o,i)}})}Yv.default=Use});var _Y=M(xY=>{"use strict";Object.defineProperty(xY,"__esModule",{value:!0})});var DY=M(hs=>{"use strict";var Mse=hs&&hs.__createBinding||(Object.create?(function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]})),$se=hs&&hs.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Mse(e,t,n)},Hse=hs&&hs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hs,"__esModule",{value:!0});hs.default=void 0;var Bse=SY();Object.defineProperty(hs,"default",{enumerable:!0,get:function(){return Hse(Bse).default}});$se(_Y(),hs)});var Yp,Cc,sa,Ss,qp,gw,nN=ne(()=>{Yp="function",Cc="object",sa="undefined",Ss="prototype",qp=Object,gw=qp[Ss]});function aa(t,e){return t||e}function Ln(t,e){return t[e]}function Gn(t,e){try{return{v:t.apply(this,e)}}catch(n){return{e:n}}}function Jue(t,e){var n=Gn(t);return n.e?e:n.v}function w_(t){return function(e){return typeof e===t}}function u3(t){var e="[object "+t+"]";return function(n){return!!(n&&y_(n)===e)}}function y_(t){return yN[v_].call(t)}function CN(t,e){return typeof t===e}function Ve(t){return typeof t===od||t===od}function Xue(t){return!C_(t)}function ae(t){return t===kn||Ve(t)}function Zue(t){return t===kn||!C_(t)}function C_(t){return!!t||t!==Mo}function Que(t){return!rN&&(rN=["string","number","boolean",od,"symbol","bigint"]),t!==ww&&rN.indexOf(t)!==-1}function tn(t){return!t&&ae(t)?!1:!!t&&typeof t===ww}function fo(t){return!!(t&&t.then&&Re(t.then))}function EN(t){return!t||!xs(t)}function xs(t){return!(!t||Jue(function(){return!(t&&0+t)},!t))}function mr(t,e){return!!t&&yN.hasOwnProperty[Dr](t,e)}function efe(t,e){return mr(t,e)||!!S_(t,e)}function Ie(t,e,n){if(t&&tn(t)){for(var r in t)if(_s(t,r)&&e[Dr](n||t,r,t[r])===-1)break}}function f3(t){var e={};if(e[l_.c]=!0,e[l_.e]=!0,t.l){e.get=function(){return t.l.v};var n=S_(t.l,"v");n&&n.set&&(e.set=function(r){t.l.v=r})}return Ie(t,function(r,o){e[l_[r]]=Xue(o)?e[l_[r]]:o}),e}function SN(t,e,n,r,o,i){var s={e:i,c:o};return n&&(s.g=n),r&&(s.s=r),$o(t,e,f3(s))}function gt(t,e,n){return $o(t,e,f3(n))}function m3(t,e,n,r,o){var i={};return Ie(t,function(s,a){p_(i,s,e?a:s),p_(i,a,n?a:s)}),r?r(i):i}function p_(t,e,n,r){$o(t,e,{value:n,enumerable:!0,writable:!1})}function Ee(t,e){var n=vN,r=yN[v_][Dr](t);r===tfe&&(t={stack:Sn(t.stack),message:Sn(t.message),name:Sn(t.name)});try{n=JSON.stringify(t,kn,e?typeof e=="number"?e:4:Mo),n=(n?n.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):kn)||Sn(t)}catch(o){n=" - "+Ee(o,e)}return r+": "+n}function An(t){throw new Error(t)}function Pr(t){throw new TypeError(t)}function h3(t){return t}function nfe(t){return t[hN]||kn}function Ds(t){return p3&&Ie(t,function(e,n){(we(n)||tn(n))&&Ds(n)}),mo(t)}function g3(t){return m3(t,1,0,mo)}function rfe(t){return m3(t,0,0,mo)}function ofe(t){var e={};return Ie(t,function(n,r){p_(e,n,r[1]),p_(e,r[0],r[1])}),mo(e)}function v3(t){return ofe(t)}function y3(){var t;return typeof globalThis!==od&&(t=globalThis),!t&&typeof self!==od&&(t=self),!t&&typeof window!==od&&(t=window),!t&&typeof global!==od&&(t=global),t}function C3(){if(!oN){var t=Gn(y3).v||{};oN=t[r3]=t[r3]||{}}return oN}function Xp(t,e,n){var r=e?e[t]:kn;return function(o){var i=(o?o[t]:kn)||r;if(i||n){var s=arguments;return(i||n).apply(o,i?Sc[Dr](s,1):s)}Pr('"'+Sn(t)+'" not defined for '+Ee(o))}}function ife(t){return function(e){return e[t]}}function sfe(t,e,n){return ae(t)&&Pr("Invalid "+Ee(t)),n<0?vN:(e=e||0,e<0&&(e=la(e+t[id],0)),Ve(n)?o3(t,e):o3(t,e,e+n))}function cd(t,e){return zn(t,0,e)}function afe(){if(!iN){var t=C3();iN=t.gblSym=t.gblSym||{k:{},s:{}}}return iN}function _N(t){var e={description:Sn(t),toString:function(){return wN+"("+t+")"}};return e[Kue]=!0,e}function cfe(t){var e=afe();if(!_s(e.k,t)){var n=_N(t),r=br(e.s).length;n[i3]=function(){return r+"_"+n[v_]()},e.k[t]=n,e.s[n[i3]()]=Sn(t)}return e.k[t]}function lfe(t){!u_&&(u_={});var e,n=w3[t];return n&&(e=u_[n]=u_[n]||_N(wN+"."+n)),e}function au(){Nn=C3()}function E3(t){var e={};return!Nn&&au(),e.b=Nn.lzy,$o(e,"v",{configurable:!0,get:function(){var n=t();return Nn.lzy||$o(e,"v",{value:n}),e.b=Nn.lzy,n}}),e}function fi(t){return $o({toJSON:function(){return t}},"v",{value:t})}function Ew(t,e){var n;return function(){return!Nn&&au(),(!n||Nn.lzy)&&(n=fi(Gn(t,e).v)),n.v}}function po(t){return!Nn&&au(),(!vw||t===!1||Nn.lzy)&&(vw=fi(Gn(y3).v||kn)),vw.v}function vt(t,e){var n;if(!vw||e===!1?n=po(e):n=vw.v,n&&n[t])return n[t];if(t===S3)try{return window}catch{}return kn}function ld(){return!!Fn()}function Zp(){return!!On()}function Sw(){return!!Kn()}function DN(){return!!x_()}function __(){return zp=fi(Gn(vt,[wN]).v),zp}function ufe(t){var e=(Nn.lzy?0:zp)||__();return e.v?e.v[t]:Mo}function _3(){return!!ffe()}function ffe(){return!Nn&&au(),((Nn.lzy?0:zp)||__()).v}function xw(t,e){var n=w3[t];!Nn&&au();var r=(Nn.lzy?0:zp)||__();return r.v?r.v[n||t]:e?Mo:lfe(t)}function Qp(t,e){!Nn&&au();var n=(Nn.lzy?0:zp)||__();return n.v?n.v(t):e?kn:_N(t)}function D_(t){return!Nn&&au(),sN=(Nn.lzy?0:sN)||fi(Gn(ufe,["for"]).v),(sN.v||cfe)(t)}function h_(t){return!!t&&Re(t.next)}function IN(t){return!Zue(t)&&Re(t[xw(3)])}function I_(t,e,n){if(t&&(h_(t)||(!f_&&(f_=fi(xw(3))),t=t[f_.v]?t[f_.v]():kn),h_(t))){var r=Mo,o=Mo;try{for(var i=0;!(o=t.next()).done&&e[Dr](n||t,o.value,i,t)!==-1;)i++}catch(s){r={e:s},t.throw&&(o=kn,t.throw(r))}finally{try{o&&!o.done&&t.return&&t.return(o)}finally{if(r)throw r.e}}}}function Gp(t,e,n){return t.apply(e,n)}function Is(t,e){return!Ve(e)&&t&&(we(e)?Gp(t.push,t,e):h_(e)||IN(e)?I_(e,function(n){t.push(n)}):t.push(e)),t}function ee(t,e,n){if(t)for(var r=t[id]>>>0,o=0;o<r&&!(o in t&&e[Dr](n||t,t[o],o,t)===-1);o++);}function eh(t,e,n){return((t?t.slice:kn)||Sc).apply(t,Sc[Dr](arguments,1))}function dfe(t,e,n){return wt(t,e,n)!==-1}function mfe(t){if(!t)return{};var e=typeof t;e!==ww&&e!==g_&&Pr("Prototype must be an Object or function: "+Ee(t));function n(){}return n[Ec]=t,new n}function D3(t,e){var n=ui.setPrototypeOf||function(r,o){var i;!aN&&(aN=fi((i={},i[hN]=[],i instanceof Array))),aN.v?r[hN]=o:Ie(o,function(s,a){return r[s]=a})};return n(t,e)}function pfe(t,e,n){Gn(gt,[e,m_,{v:t,c:!0,e:!1}]),e=D3(e,n);function r(){this[d_]=e,Gn(gt,[this,m_,{v:t,c:!0,e:!1}])}return e[Ec]=n===kn?fa(n):(r[Ec]=n[Ec],new r),e}function s3(t,e){e&&(t[m_]=e)}function bN(t,e,n){var r=n||Error,o=r[Ec][m_],i=Error.captureStackTrace;return pfe(t,function(){var s=this,a=arguments;try{Gn(s3,[r,t]);var c=Gp(r,s,Sc[Dr](a))||s;if(c!==s){var l=gN(s);l!==gN(c)&&D3(c,l)}return i&&i(c,s[d_]),e&&e(c,a),c}finally{Gn(s3,[r,o])}},r)}function xn(){return(Date.now||hfe)()}function hfe(){return new Date().getTime()}function gfe(t){return function(n){return ae(n)&&Pr("strTrim called ["+Ee(n)+"]"),n&&n.replace&&(n=n.replace(t,vN)),n}}function Tr(t){if(!t||typeof t!==ww)return!1;uN||(uN=Zp()?On():!0);var e=!1;if(t!==uN){lN||(cN=Function[Ec][v_],lN=cN[Dr](ui));try{var n=gN(t);e=!n,e||(mr(n,d_)&&(n=n[d_]),e=!!(n&&typeof n===g_&&cN[Dr](n)===lN))}catch{}}return e}function wfe(t){return t.value&&b3(t),!0}function yfe(t,e,n,r){var o;return ee(t,function(i){if(i.k===e)return o=i,-1}),o||(o={k:e,v:e},t.push(o),r(o)),o.v}function TN(t,e,n,r){var o=n.handler,i=n.path?r?n.path.concat(r):n.path:[],s={handler:n.handler,src:n.src,path:i},a=typeof e,c=!1,l=e===kn;l||(e&&a===ww?c=Tr(e):l=Que(a));var u={type:a,isPrim:l,isPlain:c,value:e,result:e,path:i,origin:n.src,copy:function(f,m){return TN(t,f,m?s:n,m)},copyTo:function(f,m){return P3(t,f,m,s)}};return u.isPrim?o&&o[Dr](n,u)?u.result:e:yfe(t,e,i,function(f){gt(u,"result",{g:function(){return f.v},s:function(p){f.v=p}});for(var m=0,d=o;!(d||(m<a3.length?a3[m++]:wfe))[Dr](n,u);)d=kn})}function P3(t,e,n,r){if(!ae(n))for(var o in n)e[o]=TN(t,n[o],r,o);return e}function Cfe(t,e,n){var r={handler:n,src:e,path:[]};return P3([],t,e,r)}function Efe(t,e){var n={handler:e,src:t};return TN([],t,n)}function Sfe(t){var e=t.value;if(we(e)){var n=t.result=[];return n.length=e.length,t.copyTo(n,e),!0}return!1}function xfe(t){var e=t.value;return E_(e)?(t.result=new Date(e.getTime()),!0):!1}function _fe(t){return t.type===g_}function b3(t){var e=t.value;if(e&&t.isPlain){var n=t.result={};return t.copyTo(n,e),!0}return!1}function Dfe(t,e){return ee(e,function(n){Cfe(t,n)}),t}function RN(t,e,n,r,o,i,s){return Dfe(Efe(t)||{},Sc[Dr](arguments))}function ud(){return!Nn&&au(),(!fN||Nn.lzy)&&(fN=fi(Gn(vt,["performance"]).v)),fN.v}function Dw(){var t=ud();return t&&t.now?t.now():xn()}function Ife(t,e,n){ke(t)||Pr("'"+Ee(t)+"' is not a string");var r=ke(e)?e:Sn(e),o=!Ve(n)&&n<t[id]?n:t[id];return zn(t,o-r[id],o)===r}function Pfe(t,e,n){ke(t)||Pr("'"+Ee(t)+"' is not a string");var r=ke(e)?e:Sn(e),o=n>0?n:0;return zn(t,o,o+r[id])===r}function Tfe(t,e,n){var r=!0,o=t?e(kn):kn,i;function s(){return r=!1,o&&o[mN]&&o[mN](),i}function a(){o&&n(o),o=kn}function c(){return o=e(o),r||s(),i}function l(u){!u&&o&&a(),u&&!o&&c()}return i={cancel:a,refresh:c},i[pN]=function(){return o&&o[pN]?o[pN]():r},i[dN]=function(){return r=!0,o&&o[dN]&&o[dN](),i},i[mN]=s,i=$o(i,bfe,{get:function(){return!!o},set:l}),{h:i,dn:function(){o=kn}}}function kN(t,e,n){var r=we(e),o=r?e.length:0,i=(o>0?e[0]:r?Mo:e)||setTimeout,s=(o>1?e[1]:Mo)||clearTimeout,a=n[0];n[0]=function(){c.dn(),Gp(a,Mo,Sc[Dr](arguments))};var c=Tfe(t,function(l){if(l){if(l.refresh)return l.refresh(),l;Gp(s,Mo,[l])}return Gp(i,Mo,n)},function(l){Gp(s,Mo,[l])});return c.h}function di(t,e){return kN(!0,Mo,Sc[Dr](arguments))}function R3(t,e,n){return kN(!0,t,Sc[Dr](arguments,1))}function k3(t,e){return kN(!1,Mo,Sc[Dr](arguments))}var Mo,kn,vN,g_,ww,Ec,hN,od,d_,wN,Kue,id,m_,Dr,v_,ui,yN,c3,sd,yw,l3,Cw,Sc,rN,ke,Re,we,E_,Ir,ca,ad,S_,_s,l_,$o,d3,Sn,tfe,p3,Kp,br,mo,xN,gN,w3,r3,oN,Jp,su,la,o3,zn,ua,i3,iN,u_,Nn,S3,vw,Fn,On,Kn,x_,x3,zp,sN,f_,wt,xc,PN,_w,fa,aN,vfe,tt,ji,I3,cN,lN,uN,a3,th,fN,T3,fd,Vi,nh,dN,mN,pN,bfe,Ne=ne(()=>{Mo=void 0,kn=null,vN="",g_="function",ww="object",Ec="prototype",hN="__proto__",od="undefined",d_="constructor",wN="Symbol",Kue="_polyfill",id="length",m_="name",Dr="call",v_="toString",ui=aa(Object),yN=Ln(ui,Ec),c3=aa(String),sd=Ln(c3,Ec),yw=aa(Math),l3=aa(Array),Cw=Ln(l3,Ec),Sc=Ln(Cw,"slice");ke=w_("string"),Re=w_(g_);we=Ln(l3,"isArray"),E_=u3("Date"),Ir=w_("number"),ca=w_("boolean"),ad=u3("Error");S_=Ln(ui,"getOwnPropertyDescriptor");_s=aa(Ln(ui,"hasOwn"),efe);l_={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};$o=Ln(ui,"defineProperty"),d3=Ln(ui,"defineProperties");Sn=aa(c3),tfe="[object Error]";p3=Ln(ui,"freeze");Kp=Ln(ui,"assign"),br=Ln(ui,"keys");mo=aa(p3,h3),xN=aa(Ln(ui,"seal"),h3),gN=aa(Ln(ui,"getPrototypeOf"),nfe);w3=rfe({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),r3="__tsUtils$gblCfg";Jp=Xp;su=Ln(yw,"min"),la=Ln(yw,"max"),o3=Jp("slice",sd),zn=Jp("substring",sd),ua=Xp("substr",sd,sfe);i3="_urid";S3="window";Fn=Ew(vt,["document"]);On=Ew(vt,[S3]);Kn=Ew(vt,["navigator"]);x_=Ew(vt,["history"]),x3=Ew(function(){return!!Gn(function(){return process&&(process.versions||{}).node}).v});wt=Jp("indexOf",Cw),xc=Jp("map",Cw);PN=Xp("includes",Cw,dfe),_w=Jp("reduce",Cw),fa=aa(Ln(ui,"create"),mfe);vfe=gfe(/^\s+|(?=\s)\s+$/g),tt=Xp("trim",sd,vfe),ji=Ln(yw,"floor"),I3=Ln(yw,"ceil");a3=[Sfe,b3,_fe,xfe];th=ife(id);T3=Ln(yw,"round"),fd=Xp("endsWith",sd,Ife);Vi=Jp("indexOf",sd),nh=Xp("startsWith",sd,Pfe);dN="ref",mN="unref",pN="hasRef",bfe="enabled"});function Ho(t,e){typeof e!==Yp&&e!==null&&Pr("Class extends value "+String(e)+" is not a constructor or null"),NN(t,e);function n(){this.constructor=t}t[Ss]=e===null?fa(e):(n[Ss]=e[Ss],new n)}function P_(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t}var wbe,ybe,N3,kfe,Yi,NN,L3=ne(()=>{Ne();nN();wbe=(po()||{}).Symbol,ybe=(po()||{}).Reflect,N3="hasOwnProperty",kfe=function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)gw[N3].call(e,o)&&(t[o]=e[o])}return t},Yi=Kp||kfe,NN=function(t,e){return NN=qp.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r[N3](o)&&(n[o]=r[o])},NN(t,e)}});var A3=ne(()=>{});var Bo=ne(()=>{nN();L3();A3();Ne()});function k_(t){return t&&(t===HN[_c]||t===Array[_c])}function BN(t){return k_(t)||t===Function[_c]}function dd(t){var e;if(t){if(Pw)return Pw(t);var n=t[$N]||t[_c]||(t[N_]?t[N_][_c]:null);e=t[T_]||n,mr(t,T_)||(delete t[LN],e=t[T_]=t[LN]||t[T_],t[LN]=n)}return e}function F_(t,e){var n=[];if(U3)n=U3(t);else for(var r in t)typeof r=="string"&&mr(t,r)&&n.push(r);if(n&&n.length>0)for(var o=0;o<n.length;o++)e(n[o])}function WN(t,e,n){return e!==N_&&typeof t[e]===L_&&(n||mr(t,e))&&e!==$N&&e!==_c}function O_(t){Pr("DynamicProto: "+t)}function Lfe(t){var e=fa(null);return F_(t,function(n){!e[n]&&WN(t,n,!1)&&(e[n]=t[n])}),e}function jN(t,e){for(var n=t.length-1;n>=0;n--)if(t[n]===e)return!0;return!1}function Afe(t,e,n,r){function o(c,l,u){var f=l[u];if(f[FN]&&r){var m=c[A_]||{};m[Iw]!==!1&&(f=(m[l[rh]]||{})[u]||f)}return function(){return f.apply(c,arguments)}}var i=fa(null);F_(n,function(c){i[c]=o(e,n,c)});for(var s=dd(t),a=[];s&&!BN(s)&&!jN(a,s);)F_(s,function(c){!i[c]&&WN(s,c,!Pw)&&(i[c]=o(e,s,c))}),a.push(s),s=dd(s);return i}function Ffe(t,e,n,r){var o=null;if(t&&mr(n,rh)){var i=t[A_]||fa(null);if(o=(i[n[rh]]||fa(null))[e],o||O_("Missing ["+e+"] "+L_),!o[ON]&&i[Iw]!==!1){for(var s=!mr(t,e),a=dd(t),c=[];s&&a&&!BN(a)&&!jN(c,a);){var l=a[e];if(l){s=l===r;break}c.push(a),a=dd(a)}try{s&&(t[e]=o),o[ON]=1}catch{i[Iw]=!1}}}return o}function Ofe(t,e,n){var r=e[t];return r===n&&(r=dd(e)[t]),typeof r!==L_&&O_("["+t+"] is not a "+L_),r}function Ufe(t,e,n,r,o){function i(c,l){var u=function(){var f=Ffe(this,l,c,u)||Ofe(l,c,u);return f.apply(this,arguments)};return u[FN]=1,u}if(!k_(t)){var s=n[A_]=n[A_]||fa(null);if(!k_(s)){var a=s[e]=s[e]||fa(null);s[Iw]!==!1&&(s[Iw]=!!o),k_(a)||F_(n,function(c){WN(n,c,!1)&&n[c]!==r[c]&&(a[c]=n[c],delete n[c],(!mr(t,c)||t[c]&&!t[c][FN])&&(t[c]=i(t,c)))})}}}function Mfe(t,e){if(Pw){for(var n=[],r=dd(e);r&&!BN(r)&&!jN(n,r);){if(r===t)return!0;n.push(r),r=dd(r)}return!1}return!0}function AN(t,e){return mr(t,_c)?t.name||e||F3:((t||{})[N_]||{}).name||e||F3}function Je(t,e,n,r){mr(t,_c)||O_("theClass is an invalid class definition.");var o=t[_c];Mfe(o,e)||O_("["+AN(t)+"] not in hierarchy of ["+AN(e)+"]");var i=null;mr(o,rh)?i=o[rh]:(i=Nfe+AN(t,"_")+"$"+MN.n,MN.n++,o[rh]=i);var s=Je[$3],a=!!s[R_];a&&r&&r[R_]!==void 0&&(a=!!r[R_]);var c=Lfe(e),l=Afe(o,e,c,a);n(e,l);var u=!!Pw&&!!s[UN];u&&r&&(u=!!r[UN]),Ufe(o,i,e,c,u!==!1)}var b_,N_,_c,L_,A_,FN,rh,Nfe,ON,Iw,$3,F3,$N,T_,O3,LN,R_,UN,HN,Pw,U3,M3,MN,pr=ne(()=>{Ne();N_="constructor",_c="prototype",L_="function",A_="_dynInstFuncs",FN="_isDynProxy",rh="_dynClass",Nfe="_dynCls$",ON="_dynInstChk",Iw=ON,$3="_dfOpts",F3="_unknown_",$N="__proto__",T_="_dyn"+$N,O3="__dynProto$Gbl",LN="_dynInstProto",R_="useBaseInst",UN="setInstFuncs",HN=Object,Pw=HN.getPrototypeOf,U3=HN.getOwnPropertyNames,M3=po(),MN=M3[O3]||(M3[O3]={o:(b_={},b_[UN]=!0,b_[R_]=!0,b_),n:1e3});Je[$3]=MN.o});var VN,H3=ne(()=>{VN=100});var fn,YN,bw=ne(()=>{Ne();fn=g3,YN=v3});var Ps,$fe,B3=ne(()=>{bw();Ps=fn({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),$fe=fn({Unknown:0,NonRetryableStatus:1,CleanStorage:2,MaxInStorageTimeExceeded:3})});var mi,qN=ne(()=>{bw();mi=fn({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2})});var Wo,me,oh,Dc,da,cu,Ge,ma,kt,Ic,Pc,pa,ih,sh,jo,md,Tw,lu,ho,Jn,U_,uu,GN,qi,Rw,ah,M_,ha,pi,ch,ga,Vo,fu,pd,hi,du,kw,Gi,bs,gi,lh,hd,zN,Nw,mu,gd,Ts,KN,uh,$_,vd,wd,xt=ne(()=>{Wo="toLowerCase",me="length",oh="warnToConsole",Dc="throwInternal",da="watch",cu="apply",Ge="push",ma="splice",kt="logger",Ic="cancel",Pc="initialize",pa="identifier",ih="removeNotificationListener",sh="addNotificationListener",jo="isInitialized",md="value",Tw="getNotifyMgr",lu="getPlugin",ho="name",Jn="processNext",U_="getProcessTelContext",uu="enabled",GN="stopPollingInternalLogs",qi="unload",Rw="onComplete",ah="version",M_="loggingLevelConsole",ha="createNew",pi="teardown",ch="messageId",ga="message",Vo="diagLog",fu="_doTeardown",pd="update",hi="getNext",du="setNextPlugin",kw="userAgent",Gi="split",bs="replace",gi="type",lh="evtName",hd="status",zN="getAllResponseHeaders",Nw="isChildEvt",mu="data",gd="getCtx",Ts="setCtx",KN="itemsReceived",uh="urlString",$_="headers",vd="timeout",wd="traceFlags"});function W3(t,e){JN||(JN=bN("AggregationError",function(r,o){o[me]>1&&(r.errors=o[1])}));var n=t||"One or more errors occurred.";throw ee(e,function(r,o){n+=`
`.concat(o," > ").concat(Ee(r))}),new JN(n,e||[])}var JN,j3=ne(()=>{Ne();xt()});function vi(t,e){return G3(t,function(n){return e?e({status:"fulfilled",rejected:!1,value:n}):n},function(n){return e?e({status:oL,rejected:!0,reason:n}):n})}function G3(t,e,n,r){var o=t;try{if(fo(t))(e||n)&&(o=t.then(e,n));else try{e&&(o=e(t))}catch(i){if(n)o=n(i);else throw i}}finally{r&&Hfe(o,r)}return o}function Hfe(t,e){var n=t;return e&&(fo(t)?t.finally?n=t.finally(e):n=t.then(function(r){return e(),r},function(r){throw e(),r}):e()),n}function Bfe(t,e,n,r){XN=XN||{toString:function(){return"[[PromiseState]]"}},ZN=ZN||{toString:function(){return"[[PromiseResult]]"}},QN=QN||{toString:function(){return"[[PromiseIsHandled]]"}};var o={};o[XN]={get:e},o[ZN]={get:n},o[QN]={get:r},d3(t,o)}function Wfe(t){var e;return t&&t.createEvent&&(e=t.createEvent("Event")),!!e&&e.initEvent}function jfe(t,e,n,r){var o=Fn();!H_&&(H_=fi(!!Gn(Wfe,[o]).v));var i=H_.v?o.createEvent("Event"):r?new Event(e):{};if(n&&n(i),H_.v&&i.initEvent(e,!1,!0),i&&t[Y3])t[Y3](i);else{var s=t["on"+e];if(s)s(i);else{var a=vt("console");a&&(a.error||a.log)(e,Ee(i))}}}function q3(t){return Re(t)?t.toString():Ee(t)}function J3(t,e,n){var r=eh(arguments,3),o=0,i=!1,s,a=[],c=Yfe++,l=Lw.length>0?Lw[Lw.length-1]:void 0,u=!1,f=null,m;function d(S,D){try{Lw.push(c),u=!0,f&&f.cancel(),f=null;var _=t(function(A,U){a.push(function(){try{var k=o===2?S:D,E=Ve(k)?s:Re(k)?k(s):k;fo(E)?E.then(A,U):k?A(E):o===3?U(E):A(E)}catch(x){U(x)}}),i&&v()},r);return _}finally{Lw.pop()}}function p(S){return d(void 0,S)}function g(S){var D=S,_=S;return Re(S)&&(D=function(A){return S&&S(),A},_=function(A){throw S&&S(),A}),d(D,_)}function h(){return z3[o]}function v(){if(a.length>0){var S=a.slice();a=[],u=!0,f&&f.cancel(),f=null,e(S)}}function C(S,D){return function(_){if(o===D){if(S===2&&fo(_)){o=1,_.then(C(2,1),C(3,1));return}o=S,i=!0,s=_,v(),!u&&S===3&&!f&&(f=di(w,qfe))}}}function w(){if(!u)if(u=!0,x3())process.emit(K3,s,m);else{var S=On()||po();!eL&&(eL=fi(Gn(vt,[B_+"RejectionEvent"]).v)),jfe(S,Vfe,function(D){return gt(D,"promise",{g:function(){return m}}),D.reason=s,D},!!eL.v)}}m={then:d,catch:p,finally:g},$o(m,"state",{get:h}),V3&&Bfe(m,h,function(){return y_(s)},function(){return u}),_3()&&(m[xw(11)]="IPromise");function y(){return"IPromise"+(V3?"["+c+(Ve(l)?"":":"+l)+"]":"")+" "+h()+(i?" - "+q3(s):"")}return m.toString=y,(function(){Re(n)||Pr(B_+": executor is not a function - "+q3(n));var D=C(3,0);try{n.call(m,C(2,0),D)}catch(_){D(_)}})(),m}function Gfe(t){return function(e){var n=eh(arguments,1);return t(function(r,o){try{var i=[],s=1;I_(e,function(a,c){a&&(s++,G3(a,function(l){i[c]=l,--s===0&&r(i)},o))}),s--,s===0&&r(i)}catch(a){o(a)}},n)}}function zfe(t){return fi(function(e){var n=eh(arguments,1);return t(function(r,o){var i=[],s=1;function a(c,l){s++,vi(c,function(u){u.rejected?i[l]={status:oL,reason:u.reason}:i[l]={status:"fulfilled",value:u.value},--s===0&&r(i)})}try{we(e)?ee(e,a):IN(e)?I_(e,a):Pr("Input is not an iterable"),s--,s===0&&r(i)}catch(c){o(c)}},n)})}function X3(t){ee(t,function(e){try{e()}catch{}})}function Kfe(t){var e=Ir(t)?t:0;return function(n){di(function(){X3(n)},e)}}function Z3(t,e){return J3(Z3,Kfe(e),t,e)}function Jfe(t,e){!tL&&(tL=fi(Gn(vt,[B_]).v||null));var n=tL.v;if(!n)return Z3(t);Re(t)||Pr(B_+": executor is not a function - "+Ee(t));var r=0;function o(){return z3[r]}var i=new n(function(s,a){function c(u){r=2,s(u)}function l(u){r=3,a(u)}t(c,l)});return $o(i,"state",{get:o}),i}function Aw(t){return J3(Aw,X3,t)}function Q3(t,e){return!nL&&(nL=zfe(Aw)),nL.v(t,e)}function zi(t,e){return!rL&&(rL=fi(Jfe)),rL.v.call(this,t,e)}var B_,oL,XN,ZN,QN,V3,z3,Y3,H_,K3,Vfe,Lw,Yfe,qfe,eL,tL,nL,rL,ez,nTe,yd=ne(()=>{Ne();B_="Promise",oL="rejected";V3=!1;z3=["pending","resolving","resolved",oL],Y3="dispatchEvent";K3="unhandledRejection",Vfe=K3.toLowerCase(),Lw=[],Yfe=0,qfe=10;ez=Gfe(zi),nTe=xw(11)});var wi,Le,Cd,dn,W_,Fw,bc,Ed,Yo,Sd,fh,pu,dh,va,j_,V_,Y_,mh,q_,G_,tz,Un=ne(()=>{wi=void 0,Le="",Cd="channels",dn="core",W_="createPerfMgr",Fw="disabled",bc="extensionConfig",Ed="extensions",Yo="processTelemetry",Sd="priority",fh="eventsSent",pu="eventsDiscarded",dh="eventsSendRequest",va="perfEvent",j_="offlineEventsStored",V_="offlineBatchSent",Y_="offlineBatchDrop",mh="getPerfMgr",q_="domain",G_="path",tz="Not dynamic - "});function hu(t){return!ae(t)}function xd(t){var e=t;return e&&ke(e)&&(e=e[bs](Zfe,function(n,r){return r.toUpperCase()}),e=e[bs](Qfe,"_"),e=e[bs](ede,function(n,r){return"_"+r})),e}function _n(t,e){return t&&e?Vi(t,e)!==-1:!1}function Rs(t){return t&&t.toISOString()||""}function nn(t){return ad(t)?t[ho]:Le}function Ki(t,e,n,r,o){var i=n;return t&&(i=t[e],i!==n&&(!o||o(i))&&(!r||r(n))&&(i=n,t[e]=i)),i}function Ow(t,e,n){var r;return t?(r=t[e],!r&&ae(r)&&(r=Ve(n)?{}:n,t[e]=r)):r=Ve(n)?{}:n,r}function rz(t,e){var n=null,r=null;return Re(t)?n=t:r=t,function(){var o=arguments;if(n&&(r=n()),r)return r[e][cu](r,o)}}function iL(t,e,n){if(t&&e&&tn(t)&&tn(e)){var r=function(i){if(ke(i)){var s=e[i];Re(s)?(!n||n(i,!0,e,t))&&(t[i]=rz(e,i)):(!n||n(i,!1,e,t))&&(_s(t,i)&&delete t[i],gt(t,i,{g:function(){return e[i]},s:function(a){e[i]=a}}))}};for(var o in e)r(o)}return t}function Tc(t,e,n,r,o){t&&e&&n&&(o!==!1||Ve(t[e]))&&(t[e]=rz(n,r))}function yi(t,e,n,r){return t&&e&&tn(t)&&we(n)&&ee(n,function(o){ke(o)&&Tc(t,o,e,o,r)}),t}function sL(t){return(function(){function e(){var n=this;t&&Ie(t,function(r,o){n[r]=o})}return e})()}function qo(t){return t&&Kp&&(t=qp(Kp({},t))),t}function z_(t,e,n,r,o,i){var s=arguments,a=s[0]||{},c=s[me],l=!1,u=1;for(c>0&&ca(a)&&(l=a,a=s[u]||{},u++),tn(a)||(a={});u<c;u++){var f=s[u],m=we(f),d=tn(f);for(var p in f){var g=m&&p in f||d&&_s(f,p);if(g){var h=f[p],v=void 0;if(l&&h&&((v=we(h))||Tr(h))){var C=a[p];v?we(C)||(C=[]):Tr(C)||(C={}),h=z_(l,C,h)}h!==void 0&&(a[p]=h)}}}return a}function ks(t){try{return t.responseText}catch{}return null}function _d(t,e){return t?"XDomainRequest,Response:"+ks(t)||"":e}function Rc(t,e){return t?"XMLHttpRequest,Status:"+t[hd]+",Response:"+ks(t)||t.response||"":e}function kc(t,e){return e&&(Ir(e)?t=[e].concat(t):we(e)&&(t=e.concat(t))),t}function aL(t,e,n,r,o,i){r===void 0&&(r=!1),o===void 0&&(o=!1);function s(c,l,u){try{c[l]=u}catch{}}var a=new XMLHttpRequest;return r&&s(a,tde,r),n&&s(a,nz,n),a.open(t,e,!o),n&&s(a,nz,n),!o&&i&&s(a,nde,i),a}function K_(t){var e={};if(ke(t)){var n=tt(t)[Gi](/[\r\n]+/);ee(n,function(r){if(r){var o=r.indexOf(": ");if(o!==-1){var i=tt(r.substring(0,o))[Wo](),s=tt(r.substring(o+1));e[i]=s}else e[tt(r)]=1}})}return e}function ph(t,e,n){if(!t[n]&&e&&e.getResponseHeader){var r=e.getResponseHeader(n);r&&(t[n]=tt(r))}return t}function Nc(t,e){var n={};return t[zN]?n=K_(t[zN]()):e&&(n=ph(n,t,ide),n=ph(n,t,rde),n=ph(n,t,ode)),n}var Xfe,Zfe,Qfe,ede,lTe,tde,nz,nde,rde,ode,ide,wa=ne(()=>{Bo();Ne();xt();Un();Xfe="getPrototypeOf",Zfe=/-([a-z])/g,Qfe=/([^\w\d_$])/g,ede=/^(\d+[\w\d_$])/,lTe=Object[Xfe];tde="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",nz="withCredentials",nde="timeout";rde="kill-duration",ode="kill-duration-seconds",ide="time-delta-millis"});function az(t,e){var n=!1;if(t){try{if(n=e in t,!n){var r=t[Ss];r&&(n=e in r)}}catch{}if(!n)try{var o=new t;n=!Ve(o[e])}catch{}}return n}function mL(t){sz=t}function Dd(t){if(t&&sz){var e=vt("__mockLocation");if(e)return e}return typeof location===Cc&&location?location:vt(ade)}function Uw(){return typeof console!==sa?console:vt(cde)}function ya(){return!!(typeof JSON===Cc&&JSON||vt(oz)!==null)}function Rr(){return ya()?JSON||vt(oz):null}function Mw(){return vt(lde)}function $w(){return vt(ude)}function gu(){var t=Kn();return t&&t.product?t.product===fde:!1}function vu(){var t=Kn();if(t&&(t[kw]!==lL||cL===null)){lL=t[kw];var e=(lL||Le)[Wo]();cL=_n(e,fL)||_n(e,dL)}return cL}function Hw(t){if(t===void 0&&(t=null),!t){var e=Kn()||{};t=e?(e.userAgent||Le)[Wo]():Le}var n=(t||Le)[Wo]();if(_n(n,fL)){var r=Fn()||{};return la(parseInt(n[Gi](fL)[1]),r[sde]||0)}else if(_n(n,dL)){var o=parseInt(n[Gi](dL)[1]);if(o)return o+4}return null}function Ji(t){return(uL===null||t===!1)&&(uL=Sw()&&!!Kn().sendBeacon),uL}function Lc(t){var e=!1;try{e=!!vt("fetch");var n=vt("Request");e&&t&&n&&(e=az(n,"keepalive"))}catch{}return e}function Bw(){return hh===null&&(hh=typeof XDomainRequest!==sa,hh&&gh()&&(hh=hh&&!az(vt(iz),"withCredentials"))),hh}function gh(){var t=!1;try{var e=vt(iz);t=!!e}catch{}return t}function cz(t,e){if(t)for(var n=0;n<t[me];n++){var r=t[n];if(r[ho]&&r[ho]===e)return r}return{}}function pL(t){var e=Fn();return e&&t?cz(e.querySelectorAll("meta"),t).content:null}function hL(t){var e,n=ud();if(n){var r=n.getEntriesByType("navigation")||[];e=cz((r[me]>0?r[0]:{}).serverTiming,t).description}return e}var sde,ade,cde,oz,lde,ude,fde,fL,dL,iz,cL,lL,sz,hh,uL,wu=ne(()=>{"use strict";Bo();Ne();xt();wa();Un();sde="documentMode",ade="location",cde="console",oz="JSON",lde="crypto",ude="msCrypto",fde="ReactNative",fL="msie",dL="trident/",iz="XMLHttpRequest",cL=null,lL=null,sz=!1,hh=null,uL=null});function dde(t){t<0&&(t>>>=0),Ww=uz+t&yu,jw=fz-t&yu,dz=!0}function mde(){try{var t=xn()&2147483647;dde((Math.random()*lz^t)+t)}catch{}}function gL(t){return t>0?ji(Ac()/yu*(t+1))>>>0:0}function Ac(t){var e=0,n=Mw()||$w();return n&&n.getRandomValues&&(e=n.getRandomValues(new Uint32Array(1))[0]&yu),e===0&&vu()&&(dz||mde(),e=mz()&yu),e===0&&(e=ji(lz*Math.random()|0)),t||(e>>>=0),e}function mz(t){jw=36969*(jw&65535)+(jw>>16)&yu,Ww=18e3*(Ww&65535)+(Ww>>16)&yu;var e=(jw<<16)+(Ww&65535)>>>0&yu|0;return t||(e>>>=0),e}function Vw(t){t===void 0&&(t=22);for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=Ac()>>>0,r=0,o=Le;o[me]<t;)r++,o+=e.charAt(n&63),n>>>=6,r===5&&(n=(Ac()<<2&4294967295|n&3)>>>0,r=0);return o}var lz,yu,uz,fz,dz,Ww,jw,J_=ne(()=>{Ne();xt();wu();Un();lz=4294967296,yu=4294967295,uz=123456789,fz=987654321,dz=!1,Ww=uz,jw=fz});function hz(t){return t.nodeType===1||t.nodeType===9||!+t.nodeType}function gde(t,e){var n=e[t.id];if(!n){n={};try{hz(e)&&gt(e,t.id,{e:!1,v:n})}catch{}}return n}function kr(t,e){return e===void 0&&(e=!1),xd(t+hde+++(e?"."+pz:Le)+pde)}function X_(t){var e={id:kr("_aiData-"+(t||Le)+"."+pz),accept:function(n){return hz(n)},get:function(n,r,o,i){var s=n[e.id];return s?s[xd(r)]:(i&&(s=gde(e,n),s[xd(r)]=o),o)},kill:function(n,r){if(n&&n[r])try{delete n[r]}catch{}}};return e}var pz,pde,hde,vh=ne(()=>{Ne();wa();Un();J_();pz="3.3.6",pde="."+Vw(6),hde=0});function Z_(t){return t&&tn(t)&&(t.isVal||t.fb||_s(t,"v")||_s(t,"mrg")||_s(t,"ref")||t.set)}function gz(t,e,n){var r,o=n.dfVal||C_;if(e&&n.fb){var i=n.fb;we(i)||(i=[i]);for(var s=0;s<i[me];s++){var a=i[s],c=e[a];if(o(c)?r=c:t&&(c=t.cfg[a],o(c)&&(r=c),t.set(t.cfg,Sn(a),c)),o(r))break}}return!o(r)&&o(n.v)&&(r=n.v),r}function vL(t,e,n){var r=n;if(n&&Z_(n)&&(r=gz(t,e,n)),r){Z_(r)&&(r=vL(t,e,r));var o;we(r)?(o=[],o[me]=r[me]):Tr(r)&&(o={}),o&&(Ie(r,function(i,s){s&&Z_(s)&&(s=vL(t,e,s)),o[i]=s}),r=o)}return r}function Yw(t,e,n,r){var o,i,s,a=r,c,l,u,f;Z_(a)?(o=a.isVal,i=a.set,u=a.rdOnly,f=a.blkVal,c=a.mrg,l=a.ref,!l&&Ve(l)&&(l=!!c),s=gz(t,e,a)):s=r,f&&t.blkVal(e,n);var m,d=!0,p=e[n];(p||!ae(p))&&(m=p,d=!1,o&&m!==s&&!o(m)&&(m=s,d=!0),i&&(m=i(m,s,e),d=m===s)),d?s?m=vL(t,e,s):m=s:(Tr(m)||we(s))&&c&&s&&(Tr(s)||we(s))&&Ie(s,function(g,h){Yw(t,m,g,h)}),t.set(e,n,m),l&&t.ref(e,n),u&&t.rdOnly(e,n)}var wL=ne(()=>{Ne();xt()});function yL(t){if(t){var e;if(we(t)?(e=[],e[me]=t[me]):Tr(t)&&(e={}),e)return Ie(t,function(n,r){e[n]=yL(r)}),e}return t}function qw(t){if(t){var e=t[Ca]||t;if(e.cfg&&(e.cfg===t||e.cfg[Ca]===e))return e}return null}function Gw(t){if(t&&(Tr(t)||we(t)))try{t[vz]=!0}catch{}return t}function CL(t){if(t)try{t[wz]=!0}catch{}return t}function Q_(t,e,n){var r=!1;return n&&!t[e.blkVal]&&(r=n[wz],!r&&!n[vz]&&(r=Tr(n)||we(n))),r}function eD(t){Pr("InvalidAccess:"+t)}var Ca,vz,wz,tD=ne(()=>{Ne();xt();Ca=D_("[[ai_dynCfg_1]]"),vz=D_("[[ai_blkDynCfg_1]]"),wz=D_("[[ai_frcDynCfg_1]]")});function wde(t,e,n){we(e)&&ee(vde,function(r){var o=e[r];e[r]=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var a=o[cu](this,i);return zw(t,e,n,"Patching"),a}})}function nD(t,e){var n=S_(t,e);return n&&n.get}function yde(t,e,n,r){var o={n,h:[],trk:function(l){l&&l.fn&&(wt(o.h,l)===-1&&o.h[Ge](l),t.trk(l,o))},clr:function(l){var u=wt(o.h,l);u!==-1&&o.h[ma](u,1)}},i=!0,s=!1;function a(){i&&(s=s||Q_(a,t,r),r&&!r[Ca]&&s&&(r=zw(t,r,n,"Converting")),i=!1);var l=t.act;return l&&o.trk(l),r}a[t.prop]={chng:function(){t.add(o)}};function c(l){if(r!==l){a[t.ro]&&!t.upd&&eD("["+n+"] is read-only:"+Ee(e)),i&&(s=s||Q_(a,t,r),i=!1);var u=s&&a[t.rf];if(s)if(u){Ie(r,function(m){r[m]=l?l[m]:wi});try{Ie(l,function(m,d){Kw(t,r,m,d)}),l=r}catch(m){wh((t.hdlr||{})[kt],n,"Assigning",m),s=!1}}else r&&r[Ca]&&Ie(r,function(m){var d=nD(r,m);if(d){var p=d[t.prop];p&&p.chng()}});if(l!==r){var f=l&&Q_(a,t,l);!u&&f&&(l=zw(t,l,n,"Converting")),r=l,s=f}t.add(o)}}gt(e,o.n,{g:a,s:c})}function Kw(t,e,n,r){if(e){var o=nD(e,n),i=o&&!!o[t.prop];i?e[n]=r:yde(t,e,n,r)}return e}function rD(t,e,n,r){if(e){var o=nD(e,n),i=o&&!!o[t.prop],s=r&&r[0],a=r&&r[1],c=r&&r[2];if(!i){if(c)try{Gw(e)}catch(l){wh((t.hdlr||{})[kt],n,"Blocking",l)}try{Kw(t,e,n,e[n]),o=nD(e,n)}catch(l){wh((t.hdlr||{})[kt],n,"State",l)}}s&&(o[t.rf]=s),a&&(o[t.ro]=a),c&&(o[t.blkVal]=!0)}return e}function zw(t,e,n,r){try{Ie(e,function(o,i){Kw(t,e,o,i)}),e[Ca]||($o(e,Ca,{get:function(){return t.hdlr}}),wde(t,e,n))}catch(o){wh((t.hdlr||{})[kt],n,r,o)}return e}var vde,wh,yz=ne(()=>{Ne();Un();xt();tD();vde=["push","pop","shift","unshift","splice"],wh=function(t,e,n,r){t&&t[Dc](3,108,"".concat(n," [").concat(e,"] failed - ")+Ee(r))}});function Cz(t){var e=Qp(Jw+"get"+t.uid+Xw),n=Qp(Jw+"ro"+t.uid+Xw),r=Qp(Jw+"rf"+t.uid+Xw),o=Qp(Jw+"blkVal"+t.uid+Xw),i=Qp(Jw+"dtl"+t.uid+Xw),s=null,a=null,c;function l(d,p){var g=c.act;try{c.act=d,d&&d[i]&&(ee(d[i],function(v){v.clr(d)}),d[i]=[]),p({cfg:t.cfg,set:t.set.bind(t),setDf:t.setDf.bind(t),ref:t.ref.bind(t),rdOnly:t.rdOnly.bind(t)})}catch(v){var h=t[kt];throw h&&h[Dc](1,107,Ee(v)),v}finally{c.act=g||null}}function u(){if(s){var d=s;s=null,a&&a[Ic](),a=null;var p=[];if(ee(d,function(g){if(g&&(g[i]&&(ee(g[i],function(h){h.clr(g)}),g[i]=null),g.fn))try{l(g,g.fn)}catch(h){p[Ge](h)}}),s)try{u()}catch(g){p[Ge](g)}p[me]>0&&W3("Watcher error(s): ",p)}}function f(d){if(d&&d.h[me]>0){s||(s=[]),a||(a=di(function(){a=null,u()},0));for(var p=0;p<d.h[me];p++){var g=d.h[p];g&&wt(s,g)===-1&&s[Ge](g)}}}function m(d,p){if(d){var g=d[i]=d[i]||[];wt(g,p)===-1&&g[Ge](p)}}return c={prop:e,ro:n,rf:r,blkVal:o,hdlr:t,add:f,notify:u,use:l,trk:m},c}var Jw,Xw,Ez=ne(()=>{Ne();j3();xt();Jw="[[ai_",Xw="]]"});function Cde(t,e){var n={fn:e,rm:function(){n.fn=null,t=null,e=null}};return gt(n,"toJSON",{v:function(){return"WatcherHandler"+(n.fn?"":"[X]")}}),t.use(n,e),n}function Ede(t,e,n){var r=qw(e);if(r)return r;var o=kr("dyncfg",!0),i=e&&n!==!1?e:yL(e),s;function a(){s.notify()}function c(h,v,C){try{h=Kw(s,h,v,C)}catch(w){wh(t,v,"Setting value",w)}return h[v]}function l(h){return Cde(s,h)}function u(h,v){s.use(null,function(C){var w=s.upd;try{Ve(v)||(s.upd=v),h(C)}finally{s.upd=w}})}function f(h,v){var C;return rD(s,h,v,(C={},C[0]=!0,C))[v]}function m(h,v){var C;return rD(s,h,v,(C={},C[1]=!0,C))[v]}function d(h,v){var C;return rD(s,h,v,(C={},C[2]=!0,C))[v]}function p(h,v){return v&&Ie(v,function(C,w){Yw(g,h,C,w)}),h}var g={uid:null,cfg:i,logger:t,notify:a,set:c,setDf:p,watch:l,ref:f,rdOnly:m,blkVal:d,_block:u};return gt(g,"uid",{c:!1,e:!1,w:!1,v:o}),s=Cz(g),zw(s,i,"config","Creating"),g}function Sde(t,e){t?(t[oh](e),t[Dc](2,108,e)):eD(e)}function Vt(t,e,n,r){var o=Ede(n,t||{},r);return e&&o.setDf(o.cfg,e),o}function hr(t,e,n){var r=t[Ca]||t;return r.cfg&&(r.cfg===t||r.cfg[Ca]===r)?r[da](e):(Sde(n,tz+Ee(t)),Vt(t,null,n)[da](e))}var Cu=ne(()=>{Ne();vh();Un();xt();wL();yz();Ez();tD()});function Fc(t,e){if(t&&t[qi])return t[qi](e)}function oD(t,e,n){var r;return n||(r=zi(function(o){n=o})),t&&th(t)>0?vi(Fc(t[0],e),function(){oD(eh(t,1),e,n)}):n(),r}var EL=ne(()=>{yd();Ne();xt()});var Sz,SL,xL=ne(()=>{Sz=500,SL="Microsoft_ApplicationInsights_BypassAjaxInstrumentation"});function xde(t,e,n){return!t&&ae(t)?e:ca(t)?t:Sn(t)[Wo]()==="true"}function _L(t){return{mrg:!0,v:t}}function yh(t,e,n){return{fb:n,isVal:t,v:e}}function Xi(t,e){return{fb:e,set:xde,v:!!t}}var DL=ne(()=>{Ne();xt()});function _de(t,e){return function(){var n=arguments,r=PL(e);if(r){var o=r.listener;o&&o[t]&&o[t][cu](o,n)}}}function Dde(){var t=vt("Microsoft");return t&&(sD=t.ApplicationInsights),sD}function PL(t){var e=sD;return!e&&t.disableDbgExt!==!0&&(e=sD||Dde()),e?e.ChromeDbgExt:null}function xz(t){if(!iD){iD={};for(var e=0;e<IL[me];e++)iD[IL[e]]=_de(IL[e],t)}return iD}var IL,sD,iD,bL=ne(()=>{Ne();xt();Un();IL=[fh,pu,dh,va],sD=null});function _z(t){return t?'"'+t[bs](/\"/g,Le)+'"':Le}function TL(t,e){var n=Uw();if(n){var r="log";n[t]&&(r=t),Re(n[r])&&n[r](e)}}function Oc(t,e){return(t||{})[kt]||new Eu(e)}function RL(t){return t||new Eu}function se(t,e,n,r,o,i){i===void 0&&(i=!1),RL(t)[Dc](e,n,r,o,i)}function go(t,e){RL(t)[oh](e)}function kL(t,e,n){RL(t).logInternalMessage(e,n)}var Ch,Dz,Ide,Pde,bde,Tde,Rde,Id,Eu,Ns=ne(()=>{"use strict";pr();Ne();Cu();xt();bL();wu();Un();Dz="warnToConsole",Ide="AI (Internal): ",Pde="AI: ",bde="AITR_",Tde={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Rde=(Ch={},Ch[0]=null,Ch[1]="errorToConsole",Ch[2]=Dz,Ch[3]="debugToConsole",Ch);Id=(function(){function t(e,n,r,o){r===void 0&&(r=!1);var i=this;i[ch]=e,i[ga]=(r?Pde:Ide)+e;var s=Le;ya()&&(s=Rr().stringify(o));var a=(n?" message:"+_z(n):Le)+(o?" props:"+_z(s):Le);i[ga]+=a}return t.dataType="MessageData",t})();Eu=(function(){function t(e){this.identifier="DiagnosticLogger",this.queue=[];var n=0,r={},o,i,s,a,c;Je(t,this,function(l){c=f(e||{}),l.consoleLoggingLevel=function(){return o},l[Dc]=function(p,g,h,v,C){C===void 0&&(C=!1);var w=new Id(g,h,C,v);if(a)throw Ee(w);var y=Rde[p]||Dz;if(Ve(w[ga]))d("throw"+(p===1?"Critical":"Warning"),w);else{if(C){var S=+w[ch];!r[S]&&o>=p&&(l[y](w[ga]),r[S]=!0)}else o>=p&&l[y](w[ga]);u(p,w)}},l.debugToConsole=function(p){TL("debug",p),d("warning",p)},l[oh]=function(p){TL("warn",p),d("warning",p)},l.errorToConsole=function(p){TL("error",p),d("error",p)},l.resetInternalMessageCount=function(){n=0,r={}},l.logInternalMessage=u,l[qi]=function(p){c&&c.rm(),c=null};function u(p,g){if(!m()){var h=!0,v=bde+g[ch];if(r[v]?h=!1:r[v]=!0,h&&(p<=i&&(l.queue[Ge](g),n++,d(p===1?"error":"warn",g)),n===s)){var C="Internal events throttle limit per PageView reached for this app.",w=new Id(23,C,!1);l.queue[Ge](w),p===1?l.errorToConsole(C):l[oh](C)}}}function f(p){return hr(Vt(p,Tde,l).cfg,function(g){var h=g.cfg;o=h[M_],i=h.loggingLevelTelemetry,s=h.maxMessageLimit,a=h.enableDebug})}function m(){return n>=s}function d(p,g){var h=PL(e||{});h&&h[Vo]&&h[Vo](p,g)}})}return t.__ieDyn=1,t})()});function UL(){!Ea&&(Ea=E3(function(){return Fn()}))}function Nde(t,e){var n=Uc[Su]||lD[Su];return n||(n=Uc[Su]=Uc(t,e),lD[Su]=n),n}function cD(t){return t?t.isEnabled():!0}function Fz(t,e){return e&&t&&we(t.ignoreCookies)?wt(t.ignoreCookies,e)!==-1:!1}function Lde(t,e){return e&&t&&we(t.blockedCookies)&&wt(t.blockedCookies,e)!==-1?!0:Fz(t,e)}function kz(t,e){var n=e[uu];if(ae(n)){var r=void 0;Ve(t[bz])||(r=!t[bz]),Ve(t[FL])||(r=!t[FL]),n=r}return n}function ML(t,e){var n;if(t)n=t.getCookieMgr();else if(e){var r=e.cookieCfg;r&&r[Su]?n=r[Su]:n=Uc(e)}return n||(n=Nde(e,(t||{})[kt])),n}function Uc(t,e){var n,r,o,i,s,a,c,l;t=Vt(t||lD,null,e).cfg,i=hr(t,function(f){f.setDf(f.cfg,kde),n=f.ref(f.cfg,"cookieCfg"),r=n[G_]||"/",o=n[q_],s=kz(t,n)!==!1,a=n.getCookie||Ade,c=n.setCookie||Az,l=n.delCookie||Az},e);var u={isEnabled:function(){var f=kz(t,n)!==!1&&s&&Eh(e),m=lD[Su];return f&&m&&u!==m&&(f=cD(m)),f},setEnabled:function(f){s=f!==!1,n[uu]=f},set:function(f,m,d,p,g){var h=!1;if(cD(u)&&!Lde(n,f)){var v={},C=tt(m||Le),w=Vi(C,";");if(w!==-1&&(C=tt(cd(m,w)),v=Oz(zn(m,w+1))),Ki(v,q_,p||o,xs,Ve),!ae(d)){var y=vu();if(Ve(v[LL])){var S=xn(),D=S+d*1e3;if(D>0){var _=new Date;_.setTime(D),Ki(v,LL,Nz(_,y?Iz:Pz)||Nz(_,y?Iz:Pz)||Le,xs)}}y||Ki(v,"max-age",Le+d,null,Ve)}var A=Dd();A&&A.protocol==="https:"&&(Ki(v,"secure",null,null,Ve),AL===null&&(AL=!uD((Kn()||{})[kw])),AL&&Ki(v,"SameSite","None",null,Ve)),Ki(v,G_,g||r,null,Ve),c(f,Lz(C,v)),h=!0}return h},get:function(f){var m=Le;return cD(u)&&!Fz(n,f)&&(m=a(f)),m},del:function(f,m){var d=!1;return cD(u)&&(d=u.purge(f,m)),d},purge:function(f,m){var d,p=!1;if(Eh(e)){var g=(d={},d[G_]=m||"/",d[LL]="Thu, 01 Jan 1970 00:00:01 GMT",d);vu()||(g["max-age"]="0"),l(f,Lz(Le,g)),p=!0}return p},unload:function(f){i&&i.rm(),i=null}};return u[Su]=u,u}function Eh(t){if(aD===null){aD=!1,!Ea&&UL();try{var e=Ea.v||{};aD=e[OL]!==void 0}catch(n){se(t,2,68,"Cannot access document.cookie - "+nn(n),{exception:Ee(n)})}}return aD}function Oz(t){var e={};if(t&&t[me]){var n=tt(t)[Gi](";");ee(n,function(r){if(r=tt(r||Le),r){var o=Vi(r,"=");o===-1?e[r]=null:e[tt(cd(r,o))]=tt(zn(r,o+1))}})}return e}function Nz(t,e){return Re(t[e])?t[e]():null}function Lz(t,e){var n=t||Le;return Ie(e,function(r,o){n+="; "+r+(ae(o)?Le:"="+o)}),n}function Ade(t){var e=Le;if(!Ea&&UL(),Ea.v){var n=Ea.v[OL]||Le;Tz!==n&&(Rz=Oz(n),Tz=n),e=tt(Rz[t]||Le)}return e}function Az(t,e){!Ea&&UL(),Ea.v&&(Ea.v[OL]=t+"="+e)}function uD(t){return ke(t)?!!(_n(t,"CPU iPhone OS 12")||_n(t,"iPad; CPU OS 12")||_n(t,"Macintosh; Intel Mac OS X 10_14")&&_n(t,"Version/")&&_n(t,"Safari")||_n(t,"Macintosh; Intel Mac OS X 10_14")&&fd(t,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||_n(t,"Chrome/5")||_n(t,"Chrome/6")||_n(t,"UnrealEngine")&&!_n(t,"Chrome")||_n(t,"UCBrowser/12")||_n(t,"UCBrowser/11")):!1}var NL,Pd,Iz,Pz,OL,LL,bz,FL,Su,aD,AL,Tz,Ea,Rz,lD,kde,$L=ne(()=>{Ne();DL();Cu();xt();Ns();wu();wa();Un();Iz="toGMTString",Pz="toUTCString",OL="cookie",LL="expires",bz="isCookieUseDisabled",FL="disableCookiesUsage",Su="_ckMgr",aD=null,AL=null,Tz=null,Rz={},lD={},kde=(NL={cookieCfg:_L((Pd={},Pd[q_]={fb:"cookieDomain",dfVal:hu},Pd.path={fb:"cookiePath",dfVal:hu},Pd.enabled=wi,Pd.ignoreCookies=wi,Pd.blockedCookies=wi,Pd)),cookieDomain:wi,cookiePath:wi},NL[FL]=wi,NL)});function Ode(t){t.h=null;var e=t.cb;t.cb=[],ee(e,function(n){Gn(n.fn,[n.arg])})}function xu(t,e,n,r){ee(t,function(o){o&&o[e]&&(n?(n.cb[Ge]({fn:r,arg:o}),n.h=n.h||di(Ode,0,n)):Gn(r,[o]))})}var Fde,Zw,HL=ne(()=>{pr();yd();Ne();Cu();xt();Un();Fde={perfEvtsSendAll:!1};Zw=(function(){function t(e){this.listeners=[];var n,r,o=[],i={h:null,cb:[]},s=Vt(e,Fde);r=s[da](function(a){n=!!a.cfg.perfEvtsSendAll}),Je(t,this,function(a){gt(a,"listeners",{g:function(){return o}}),a[sh]=function(c){o[Ge](c)},a[ih]=function(c){for(var l=wt(o,c);l>-1;)o[ma](l,1),l=wt(o,c)},a[fh]=function(c){xu(o,fh,i,function(l){l[fh](c)})},a[pu]=function(c,l){xu(o,pu,i,function(u){u[pu](c,l)})},a[dh]=function(c,l){xu(o,dh,l?i:null,function(u){u[dh](c,l)})},a[va]=function(c){c&&(n||!c[Nw]())&&xu(o,va,null,function(l){c.isAsync?di(function(){return l[va](c)},0):l[va](c)})},a[j_]=function(c){c&&c[me]&&xu(o,j_,i,function(l){l[j_](c)})},a[V_]=function(c){c&&c[mu]&&xu(o,V_,i,function(l){l[V_](c)})},a[Y_]=function(c,l){if(c>0){var u=l||0;xu(o,Y_,i,function(f){f[Y_](c,u)})}},a[qi]=function(c){var l=function(){r&&r.rm(),r=null,o=[],i.h&&i.h[Ic](),i.h=null,i.cb=[]},u;if(xu(o,"unload",null,function(f){var m=f[qi](c);m&&(u||(u=[]),u[Ge](m))}),u)return zi(function(f){return vi(ez(u),function(){l(),f()})});l()}})}return t.__ieDyn=1,t})()});function mn(t,e,n,r,o){if(t){var i=t;if(i[mh]&&(i=i[mh]()),i){var s=void 0,a=i[gd](BL);try{if(s=i.create(e(),r,o),s){if(a&&s[Ts]&&(s[Ts](bd[WL],a),a[gd]&&a[Ts])){var c=a[gd](bd[Qw]);c||(c=[],a[Ts](bd[Qw],c)),c[Ge](s)}return i[Ts](BL,s),n(s)}}catch(l){s&&s[Ts]&&s[Ts]("exception",l)}finally{s&&i.fire(s),i[Ts](BL,a)}}}return n()}function jL(){return Ude}var Sh,WL,Qw,Ude,bd,ey,BL,fD=ne(()=>{pr();Ne();xt();Un();Sh="ctx",WL="ParentContextKey",Qw="ChildrenContextKey",Ude=null,bd=(function(){function t(e,n,r){var o=this;if(o.start=xn(),o[ho]=e,o.isAsync=r,o[Nw]=function(){return!1},Re(n)){var i;gt(o,"payload",{g:function(){return!i&&Re(n)&&(i=n(),n=null),i}})}o[gd]=function(s){return s?s===t[WL]||s===t[Qw]?o[s]:(o[Sh]||{})[s]:null},o[Ts]=function(s,a){if(s)if(s===t[WL])o[s]||(o[Nw]=function(){return!0}),o[s]=a;else if(s===t[Qw])o[s]=a;else{var c=o[Sh]=o[Sh]||{};c[s]=a}},o.complete=function(){var s=0,a=o[gd](t[Qw]);if(we(a))for(var c=0;c<a[me];c++){var l=a[c];l&&(s+=l.time)}o.time=xn()-o.start,o.exTime=o.time-s,o.complete=function(){}}}return t.ParentContextKey="parent",t.ChildrenContextKey="childEvts",t})(),ey=(function(){function t(e){this.ctx={},Je(t,this,function(n){n.create=function(r,o,i){return new bd(r,o,i)},n.fire=function(r){r&&(r.complete(),e&&Re(e[va])&&e[va](r))},n[Ts]=function(r,o){if(r){var i=n[Sh]=n[Sh]||{};i[r]=o}},n[gd]=function(r){return(n[Sh]||{})[r]}})}return t.__ieDyn=1,t})(),BL="CoreUtils.doPerf"});function ty(){var t=Td();return zn(t,0,8)+"-"+zn(t,8,12)+"-"+zn(t,12,16)+"-"+zn(t,16,20)+"-"+zn(t,20)}function Td(){for(var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],e=Le,n,r=0;r<4;r++)n=Ac(),e+=t[n&15]+t[n>>4&15]+t[n>>8&15]+t[n>>12&15]+t[n>>16&15]+t[n>>20&15]+t[n>>24&15]+t[n>>28&15];var o=t[8+(Ac()&3)|0];return ua(e,0,8)+ua(e,9,4)+"4"+ua(e,13,3)+o+ua(e,16,3)+ua(e,19,12)}var VL=ne(()=>{"use strict";Ne();Un();J_()});function Mc(t,e,n){return t&&t[me]===e&&t!==n?!!t.match(/^[\da-f]*$/i):!1}function Mz(t,e,n){return Mc(t,e)?t:n}function $z(t){(isNaN(t)||t<0||t>255)&&(t=1);for(var e=t.toString(16);e[me]<2;)e="0"+e;return e}function GL(t,e,n,r){return{version:Mc(r,2,qL)?r:YL,traceId:Rd(t)?t:Td(),spanId:kd(e)?e:cd(Td(),16),traceFlags:n>=0&&n<=255?n:1}}function ny(t,e){if(!t||(we(t)&&(t=t[0]||""),!t||!ke(t)||t[me]>8192))return null;if(t.indexOf(",")!==-1){var n=t[Gi](",");t=n[e>0&&n[me]>e?e:0]}var r=Mde.exec(tt(t));return!r||r[1]===qL||r[2]===dD||r[3]===mD?null:{version:(r[1]||Le)[Wo](),traceId:(r[2]||Le)[Wo](),spanId:(r[3]||Le)[Wo](),traceFlags:parseInt(r[4],16)}}function Rd(t){return Mc(t,32,dD)}function kd(t){return Mc(t,16,mD)}function pD(t){return!(!t||!Mc(t[ah],2,qL)||!Mc(t.traceId,32,dD)||!Mc(t.spanId,16,mD)||!Mc($z(t[wd]),2))}function zL(t){return pD(t)?(t[wd]&Uz)===Uz:!1}function KL(t){if(t){var e=$z(t[wd]);Mc(e,2)||(e="01");var n=t[ah]||YL;return n!=="00"&&n!=="ff"&&(n=YL),"".concat(n.toLowerCase(),"-").concat(Mz(t.traceId,32,dD).toLowerCase(),"-").concat(Mz(t.spanId,16,mD).toLowerCase(),"-").concat(e.toLowerCase())}return""}function JL(t){var e="traceparent",n=ny(pL(e),t);return n||(n=ny(hL(e),t)),n}var Mde,YL,qL,dD,mD,Uz,XL=ne(()=>{Ne();xt();VL();wu();Un();Mde=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,YL="00",qL="ff",dD="00000000000000000000000000000000",mD="0000000000000000",Uz=1});function $c(t){return $de.get(t,"state",{},!0)}function ZL(t,e){for(var n=[],r=null,o=t[hi](),i;o;){var s=o[lu]();if(s){r&&r[du]&&s[Yo]&&r[du](s),i=$c(s);var a=!!i[jo];s[jo]&&(a=s[jo]()),a||n[Ge](s),r=s,o=o[hi]()}}ee(n,function(c){var l=t[dn]();c[Pc](t.getCfg(),l,e,t[hi]()),i=$c(c),!c[dn]&&!i[dn]&&(i[dn]=l),i[jo]=!0,delete i[pi]})}function hD(t){return t.sort(function(e,n){var r=0;if(n){var o=n[Yo];e[Yo]?r=o?e[Sd]-n[Sd]:1:o&&(r=-1)}else r=e?1:-1;return r})}function Hz(t){var e={};return{getName:function(){return e[ho]},setName:function(n){t&&t.setName(n),e[ho]=n},getTraceId:function(){return e.traceId},setTraceId:function(n){t&&t.setTraceId(n),Rd(n)&&(e.traceId=n)},getSpanId:function(){return e.spanId},setSpanId:function(n){t&&t.setSpanId(n),kd(n)&&(e.spanId=n)},getTraceFlags:function(){return e[wd]},setTraceFlags:function(n){t&&t.setTraceFlags(n),e[wd]=n}}}var $de,QL=ne(()=>{"use strict";Ne();xt();vh();Un();XL();$de=X_("plugin")});function Bde(t,e,n){for(;t;){if(t[lu]()===n)return t;t=t[hi]()}return _u([n],e.config||{},e)}function eA(t,e,n,r){var o=null,i=[];e||(e=Vt({},null,n[kt])),r!==null&&(o=r?Bde(t,n,r):t);var s={_next:c,ctx:{core:function(){return n},diagLog:function(){return Oc(n,e.cfg)},getCfg:function(){return e.cfg},getExtCfg:u,getConfig:f,hasNext:function(){return!!o},getNext:function(){return o},setNext:function(d){o=d},iterate:m,onComplete:a}};function a(d,p){for(var g=[],h=2;h<arguments.length;h++)g[h-2]=arguments[h];d&&i[Ge]({func:d,self:Ve(p)?s.ctx:p,args:g})}function c(){var d=o;if(o=d?d[hi]():null,!d){var p=i;p&&p[me]>0&&(ee(p,function(g){try{g.func.call(g.self,g.args)}catch(h){se(n[kt],2,73,"Unexpected Exception during onComplete - "+Ee(h))}}),i=[])}return d}function l(d,p){var g=null,h=e.cfg;if(h&&d){var v=h[bc];!v&&p&&(v={}),h[bc]=v,v=e.ref(h,bc),v&&(g=v[d],!g&&p&&(g={}),v[d]=g,g=e.ref(v,d))}return g}function u(d,p){var g=l(d,!0);return p&&Ie(p,function(h,v){if(ae(g[h])){var C=e.cfg[h];(C||!ae(C))&&(g[h]=C)}Yw(e,g,h,v)}),e.setDf(g,p)}function f(d,p,g){g===void 0&&(g=!1);var h,v=l(d,!1),C=e.cfg;return v&&(v[p]||!ae(v[p]))?h=v[p]:(C[p]||!ae(C[p]))&&(h=C[p]),h||!ae(h)?h:g}function m(d){for(var p;p=s._next();){var g=p[lu]();g&&d(g)}}return s}function vo(t,e,n,r){var o=Vt(e),i=eA(t,o,n,r),s=i.ctx;function a(l){var u=i._next();return u&&u[Yo](l,s),!u}function c(l,u){return l===void 0&&(l=null),we(l)&&(l=_u(l,o.cfg,n,u)),vo(l||s[hi](),o.cfg,n,u)}return s[Jn]=a,s[ha]=c,s}function xh(t,e,n){var r=Vt(e.config),o=eA(t,r,e,n),i=o.ctx;function s(c){var l=o._next();return l&&l[qi](i,c),!l}function a(c,l){return c===void 0&&(c=null),we(c)&&(c=_u(c,r.cfg,e,l)),xh(c||i[hi](),e,l)}return i[Jn]=s,i[ha]=a,i}function ry(t,e,n){var r=Vt(e.config),o=eA(t,r,e,n),i=o.ctx;function s(c){return i.iterate(function(l){Re(l[pd])&&l[pd](i,c)})}function a(c,l){return c===void 0&&(c=null),we(c)&&(c=_u(c,r.cfg,e,l)),ry(c||i[hi](),e,l)}return i[Jn]=s,i[ha]=a,i}function _u(t,e,n,r){var o=null,i=!r;if(we(t)&&t[me]>0){var s=null;ee(t,function(a){if(!i&&r===a&&(i=!0),i&&a&&Re(a[Yo])){var c=Wde(a,e,n);o||(o=c),s&&s._setNext(c),s=c}})}return r&&!o?_u([r],e,n):o}function Wde(t,e,n){var r=null,o=Re(t[Yo]),i=Re(t[du]),s;t?s=t[pa]+"-"+t[Sd]+"-"+jz++:s="Unknown-0-"+jz++;var a={getPlugin:function(){return t},getNext:function(){return r},processTelemetry:u,unload:f,update:m,_id:s,_setNext:function(d){r=d}};function c(){var d;return t&&Re(t[Wz])&&(d=t[Wz]()),d||(d=vo(a,e,n)),d}function l(d,p,g,h,v){var C=!1,w=t?t[pa]:Hde,y=d[Bz];return y||(y=d[Bz]={}),d.setNext(r),t&&mn(d[dn](),function(){return w+":"+g},function(){y[s]=!0;try{var S=r?r._id:Le;S&&(y[S]=!1),C=p(d)}catch(_){var D=r?y[r._id]:!0;D&&(C=!0),(!r||!D)&&se(d[Vo](),1,73,"Plugin ["+w+"] failed during "+g+" - "+Ee(_)+", run flags: "+Ee(y))}},h,v),C}function u(d,p){p=p||c();function g(h){if(!t||!o)return!1;var v=$c(t);return v[pi]||v[Fw]?!1:(i&&t[du](r),t[Yo](d,h),!0)}l(p,g,"processTelemetry",function(){return{item:d}},!d.sync)||p[Jn](d)}function f(d,p){function g(){var h=!1;if(t){var v=$c(t),C=t[dn]||v[dn];t&&(!C||C===d.core())&&!v[pi]&&(v[dn]=null,v[pi]=!0,v[jo]=!1,t[pi]&&t[pi](d,p)===!0&&(h=!0))}return h}l(d,g,"unload",function(){},p.isAsync)||d[Jn](p)}function m(d,p){function g(){var h=!1;if(t){var v=$c(t),C=t[dn]||v[dn];t&&(!C||C===d.core())&&!v[pi]&&t[pd]&&t[pd](d,p)===!0&&(h=!0)}return h}l(d,g,"update",function(){},!1)||d[Jn](p)}return mo(a)}var Hde,Bz,Wz,jz,tA,gD=ne(()=>{"use strict";Ne();wL();Cu();xt();Ns();wa();Un();fD();QL();Hde="TelemetryPluginChain",Bz="_hasRun",Wz="_getTelCtx",jz=0;tA=(function(){function t(e,n,r,o){var i=this,s=vo(e,n,r,o);yi(i,s,br(s))}return t})()});function Nd(){var t=[];function e(r){r&&t[Ge](r)}function n(r,o){ee(t,function(i){try{i(r,o)}catch(s){se(r[Vo](),2,73,"Unexpected error calling unload handler - "+Ee(s))}}),t=[]}return{add:e,run:n}}var vD=ne(()=>{Ne();xt();Ns()});function nA(t,e){oy=t,iy=e}function sy(){var t=[];function e(r){var o=t;t=[],ee(o,function(i){try{(i.rm||i.remove).call(i)}catch(s){se(r,2,73,"Unloading:"+Ee(s))}}),oy&&o[me]>oy&&(iy?iy("doUnload",o):se(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected."))}function n(r){r&&(Is(t,r),oy&&t[me]>oy&&(iy?iy("Add",t):se(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected.")))}return{run:e,add:n}}var oy,iy,wD=ne(()=>{Ne();xt();Ns()});var rA,Du,jde,Hc,oA=ne(()=>{"use strict";pr();Ne();Cu();xt();Ns();wa();Un();gD();vD();wD();Du="getPlugin",jde=(rA={},rA[bc]={isVal:hu,v:{}},rA),Hc=(function(){function t(){var e=this,n,r,o,i,s;l(),Je(t,e,function(u){u[Pc]=function(f,m,d,p){c(f,m,p),n=!0},u[pi]=function(f,m){var d=u[dn];if(!d||f&&d!==f[dn]())return;var p,g=!1,h=f||xh(null,d,o&&o[Du]?o[Du]():o),v=m||{reason:0,isAsync:!1};function C(){g||(g=!0,i.run(h,m),s.run(h[Vo]()),p===!0&&h[Jn](v),l())}return!u[fu]||u[fu](h,v,C)!==!0?C():p=!0,p},u[pd]=function(f,m){var d=u[dn];if(!d||f&&d!==f[dn]())return;var p,g=!1,h=f||ry(null,d,o&&o[Du]?o[Du]():o),v=m||{reason:0};function C(){g||(g=!0,c(h.getCfg(),h.core(),h[hi]()))}return!u._doUpdate||u._doUpdate(h,v,C)!==!0?C():p=!0,p},Tc(u,"_addUnloadCb",function(){return i},"add"),Tc(u,"_addHook",function(){return s},"add"),gt(u,"_unloadHooks",{g:function(){return s}})}),e[Vo]=function(u){return a(u)[Vo]()},e[jo]=function(){return n},e.setInitialized=function(u){n=u},e[du]=function(u){o=u},e[Jn]=function(u,f){f?f[Jn](u):o&&Re(o[Yo])&&o[Yo](u,null)},e._getTelCtx=a;function a(u){u===void 0&&(u=null);var f=u;if(!f){var m=r||vo(null,{},e[dn]);o&&o[Du]?f=m[ha](null,o[Du]):f=m[ha](null,o)}return f}function c(u,f,m){Vt(u,jde,Oc(f)),!m&&f&&(m=f[U_]()[hi]());var d=o;o&&o[Du]&&(d=o[Du]()),e[dn]=f,r=vo(m,u,f,d)}function l(){n=!1,e[dn]=null,r=null,o=null,s=sy(),i=Nd()}}return t.__ieDyn=1,t})()});function Vde(t,e,n){var r={id:e,fn:n};Is(t,r);var o={remove:function(){ee(t,function(i,s){if(i.id===r.id)return t[ma](s,1),-1})}};return o}function Yde(t,e,n){for(var r=!1,o=t[me],i=0;i<o;++i){var s=t[i];if(s)try{if(s.fn[cu](null,[e])===!1){r=!0;break}}catch(a){se(n,2,64,"Telemetry initializer failed: "+nn(a),{exception:Ee(a)},!0)}}return!r}var Vz,Yz=ne(()=>{Bo();pr();Ne();xt();oA();Ns();wa();Un();Vz=(function(t){Ho(e,t);function e(){var n=t.call(this)||this;n.identifier="TelemetryInitializerPlugin",n.priority=199;var r,o;i(),Je(e,n,function(s,a){s.addTelemetryInitializer=function(c){return Vde(o,r++,c)},s[Yo]=function(c,l){Yde(o,c,l?l[Vo]():s[Vo]())&&s[Jn](c,l)},s[fu]=function(){i()}});function i(){r=0,o=[]}return n}return e.__ieDyn=1,e})(Hc)});function Jde(t,e){return new ey(e)}function Xde(t,e,n){var r=[],o=[],i={};return ee(n,function(s){(ae(s)||ae(s[Pc]))&&An(Kz);var a=s[Sd],c=s[pa];s&&a&&(ae(i[a])?i[a]=c:go(t,"Two extensions have same priority #"+a+" - "+i[a]+", "+c)),!a||a<e?r[Ge](s):o[Ge](s)}),{core:r,channels:o}}function Gz(t,e){var n=!1;return ee(e,function(r){if(r===t)return n=!0,-1}),n}function sA(t,e,n,r){n&&Ie(n,function(o,i){r&&Tr(i)&&Tr(e[o])&&sA(t,e[o],i,r),r&&Tr(i)&&Tr(e[o])?sA(t,e[o],i,r):t.set(e,o,i)})}function zz(t,e){var n=null,r=-1;return ee(t,function(o,i){if(o.w===e)return n=o,r=i,-1}),{i:r,l:n}}function Zde(t,e){var n=zz(t,e).l;return n||(n={w:e,rm:function(){var r=zz(t,e);r.i!==-1&&t[ma](r.i,1)}},t[Ge](n)),n}function Qde(t,e,n){ee(e,function(r){var o=hr(t,r.w,n);delete r.w,r.rm=function(){o.rm()}})}function eme(t,e,n,r){return e.add(t[da](function(o){var i=o.cfg.disableDbgExt;i===!0&&r&&(n[ih](r),r=null),n&&!r&&i!==!0&&(r=xz(o.cfg),n[sh](r))})),r}function tme(t){return gt({rm:function(){t.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(t)+">"}})}var Iu,Kz,qde,qz,Gde,zde,Kde,iA,Bc,Jz=ne(()=>{"use strict";Bo();pr();yd();Ne();Cu();qN();xt();EL();xL();$L();vh();bL();Ns();wa();Un();HL();fD();gD();QL();Yz();vD();wD();Kz="Plugins must provide initialize method",qde="_notificationManager",qz="SDK is still unloading...",Gde="SDK is not initialized",zde=100,Kde=5e4,iA=Ds((Iu={cookieCfg:{}},Iu[Ed]={rdOnly:!0,ref:!0,v:[]},Iu[Cd]={rdOnly:!0,ref:!0,v:[]},Iu[bc]={ref:!0,v:{}},Iu[W_]=wi,Iu.loggingLevelConsole=0,Iu.diagnosticLogInterval=wi,Iu));Bc=(function(){function t(){var e,n,r,o,i,s,a,c,l,u,f,m,d,p,g,h,v,C,w,y,S,D,_,A,U,k,E,x,b,I,T,R,L;Je(t,this,function(N){q(),N._getDbgPlgTargets=function(){return[_,o]},N[jo]=function(){return n},N.activeStatus=function(){return k},N._setPendingStatus=function(){k=3},N[Pc]=function(j,oe,xe,le){d&&An(qz),N[jo]()&&An("Core cannot be initialized more than once"),e=Vt(j,iA,xe||N[kt],!1),j=e.cfg,yt(e[da](function(rt){var ht=rt.cfg,wn=k===3;if(!wn){x=ht.initInMemoMaxSize||zde;var Wn=ht.instrumentationKey,Or=ht.endpointUrl;if(ae(Wn)){S=null,k=mi.INACTIVE;var Ur="Please provide instrumentation key";n?(se(r,1,100,Ur),W()):An(Ur);return}var Di=[];if(fo(Wn)?(Di[Ge](Wn),S=null):S=Wn,fo(Or)?(Di[Ge](Or),E=null):E=Or,Di[me]){b=!1,k=3;var tr=hu(ht.initTimeOut)?ht.initTimeOut:Kde,Ya=Q3(Di);I=di(function(){I=null,b||B()},tr),vi(Ya,function(Q){try{if(b)return;if(!Q.rejected){var ie=Q[md];if(ie&&ie[me]){var ve=ie[0];if(S=ve&&ve[md],ie[me]>1){var be=ie[1];E=be&&be[md]}}S&&(j.instrumentationKey=S,j.endpointUrl=E)}B()}catch{b||B()}})}else B();var $=rt.ref(rt.cfg,bc);Ie($,function(Q){rt.ref($,Q)})}})),i=le,w=eme(e,C,i&&N[Tw](),w),Xt(),N[kt]=xe;var De=j[Ed];if(u=[],u[Ge].apply(u,P_(P_([],oe,!1),De,!1)),f=j[Cd],Be(null),(!m||m[me]===0)&&An("No "+Cd+" available"),f&&f[me]>1){var Qe=N[lu]("TeeChannelController");(!Qe||!Qe.plugin)&&se(r,1,28,"TeeChannel required")}Qde(j,D,r),D=null,n=!0,k===mi.ACTIVE&&W()},N.getChannels=function(){var j=[];return m&&ee(m,function(oe){j[Ge](oe)}),mo(j)},N.track=function(j){mn(N[mh](),function(){return"AppInsightsCore:track"},function(){j===null&&(Dt(j),An("Invalid telemetry item")),!j[ho]&&ae(j[ho])&&(Dt(j),An("telemetry name required")),j.iKey=j.iKey||S,j.time=j.time||Rs(new Date),j.ver=j.ver||"4.0",!d&&N[jo]()&&k===mi.ACTIVE?ce()[Jn](j):k!==mi.INACTIVE&&o[me]<=x&&o[Ge](j)},function(){return{item:j}},!j.sync)},N[U_]=ce,N[Tw]=function(){return i||(i=new Zw(e.cfg),N[qde]=i),i},N[sh]=function(j){N.getNotifyMgr()[sh](j)},N[ih]=function(j){i&&i[ih](j)},N.getCookieMgr=function(){return c||(c=Uc(e.cfg,N[kt])),c},N.setCookieMgr=function(j){c!==j&&(Fc(c,!1),c=j)},N[mh]=function(){return s||a||jL()},N.setPerfMgr=function(j){s=j},N.eventCnt=function(){return o[me]},N.releaseQueue=function(){if(n&&o[me]>0){var j=o;o=[],k===2?ee(j,function(oe){oe.iKey=oe.iKey||S,ce()[Jn](oe)}):se(r,2,20,"core init status is not active")}},N.pollInternalLogs=function(j){return g=j||null,L=!1,T&&T[Ic](),z(!0)};function B(){b=!0,ae(S)?(k=mi.INACTIVE,se(r,1,112,"ikey can't be resolved from promises")):k=mi.ACTIVE,W()}function W(){n&&(N.releaseQueue(),N.pollInternalLogs())}function z(j){if((!T||!T[uu])&&!L){var oe=j||r&&r.queue[me]>0;oe&&(R||(R=!0,yt(e[da](function(xe){var le=xe.cfg.diagnosticLogInterval;(!le||!(le>0))&&(le=1e4);var De=!1;T&&(De=T[uu],T[Ic]()),T=k3(Pn,le),T.unref(),T[uu]=De}))),T[uu]=!0)}return T}N[GN]=function(){L=!0,T&&T[Ic](),Pn()},yi(N,function(){return p},["addTelemetryInitializer"]),N[qi]=function(j,oe,xe){j===void 0&&(j=!0),n||An(Gde),d&&An(qz);var le={reason:50,isAsync:j,flushComplete:!1},De;j&&!oe&&(De=zi(function(ht){oe=ht}));var Qe=xh(Ht(),N);Qe[Rw](function(){C.run(N[kt]),oD([c,i,r],j,function(){q(),oe&&oe(le)})},N);function rt(ht){le.flushComplete=ht,d=!0,v.run(Qe,le),N[GN](),Qe[Jn](le)}return Pn(),vn(j,rt,6,xe)||rt(!1),De},N[lu]=mt,N.addPlugin=function(j,oe,xe,le){if(!j){le&&le(!1),nt(Kz);return}var De=mt(j[pa]);if(De&&!oe){le&&le(!1),nt("Plugin ["+j[pa]+"] is already loaded!");return}var Qe={reason:16};function rt(Wn){u[Ge](j),Qe.added=[j],Be(Qe),le&&le(!0)}if(De){var ht=[De.plugin],wn={reason:2,isAsync:!!xe};xo(ht,wn,function(Wn){Wn?(Qe.removed=ht,Qe.reason|=32,rt(!0)):le&&le(!1)})}else rt(!1)},N.updateCfg=function(j,oe){oe===void 0&&(oe=!0);var xe;if(N[jo]()){xe={reason:1,cfg:e.cfg,oldCfg:RN({},e.cfg),newConfig:RN({},j),merge:oe},j=xe.newConfig;var le=e.cfg;j[Ed]=le[Ed],j[Cd]=le[Cd]}e._block(function(De){var Qe=De.cfg;sA(De,Qe,j,oe),oe||Ie(Qe,function(rt){_s(j,rt)||De.set(Qe,rt,wi)}),De.setDf(Qe,iA)},!0),e.notify(),xe&&pt(xe)},N.evtNamespace=function(){return h},N.flush=vn,N.getTraceCtx=function(j){return y||(y=Hz()),y},N.setTraceCtx=function(j){y=j||null},N.addUnloadHook=yt,Tc(N,"addUnloadCb",function(){return v},"add"),N.onCfgChange=function(j){var oe;return n?oe=hr(e.cfg,j,N[kt]):oe=Zde(D,j),tme(oe)},N.getWParam=function(){return ld()||e.cfg.enableWParam?0:-1};function V(){var j={};A=[];var oe=function(xe){xe&&ee(xe,function(le){if(le[pa]&&le[ah]&&!j[le.identifier]){var De=le[pa]+"="+le[ah];A[Ge](De),j[le.identifier]=le}})};oe(m),f&&ee(f,function(xe){oe(xe)}),oe(u)}function q(){n=!1,e=Vt({},iA,N[kt]),e.cfg[M_]=1,gt(N,"config",{g:function(){return e.cfg},s:function(oe){N.updateCfg(oe,!1)}}),gt(N,"pluginVersionStringArr",{g:function(){return A||V(),A}}),gt(N,"pluginVersionString",{g:function(){return U||(A||V(),U=A.join(";")),U||Le}}),gt(N,"logger",{g:function(){return r||(r=new Eu(e.cfg),e[kt]=r),r},s:function(oe){e[kt]=oe,r!==oe&&(Fc(r,!1),r=oe)}}),N[kt]=new Eu(e.cfg),_=[];var j=N.config[Ed]||[];j.splice(0,j[me]),Is(j,_),p=new Vz,o=[],Fc(i,!1),i=null,s=null,a=null,Fc(c,!1),c=null,l=null,u=[],f=null,m=null,d=!1,g=null,h=kr("AIBaseCore",!0),v=Nd(),y=null,S=null,C=sy(),D=[],U=null,A=null,L=!1,T=null,R=!1,k=0,E=null,x=null,b=!1,I=null}function ce(){var j=vo(Ht(),e.cfg,N);return j[Rw](z),j}function Be(j){var oe=Xde(N[kt],Sz,u);l=null,U=null,A=null,m=(f||[])[0]||[],m=hD(Is(m,oe[Cd]));var xe=Is(hD(oe[dn]),m);_=mo(xe);var le=N.config[Ed]||[];le.splice(0,le[me]),Is(le,_);var De=ce();m&&m[me]>0&&ZL(De[ha](m),xe),ZL(De,xe),j&&pt(j)}function mt(j){var oe=null,xe=null,le=[];return ee(_,function(De){if(De[pa]===j&&De!==p)return xe=De,-1;De.getChannel&&le[Ge](De)}),!xe&&le[me]>0&&ee(le,function(De){if(xe=De.getChannel(j),!xe)return-1}),xe&&(oe={plugin:xe,setEnabled:function(De){$c(xe)[Fw]=!De},isEnabled:function(){var De=$c(xe);return!De[pi]&&!De[Fw]},remove:function(De,Qe){De===void 0&&(De=!0);var rt=[xe],ht={reason:1,isAsync:De};xo(rt,ht,function(wn){wn&&Be({reason:32,removed:rt}),Qe&&Qe(wn)})}}),oe}function Ht(){if(!l){var j=(_||[]).slice();wt(j,p)===-1&&j[Ge](p),l=_u(hD(j),e.cfg,N)}return l}function xo(j,oe,xe){if(j&&j[me]>0){var le=_u(j,e.cfg,N),De=xh(le,N);De[Rw](function(){var Qe=!1,rt=[];ee(u,function(wn,Wn){Gz(wn,j)?Qe=!0:rt[Ge](wn)}),u=rt,U=null,A=null;var ht=[];f&&(ee(f,function(wn,Wn){var Or=[];ee(wn,function(Ur){Gz(Ur,j)?Qe=!0:Or[Ge](Ur)}),ht[Ge](Or)}),f=ht),xe&&xe(Qe),z()}),De[Jn](oe)}else xe(!1)}function Pn(){if(r&&r.queue){var j=r.queue.slice(0);r.queue[me]=0,ee(j,function(oe){var xe={name:g||"InternalMessageId: "+oe[ch],iKey:S,time:Rs(new Date),baseType:Id.dataType,baseData:{message:oe[ga]}};N.track(xe)})}}function vn(j,oe,xe,le){var De=1,Qe=!1,rt=null;le=le||5e3;function ht(){De--,Qe&&De===0&&(rt&&rt[Ic](),rt=null,oe&&oe(Qe),oe=null)}if(m&&m[me]>0){var wn=ce()[ha](m);wn.iterate(function(Wn){if(Wn.flush){De++;var Or=!1;Wn.flush(j,function(){Or=!0,ht()},xe)||Or||(j&&rt==null?rt=di(function(){rt=null,ht()},le):ht())}})}return Qe=!0,ht(),!0}function Xt(){var j;yt(e[da](function(oe){var xe=oe.cfg.enablePerfMgr;if(xe){var le=oe.cfg[W_];(j!==le||!j)&&(le||(le=Jde),Ow(oe.cfg,W_,le),j=le,a=null),!s&&!a&&Re(le)&&(a=le(N,N[Tw]()))}else a=null,j=null}))}function pt(j){var oe=ry(Ht(),N);oe[Rw](z),(!N._updateHook||N._updateHook(oe,j)!==!0)&&oe[Jn](j)}function nt(j){var oe=N[kt];oe?(se(oe,2,73,j),z()):An(j)}function Dt(j){var oe=N[Tw]();oe&&oe[pu]([j],2)}function yt(j){C.add(j)}})}return t.__ieDyn=1,t})()});function Ld(t,e){try{if(t&&t!==""){var n=Rr().parse(t);if(n&&n[KN]&&n[KN]>=n.itemsAccepted&&n.itemsReceived-n.itemsAccepted===n.errors[me])return n}}catch(r){se(e,1,43,"Cannot parse the response. "+(r[ho]||Ee(r)),{response:t})}return null}var Xz=ne(()=>{Ne();xt();Ns();wu()});var Sa,nme,Zz,aA,Ad,Qz=ne(()=>{pr();yd();Ne();xt();xL();Ns();wu();wa();Sa="",nme="NoResponseBody",Zz="&"+nme+"=true",aA="POST",Ad=(function(){function t(){var e=0,n,r,o,i,s,a,c,l,u,f,m,d,p,g;Je(t,this,function(h,v){var C=!0;b(),h[Pc]=function(I,T){o=T,r&&se(o,1,28,"Sender is already initialized"),h.SetConfig(I),r=!0},h._getDbgPlgTargets=function(){return[r,i,a,n]},h.SetConfig=function(I){try{if(s=I.senderOnCompleteCallBack||{},a=!!I.disableCredentials,c=I.fetchCredentials,i=!!I.isOneDs,n=!!I.enableSendPromise,u=!!I.disableXhr,f=!!I.disableBeacon,m=!!I.disableBeaconSync,g=I.timeWrapper,p=!!I.addNoResponse,d=!!I.disableFetchKeepAlive,l={sendPOST:k},i||(C=!1),a){var T=Dd();T&&T.protocol&&T.protocol[Wo]()==="file:"&&(C=!1)}return!0}catch{}return!1},h.getSyncFetchPayload=function(){return e},h.getSenderInst=function(I,T){return I&&I[me]?D(I,T):null},h.getFallbackInst=function(){return l},h[fu]=function(I,T){b()};function w(I,T){_(T,200,{},I)}function y(I,T){se(o,2,26,"Failed to send telemetry.",{message:I}),_(T,400,{})}function S(I){y("No endpoint url is provided for the batch",I)}function D(I,T){for(var R=0,L=null,N=0;L==null&&N<I[me];)R=I[N],!u&&R===1?Bw()?L=x:gh()&&(L=k):R===2&&Lc(T)&&(!T||!d)?L=E:R===3&&Ji()&&(T?!m:!f)&&(L=U),N++;return L?{_transport:R,_isSync:T,sendPOST:L}:null}function _(I,T,R,L){try{I&&I(T,R,L)}catch{}}function A(I,T){var R=Kn(),L=I[uh];if(!L)return S(T),!0;L=I[uh]+(p?Zz:Sa);var N=I[mu],B=i?N:new Blob([N],{type:"text/plain;charset=UTF-8"}),W=R.sendBeacon(L,B);return W}function U(I,T,R){var L=I[mu];try{if(L)if(A(I,T))w(Sa,T);else{var N=s&&s.beaconOnRetry;N&&Re(N)?N(I,T,A):(l&&l.sendPOST(I,T,!0),se(o,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(B){i&&go(o,"Failed to send telemetry using sendBeacon API. Ex:"+Ee(B)),_(T,i?0:400,{},Sa)}}function k(I,T,R){var L,N,B,W=I[$_]||{};!R&&n&&(L=zi(function(ce,Be){N=ce,B=Be})),i&&R&&I.disableXhrSync&&(R=!1);var z=I[uh];if(!z){S(T),N&&N(!1);return}var V=aL(aA,z,C,!0,R,I[vd]);i||V.setRequestHeader("Content-type","application/json"),ee(br(W),function(ce){V.setRequestHeader(ce,W[ce])}),V.onreadystatechange=function(){i||(q(V),V.readyState===4&&N&&N(!0))},V.onload=function(){i&&q(V)};function q(ce){var Be=s&&s.xhrOnComplete,mt=Be&&Re(Be);if(mt)Be(ce,T,I);else{var Ht=ks(ce);_(T,ce[hd],Nc(ce,i),Ht)}}return V.onerror=function(ce){_(T,i?V[hd]:400,Nc(V,i),i?Sa:Rc(V)),B&&B(ce)},V.ontimeout=function(){_(T,i?V[hd]:500,Nc(V,i),i?Sa:Rc(V)),N&&N(!1)},V.send(I[mu]),L}function E(I,T,R){var L,N=I[uh],B=I[mu],W=i?B:new Blob([B],{type:"application/json"}),z,V,q,ce=new Headers,Be=B[me],mt=!1,Ht=!1,xo=I[$_]||{},Pn=(L={method:aA,body:W},L[SL]=!0,L);I.headers&&br(I.headers)[me]>0&&(ee(br(xo),function(nt){ce.append(nt,xo[nt])}),Pn[$_]=ce),c?Pn.credentials=c:C&&i&&(Pn.credentials="include"),R&&(Pn.keepalive=!0,e+=Be,i?I._sendReason===2&&(mt=!0,p&&(N+=Zz)):mt=!0);var vn=new Request(N,Pn);try{vn[SL]=!0}catch{}if(!R&&n&&(z=zi(function(nt,Dt){V=nt,q=Dt})),!N){S(T),V&&V(!1);return}function Xt(nt){_(T,i?0:400,{},i?Sa:nt)}function pt(nt,Dt,yt){var j=nt[hd],oe=s.fetchOnComplete;oe&&Re(oe)?oe(nt,T,yt||Sa,Dt):_(T,j,{},yt||Sa)}try{vi(fetch(i?N:vn,i?Pn:null),function(nt){if(R&&(e-=Be,Be=0),!Ht)if(Ht=!0,nt.rejected)Xt(nt.reason&&nt.reason[ga]),q&&q(nt.reason);else{var Dt=nt[md];try{!i&&!Dt.ok?(Xt(Dt.statusText),V&&V(!1)):i&&!Dt.body?(pt(Dt,null,Sa),V&&V(!0)):vi(Dt.text(),function(yt){pt(Dt,I,yt[md]),V&&V(!0)})}catch(yt){Xt(Ee(yt)),q&&q(yt)}}})}catch(nt){Ht||(Xt(Ee(nt)),q&&q(nt))}return mt&&!Ht&&(Ht=!0,_(T,200,{}),V&&V(!0)),i&&!Ht&&I[vd]>0&&g&&g.set(function(){Ht||(Ht=!0,_(T,500,{}),V&&V(!0))},I[vd]),z}function x(I,T,R){var L=On(),N=new XDomainRequest,B=I[mu];N.onload=function(){var ce=ks(N),Be=s&&s.xdrOnComplete;Be&&Re(Be)?Be(N,T,I):_(T,200,{},ce)},N.onerror=function(){_(T,400,{},i?Sa:_d(N))},N.ontimeout=function(){_(T,500,{})},N.onprogress=function(){};var W=L&&L.location&&L.location.protocol||"",z=I[uh];if(!z){S(T);return}if(!i&&z.lastIndexOf(W,0)!==0){var V="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";se(o,2,40,". "+V),y(V,T);return}var q=i?z:z[bs](/^(https?:)/,"");N.open(aA,q),I[vd]&&(N[vd]=I[vd]),N.send(B),i&&R?g&&g.set(function(){N.send(B)},0):N.send(B)}function b(){e=0,r=!1,n=!1,o=null,i=null,s=null,a=null,c=null,l=null,u=!1,f=!1,m=!1,d=!1,p=!1,g=null}})}return t.__ieDyn=1,t})()});function o6(t){return t&&t[bs]?t[bs](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Le):t}function ED(t,e){if(e){var n=Le;we(e)?(n=Le,ee(e,function(o){o=o6(o),o&&(o[0]!=="."&&(o="."+o),n+=o)})):n=o6(e),n&&(n[0]!=="."&&(n="."+n),t=(t||Le)+n)}var r=sme.exec(t||Le)||[];return{type:r[1],ns:(r[2]||Le).replace(rme,".").replace(ome,Le)[Gi](".").sort().join(".")}}function cA(t,e,n){var r=[],o=cy.get(t,yD,{},!1),i=ED(e,n);return Ie(o,function(s,a){ee(a,function(c){(!i[gi]||i[gi]===c[lh][gi])&&(!i.ns||i.ns===i.ns)&&r[Ge]({name:c.evtName[gi]+(c[lh].ns?"."+c[lh].ns:Le),handler:c.handler})})}),r}function d6(t,e,n){n===void 0&&(n=!0);var r=cy.get(t,yD,{},n),o=r[e];return o||(o=r[e]=[]),o}function m6(t,e,n,r){t&&e&&e[gi]&&(t[r6]?t[r6](e[gi],n,r):t[n6]&&t[n6](s6+e[gi],n))}function ame(t,e,n,r){var o=!1;return t&&e&&e[gi]&&n&&(t[t6]?(t[t6](e[gi],n,r),o=!0):t[e6]&&(t[e6](s6+e[gi],n),o=!0)),o}function i6(t,e,n,r){for(var o=e[me];o--;){var i=e[o];i&&(!n.ns||n.ns===i[lh].ns)&&(!r||r(i))&&(m6(t,i[lh],i.handler,i.capture),e[ma](o,1))}}function cme(t,e,n){if(e[gi])i6(t,d6(t,e[gi]),e,n);else{var r=cy.get(t,yD,{});Ie(r,function(o,i){i6(t,i,e,n)}),br(r)[me]===0&&cy.kill(t,yD)}}function Ci(t,e){var n;return e?(we(e)?n=[t].concat(e):n=[t,e],n=ED("xx",n).ns[Gi](".")):n=t,n}function xa(t,e,n,r,o){o===void 0&&(o=!1);var i=!1;if(t)try{var s=ED(e,r);if(i=ame(t,s,n,o),i&&cy.accept(t)){var a={guid:ime++,evtName:s,handler:n,capture:o};d6(t,s.type)[Ge](a)}}catch{}return i}function Wc(t,e,n,r,o){if(o===void 0&&(o=!1),t)try{var i=ED(e,r),s=!1;cme(t,i,function(a){return i.ns&&!n||a.handler===n?(s=!0,!0):!1}),s||m6(t,i,n,o)}catch{}}function lA(t,e,n,r){return r===void 0&&(r=!1),xa(t,e,n,null,r)}function uA(t,e,n,r){r===void 0&&(r=!1),Wc(t,e,n,null,r)}function SD(t,e,n){var r=!1,o=On();o&&(r=xa(o,t,e,n),r=xa(o.body,t,e,n)||r);var i=Fn();return i&&(r=xa(i,t,e,n)||r),r}function xD(t,e,n){var r=On();r&&(Wc(r,t,e,n),Wc(r.body,t,e,n));var o=Fn();o&&Wc(o,t,e,n)}function _h(t,e,n,r){var o=!1;return e&&t&&t[me]>0&&ee(t,function(i){i&&(!n||wt(n,i)===-1)&&(o=SD(i,e,r)||o)}),o}function _D(t,e,n,r){var o=!1;return e&&t&&we(t)&&(o=_h(t,e,n,r),!o&&n&&n[me]>0&&(o=_h(t,e,null,r))),o}function Pu(t,e,n){t&&we(t)&&ee(t,function(r){r&&xD(r,e,n)})}function ly(t,e,n){return _D([l6,c6,CD],t,e,n)}function uy(t,e){Pu([l6,c6,CD],t,e)}function Dh(t,e,n){function r(s){var a=Fn();t&&a&&a.visibilityState==="hidden"&&t(s)}var o=Ci(u6,n),i=_h([CD],t,e,o);return(!e||wt(e,ay)===-1)&&(i=_h([ay],r,e,o)||i),!i&&e&&(i=Dh(t,null,n)),i}function fy(t,e){var n=Ci(u6,e);Pu([CD],t,n),Pu([ay],null,n)}function Ih(t,e,n){function r(s){var a=Fn();t&&a&&a.visibilityState==="visible"&&t(s)}var o=Ci(f6,n),i=_h([a6],t,e,o);return i=_h([ay],r,e,o)||i,!i&&e&&(i=Ih(t,null,n)),i}function dy(t,e){var n=Ci(f6,e);Pu([a6],t,n),Pu([ay],null,n)}var s6,e6,t6,n6,r6,yD,ay,CD,a6,c6,l6,u6,f6,rme,ome,ime,cy,sme,p6=ne(()=>{Ne();xt();vh();Un();s6="on",e6="attachEvent",t6="addEventListener",n6="detachEvent",r6="removeEventListener",yD="events",ay="visibilitychange",CD="pagehide",a6="pageshow",c6="unload",l6="beforeunload",u6=kr("aiEvtPageHide"),f6=kr("aiEvtPageShow"),rme=/\.[\.]+/g,ome=/[\.]+$/,ime=1,cy=X_("events"),sme=/^([^.]*)(?:\.(.+)|)/});var fA,h6=ne(()=>{bw();fA=fn({DISABLED:0,CRITICAL:1,WARNING:2,DEBUG:3})});var Ot=ne(()=>{H3();B3();qN();Jz();oA();J_();VL();EL();wa();Xz();Qz();Ne();bw();p6();wu();Bo();HL();fD();Ns();gD();h6();$L();vh();vD();wD();XL();Cu();tD();DL()});var _a,g6,dA,DD,ID=ne(()=>{_a="",g6="https://browser.events.data.microsoft.com/OneCollector/1.0/",dA="version",DD="properties"});var mA,Ph,Da,pA,Yt,jc,PD,bD,TD,RD,my,kD=ne(()=>{mA="initialize",Ph="indexOf",Da="timings",pA="pollInternalLogs",Yt="value",jc="length",PD="processTelemetryStart",bD="handleField",TD="rmSanitizer",RD="rmFieldSanitizer",my="canHandle"});function gr(t){return!(t===_a||ae(t))}function ND(t){if(t){var e=Vi(t,"-");if(e>-1)return cd(t,e)}return _a}function E6(){return hA===null&&(hA=!Ve(Uint8Array)&&!mme()&&!gu()),hA}function LD(t){return!!(t&&Ir(t)&&t>=1&&t<=4)}function AD(t,e,n){if(!e&&!gr(e)||typeof t!="string")return null;var r=typeof e;if(r==="string"||r==="number"||r==="boolean"||we(e))e={value:e};else if(r==="object"&&!w6.call(e,"value"))e={value:n?JSON.stringify(e):e};else if(ae(e[Yt])||e[Yt]===_a||!ke(e[Yt])&&!Ir(e[Yt])&&!ca(e[Yt])&&!we(e[Yt]))return null;if(we(e[Yt])&&!vA(e[Yt]))return null;if(!ae(e.kind)){if(we(e[Yt])||!py(e.kind))return null;e[Yt]=e[Yt].toString()}return e}function Th(t,e,n){var r=-1;if(!Ve(t))if(e>0&&(e===32?r=8192:e<=13&&(r=e<<5)),dme(n))r===-1&&(r=0),r|=n;else{var o=fme[Ia(t)]||-1;r!==-1&&o!==-1?r|=o:o===6&&(r=o)}return r}function S6(t,e,n){n===void 0&&(n=!0);var r;return t&&(r=t.get(e),n&&r&&decodeURIComponent&&(r=decodeURIComponent(r))),r||_a}function x6(t){t===void 0&&(t="D");var e=ty();return t==="B"?e="{"+e+"}":t==="P"?e="("+e+")":t==="N"&&(e=e.replace(/-/g,_a)),e}function Fd(t,e,n,r,o){var i={},s=!1,a=0,c=arguments[jc],l=arguments;for(ca(l[0])&&(s=l[0],a++);a<c;a++){var t=l[a];Ie(t,function(f,m){s&&m&&tn(m)?we(m)?(i[f]=i[f]||[],ee(m,function(d,p){d&&tn(d)?i[f][p]=Fd(!0,i[f][p],d):i[f][p]=d})):i[f]=Fd(!0,i[f],m):i[f]=m})}return i}function py(t){return t===0||t>0&&t<=13||t===32}function dme(t){return t>=0&&t<=9}function mme(){var t=Kn();if(!Ve(t)&&t.userAgent){var e=t.userAgent.toLowerCase();if((e[Ph]("safari")>=0||e[Ph]("firefox")>=0)&&e[Ph]("chrome")<0)return!0}return!1}function vA(t){return t[jc]>0}function hy(t,e){var n=t;n[Da]=n[Da]||{},n[Da][PD]=n[Da][PD]||{},n[Da][PD][e]=Go()}function Ia(t){var e=0;if(t!=null){var n=typeof t;n==="string"?e=1:n==="number"?e=2:n==="boolean"?e=3:n===Cc&&(e=4,we(t)?(e=4096,t[jc]>0&&(e|=Ia(t[0]))):w6.call(t,"value")&&(e=8192|Ia(t[Yt])))}return e}function FD(){return!!vt("chrome")}function _6(t,e,n,r,o,i){r===void 0&&(r=!1),o===void 0&&(o=!1);function s(c,l,u){try{c[l]=u}catch{}}var a=new XMLHttpRequest;return r&&s(a,lme,r),n&&s(a,v6,n),a.open(t,e,!o),n&&s(a,v6,n),!o&&i&&s(a,ume,i),a}function bu(t){return t>0}var Vc,gA,bh,w6,lme,v6,ume,fme,hA,y6,C6,Go,OD=ne(()=>{Ot();Bo();Ne();ID();kD();gA="4.3.6",bh="1DS-Web-JS-"+gA,w6=gw.hasOwnProperty,lme="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",v6="withCredentials",ume="timeout",fme=(Vc={},Vc[0]=0,Vc[2]=6,Vc[1]=1,Vc[3]=7,Vc[4098]=6,Vc[4097]=1,Vc[4099]=7,Vc),hA=null,y6=ld(),C6=Zp();Go=Dw});function hme(t){return t&&(!t.getProperty||!t.setProperty)&&An("Invalid property storage override passed."),!0}var pme,D6,I6=ne(()=>{Bo();pr();Ot();Ne();ID();OD();kD();pme=Ds({endpointUrl:g6,propertyStorageOverride:{isVal:hme}});D6=(function(t){Ho(e,t);function e(){var n=t.call(this)||this;return Je(e,n,function(r,o){r[mA]=function(i,s,a,c){mn(r,function(){return"AppInsightsCore.initialize"},function(){try{o[mA](Vt(i,pme,a||r.logger,!1).cfg,s,a,c)}catch(f){var l=r.logger,u=Ee(f);u[Ph]("channels")!==-1&&(u+=`
 - Channels must be provided through config.channels only!`),se(l,1,514,"SDK Initialization Failed - no telemetry will be sent: "+u)}},function(){return{config:i,extensions:s,logger:a,notificationManager:c}})},r.track=function(i){mn(r,function(){return"AppInsightsCore.track"},function(){var s=i;if(s){s[Da]=s[Da]||{},s[Da].trackStart=Go(),LD(s.latency)||(s.latency=1);var a=s.ext=s.ext||{};a.sdk=a.sdk||{},a.sdk.ver=bh;var c=s.baseData=s.baseData||{};c[DD]=c[DD]||{};var l=c[DD];l[dA]=l[dA]||r.pluginVersionString||_a}o.track(s)},function(){return{item:i}},!i.sync)},r[pA]=function(i){return o[pA](i||"InternalLog")}}),n}return e.__ieDyn=1,e})(Bc)});var P6,b6,T6,R6,k6,N6=ne(()=>{Ot();P6=fn({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,Pii_IPv6ScrubLastHextets:14,Pii_DropValue:15,CustomerContent_GenericContent:32}),b6=fn({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),T6=fn({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),R6=fn({Normal:1,Critical:2}),k6=fn({NONE:0,ERROR:1,WARNING:2,INFORMATION:3})});function L6(t){return t=="__proto__"||t=="constructor"||t=="prototype"}var A6,F6=ne(()=>{Ot();Ne();ID();OD();kD();A6=(function(){function t(e){var n=this,r={},o=[],i=[];e&&i.push(e);function s(u,f){var m,d=r[u];if(d&&(m=d[f]),!m&&m!==null){if(ke(u)&&ke(f))if(i[jc]>0){for(var p=0;p<i[jc];p++)if(i[p][bD](u,f)){m={canHandle:!0,fieldHandler:i[p]};break}}else o[jc]===0&&(m={canHandle:!0});if(!m&&m!==null){m=null;for(var p=0;p<o[jc];p++)if(o[p][bD](u,f)){m={canHandle:!0,handler:o[p],fieldHandler:null};break}}if(!d){if(L6(u))return null;d=r[u]={}}if(L6(f))return null;d[f]=m}return m}n.clearCache=function(){r={}},n.addSanitizer=function(u){u&&(PN(o,u)||o.push(u),r={})},n.addFieldSanitizer=function(u){u&&(PN(i,u)||i.push(u),r={})},n[TD]=function(u){if(u){var f=wt(o,u);f!==-1&&(o.splice(f,1),r={}),ee(o,function(m){m&&m[TD]&&m[TD](u)})}},n[RD]=function(u){if(u){var f=wt(i,u);f!==-1&&(i.splice(f,1),r={}),ee(o,function(m){m&&m[RD]&&m[RD](u)})}},n.isEmpty=function(){return th(o)+th(i)===0},n[bD]=function(u,f){var m=s(u,f);return m?m[my]:!1},n[Yt]=function(u,f,m,d){var p=s(u,f);if(p&&p[my]){if(!p[my])return null;if(p.handler)return p.handler[Yt](u,f,m,d);if(!ke(f)||ae(m)||m===_a)return null;var g=null,h=Ia(m);if((h&8192)===8192){var v=h&-8193;if(g=m,!gr(g[Yt])||v!==1&&v!==2&&v!==3&&(v&4096)!==4096)return null}else h===1||h===2||h===3||(h&4096)===4096?g=c(u,f,m):h===4&&(g=c(u,f,d?JSON.stringify(m):m));if(g)return a(p,u,f,h,g,d)}return null},n.property=function(u,f,m,d){var p=s(u,f);if(!p||!p[my]||!ke(f)||ae(m)||!gr(m[Yt]))return null;var g=Ia(m[Yt]);return g===0?null:a(p,u,f,g,m,d)};function a(u,f,m,d,p,g){if(u.handler)return u.handler.property(f,m,p,g);if(!ae(p.kind)){if((d&4096)===4096||!py(p.kind))return null;p[Yt]=p[Yt].toString()}return l(u.fieldHandler,f,m,d,p)}function c(u,f,m){return gr(m)?{value:m}:null}function l(u,f,m,d,p){if(p&&u){var g=u.getSanitizer(f,m,d,p.kind,p.propertyType);if(g)if(d===4){var h={},v=p[Yt];Ie(v,function(w,y){var S=f+"."+m;if(gr(y)){var D=c(S,w,y);D=l(u,S,w,Ia(y),D),D&&(h[w]=D[Yt])}}),p[Yt]=h}else{var C={path:f,name:m,type:d,prop:p,sanitizer:n};p=g.call(n,C)}}return p}}return t.getFieldType=Ia,t})()});var O6={};bC(O6,{ActiveStatus:()=>mi,AppInsightsCore:()=>D6,BaseTelemetryPlugin:()=>Hc,DiagnosticLogger:()=>Eu,EventLatency:()=>b6,EventPersistence:()=>R6,EventPropertyType:()=>T6,EventsDiscardedReason:()=>Ps,FullVersionString:()=>bh,InternalAppInsightsCore:()=>Bc,LoggingSeverity:()=>fA,MinChannelPriorty:()=>VN,NotificationManager:()=>Zw,PerfEvent:()=>bd,PerfManager:()=>ey,ProcessTelemetryContext:()=>tA,SenderPostManager:()=>Ad,TraceLevel:()=>k6,Undefined:()=>sa,ValueKind:()=>P6,ValueSanitizer:()=>A6,Version:()=>gA,_InternalLogMessage:()=>Id,__getRegisteredEvents:()=>cA,_appendHeader:()=>ph,_getAllResponseHeaders:()=>Nc,_logInternalMessage:()=>kL,_testHookMaxUnloadHooksCb:()=>nA,_throwInternal:()=>se,_warnToConsole:()=>go,addEventHandler:()=>SD,addEventListeners:()=>_D,addPageHideEventListener:()=>Dh,addPageShowEventListener:()=>Ih,addPageUnloadEventListener:()=>ly,areCookiesSupported:()=>Eh,arrForEach:()=>ee,arrIndexOf:()=>wt,arrMap:()=>xc,arrReduce:()=>_w,attachEvent:()=>lA,blockDynamicConversion:()=>Gw,convertAllHeadersToMap:()=>K_,cookieAvailable:()=>Eh,createCookieMgr:()=>Uc,createDynamicConfig:()=>Vt,createEnumStyle:()=>fn,createGuid:()=>x6,createProcessTelemetryContext:()=>vo,createTraceParent:()=>GL,createUniqueNamespace:()=>kr,createUnloadHandlerContainer:()=>Nd,dateNow:()=>xn,detachEvent:()=>uA,disallowsSameSiteNone:()=>uD,doPerf:()=>mn,dumpObj:()=>Ee,eventOff:()=>Wc,eventOn:()=>xa,extend:()=>Fd,findW3cTraceParent:()=>JL,forceDynamicConversion:()=>CL,formatErrorMessageXdr:()=>_d,formatErrorMessageXhr:()=>Rc,formatTraceParent:()=>KL,generateW3CId:()=>Td,getCommonSchemaMetaData:()=>Th,getConsole:()=>Uw,getCookieValue:()=>S6,getCrypto:()=>Mw,getDocument:()=>Fn,getDynamicConfigHandler:()=>qw,getExceptionName:()=>nn,getFieldValueType:()=>Ia,getGlobal:()=>po,getGlobalInst:()=>vt,getHistory:()=>x_,getIEVersion:()=>Hw,getISOString:()=>Rs,getJSON:()=>Rr,getLocation:()=>Dd,getMsCrypto:()=>$w,getNavigator:()=>Kn,getPerformance:()=>ud,getResponseText:()=>ks,getSetValue:()=>Ow,getTenantId:()=>ND,getTime:()=>Go,getWindow:()=>On,hasDocument:()=>ld,hasHistory:()=>DN,hasJSON:()=>ya,hasNavigator:()=>Sw,hasOwnProperty:()=>mr,hasWindow:()=>Zp,isArray:()=>we,isArrayValid:()=>vA,isBeaconsSupported:()=>Ji,isBoolean:()=>ca,isChromium:()=>FD,isDate:()=>E_,isDocumentObjectAvailable:()=>y6,isError:()=>ad,isFetchSupported:()=>Lc,isFunction:()=>Re,isGreaterThanZero:()=>bu,isIE:()=>vu,isLatency:()=>LD,isNotTruthy:()=>EN,isNullOrUndefined:()=>ae,isNumber:()=>Ir,isObject:()=>tn,isReactNative:()=>gu,isSampledFlag:()=>zL,isString:()=>ke,isTruthy:()=>xs,isTypeof:()=>CN,isUint8ArrayAvailable:()=>E6,isUndefined:()=>Ve,isValidSpanId:()=>kd,isValidTraceId:()=>Rd,isValidTraceParent:()=>pD,isValueAssigned:()=>gr,isValueKind:()=>py,isWindowObjectAvailable:()=>C6,isXhrSupported:()=>gh,mergeEvtNamespace:()=>Ci,newGuid:()=>ty,newId:()=>Vw,normalizeJsName:()=>xd,objDefineAccessors:()=>SN,objForEachKey:()=>Ie,objFreeze:()=>mo,objKeys:()=>br,objSeal:()=>xN,onConfigChange:()=>hr,openXhr:()=>_6,optimizeObject:()=>qo,parseResponse:()=>Ld,parseTraceParent:()=>ny,perfNow:()=>Dw,prependTransports:()=>kc,proxyAssign:()=>iL,proxyFunctionAs:()=>Tc,proxyFunctions:()=>yi,random32:()=>Ac,randomValue:()=>gL,removeEventHandler:()=>xD,removeEventListeners:()=>Pu,removePageHideEventListener:()=>fy,removePageShowEventListener:()=>dy,removePageUnloadEventListener:()=>uy,safeGetCookieMgr:()=>ML,safeGetLogger:()=>Oc,sanitizeProperty:()=>AD,setEnableEnvMocks:()=>mL,setProcessTelemetryTimings:()=>hy,setValue:()=>Ki,strContains:()=>_n,strEndsWith:()=>fd,strFunction:()=>Yp,strObject:()=>Cc,strPrototype:()=>Ss,strStartsWith:()=>nh,strTrim:()=>tt,strUndefined:()=>sa,throwError:()=>An,toISOString:()=>Rs,useXDomainRequest:()=>Bw});var Od=ne(()=>{I6();N6();F6();Ot();OD()});var Ud,UD,MD,wA=ne(()=>{Ud="REAL_TIME",UD="NEAR_REAL_TIME",MD="BEST_EFFORT"});var Ls,$D,U6,yA,M6,$6,CA,HD,gy,Rh,H6,B6,W6,BD,EA,WD,jD,VD,vy,SA,xA,j6,kh,_A,YD,wy=ne(()=>{Ls="",$D="drop",U6="send",yA="requeue",M6="rspFail",$6="oth",CA="no-cache, no-store",HD="application/x-json-stream",gy="cache-control",Rh="content-type",H6="kill-tokens",B6="kill-duration",W6="time-delta-millis",BD="client-version",EA="client-id",WD="time-delta-to-apply-millis",jD="upload-time",VD="apikey",vy="AuthMsaDeviceTicket",SA="WebAuthToken",xA="AuthXToken",j6="NoResponseBody",kh="msfpc",_A="trace",YD="user"});var yy,qD,GD,Cy,ze,Pa,Ei,pn,ba,Xn,Ta,zD,Md,KD,$d,JD,XD,V6,DA,IA,Y6,ZD,PA,bA,q6,TA,RA,kA,QD,eI,tI,Ey,NA,As,Nh,Zr,zo,Sy,Lh,xy,G6,nI,rI,Ah,LA,_y,oI,iI,sI,aI,Dy,z6,AA,K6,J6,Iy,Tu,Hd,Fh=ne(()=>{yy="allowRequestSending",qD="shouldAddClockSkewHeaders",GD="getClockSkewHeaderValue",Cy="setClockSkew",ze="length",Pa="concat",Ei="iKey",pn="count",ba="events",Xn="push",Ta="split",zD="toLowerCase",Md="hdrs",KD="useHdrs",$d="initialize",JD="setTimeoutOverride",XD="clearTimeoutOverride",V6="payloadPreprocessor",DA="overrideEndpointUrl",IA="avoidOptions",Y6="disableEventTimings",ZD="enableCompoundKey",PA="disableXhrSync",bA="disableFetchKeepAlive",q6="addNoResponse",TA="useSendBeacon",RA="fetchCredentials",kA="alwaysUseXhrOverride",QD="serializeOfflineEvt",eI="getOfflineRequestDetails",tI="createPayload",Ey="createOneDSPayload",NA="payloadBlob",As="headers",Nh="_thePayload",Zr="batches",zo="sendType",Sy="canSendRequest",Lh="sendQueuedRequests",xy="setUnloading",G6="isTenantKilled",nI="sendSynchronousBatch",rI="_transport",Ah="getWParam",LA="isBeacon",_y="timings",oI="isTeardown",iI="_sendReason",sI="setKillSwitchTenants",aI="_backOffTransmission",Dy="identifier",z6="ignoreMc1Ms0CookieProcessing",AA="autoFlushEventsLimit",K6="disableAutoBatchFlushLimit",J6="overrideInstrumentationKey",Iy="sendAttempt",Tu="latency",Hd="sync"});function Z6(t){var e=(t.ext||{}).intweb;return e&&gr(e[kh])?e[kh]:null}function X6(t){for(var e=null,n=0;e===null&&n<t[ze];n++)e=Z6(t[n]);return e}var Ru,cI=ne(()=>{Od();wy();Fh();Ru=(function(){function t(e,n){var r=n?[][Pa](n):[],o=this,i=X6(r);o[Ei]=function(){return e},o.Msfpc=function(){return i||Ls},o[pn]=function(){return r[ze]},o[ba]=function(){return r},o.addEvent=function(s){return s?(r[Xn](s),i||(i=Z6(s)),!0):!1},o[Ta]=function(s,a){var c;if(s<r[ze]){var l=r[ze]-s;ae(a)||(l=a<l?a:l),c=r.splice(s,l),i=X6(r)}return new t(e,c)}}return t.create=function(e,n){return new t(e,n)},t})()});var Q6,e4=ne(()=>{pr();Fh();Q6=(function(){function t(){var e=!0,n=!0,r=!0,o="use-collector-delta",i=!1;Je(t,this,function(s){s[yy]=function(){return e},s.firstRequestSent=function(){r&&(r=!1,i||(e=!1))},s[qD]=function(){return n},s[GD]=function(){return o},s[Cy]=function(a){i||(a?(o=a,n=!0,i=!0):n=!1,e=!0)}})}return t.__ieDyn=1,t})()});var gme,t4,n4=ne(()=>{pr();Od();Fh();gme=1e3,t4=(function(){function t(){var e={};function n(r){var o=[];return r&&ee(r,function(i){o[Xn](tt(i))}),o}Je(t,this,function(r){r[sI]=function(o,i){if(o&&i)try{var s=n(o[Ta](","));if(i==="this-request-only")return s;for(var a=parseInt(i,10)*gme,c=0;c<s[ze];++c)e[s[c]]=xn()+a}catch{return[]}return[]},r[G6]=function(o){var i=e,s=tt(o);return i[s]!==void 0&&i[s]>xn()?!0:(delete i[s],!1)}})}return t.__ieDyn=1,t})()});function o4(t){return!(t>=300&&t<500&&t!=429||t==501||t==505)}function lI(t){var e=0,n=r4*vme,r=r4*wme,o=ji(Math.random()*(r-n))+n;return e=Math.pow(2,t)*o,su(e,yme)}var vme,wme,r4,yme,FA=ne(()=>{Ne();vme=.8,wme=1.2,r4=3e3,yme=6e5});function _me(t,e,n,r,o){if(o&&e){var i=t(o.value,o.kind,o.propertyType);if(i>-1){var s=e[i4];s||(s=e[i4]={f:{}});var a=s[uI];if(a||(a=s[uI]={}),n)for(var c=0;c<n.length;c++){var l=n[c];a[l]||(a[l]={f:{}});var u=a[l][uI];u||(u=a[l][uI]={}),a=u}a=a[r]={},we(o.value)?a.a={t:i}:a.t=i}}}var Cme,Eme,s4,a4,Sme,i4,uI,xme,c4,l4=ne(()=>{pr();Od();cI();wy();Ne();Cme=20,Eme=3984588,s4=65e3,a4=2e6,Sme=su(a4,s4),i4="metadata",uI="f",xme=/\./,c4=(function(){function t(e,n,r,o,i,s){var a="data",c="baseData",l="ext",u=!!o,f=!0,m=n,d={},p=!!s,g=i||Th;Je(t,this,function(h){h.createPayload=function(w,y,S,D,_,A){return{apiKeys:[],payloadBlob:Ls,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:w,isTeardown:y,isSync:S,isBeacon:D,sendType:A,sendReason:_}},h.appendPayload=function(w,y,S){var D=w&&y&&!w.overflow;return D&&mn(e,function(){return"Serializer:appendPayload"},function(){for(var _=y.events(),A=w.payloadBlob,U=w.numEvents,k=!1,E=[],x=[],b=w.isBeacon,I=b?s4:Eme,T=b?Sme:a4,R=0,L=0;R<_.length;){var N=_[R];if(N){if(U>=S){w.overflow=y.split(R);break}var B=h.getEventBlob(N);if(B&&B.length<=T){var W=B.length,z=A.length;if(z+W>I){w.overflow=y.split(R);break}A&&(A+=`
`),A+=B,L++,L>Cme&&(ua(A,0,1),L=0),k=!0,U++}else B?E.push(N):x.push(N),_.splice(R,1),R--}R++}if(E.length>0&&w.sizeExceed.push(Ru.create(y.iKey(),E)),x.length>0&&w.failedEvts.push(Ru.create(y.iKey(),x)),k){w.batches.push(y),w.payloadBlob=A,w.numEvents=U;var V=y.iKey();wt(w.apiKeys,V)===-1&&w.apiKeys.push(V)}},function(){return{payload:w,theBatch:{iKey:y.iKey(),evts:y.events()},max:S}}),D},h.getEventBlob=function(w){try{return mn(e,function(){return"Serializer.getEventBlob"},function(){var y={};y.name=w.name,y.time=w.time,y.ver=w.ver,y.iKey="o:"+ND(w.iKey);var S={},D;p||(D=function(k,E,x){_me(g,S,k,E,x)});var _=w[l];_&&(y[l]=S,Ie(_,function(k,E){var x=S[k]={};C(E,x,"ext."+k,!0,null,null,!0)}));var A=y[a]={};A.baseType=w.baseType;var U=A[c]={};return C(w.baseData,U,c,!1,[c],D,f),C(w.data,A,a,!1,[],D,f),JSON.stringify(y)},function(){return{item:w}})}catch{return null}};function v(w,y){var S=d[w];return S===void 0&&(w.length>=7&&(S=nh(w,"ext.metadata")||nh(w,"ext.web")),d[w]=S),S}function C(w,y,S,D,_,A,U){Ie(w,function(k,E){var x=null;if(E||gr(E)){var b=S,I=k,T=_,R=y;if(u&&!D&&xme.test(k)){var L=k.split("."),N=L.length;if(N>1){T&&(T=T.slice());for(var B=0;B<N-1;B++){var W=L[B];R=R[W]=R[W]||{},b+="."+W,T&&T.push(W)}I=L[N-1]}}var z=D&&v(b,I);if(!z&&m&&m.handleField(b,I)?x=m.value(b,I,E,r):x=AD(I,E,r),x){var V=x.value;if(R[I]=V,A&&A(T,I,x),U&&typeof V=="object"&&!we(V)){var q=T;q&&(q=q.slice(),q.push(I)),C(E,V,b+"."+I,D,q,A,U)}}}})}})}return t.__ieDyn=1,t})()});function Oh(t,e){return{set:function(n,r){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];return R3([t,e],n,r,o)}}}var OA=ne(()=>{Ne()});function Wd(t,e,n){MA[t]=e,n!==!1&&($A[e]=t)}function fI(t,e){var n=!1;if(t&&e){var r=br(t);if(r&&r[ze]>0)for(var o=e[zD](),i=0;i<r[ze];i++){var s=r[i];if(s&&mr(e,s)&&s[zD]()===o){n=!0;break}}}return n}function Uh(t,e,n,r){e&&n&&n[ze]>0&&(r&&MA[e]?(t[Md][MA[e]]=n,t[KD]=!0):t.url+="&"+e+"="+n)}function bme(t,e,n){for(var r=0;r<t[ze];r++)if(t[r].name===e){t[r].value=n;return}t[Xn]({name:e,value:n})}function Tme(t,e){for(var n=0;n<t[ze];n++)if(t[n].name===e){t.splice(n,1);return}}var Bd,UA,Dme,Ime,Pme,MA,$A,u4,f4=ne(()=>{pr();Od();Ne();e4();cI();wy();n4();FA();l4();OA();Fh();UA="sendAttempt",Dme="&"+j6+"=true",Ime="?cors=true&"+Rh[zD]()+"="+HD,Pme=(Bd={},Bd[1]=yA,Bd[100]=yA,Bd[200]="sent",Bd[8004]=$D,Bd[8003]=$D,Bd),MA={},$A={};Wd(vy,vy,!1);Wd(BD,BD);Wd(EA,"Client-Id");Wd(VD,VD);Wd(WD,WD);Wd(jD,jD);Wd(xA,xA);u4=(function(){function t(e,n,r,o){var i,s,a,c,l=!1,u,f,m,d,p,g,h,v,C,w,y,S,D,_,A,U,k,E,x,b,I,T,R,L,N,B,W,z;Je(t,this,function(V){Ht();var q=!0;V[$d]=function($,Q,ie){L||(p=Q,S=Q.getCookieMgr(),f=ie,m=f.diagLog(),Is(b,hr($,function(ve){var be,qe=ve.cfg,ye=ve.cfg.extensionConfig[ie.identifier];N=Oh(ye[JD],ye[XD]),gr(qe.anonCookieName)?bme(h,"anoncknm",qe.anonCookieName):Tme(h,"anoncknm"),I=ye[V6],T=ye.payloadListener;var P=ye.httpXHROverride,F=ye[DA]?ye[DA]:qe.endpointUrl;i=F+Ime,_=Ve(ye[IA])?!0:!ye[IA],y=!ye[Y6];var H=ye.valueSanitizer,G=ye.stringifyObjects,J=!!qe[ZD];Ve(ye[ZD])||(J=!!ye[ZD]),A=ye.xhrTimeout,U=!!ye[PA],k=!!ye[bA],x=ye[q6]!==!1,B=!!ye.excludeCsMetaData,Q.getPlugin("LocalStorage")&&(k=!0),l=!gu(),w=new c4(p,H,G,J,Th,B),ae(ye[TA])||(l=!!ye[TA]),ye[RA]&&(z=ye[RA]);var te=Be();W?W.SetConfig(te):(W=new Ad,W[$d](te,m));var ue=P,Oe=ye[kA]?P:null,Xe=ye[kA]?P:null,Te=[3,2];if(!P){g=!1;var _o=[];gu()?(_o=[2,1],Te=[2,1,3]):_o=[1,2,3],_o=kc(_o,ye.transports),P=ce(_o,!1),P||go(m,"No available transport to send events"),ue=ce(_o,!0)}Oe||(Te=kc(Te,ye.unloadTransports),Oe=ce(Te,!0)),E=!g&&(l&&Ji()||!k&&Lc(!0)),d=(be={},be[0]=P,be[1]=ue||ce([1,2,3],!0),be[2]=Oe||ue||ce([1],!0),be[3]=Xe||ce([2,3],!0)||ue||ce([1],!0),be)})),L=!0)},V.addResponseHandler=function($){return R[Xn]($),{rm:function(){var Q=R.indexOf($);Q>=0&&R.splice(Q,1)}}},V[QD]=function($){try{if(w)return w.getEventBlob($)}catch{}return Ls},V[eI]=function(){try{var $=w&&w[tI](0,!1,!1,!1,1,0);return le($,_)}catch{}return null},V[Ey]=function($,Q){try{var ie=[];ee($,function(P){Q&&(P=qo(P));var F=Ru.create(P[Ei],[P]);ie[Xn](F)});for(var ve=null;ie[ze]>0&&w;){var be=ie.shift();be&&be[pn]()>0&&(ve=ve||w[tI](0,!1,!1,!1,1,0),w.appendPayload(ve,be,e))}var qe=le(ve,_),ye={data:ve[NA],urlString:qe.url,headers:qe[Md],timeout:A,disableXhrSync:U,disableFetchKeepAlive:k};return _&&(fI(ye[As],gy)||(ye[As][gy]=CA),fI(ye[As],Rh)||(ye[As][Rh]=HD)),ye}catch{}return null};function ce($,Q){try{return W&&W.getSenderInst($,Q)}catch{}return null}V._getDbgPlgTargets=function(){return[d[0],s,w,d,Be(),i]};function Be(){try{var $={xdrOnComplete:mt,fetchOnComplete:xo,xhrOnComplete:Pn,beaconOnRetry:Xt},Q={enableSendPromise:!1,isOneDs:!0,disableCredentials:!q,fetchCredentials:z,disableXhr:!1,disableBeacon:!l,disableBeaconSync:!l,disableFetchKeepAlive:k,timeWrapper:N,addNoResponse:x,senderOnCompleteCallBack:$};return Q}catch{}return null}function mt($,Q,ie){var ve=ks($);vn(Q,200,{},ve),Di(ve)}function Ht(){var $;i=null,s=new t4,a=!1,c=new Q6,l=!1,u=0,f=null,m=null,d=null,p=null,g=!0,h=[],v={},C=[],w=null,y=!1,S=null,D=!1,_=!1,A=$,U=$,k=$,E=$,x=$,b=[],I=$,T=$,R=[],L=!1,N=Oh(),B=!1,W=null}function xo($,Q,ie,ve){var be=function(P,F,H){vn(Q,P,F,H),Di(H)},qe={},ye=$[As];ye&&ye.forEach(function(P,F){qe[F]=P}),be($.status,qe,ie||Ls)}function Pn($,Q,ie){var ve=ks($);vn(Q,$.status,Nc($,!0),ve),Di(ve)}function vn($,Q,ie,ve){try{$(Q,ie,ve)}catch(be){se(m,2,518,Ee(be))}}function Xt($,Q,ie){var ve=$,be=200,qe=ve[Nh],ye=$.urlString+(x?Dme:Ls);try{var P=Kn();if(qe){var F=!!p.getPlugin("LocalStorage"),H=[],G=[];ee(qe[Zr],function(J){if(H&&J&&J[pn]()>0)for(var te=J[ba](),ue=0;ue<te[ze];ue++)if(P.sendBeacon(ye,w.getEventBlob(te[ue])))G[Xn](J[ue]);else{H[Xn](J[Ta](ue));break}else H[Xn](J[Ta](0))}),G[ze]>0&&(qe.sentEvts=G),F||tr(H,8003,qe[zo],!0)}else be=0}catch(J){go(m,"Failed to send telemetry using sendBeacon API. Ex:"+Ee(J)),be=0}finally{vn(Q,be,{},Ls)}}function pt($){return $===2||$===3}function nt($){return D&&pt($)&&($=2),$}V.addHeader=function($,Q){v[$]=Q},V.removeHeader=function($){delete v[$]},V[Sy]=function(){return Dt()&&c[yy]()},V[Lh]=function($,Q){Ve($)&&($=0),D&&($=nt($),Q=2),j(C,$,0)&&xe(yt(),0,!1,$,Q||0)},V.isCompletelyIdle=function(){return!a&&u===0&&C[ze]===0},V[xy]=function($){D=$},V.addBatch=function($){if($&&$[pn]()>0){if(s.isTenantKilled($[Ei]()))return!1;C[Xn]($)}return!0},V.teardown=function(){C[ze]>0&&xe(yt(),0,!0,2,2),ee(b,function($){$&&$.rm&&$.rm()}),b=[]},V.pause=function(){a=!0},V.resume=function(){a=!1,V[Lh](0,4)},V[nI]=function($,Q,ie){$&&$[pn]()>0&&(ae(Q)&&(Q=1),D&&(Q=nt(Q),ie=2),xe([$],0,!1,Q,ie||0))};function Dt(){return!a&&u<n}function yt(){var $=C;return C=[],$}function j($,Q,ie){var ve=!1;return $&&$[ze]>0&&!a&&d[Q]&&w&&(ve=Q!==0||Dt()&&(ie>0||c[yy]())),ve}function oe($){var Q={};return $&&ee($,function(ie,ve){Q[ve]={iKey:ie[Ei](),evts:ie[ba]()}}),Q}function xe($,Q,ie,ve,be){if(!(!$||$[ze]===0)){if(a){tr($,1,ve);return}ve=nt(ve);try{var qe=$,ye=ve!==0;mn(p,function(){return"HttpManager:_sendBatches"},function(P){P&&($=$.slice(0));for(var F=[],H=null,G=Go(),J=d[ve]||(ye?d[1]:d[0]),te=J&&J[rI],ue=E&&(D||pt(ve)||te===3||J._isSync&&te===2);j($,ve,Q);){var Oe=$.shift();Oe&&Oe[pn]()>0&&(s.isTenantKilled(Oe[Ei]())?F[Xn](Oe):(H=H||w[tI](Q,ie,ye,ue,be,ve),w.appendPayload(H,Oe,e)?H.overflow!==null&&($=[H.overflow][Pa]($),H.overflow=null,Qe(H,G,Go(),be),G=Go(),H=null):(Qe(H,G,Go(),be),G=Go(),$=[Oe][Pa]($),H=null)))}H&&Qe(H,G,Go(),be),$[ze]>0&&(C=$[Pa](C)),tr(F,8004,ve)},function(){return{batches:oe(qe),retryCount:Q,isTeardown:ie,isSynchronous:ye,sendReason:be,useSendBeacon:pt(ve),sendType:ve}},!ye)}catch(P){se(m,2,48,"Unexpected Exception sending batch: "+Ee(P))}}}function le($,Q){var ie={url:i,hdrs:{},useHdrs:!1};Q?(ie[Md]=Fd(ie[Md],v),ie.useHdrs=br(ie.hdrs)[ze]>0):Ie(v,function(P,F){$A[P]?Uh(ie,$A[P],F,!1):(ie[Md][P]=F,ie[KD]=!0)}),Uh(ie,EA,"NO_AUTH",Q),Uh(ie,BD,bh,Q);var ve=Ls;ee($.apiKeys,function(P){ve[ze]>0&&(ve+=","),ve+=P}),Uh(ie,VD,ve,Q),Uh(ie,jD,xn().toString(),Q);var be=Ur($);if(gr(be)&&(ie.url+="&ext.intweb.msfpc="+be),c[qD]()&&Uh(ie,WD,c[GD](),Q),p[Ah]){var qe=p[Ah]();qe>=0&&(ie.url+="&w="+qe)}for(var ye=0;ye<h[ze];ye++)ie.url+="&"+h[ye].name+"="+h[ye].value;return ie}function De($,Q,ie){$[Q]=$[Q]||{},$[Q][f.identifier]=ie}function Qe($,Q,ie,ve){if($&&$.payloadBlob&&$.payloadBlob[ze]>0){var be=!!I,qe=d[$.sendType];!pt($[zo])&&$[LA]&&$.sendReason===2&&(qe=d[2]||d[3]||qe);var ye=_;($.isBeacon||qe[rI]===3)&&(ye=!1);var P=le($,ye);ye=ye||P[KD];var F=Go();mn(p,function(){return"HttpManager:_doPayloadSend"},function(){for(var H=0;H<$.batches[ze];H++)for(var G=$[Zr][H],J=G[ba](),te=0;te<J[ze];te++){var ue=J[te];if(y){var Oe=ue[_y]=ue[_y]||{};De(Oe,"sendEventStart",F),De(Oe,"serializationStart",Q),De(Oe,"serializationCompleted",ie)}ue[UA]>0?ue[UA]++:ue[UA]=1}tr($[Zr],1e3+(ve||0),$[zo],!0);var Xe={data:$[NA],urlString:P.url,headers:P[Md],_thePayload:$,_sendReason:ve,timeout:A,disableXhrSync:U,disableFetchKeepAlive:k};ye&&(fI(Xe[As],gy)||(Xe[As][gy]=CA),fI(Xe[As],Rh)||(Xe[As][Rh]=HD));var Te=null;qe&&(Te=function(_o){c.firstRequestSent();var qa=function(Bs,_C){ht(Bs,_C,$,ve)},Do=$[oI]||$.isSync;try{qe.sendPOST(_o,qa,Do),T&&T(Xe,_o,Do,$[LA])}catch(Bs){go(m,"Unexpected exception sending payload. Ex:"+Ee(Bs)),vn(qa,0,{})}}),mn(p,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(Te)if($[zo]===0&&u++,be&&!$.isBeacon&&qe[rI]!==3){var _o={data:Xe.data,urlString:Xe.urlString,headers:Fd({},Xe[As]),timeout:Xe.timeout,disableXhrSync:Xe[PA],disableFetchKeepAlive:Xe[bA]},qa=!1;mn(p,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{I(_o,function(Do){qa=!0,!g&&!Do[Nh]&&(Do[Nh]=Do[Nh]||Xe[Nh],Do[iI]=Do[iI]||Xe[iI]),Te(Do)},$.isSync||$[oI])}catch{qa||Te(Xe)}})}else Te(Xe)})},function(){return{thePayload:$,serializationStart:Q,serializationCompleted:ie,sendReason:ve}},$.isSync)}$.sizeExceed&&$.sizeExceed[ze]>0&&tr($.sizeExceed,8003,$[zo]),$.failedEvts&&$.failedEvts[ze]>0&&tr($.failedEvts,8002,$[zo])}function rt($,Q){y&&ee($,function(ie){var ve=ie[_y]=ie[_y]||{};De(ve,"sendEventCompleted",Q)})}function ht($,Q,ie,ve){var be=9e3,qe=null,ye=!1,P=!1;try{var F=!0;if(typeof $!==sa){if(Q){c[Cy](Q[W6]);var H=Q[B6]||Q["kill-duration-seconds"];ee(s[sI](Q[H6],H),function(J){ee(ie[Zr],function(te){if(te[Ei]()===J){qe=qe||[];var ue=te[Ta](0);ie.numEvents-=ue[pn](),qe[Xn](ue)}})})}if($==200||$==204){be=200;return}(!o4($)||ie.numEvents<=0)&&(F=!1),be=9e3+$%1e3}if(F){be=100;var G=ie.retryCnt;ie[zo]===0&&(G<r?(ye=!0,Or(function(){ie[zo]===0&&u--,xe(ie[Zr],G+1,ie[oI],D?2:ie[zo],5)},D,lI(G))):(P=!0,D&&(be=8001)))}}finally{ye||(c[Cy](),wn(ie,be,ve,P)),tr(qe,8004,ie[zo])}}function wn($,Q,ie,ve){try{ve&&f[aI]();var be=$[Zr];Q===200&&(be=$.sentEvts||$[Zr],!ve&&!$.isSync&&f._clearBackOff(),Wn(be)),tr(be,Q,$[zo],!0)}finally{$[zo]===0&&(u--,ie!==5&&V.sendQueuedRequests($[zo],ie))}}function Wn($){if(y){var Q=Go();ee($,function(ie){ie&&ie[pn]()>0&&rt(ie[ba](),Q)})}}function Or($,Q,ie){Q?$():N.set($,ie)}function Ur($){for(var Q=0;Q<$.batches[ze];Q++){var ie=$[Zr][Q].Msfpc();if(ie)return encodeURIComponent(ie)}return Ls}function Di($){var Q=R;try{for(var ie=0;ie<Q[ze];ie++)try{Q[ie]($)}catch(be){se(m,1,519,"Response handler failed: "+be)}if($){var ve=JSON.parse($);gr(ve.webResult)&&gr(ve.webResult[kh])&&S.set("MSFPC",ve.webResult[kh],365*86400)}}catch{}}function tr($,Q,ie,ve){if($&&$[ze]>0&&o){var be=o[Ya(Q)];if(be){var qe=ie!==0;mn(p,function(){return"HttpManager:_sendBatchesNotification"},function(){Or(function(){try{be.call(o,$,Q,qe,ie)}catch(ye){se(m,1,74,"send request notification failed: "+ye)}},ve||qe,0)},function(){return{batches:oe($),reason:Q,isSync:qe,sendSync:ve,sendType:ie}},!qe)}}}function Ya($){var Q=Pme[$];return gr(Q)||(Q=$6,$>=9e3&&$<=9999?Q=M6:$>=8e3&&$<=8999?Q=$D:$>=1e3&&$<=1999&&(Q=U6)),Q}})}return t.__ieDyn=1,t})()});function Fme(t){return t&&t.sendPOST}var Rme,d4,kme,h4,g4,Nme,m4,Lme,HA,jd,p4,Mn,Ame,v4,w4=ne(()=>{Bo();pr();Od();yd();Ne();wA();cI();f4();wy();FA();OA();Fh();Rme=.25,d4=500,kme=20,h4=6,g4=2,Nme=4,m4=2,Lme=1,HA=1e4,jd="eventsDiscarded",p4="",Mn=void 0,Ame=Ds({eventsLimitInMem:{isVal:bu,v:HA},immediateEventLimit:{isVal:bu,v:500},autoFlushEventsLimit:{isVal:bu,v:0},disableAutoBatchFlushLimit:!1,httpXHROverride:{isVal:Fme,v:Mn},overrideInstrumentationKey:Mn,overrideEndpointUrl:Mn,disableTelemetry:!1,ignoreMc1Ms0CookieProcessing:!1,setTimeoutOverride:Mn,clearTimeoutOverride:Mn,payloadPreprocessor:Mn,payloadListener:Mn,disableEventTimings:Mn,valueSanitizer:Mn,stringifyObjects:Mn,enableCompoundKey:Mn,disableOptimizeObj:!1,fetchCredentials:Mn,transports:Mn,unloadTransports:Mn,useSendBeacon:Mn,disableFetchKeepAlive:Mn,avoidOptions:!1,xhrTimeout:Mn,disableXhrSync:Mn,alwaysUseXhrOverride:!1,maxEventRetryAttempts:{isVal:Ir,v:h4},maxUnloadEventRetryAttempts:{isVal:Ir,v:g4},addNoResponse:Mn,excludeCsMetaData:Mn});v4=(function(t){Ho(e,t);function e(){var n=t.call(this)||this;n.identifier="PostChannel",n.priority=1011,n.version="4.3.6";var r,o=!1,i=[],s,a=!1,c=0,l,u=0,f,m={},d=Ud,p,g,h,v,C,w,y,S,D,_,A,U,k,E,x,b,I,T,R,L,N,B;return Je(e,n,function(W,z){nt(),W._getDbgPlgTargets=function(){return[C,r]},W[$d]=function(P,F,H){mn(F,function(){return"PostChannel:initialize"},function(){z[$d](P,F,H),R=F.getNotifyMgr();try{x=Ci(kr(W[Dy]),F.evtNamespace&&F.evtNamespace()),W._addHook(hr(P,function(G){var J=G.cfg,te=vo(null,J,F);r=te.getExtCfg(W[Dy],Ame),b=Oh(r[JD],r[XD]),A=!r.disableOptimizeObj&&FD(),I=r[z6],q(F),f=r.eventsLimitInMem,l=r.immediateEventLimit,y=r[AA],k=r.maxEventRetryAttempts,E=r.maxUnloadEventRetryAttempts,T=r[K6],fo(J.endpointUrl)?W.pause():a&&W.resume(),ye(),N=r[J6],B=!!r.disableTelemetry,L&&V();var ue=J.disablePageUnloadEvents||[];L=ly(mt,ue,x),L=Dh(mt,ue,x)||L,L=Ih(Ht,J.disablePageShowEvents,x)||L})),C[$d](P,W.core,W)}catch(G){throw W.setInitialized(!1),G}},function(){return{theConfig:P,core:F,extensions:H}})},W.processTelemetry=function(P,F){hy(P,W[Dy]),F=F||W._getTelCtx(F);var H=P;!B&&!o&&(N&&(H[Ei]=N),Pn(H,!0),U?j(2,2):pt()),W.processNext(H,F)},W.getOfflineSupport=function(){try{var P=C&&C[eI]();if(C)return{getUrl:function(){return P?P.url:null},serialize:Be,batch:ce,shouldProcess:function(F){return!B},createPayload:function(F){return null},createOneDSPayload:function(F){if(C[Ey])return C[Ey](F,A)}}}catch{}return null},W._doTeardown=function(P,F){j(2,2),o=!0,C.teardown(),V(),nt()};function V(){uy(null,x),fy(null,x),dy(null,x)}function q(P){var F=P[Ah];P[Ah]=function(){var H=0;return I&&(H=H|2),H|F.call(P)}}function ce(P){var F=p4;return P&&P[ze]&&ee(P,function(H){F&&(F+=`
`),F+=H}),F}function Be(P){var F=p4;try{xo(P),F=C[QD](P)}catch{}return F}function mt(P){var F=P||On().event;F.type!=="beforeunload"&&(U=!0,C[xy](U)),j(2,2)}function Ht(P){U=!1,C[xy](U)}function xo(P){P.ext&&P.ext[_A]&&delete P.ext[_A],P.ext&&P.ext[YD]&&P.ext[YD].id&&delete P.ext[YD].id,A&&(P.ext=qo(P.ext),P.baseData&&(P.baseData=qo(P.baseData)),P.data&&(P.data=qo(P.data)))}function Pn(P,F){if(P[Iy]||(P[Iy]=0),P[Tu]||(P[Tu]=1),xo(P),P[Hd]){if(h||a)P[Tu]=3,P[Hd]=!1;else if(C){A&&(P=qo(P)),C[nI](Ru.create(P[Ei],[P]),P[Hd]===!0?1:P[Hd],3);return}}var H=P[Tu],G=u,J=f;H===4&&(G=c,J=l);var te=!1;if(G<J)te=!De(P,F);else{var ue=1,Oe=kme;H===4&&(ue=4,Oe=1),te=!0,Qe(P[Ei],P[Tu],ue,Oe)&&(te=!De(P,F))}te&&Ya(jd,[P],Ps.QueueFull)}W.setEventQueueLimits=function(P,F){r.eventsLimitInMem=f=bu(P)?P:HA,r[AA]=y=bu(F)?F:0,ye();var H=u>P;if(!H&&S>0)for(var G=1;!H&&G<=3;G++){var J=w[G];J&&J[Zr]&&ee(J[Zr],function(te){te&&te[pn]()>=S&&(H=!0)})}le(!0,H)},W.pause=function(){yt(),a=!0,C&&C.pause()},W.resume=function(){a=!1,C&&C.resume(),pt()},W._loadTransmitProfiles=function(P){Or(),Ie(P,function(F,H){var G=H[ze];if(G>=2){var J=G>2?H[2]:0;if(H.splice(0,G-2),H[1]<0&&(H[0]=-1),H[1]>0&&H[0]>0){var te=H[0]/H[1];H[0]=I3(te)*H[1]}J>=0&&H[1]>=0&&J>H[1]&&(J=H[1]),H[Xn](J),m[F]=H}})},W.flush=function(P,F,H){P===void 0&&(P=!0);var G;if(!a)if(H=H||1,P)F||(G=zi(function(te){F=te})),s==null?(yt(),ht(1,0,H),s=Dt(function(){s=null,wn(F,H)},0)):i[Xn](F);else{var J=yt();vn(1,1,H),F&&F(),J&&pt()}return G},W.setMsaAuthTicket=function(P){C.addHeader(vy,P)},W.setAuthPluginHeader=function(P){C.addHeader(SA,P)},W.removeAuthPluginHeader=function(){C.removeHeader(SA)},W.hasEvents=Xt,W._setTransmitProfile=function(P){d!==P&&m[P]!==void 0&&(yt(),d=P,pt())},yi(W,function(){return C},["addResponseHandler"]);function vn(P,F,H){var G=ht(P,F,H);return C[Lh](F,H),G}function Xt(){return u>0}function pt(){if(D>=0&&ht(D,0,_)&&C[Lh](0,_),c>0&&!g&&!a){var P=m[d][2];P>=0&&(g=Dt(function(){g=null,vn(4,0,1),pt()},P))}var F=m[d][1];!p&&!s&&F>=0&&!a&&(Xt()?p=Dt(function(){p=null,vn(v===0?3:1,0,1),v++,v%=2,pt()},F):v=0)}W[aI]=function(){h<Nme&&(h++,yt(),pt())},W._clearBackOff=function(){h&&(h=0,yt(),pt())};function nt(){r=null,o=!1,i=[],s=null,a=!1,c=0,l=500,u=0,f=HA,m={},d=Ud,p=null,g=null,h=0,v=0,w={},y=0,L=!1,S=0,D=-1,_=null,A=!0,U=!1,k=h4,E=g4,x=null,N=null,B=!1,b=Oh(),C=new u4(d4,m4,Lme,{requeue:Di,send:Q,sent:ie,drop:ve,rspFail:be,oth:qe}),Ur(),oe(),ye()}function Dt(P,F){F===0&&h&&(F=1);var H=1e3;return h&&(H=lI(h-1)),b.set(P,F*H)}function yt(){return p!==null?(p.cancel(),p=null,v=0,!0):!1}function j(P,F){yt(),s&&(s.cancel(),s=null),a||vn(1,P,F)}function oe(){w[4]={batches:[],iKeyMap:{}},w[3]={batches:[],iKeyMap:{}},w[2]={batches:[],iKeyMap:{}},w[1]={batches:[],iKeyMap:{}}}function xe(P,F,H){var G=w[F];G||(F=1,G=w[F]);var J=G.iKeyMap[P];return!J&&H&&(J=Ru.create(P),G.batches[Xn](J),G.iKeyMap[P]=J),J}function le(P,F){C[Sy]()&&!h&&(y>0&&u>y&&(F=!0),F&&s==null&&W.flush(P,function(){},20))}function De(P,F){A&&(P=qo(P));var H=P[Tu],G=xe(P[Ei],H,!0);return G.addEvent(P)?(H!==4?(u++,F&&P[Iy]===0&&le(!P.sync,S>0&&G[pn]()>=S)):c++,!0):!1}function Qe(P,F,H,G){for(;H<=F;){var J=xe(P,F,!0);if(J&&J[pn]()>0){var te=J[Ta](0,G),ue=te[pn]();if(ue>0)return H===4?c-=ue:u-=ue,$(jd,[te],Ps.QueueFull),!0}H++}return rt(),!1}function rt(){for(var P=0,F=0,H=function(J){var te=w[J];te&&te[Zr]&&ee(te[Zr],function(ue){J===4?P+=ue[pn]():F+=ue[pn]()})},G=1;G<=4;G++)H(G);u=F,c=P}function ht(P,F,H){var G=!1,J=F===0;return!J||C[Sy]()?mn(W.core,function(){return"PostChannel._queueBatches"},function(){for(var te=[],ue=4;ue>=P;){var Oe=w[ue];Oe&&Oe.batches&&Oe.batches[ze]>0&&(ee(Oe[Zr],function(Xe){C.addBatch(Xe)?G=G||Xe&&Xe[pn]()>0:te=te[Pa](Xe[ba]()),ue===4?c-=Xe[pn]():u-=Xe[pn]()}),Oe[Zr]=[],Oe.iKeyMap={}),ue--}te[ze]>0&&Ya(jd,te,Ps.KillSwitch),G&&D>=P&&(D=-1,_=0)},function(){return{latency:P,sendType:F,sendReason:H}},!J):(D=D>=0?su(D,P):P,_=la(_,H)),G}function wn(P,F){vn(1,0,F),rt(),Wn(function(){P&&P(),i[ze]>0?s=Dt(function(){s=null,wn(i.shift(),F)},0):(s=null,pt())})}function Wn(P){C.isCompletelyIdle()?P():s=Dt(function(){s=null,Wn(P)},Rme)}function Or(){yt(),Ur(),d=Ud,pt()}function Ur(){m={},m[Ud]=[2,1,0],m[UD]=[6,3,0],m[MD]=[18,9,0]}function Di(P,F){var H=[],G=k;U&&(G=E),ee(P,function(J){J&&J[pn]()>0&&ee(J[ba](),function(te){te&&(te[Hd]&&(te[Tu]=4,te[Hd]=!1),te[Iy]<G?(hy(te,W[Dy]),Pn(te,!1)):H[Xn](te))})}),H[ze]>0&&Ya(jd,H,Ps.NonRetryableStatus),U&&j(2,2)}function tr(P,F){var H=R||{},G=H[P];if(G)try{G.apply(H,F)}catch(J){se(W.diagLog(),1,74,P+" notification failed: "+J)}}function Ya(P,F){for(var H=[],G=2;G<arguments.length;G++)H[G-2]=arguments[G];F&&F[ze]>0&&tr(P,[F][Pa](H))}function $(P,F){for(var H=[],G=2;G<arguments.length;G++)H[G-2]=arguments[G];F&&F[ze]>0&&ee(F,function(J){J&&J[pn]()>0&&tr(P,[J.events()][Pa](H))})}function Q(P,F,H){P&&P[ze]>0&&tr("eventsSendRequest",[F>=1e3&&F<=1999?F-1e3:0,H!==!0])}function ie(P,F){$("eventsSent",P,F),pt()}function ve(P,F){$(jd,P,F>=8e3&&F<=8999?F-8e3:Ps.Unknown)}function be(P){$(jd,P,Ps.NonRetryableStatus),pt()}function qe(P,F){$(jd,P,Ps.Unknown),pt()}function ye(){T?S=0:S=la(d4*(m4+1),f/6)}}),n}return e.__ieDyn=1,e})(Hc)});var y4={};bC(y4,{BE_PROFILE:()=>MD,NRT_PROFILE:()=>UD,PostChannel:()=>v4,RT_PROFILE:()=>Ud});var C4=ne(()=>{wA();w4()});var Py,by,dI,Vd,Ra,Qr,Fs=ne(()=>{Py="sampleRate",by="ProcessLegacy",dI="http.method",Vd="https://dc.services.visualstudio.com",Ra="/v2/track",Qr="not_specified"});var mI,S4=ne(()=>{Ot();mI=YN({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]})});var Yd,$e,qd,ku,Nu,BA,Mh,x4,Ty,Ry,Gd,eo,Nr,to,ky,Ny,$h,zd,pI,Kd,Ly,Ay,ka,Jd,Hh,Xd,wo=ne(()=>{Yd="split",$e="length",qd="toLowerCase",ku="ingestionendpoint",Nu="toString",BA="removeItem",Mh="message",x4="count",Ty="stringify",Ry="pathname",Gd="match",eo="name",Nr="properties",to="measurements",ky="sizeInBytes",Ny="typeName",$h="exceptions",zd="severityLevel",pI="problemGroup",Kd="parsedStack",Ly="hasFullStack",Ay="assembly",ka="fileName",Jd="line",Hh="aiDataContract",Xd="duration"});function WA(t,e,n){var r=e[$e],o=_4(t,e);if(o[$e]!==r){for(var i=0,s=o;n[s]!==void 0;)i++,s=zn(o,0,147)+D4(i);o=s}return o}function _4(t,e){var n;return e&&(e=tt(Sn(e)),e[$e]>150&&(n=zn(e,0,150),se(t,2,57,"name is too long.  It has been truncated to 150 characters.",{name:e},!0))),n||e}function Nt(t,e,n){n===void 0&&(n=1024);var r;return e&&(n=n||1024,e=tt(Sn(e)),e[$e]>n&&(r=zn(e,0,n),se(t,2,61,"string value is too long. It has been truncated to "+n+" characters.",{value:e},!0))),r||e}function Zd(t,e){return YA(t,e,2048,66)}function Fy(t,e){var n;return e&&e[$e]>32768&&(n=zn(e,0,32768),se(t,2,56,"message is too long, it has been truncated to 32768 characters.",{message:e},!0)),n||e}function jA(t,e){var n;if(e){var r=""+e;r[$e]>32768&&(n=zn(r,0,32768),se(t,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:e},!0))}return n||e}function yo(t,e){if(e){var n={};Ie(e,function(r,o){if(tn(o)&&ya())try{o=Rr()[Ty](o)}catch(i){se(t,2,49,"custom property is not valid",{exception:i},!0)}o=Nt(t,o,8192),r=WA(t,r,n),n[r]=o}),e=n}return e}function Co(t,e){if(e){var n={};Ie(e,function(r,o){r=WA(t,r,n),n[r]=o}),e=n}return e}function VA(t,e){return e&&YA(t,e,128,69)[Nu]()}function YA(t,e,n,r){var o;return e&&(e=tt(Sn(e)),e[$e]>n&&(o=zn(e,0,n),se(t,2,r,"input is too long, it has been truncated to "+n+" characters.",{data:e},!0))),o||e}function D4(t){var e="00"+t;return ua(e,e[$e]-3)}var Os=ne(()=>{Ot();Ne();wo()});function b4(t){var e=P4,n=Ume,r=n[e];return I4.createElement?n[e]||(r=n[e]=I4.createElement("a")):r={host:Mme(t,!0)},r.href=t,e++,e>=n[$e]&&(e=0),P4=e,r}function Mme(t,e){var n=T4(t,e)||"";if(n){var r=n[Gd](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(r!=null&&r[$e]>3&&ke(r[2])&&r[2][$e]>0)return r[2]+(r[3]||"")}return n}function T4(t,e){var n=null;if(t){var r=t[Gd](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(r!=null&&r[$e]>2&&ke(r[2])&&r[2][$e]>0&&(n=r[2]||"",e&&r[$e]>2)){var o=(r[1]||"")[qd](),i=r[3]||"";(o==="http"&&i===":80"||o==="https"&&i===":443")&&(i=""),n+=i}}return n}var I4,P4,Ume,R4=ne(()=>{Ot();wo();I4=Fn()||{},P4=0,Ume=[null,null,null,null,null]});function hI(t){return wt($me,t[qd]())!==-1}function k4(t,e,n,r){var o,i=r,s=r;if(e&&e[$e]>0){var a=b4(e);if(o=a.host,!i)if(a[Ry]!=null){var c=a.pathname[$e]===0?"/":a[Ry];c.charAt(0)!=="/"&&(c="/"+c),s=a[Ry],i=Nt(t,n?n+" "+c:c)}else i=Nt(t,e)}else o=r,i=r;return{target:o,name:i,data:s}}var $me,qA=ne(()=>{Ot();Fs();Os();R4();wo();$me=[Vd+Ra,"https://breeze.aimon.applicationinsights.io"+Ra,"https://dc-int.services.visualstudio.com"+Ra]});var gI,dFe,mFe,N4=ne(()=>{Ot();gI=fn({LocalStorage:0,SessionStorage:1}),dFe=fn({AI:0,AI_AND_W3C:1,W3C:2}),mFe=fn({Normal:1,Critical:2})});function A4(t){try{if(ae(po()))return null;var e=new Date()[Nu](),n=vt(t===gI.LocalStorage?"localStorage":"sessionStorage"),r=L4+e;n.setItem(r,e);var o=n.getItem(r)!==e;if(n[BA](r),!o)return n}catch{}return null}function GA(){return vI()?A4(gI.SessionStorage):null}function zA(t){L4=t||""}function vI(t){return(t||Bh===void 0)&&(Bh=!!A4(gI.SessionStorage)),Bh}function KA(t,e){var n=GA();if(n!==null)try{return n.getItem(e)}catch(r){Bh=!1,se(t,2,2,"Browser failed read of session storage. "+nn(r),{exception:Ee(r)})}return null}function JA(t,e,n){var r=GA();if(r!==null)try{return r.setItem(e,n),!0}catch(o){Bh=!1,se(t,2,4,"Browser failed write to session storage. "+nn(o),{exception:Ee(o)})}return!1}function XA(t,e){var n=GA();if(n!==null)try{return n[BA](e),!0}catch(r){Bh=!1,se(t,2,6,"Browser failed removal of session storage item. "+nn(r),{exception:Ee(r)})}return!1}var Bh,L4,F4=ne(()=>{Ot();N4();wo();Bh=void 0,L4=""});function Oy(t){if(!t)return{};var e=t[Yd](Hme),n=_w(e,function(o,i){var s=i[Yd](Bme);if(s[$e]===2){var a=s[0][qd](),c=s[1];o[a]=c}return o},{});if(br(n)[$e]>0){if(n.endpointsuffix){var r=n.location?n.location+".":"";n[ku]=n[ku]||"https://"+r+"dc."+n.endpointsuffix}n[ku]=n[ku]||Vd,fd(n[ku],"/")&&(n[ku]=n[ku].slice(0,-1))}return n}var Hme,Bme,O4=ne(()=>{Ot();Fs();wo();Hme=";",Bme="="});var ZA,U4=ne(()=>{Ot();Fs();wo();Os();ZA=(function(){function t(e,n,r){var o=this,i=this;i.ver=1,i.sampleRate=100,i.tags={},i[eo]=Nt(e,r)||Qr,i.data=n,i.time=Rs(new Date),i[Hh]={time:1,iKey:1,name:1,sampleRate:function(){return o.sampleRate===100?4:1},tags:1,data:1}}return t})()});var Yc,M4=ne(()=>{Fs();wo();Os();Yc=(function(){function t(e,n,r,o){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var i=this;i.ver=2,i[eo]=Nt(e,n)||Qr,i[Nr]=yo(e,r),i[to]=Co(e,o)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Event",t.dataType="EventData",t})()});function Jme(t){return t.replace(/(\(anonymous\))/,"<anonymous>")}function Xme(t){return Vi(t,"[native")<0}function nF(t,e){var n=t;return n&&!ke(n)&&(JSON&&JSON[Ty]?(n=JSON[Ty](t),e&&(!n||n==="{}")&&(Re(t[Nu])?n=t[Nu]():n=""+t)):n=""+t+" - (Missing JSON.stringify)"),n||""}function Y4(t,e){var n=t;return t&&(n&&!ke(n)&&(n=t[tF]||t[V4]||n),n&&!ke(n)&&(n=nF(n,!0)),t.filename&&(n=n+" @"+(t.filename||"")+":"+(t.lineno||"?")+":"+(t.colno||"?"))),e&&e!=="String"&&e!=="Object"&&e!=="Error"&&Vi(n||"",e)===-1&&(n=e+": "+n),n||""}function Zme(t){try{if(tn(t))return"hasFullStack"in t&&"typeName"in t}catch{}return!1}function Qme(t){try{if(tn(t))return"ver"in t&&"exceptions"in t&&"properties"in t}catch{}return!1}function W4(t){return t&&t.src&&ke(t.src)&&t.obj&&we(t.obj)}function Qd(t){var e=t||"";ke(e)||(ke(e[Zi])?e=e[Zi]:e=""+e);var n=e[Yd](`
`);return{src:e,obj:n}}function epe(t){for(var e=[],n=t[Yd](`
`),r=0;r<n[$e];r++){var o=n[r];n[r+1]&&(o+="@"+n[r+1],r++),e.push(o)}return{src:t,obj:e}}function q4(t){var e=null;if(t)try{if(t[Zi])e=Qd(t[Zi]);else if(t[Wh]&&t[Wh][Zi])e=Qd(t[Wh][Zi]);else if(t.exception&&t.exception[Zi])e=Qd(t.exception[Zi]);else if(W4(t))e=t;else if(W4(t[eF]))e=t[eF];else if(On()&&On().opera&&t[tF])e=epe(t[Mh]);else if(t.reason&&t.reason[Zi])e=Qd(t.reason[Zi]);else if(ke(t))e=Qd(t);else{var n=t[tF]||t[V4]||"";ke(t[H4])&&(n&&(n+=`
`),n+=" from "+t[H4]),n&&(e=Qd(n))}}catch(r){e=Qd(r)}return e||{src:"",obj:null}}function tpe(t){var e="";return t&&(t.obj?e=t.obj.join(`
`):e=t.src||""),e}function npe(t){var e,n=t.obj;if(n&&n[$e]>0){e=[];var r=0,o=!1,i=0;ee(n,function(g){if(o||spe(g)){var h=Sn(g);o=!0;var v=ape(h,r);v&&(i+=v[ky],e.push(v),r++)}});var s=32*1024;if(i>s)for(var a=0,c=e[$e]-1,l=0,u=a,f=c;a<c;){var m=e[a][ky],d=e[c][ky];if(l+=m+d,l>s){var p=f-u+1;e.splice(u,p);break}u=a,f=c,a++,c--}}return e}function wI(t){var e="";if(t&&(e=t.typeName||t[eo]||"",!e))try{var n=/function (.{1,200})\(/,r=n.exec(t.constructor[Nu]());e=r&&r[$e]>1?r[1]:""}catch{}return e}function QA(t){if(t)try{if(!ke(t)){var e=wI(t),n=nF(t,!1);return(!n||n==="{}")&&(t[Wh]&&(t=t[Wh],e=wI(t)),n=nF(t,!0)),Vi(n,e)!==0&&e!=="String"?e+":"+n:n}}catch{}return""+(t||"")}function ope(){var t=this,e=we(t[Kd])&&xc(t[Kd],function(r){return lpe(r)}),n={id:t.id,outerId:t.outerId,typeName:t[Ny],message:t[Mh],hasFullStack:t[Ly],stack:t[Zi],parsedStack:e||void 0};return n}function G4(t,e,n){var r,o,i,s,a,c,l,u;if(Zme(e))s=e[Ny],a=e[Mh],l=e[Zi],u=e[Kd]||[],c=e[Ly];else{var f=e,m=f&&f.evt;ad(f)||(f=f[Wh]||m||f),s=Nt(t,wI(f))||Qr,a=Fy(t,Y4(e||f,s))||Qr;var d=e[eF]||q4(e);u=npe(d),we(u)&&xc(u,function(p){p[Ay]=Nt(t,p[Ay]),p[ka]=Nt(t,p[ka])}),l=jA(t,tpe(d)),c=we(u)&&u[$e]>0,n&&(n[Ny]=n[Ny]||s)}return r={},r[Hh]=rpe,r.id=o,r.outerId=i,r.typeName=s,r.message=a,r[Ly]=c,r.stack=l,r.parsedStack=u,r.toInterface=ope,r}function ipe(t,e){var n=we(e[Kd])&&xc(e[Kd],function(o){return cpe(o)})||e[Kd],r=G4(t,Yi(Yi({},e),{parsedStack:n}));return r}function z4(t,e){var n=e[Gd](zme);if(n&&n[$e]>=4)t[ka]=n[1],t[Jd]=parseInt(n[2]);else{var r=e[Gd](Kme);r&&r[$e]>=3?(t[ka]=r[1],t[Jd]=parseInt(r[2])):t[ka]=e}}function j4(t,e,n){var r=t[ka];e.fn&&n&&n[$e]>e.fn&&(e.ln&&n[$e]>e.ln?(r=tt(n[e.fn]||""),t[Jd]=parseInt(tt(n[e.ln]||""))||0):r=tt(n[e.fn]||"")),r&&z4(t,r)}function spe(t){var e=!1;if(t&&ke(t)){var n=tt(t);n&&(e=jme.test(n))}return e}function ape(t,e){var n,r;if(t&&ke(t)&&tt(t)){r=(n={},n[Hh]=K4,n.level=e,n.assembly=tt(t),n.method=$4,n.fileName="",n.line=0,n.sizeInBytes=0,n);for(var o=0;o<B4[$e];){var i=B4[o];if(i.chk&&!i.chk(t))break;i.pre&&(t=i.pre(t));var s=t[Gd](i.re);if(s&&s[$e]>=i.len){i.m&&(r.method=tt(s[i.m]||$4)),i.hdl?i.hdl(r,i,s):i.fn&&(i.ln?(r[ka]=tt(s[i.fn]||""),r[Jd]=parseInt(tt(s[i.ln]||""))||0):z4(r,s[i.fn]||""));break}o++}}return J4(r)}function cpe(t){var e,n=(e={},e[Hh]=K4,e.level=t.level,e.method=t.method,e.assembly=t[Ay],e.fileName=t[ka],e.line=t[Jd],e.sizeInBytes=0,e);return J4(n)}function J4(t){var e=Wme;return t&&(e+=t.method[$e],e+=t.assembly[$e],e+=t.fileName[$e],e+=t.level.toString()[$e],e+=t.line.toString()[$e],t[ky]=e),t}function lpe(t){return{level:t.level,method:t.method,assembly:t[Ay],fileName:t[ka],line:t[Jd]}}var Wme,jme,Vme,Yme,qme,Gme,zme,Kme,$4,Wh,Zi,eF,H4,tF,V4,B4,em,rpe,K4,X4=ne(()=>{Bo();Ot();Ne();Fs();wo();Os();Wme=58,jme=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,Vme=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,Yme=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,qme=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,Gme=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,zme=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,Kme=/([^\(\s\n]+):([0-9]+)$/,$4="<no_method>",Wh="error",Zi="stack",eF="stackDetails",H4="errorSrc",tF="message",V4="description",B4=[{re:Vme,len:5,m:1,fn:2,ln:3,col:4},{chk:Xme,pre:Jme,re:Yme,len:4,m:1,fn:2,ln:3},{re:qme,len:3,m:1,fn:2,hdl:j4},{re:Gme,len:2,fn:1,hdl:j4}];em=(function(){function t(e,n,r,o,i,s){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var a=this;a.ver=2,Qme(n)?(a[$h]=n[$h]||[],a[Nr]=n[Nr],a[to]=n[to],n[zd]&&(a[zd]=n[zd]),n.id&&(a.id=n.id,n[Nr].id=n.id),n[pI]&&(a[pI]=n[pI]),ae(n.isManual)||(a.isManual=n.isManual)):(r||(r={}),s&&(r.id=s),a[$h]=[G4(e,n,r)],a[Nr]=yo(e,r),a[to]=Co(e,o),i&&(a[zd]=i),s&&(a.id=s))}return t.CreateAutoException=function(e,n,r,o,i,s,a,c){var l=wI(i||s||e);return{message:Y4(e,l),url:n,lineNumber:r,columnNumber:o,error:QA(i||s||e),evt:QA(s||e),typeName:l,stackDetails:q4(a||i||s),errorSrc:c}},t.CreateFromInterface=function(e,n,r,o){var i=n[$h]&&xc(n[$h],function(a){return ipe(e,a)}),s=new t(e,Yi(Yi({},n),{exceptions:i}),r,o);return s},t.prototype.toInterface=function(){var e=this,n=e.exceptions,r=e.properties,o=e.measurements,i=e.severityLevel,s=e.problemGroup,a=e.id,c=e.isManual,l=n instanceof Array&&xc(n,function(u){return u.toInterface()})||void 0;return{ver:"4.0",exceptions:l,severityLevel:i,properties:r,measurements:o,problemGroup:s,id:a,isManual:c}},t.CreateSimpleException=function(e,n,r,o,i,s){var a;return{exceptions:[(a={},a[Ly]=!0,a.message=e,a.stack=i,a.typeName=n,a)]}},t.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",t.dataType="ExceptionData",t.formatError=QA,t})(),rpe=mo({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});K4=mo({level:1,method:1,assembly:0,fileName:0,line:0})});var Z4,Q4=ne(()=>{Z4=(function(){function t(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return t})()});var qc,eK=ne(()=>{Fs();wo();Q4();Os();qc=(function(){function t(e,n,r,o,i,s,a,c,l){this.aiDataContract={ver:1,metrics:1,properties:0};var u=this;u.ver=2;var f=new Z4;f[x4]=o>0?o:void 0,f.max=isNaN(s)||s===null?void 0:s,f.min=isNaN(i)||i===null?void 0:i,f[eo]=Nt(e,n)||Qr,f.value=r,f.stdDev=isNaN(a)||a===null?void 0:a,u.metrics=[f],u[Nr]=yo(e,c),u[to]=Co(e,l)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",t.dataType="MetricData",t})()});function yI(t){(isNaN(t)||t<0)&&(t=0),t=T3(t);var e=Uy+t%1e3,n=Uy+ji(t/1e3)%60,r=Uy+ji(t/(1e3*60))%60,o=Uy+ji(t/(1e3*60*60))%24,i=ji(t/(1e3*60*60*24));return e=e[$e]===1?"00"+e:e[$e]===2?"0"+e:e,n=n[$e]<2?"0"+n:n,r=r[$e]<2?"0"+r:r,o=o[$e]<2?"0"+o:o,(i>0?i+".":Uy)+o+":"+r+":"+n+"."+e}var Uy,rF=ne(()=>{Ne();wo();Uy=""});var tm,tK=ne(()=>{Fs();rF();wo();Os();tm=(function(){function t(e,n,r,o,i,s,a){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var c=this;c.ver=2,c.id=VA(e,a),c.url=Zd(e,r),c[eo]=Nt(e,n)||Qr,isNaN(o)||(c[Xd]=yI(o)),c[Nr]=yo(e,i),c[to]=Co(e,s)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",t.dataType="PageviewData",t})()});var nm,nK=ne(()=>{rF();qA();wo();Os();nm=(function(){function t(e,n,r,o,i,s,a,c,l,u,f,m){l===void 0&&(l="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var d=this;d.ver=2,d.id=n,d[Xd]=yI(i),d.success=s,d.resultCode=a+"",d.type=Nt(e,l);var p=k4(e,r,c,o);d.data=Zd(e,o)||p.data,d.target=Nt(e,p.target),u&&(d.target="".concat(d.target," | ").concat(u)),d[eo]=Nt(e,p[eo]),d[Nr]=yo(e,f),d[to]=Co(e,m)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",t.dataType="RemoteDependencyData",t})()});var rm,rK=ne(()=>{Fs();wo();Os();rm=(function(){function t(e,n,r,o,i){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var s=this;s.ver=2,n=n||Qr,s[Mh]=Fy(e,n),s[Nr]=yo(e,o),s[to]=Co(e,i),r&&(s[zd]=r)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Message",t.dataType="MessageData",t})()});var om,oK=ne(()=>{Fs();wo();Os();om=(function(){function t(e,n,r,o,i,s,a){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var c=this;c.ver=2,c.url=Zd(e,r),c[eo]=Nt(e,n)||Qr,c[Nr]=yo(e,i),c[to]=Co(e,s),a&&(c.domProcessing=a.domProcessing,c[Xd]=a[Xd],c.networkConnect=a.networkConnect,c.perfTotal=a.perfTotal,c.receivedResponse=a.receivedResponse,c.sentRequest=a.sentRequest)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",t.dataType="PageviewPerformanceData",t})()});var Gc,iK=ne(()=>{Gc=(function(){function t(e,n){this.aiDataContract={baseType:1,baseData:1},this.baseType=e,this.baseData=n}return t})()});var oF,sK=ne(()=>{Ot();oF=fn({Verbose:0,Information:1,Warning:2,Error:3,Critical:4})});function Au(t){var e="ai."+t+".";return function(n){return e+n}}var My,Zn,CI,jh,iF,Lu,im,$y,Hy,sF=ne(()=>{Bo();Ot();My=Au("application"),Zn=Au("device"),CI=Au("location"),jh=Au("operation"),iF=Au("session"),Lu=Au("user"),im=Au("cloud"),$y=Au("internal"),Hy=(function(t){Ho(e,t);function e(){return t.call(this)||this}return e})(sL({applicationVersion:My("ver"),applicationBuild:My("build"),applicationTypeId:My("typeId"),applicationId:My("applicationId"),applicationLayer:My("layer"),deviceId:Zn("id"),deviceIp:Zn("ip"),deviceLanguage:Zn("language"),deviceLocale:Zn("locale"),deviceModel:Zn("model"),deviceFriendlyName:Zn("friendlyName"),deviceNetwork:Zn("network"),deviceNetworkName:Zn("networkName"),deviceOEMName:Zn("oemName"),deviceOS:Zn("os"),deviceOSVersion:Zn("osVersion"),deviceRoleInstance:Zn("roleInstance"),deviceRoleName:Zn("roleName"),deviceScreenResolution:Zn("screenResolution"),deviceType:Zn("type"),deviceMachineName:Zn("machineName"),deviceVMName:Zn("vmName"),deviceBrowser:Zn("browser"),deviceBrowserVersion:Zn("browserVersion"),locationIp:CI("ip"),locationCountry:CI("country"),locationProvince:CI("province"),locationCity:CI("city"),operationId:jh("id"),operationName:jh("name"),operationParentId:jh("parentId"),operationRootId:jh("rootId"),operationSyntheticSource:jh("syntheticSource"),operationCorrelationVector:jh("correlationVector"),sessionId:iF("id"),sessionIsFirst:iF("isFirst"),sessionIsNew:iF("isNew"),userAccountAcquisitionDate:Lu("accountAcquisitionDate"),userAccountId:Lu("accountId"),userAgent:Lu("userAgent"),userId:Lu("id"),userStoreRegion:Lu("storeRegion"),userAuthUserId:Lu("authUserId"),userAnonymousUserAcquisitionDate:Lu("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:Lu("authUserAcquisitionDate"),cloudName:im("name"),cloudRole:im("role"),cloudRoleVer:im("roleVer"),cloudRoleInstance:im("roleInstance"),cloudEnvironment:im("environment"),cloudLocation:im("location"),cloudDeploymentUnit:im("deploymentUnit"),internalNodeName:$y("nodeName"),internalSdkVersion:$y("sdkVersion"),internalAgentVersion:$y("agentVersion"),internalSnippet:$y("snippet"),internalSdkSrc:$y("sdkSrc")}))});var $n,aK=ne(()=>{sF();$n=new Hy});function cK(t,e){Wc(t,null,null,e)}function aF(t){var e=Fn(),n=Kn(),r=!1,o=[],i=1;n&&!ae(n.onLine)&&!n.onLine&&(i=2);var s=0,a=m(),c=Ci(kr("OfflineListener"),t);try{if(u(On())&&(r=!0),e){var l=e.body||e;l.ononline&&u(l)&&(r=!0)}}catch{r=!1}function u(w){var y=!1;return w&&(y=xa(w,"online",g,c),y&&xa(w,"offline",h,c)),y}function f(){return a}function m(){return!(s===2||i===2)}function d(){var w=m();a!==w&&(a=w,ee(o,function(y){var S={isOnline:a,rState:i,uState:s};try{y(S)}catch{}}))}function p(w){s=w,d()}function g(){i=1,d()}function h(){i=2,d()}function v(){var w=On();if(w&&r){if(cK(w,c),e){var y=e.body||e;Ve(y.ononline)||cK(y,c)}r=!1}}function C(w){return o.push(w),{rm:function(){var y=o.indexOf(w);if(y>-1)return o.splice(y,1)}}}return{isOnline:f,isListening:function(){return r},unload:v,addListener:C,setOnlineState:p}}var lK=ne(()=>{Ot()});var EI,zc=ne(()=>{qA();O4();S4();Fs();U4();M4();X4();eK();tK();nK();rK();oK();iK();sK();sF();Os();aK();F4();lK();EI="AppInsightsChannelPlugin"});var Fu,uK=ne(()=>{Fu="duration"});var Hn,SI,Ko,Na,am,Ye,Ou,Uu,Qi,Mu,Kc,Jc,Xc,es,By,$u,Vh,cm,Wy,Yh,Zc,Hu,qh,Gh,Lr,xI,zh,Kh,Jh,_I,cF,DI,II,lF,uF,Us,fF,dF,jy,Bu,PI,Vy,bI,TI,RI,Xh,fK,Wu=ne(()=>{Hn="tags",SI="deviceType",Ko="data",Na="name",am="traceID",Ye="length",Ou="stringify",Uu="measurements",Qi="dataType",Mu="envelopeType",Kc="toString",Jc="enqueue",Xc="count",es="push",By="emitLineDelimitedJson",$u="clear",Vh="markAsSent",cm="clearSent",Wy="bufferOverride",Yh="BUFFER_KEY",Zc="SENT_BUFFER_KEY",Hu="concat",qh="MAX_BUFFER_SIZE",Gh="triggerSend",Lr="diagLog",xI="initialize",zh="_sender",Kh="endpointUrl",Jh="instrumentationKey",_I="customHeaders",cF="maxBatchSizeInBytes",DI="onunloadDisableBeacon",II="isBeaconApiDisabled",lF="alwaysUseXhrOverride",uF="enableSessionStorageBuffer",Us="_buffer",fF="onunloadDisableFetch",dF="disableSendBeaconSplit",jy="getSenderInst",Bu="_onError",PI="_onPartialSuccess",Vy="_onSuccess",bI="itemsReceived",TI="itemsAccepted",RI="baseType",Xh="sampleRate",fK="getHashCodeScore"});function Dn(t,e,n){return Ki(t,e,n,xs)}function upe(t,e,n){var r=n[Hn]=n[Hn]||{},o=e.ext=e.ext||{},i=e[Hn]=e[Hn]||[],s=o.user;s&&(Dn(r,$n.userAuthUserId,s.authId),Dn(r,$n.userId,s.id||s.localId));var a=o.app;a&&Dn(r,$n.sessionId,a.sesId);var c=o.device;c&&(Dn(r,$n.deviceId,c.id||c.localId),Dn(r,$n[SI],c.deviceClass),Dn(r,$n.deviceIp,c.ip),Dn(r,$n.deviceModel,c.model),Dn(r,$n[SI],c[SI]));var l=e.ext.web;if(l){Dn(r,$n.deviceLanguage,l.browserLang),Dn(r,$n.deviceBrowserVersion,l.browserVer),Dn(r,$n.deviceBrowser,l.browser);var u=n[Ko]=n[Ko]||{},f=u[qt]=u[qt]||{},m=f[vr]=f[vr]||{};Dn(m,"domain",l.domain),Dn(m,"isManual",l.isManual?dK:null),Dn(m,"screenRes",l.screenRes),Dn(m,"userConsent",l.userConsent?dK:null)}var d=o.os;d&&(Dn(r,$n.deviceOS,d[Na]),Dn(r,$n.deviceOSVersion,d.osVer));var p=o.trace;p&&(Dn(r,$n.operationParentId,p.parentID),Dn(r,$n.operationName,Nt(t,p[Na])),Dn(r,$n.operationId,p[am]));for(var g={},h=i[Ye]-1;h>=0;h--){var v=i[h];Ie(v,function(w,y){g[w]=y}),i.splice(h,1)}Ie(i,function(w,y){g[w]=y});var C=Yi(Yi({},r),g);C[$n.internalSdkVersion]||(C[$n.internalSdkVersion]=Nt(t,"javascript:".concat(fpe.Version),64)),n[Hn]=qo(C)}function ju(t,e,n){ae(t)||Ie(t,function(r,o){Ir(o)?n[r]=o:ke(o)?e[r]=o:ya()&&(e[r]=Rr()[Ou](o))})}function lm(t,e){ae(t)||Ie(t,function(n,r){t[n]=r||e})}function um(t,e,n,r){var o=new ZA(t,r,e);Dn(o,"sampleRate",n[Py]),(n[qt]||{}).startTime&&(o.time=Rs(n[qt].startTime)),o.iKey=n.iKey;var i=n.iKey.replace(/-/g,"");return o[Na]=o[Na].replace("{0}",i),upe(t,n,o),n[Hn]=n[Hn]||[],qo(o)}function fm(t,e){ae(e[qt])&&se(t,1,46,"telemetryItem.baseData cannot be null.")}function mK(t,e,n){fm(t,e);var r=e[qt][Uu]||{},o=e[qt][vr]||{};ju(e[Ko],o,r),ae(n)||lm(o,n);var i=e[qt];if(ae(i))return go(t,"Invalid input for dependency data"),null;var s=i[vr]&&i[vr][dI]?i[vr][dI]:"GET",a=new nm(t,i.id,i.target,i[Na],i[Fu],i.success,i.responseCode,s,i.type,i.correlationContext,o,r),c=new Gc(nm[Qi],a);return um(t,nm[Mu],e,c)}function pF(t,e,n){fm(t,e);var r={},o={};e[mF]!==Yc[Qi]&&(r.baseTypeSource=e[mF]),e[mF]===Yc[Qi]?(r=e[qt][vr]||{},o=e[qt][Uu]||{}):e[qt]&&ju(e[qt],r,o),ju(e[Ko],r,o),ae(n)||lm(r,n);var i=e[qt][Na],s=new Yc(t,i,r,o),a=new Gc(Yc[Qi],s);return um(t,Yc[Mu],e,a)}function pK(t,e,n){fm(t,e);var r=e[qt][Uu]||{},o=e[qt][vr]||{};ju(e[Ko],o,r),ae(n)||lm(o,n);var i=e[qt],s=em.CreateFromInterface(t,i,o,r),a=new Gc(em[Qi],s);return um(t,em[Mu],e,a)}function hK(t,e,n){fm(t,e);var r=e[qt],o=r[vr]||{},i=r[Uu]||{};ju(e[Ko],o,i),ae(n)||lm(o,n);var s=new qc(t,r[Na],r.average,r.sampleCount,r.min,r.max,r.stdDev,o,i),a=new Gc(qc[Qi],s);return um(t,qc[Mu],e,a)}function gK(t,e,n){fm(t,e);var r,o=e[qt];!ae(o)&&!ae(o[vr])&&!ae(o[vr][Fu])?(r=o[vr][Fu],delete o[vr][Fu]):!ae(e[Ko])&&!ae(e[Ko][Fu])&&(r=e[Ko][Fu],delete e[Ko][Fu]);var i=e[qt],s;((e.ext||{}).trace||{})[am]&&(s=e.ext.trace[am]);var a=i.id||s,c=i[Na],l=i.uri,u=i[vr]||{},f=i[Uu]||{};if(ae(i.refUri)||(u.refUri=i.refUri),ae(i.pageType)||(u.pageType=i.pageType),ae(i.isLoggedIn)||(u.isLoggedIn=i.isLoggedIn[Kc]()),!ae(i[vr])){var m=i[vr];Ie(m,function(g,h){u[g]=h})}ju(e[Ko],u,f),ae(n)||lm(u,n);var d=new tm(t,c,l,r,u,f,a),p=new Gc(tm[Qi],d);return um(t,tm[Mu],e,p)}function vK(t,e,n){fm(t,e);var r=e[qt],o=r[Na],i=r.uri||r.url,s=r[vr]||{},a=r[Uu]||{};ju(e[Ko],s,a),ae(n)||lm(s,n);var c=new om(t,o,i,void 0,s,a,r),l=new Gc(om[Qi],c);return um(t,om[Mu],e,l)}function wK(t,e,n){fm(t,e);var r=e[qt].message,o=e[qt].severityLevel,i=e[qt][vr]||{},s=e[qt][Uu]||{};ju(e[Ko],i,s),ae(n)||lm(i,n);var a=new rm(t,r,o,i,s),c=new Gc(rm[Qi],a);return um(t,rm[Mu],e,c)}var mF,qt,vr,dK,fpe,yK=ne(()=>{Bo();zc();Ot();uK();Wu();mF="baseType",qt="baseData",vr="properties",dK="true";fpe={Version:"3.3.6"}});var CK,kI,dpe,hF,EK=ne(()=>{Bo();pr();zc();Ot();Wu();CK=(function(){function t(e,n){var r=[],o=!1,i=n.maxRetryCnt;this._get=function(){return r},this._set=function(s){return r=s,r},Je(t,this,function(s){s[Jc]=function(a){if(s[Xc]()>=n.eventsLimitInMem){o||(se(e,2,105,"Maximum in-memory buffer size reached: "+s[Xc](),!0),o=!0);return}a.cnt=a.cnt||0,!(!ae(i)&&a.cnt>i)&&r[es](a)},s[Xc]=function(){return r[Ye]},s.size=function(){for(var a=r[Ye],c=0;c<r[Ye];c++)a+=r[c].item[Ye];return n[By]||(a+=2),a},s[$u]=function(){r=[],o=!1},s.getItems=function(){return r.slice(0)},s.batchPayloads=function(a){if(a&&a[Ye]>0){var c=[];ee(a,function(u){c[es](u.item)});var l=n[By]?c.join(`
`):"["+c.join(",")+"]";return l}return null},s.createNew=function(a,c,l){var u=r.slice(0);a=a||e,c=c||{};var f=l?new hF(a,c):new kI(a,c);return ee(u,function(m){f[Jc](m)}),f}})}return t.__ieDyn=1,t})(),kI=(function(t){Ho(e,t);function e(n,r){var o=t.call(this,n,r)||this;return Je(e,o,function(i,s){i[Vh]=function(a){s[$u]()},i[cm]=function(a){}}),o}return e.__ieDyn=1,e})(CK),dpe=["AI_buffer","AI_sentBuffer"],hF=(function(t){Ho(e,t);function e(r,o){var i=t.call(this,r,o)||this,s=!1,a=o==null?void 0:o.namePrefix,c=o[Wy]||{getItem:KA,setItem:JA},l=c.getItem,u=c.setItem,f=o.maxRetryCnt;return Je(e,i,function(m,d){var p=y(e[Yh]),g=y(e[Zc]),h=_(),v=g[Hu](h),C=m._set(p[Hu](v));C[Ye]>e[qh]&&(C[Ye]=e[qh]),D(e[Zc],[]),D(e[Yh],C),m[Jc]=function(U){if(m[Xc]()>=e[qh]){s||(se(r,2,67,"Maximum buffer size reached: "+m[Xc](),!0),s=!0);return}U.cnt=U.cnt||0,!(!ae(f)&&U.cnt>f)&&(d[Jc](U),D(e[Yh],m._get()))},m[$u]=function(){d[$u](),D(e[Yh],m._get()),D(e[Zc],[]),s=!1},m[Vh]=function(U){D(e[Yh],m._set(w(U,m._get())));var k=y(e[Zc]);k instanceof Array&&U instanceof Array&&(k=k[Hu](U),k[Ye]>e[qh]&&(se(r,1,67,"Sent buffer reached its maximum size: "+k[Ye],!0),k[Ye]=e[qh]),D(e[Zc],k))},m[cm]=function(U){var k=y(e[Zc]);k=w(U,k),D(e[Zc],k)},m.createNew=function(U,k,E){E=!!E;var x=m._get().slice(0),b=y(e[Zc]).slice(0);U=U||r,k=k||{},m[$u]();var I=E?new e(U,k):new kI(U,k);return ee(x,function(T){I[Jc](T)}),E&&I[Vh](b),I};function w(U,k){var E=[],x=[];return ee(U,function(b){x[es](b.item)}),ee(k,function(b){!Re(b)&&wt(x,b.item)===-1&&E[es](b)}),E}function y(U){var k=U;return k=a?a+"_"+k:k,S(k)}function S(U){try{var k=l(r,U);if(k){var E=Rr().parse(k);if(ke(E)&&(E=Rr().parse(E)),E&&we(E))return E}}catch(x){se(r,1,42," storage key: "+U+", "+nn(x),{exception:Ee(x)})}return[]}function D(U,k){var E=U;try{E=a?a+"_"+E:E;var x=JSON[Ou](k);u(r,E,x)}catch(b){u(r,E,JSON[Ou]([])),se(r,2,41," storage key: "+E+", "+nn(b)+". Buffer cleared",{exception:Ee(b)})}}function _(){var U=[];try{return ee(dpe,function(k){var E=A(k);if(U=U[Hu](E),a){var x=a+"_"+k,b=A(x);U=U[Hu](b)}}),U}catch(k){se(r,2,41,"Transfer events from previous buffers: "+nn(k)+". previous Buffer items can not be removed",{exception:Ee(k)})}return[]}function A(U){try{var k=S(U),E=[];return ee(k,function(x){var b={item:x,cnt:0};E[es](b)}),XA(r,U),E}catch{}return[]}}),i}var n;return n=e,e.VERSION="_1",e.BUFFER_KEY="AI_buffer"+n.VERSION,e.SENT_BUFFER_KEY="AI_sentBuffer"+n.VERSION,e.MAX_BUFFER_SIZE=2e3,e})(CK)});var SK,xK=ne(()=>{pr();Ot();Wu();SK=(function(){function t(e){Je(t,this,function(n){n.serialize=function(s){var a=r(s,"root");try{return Rr()[Ou](a)}catch(c){se(e,1,48,c&&Re(c[Kc])?c[Kc]():"Error serializing object",null,!0)}};function r(s,a){var c="__aiCircularRefCheck",l={};if(!s)return se(e,1,48,"cannot serialize object because it is null or undefined",{name:a},!0),l;if(s[c])return se(e,2,50,"Circular reference detected while serializing object",{name:a},!0),l;if(!s.aiDataContract){if(a==="measurements")l=i(s,"number",a);else if(a==="properties")l=i(s,"string",a);else if(a==="tags")l=i(s,"string",a);else if(we(s))l=o(s,a);else{se(e,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:a},!0);try{Rr()[Ou](s),l=s}catch(u){se(e,1,48,u&&Re(u[Kc])?u[Kc]():"Error serializing object",null,!0)}}return l}return s[c]=!0,Ie(s.aiDataContract,function(u,f){var m=Re(f)?f()&1:f&1,d=Re(f)?f()&4:f&4,p=f&2,g=s[u]!==void 0,h=tn(s[u])&&s[u]!==null;if(m&&!g&&!p)se(e,1,24,"Missing required field specification. The field is required but not present on source",{field:u,name:a});else if(!d){var v=void 0;h?p?v=o(s[u],u):v=r(s[u],u):v=s[u],v!==void 0&&(l[u]=v)}}),delete s[c],l}function o(s,a){var c;if(s)if(!we(s))se(e,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:a},!0);else{c=[];for(var l=0;l<s[Ye];l++){var u=s[l],f=r(u,a+"["+l+"]");c[es](f)}}return c}function i(s,a,c){var l;return s&&(l={},Ie(s,function(u,f){if(a==="string")f===void 0?l[u]="undefined":f===null?l[u]="null":f[Kc]?l[u]=f[Kc]():l[u]="invalid field: toString() is not defined.";else if(a==="number")if(f===void 0)l[u]="undefined";else if(f===null)l[u]="null";else{var m=parseFloat(f);l[u]=m}else l[u]="invalid field: "+c+" is of unknown type.",se(e,1,l[u],null,!0)})),l}})}return t.__ieDyn=1,t})()});var mpe,_K,DK=ne(()=>{Wu();mpe=8,_K=(function(){function t(){}return t.prototype.getHashCodeScore=function(e){var n=this.getHashCode(e)/t.INT_MAX_VALUE;return n*100},t.prototype.getHashCode=function(e){if(e==="")return 0;for(;e[Ye]<mpe;)e=e[Hu](e);for(var n=5381,r=0;r<e[Ye];++r)n=(n<<5)+n+e.charCodeAt(r),n=n&n;return Math.abs(n)},t.INT_MAX_VALUE=2147483647,t})()});var IK,PK=ne(()=>{zc();Wu();DK();IK=(function(){function t(){var e=this,n=new _K,r=new Hy;e.getSamplingScore=function(o){var i=0;return o[Hn]&&o[Hn][r.userId]?i=n.getHashCodeScore(o[Hn][r.userId]):o.ext&&o.ext.user&&o.ext.user.id?i=n[fK](o.ext.user.id):o[Hn]&&o[Hn][r.operationId]?i=n.getHashCodeScore(o[Hn][r.operationId]):o.ext&&o.ext.telemetryTrace&&o.ext.telemetryTrace[am]?i=n.getHashCodeScore(o.ext.telemetryTrace[am]):i=Math.random()*100,i}}return t})()});var bK,TK=ne(()=>{zc();Ot();Wu();PK();bK=(function(){function t(e,n){this.INT_MAX_VALUE=2147483647;var r=n||Oc(null);(e>100||e<0)&&(r.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this[Xh]=e,this.samplingScoreGenerator=new IK}return t.prototype.isSampledIn=function(e){var n=this[Xh],r=!1;return n==null||n>=100||e.baseType===qc[Qi]?!0:(r=this.samplingScoreGenerator.getSamplingScore(e)<n,r)},t})()});function kK(t){try{return t.responseText}catch{}return null}function hpe(t){return t&&t.sendPOST}function gpe(t){return!isNaN(t)&&t>0&&t<=100}var Ut,Qc,La,RK,ppe,NK,vpe,Yy,LK=ne(()=>{Bo();pr();zc();Ot();Ne();yK();EK();xK();TK();Wu();La=void 0,RK="",ppe=65e3;NK=Ds((Ut={endpointUrl:yh(xs,Vd+Ra)},Ut[By]=Xi(),Ut.maxBatchInterval=15e3,Ut[cF]=102400,Ut.disableTelemetry=Xi(),Ut[uF]=Xi(!0),Ut.isRetryDisabled=Xi(),Ut[II]=Xi(!0),Ut[dF]=Xi(!0),Ut.disableXhr=Xi(),Ut[fF]=Xi(),Ut[DI]=Xi(),Ut[Jh]=La,Ut.namePrefix=La,Ut.samplingPercentage=yh(gpe,100),Ut[_I]=La,Ut.convertUndefined=La,Ut.eventsLimitInMem=1e4,Ut[Wy]=!1,Ut.httpXHROverride={isVal:hpe,v:La},Ut[lF]=Xi(),Ut.transports=La,Ut.retryCodes=La,Ut.maxRetryCnt={isVal:Ir,v:10},Ut));vpe=(Qc={},Qc[Yc.dataType]=pF,Qc[rm.dataType]=wK,Qc[tm.dataType]=gK,Qc[om.dataType]=vK,Qc[em.dataType]=pK,Qc[qc.dataType]=hK,Qc[nm.dataType]=mK,Qc),Yy=(function(t){Ho(e,t);function e(){var n=t.call(this)||this;n.priority=1001,n.identifier=EI;var r,o,i,s,a,c,l,u,f=0,m,d,p,g,h,v,C,w,y,S,D,_,A,U,k,E,x,b,I,T,R,L,N,B,W,z,V;return Je(e,n,function(q,ce){ye(),q.pause=function(){Q(),s=!0},q.resume=function(){s&&(s=!1,o=null,rt(),$())},q.flush=function(P,F,H){if(P===void 0&&(P=!0),!s){Q();try{return q[Gh](P,null,H||1)}catch(G){se(q[Lr](),1,22,"flush failed, telemetry will not be collected: "+nn(G),{exception:Ee(G)})}}},q.onunloadFlush=function(){if(!s)if(C||T)try{return q[Gh](!0,Wn,2)}catch(P){se(q[Lr](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+nn(P),{exception:Ee(P)})}else q.flush(!1)},q.addHeader=function(P,F){u[P]=F},q[xI]=function(P,F,H,G){q.isInitialized()&&se(q[Lr](),1,28,"Sender is already initialized"),ce[xI](P,F,H,G);var J=q.identifier;c=new SK(F.logger),r=0,o=null,i=0,q[zh]=null,l=0;var te=q[Lr]();p=Ci(kr("Sender"),F.evtNamespace&&F.evtNamespace()),d=aF(p),q._addHook(hr(P,function(ue){var Oe=ue.cfg;Oe.storagePrefix&&zA(Oe.storagePrefix);var Xe=vo(null,Oe,F),Te=Xe.getExtCfg(J,NK),_o=Te[Kh];if(g&&_o===g){var qa=Oe[Kh];qa&&qa!==_o&&(Te[Kh]=qa)}fo(Te[Jh])&&(Te[Jh]=Oe[Jh]),gt(q,"_senderConfig",{g:function(){return Te}}),h!==Te[Kh]&&(g=h=Te[Kh]),F.activeStatus()===mi.PENDING?q.pause():F.activeStatus()===mi.ACTIVE&&q.resume(),S&&S!==Te[_I]&&ee(S,function(yr){delete u[yr.header]}),v=Te[cF],C=(Te[DI]===!1||Te[II]===!1)&&Ji(),w=Te[DI]===!1&&Ji(),y=Te[II]===!1&&Ji(),T=Te[lF],R=!!Te.disableXhr,V=Te.retryCodes;var Do=Te[Wy],Bs=!!Te[uF]&&(!!Do||vI()),_C=Te.namePrefix,M9=Bs!==E||Bs&&b!==_C||Bs&&x!==Do;if(q[Us]){if(M9)try{q[Us]=q[Us].createNew(te,Te,Bs)}catch(yr){se(q[Lr](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+nn(yr),{exception:Ee(yr)})}rt()}else q[Us]=Bs?new hF(te,Te):new kI(te,Te);b=_C,E=Bs,x=Do,L=!Te[fF]&&Lc(!0),W=!!Te[dF],q._sample=new bK(Te.samplingPercentage,te),_=Te[Jh],!fo(_)&&!qe(_,Oe)&&se(te,1,100,"Invalid Instrumentation key "+_),S=Te[_I],ke(g)&&!hI(g)&&S&&S[Ye]>0?ee(S,function(yr){n.addHeader(yr.header,yr.value)}):S=null,I=Te.enableSendPromise;var jO=mt();z?z.SetConfig(jO):(z=new Ad,z[xI](jO,te));var DC=Te.httpXHROverride,IC=null,Pg=null,$9=kc([3,1,2],Te.transports);IC=z&&z[jy]($9,!1);var $0=z&&z.getFallbackInst();N=function(yr,of){return le($0,yr,of)},B=function(yr,of){return le($0,yr,of,!1)},IC=T?DC:IC||DC||$0,q[zh]=function(yr,of){return le(IC,yr,of)},L&&(m=Di);var H0=kc([3,1],Te.unloadTransports);L||(H0=H0.filter(function(yr){return yr!==2})),Pg=z&&z[jy](H0,!0),Pg=T?DC:Pg||DC,(T||Te.unloadTransports||!m)&&Pg&&(m=function(yr,of){return le(Pg,yr,of)}),m||(m=N),D=Te.disableTelemetry,A=Te.convertUndefined||La,U=Te.isRetryDisabled,k=Te.maxBatchInterval}))},q.processTelemetry=function(P,F){F=q._getTelCtx(F);var H=F[Lr]();try{var G=pt(P,H);if(!G)return;var J=nt(P,H);if(!J)return;var te=c.serialize(J),ue=q[Us];rt(te);var Oe={item:te,cnt:0};ue[Jc](Oe),$()}catch(Xe){se(H,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+nn(Xe),{exception:Ee(Xe)})}q.processNext(P,F)},q.isCompletelyIdle=function(){return!s&&f===0&&q._buffer[Xc]()===0},q.getOfflineListener=function(){return d},q._xhrReadyStateChange=function(P,F,H){if(!Ur(F))return Ht(P,F,H)},q[Gh]=function(P,F,H){P===void 0&&(P=!0);var G;if(!s)try{var J=q[Us];if(D)J[$u]();else{if(J[Xc]()>0){var te=J.getItems();be(H||0,P),F?G=F.call(q,te,P):G=q[zh](te,P)}i=+new Date}Q()}catch(Oe){var ue=Hw();(!ue||ue>9)&&se(q[Lr](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+nn(Oe),{exception:Ee(Oe)})}return G},q.getOfflineSupport=function(){return{getUrl:function(){return g},createPayload:j,serialize:Dt,batch:yt,shouldProcess:function(P){return!!pt(P)}}},q._doTeardown=function(P,F){q.onunloadFlush(),Fc(d,!1),ye()},q[Bu]=function(P,F,H){if(!Ur(P))return xo(P,F,H)},q[PI]=function(P,F){if(!Ur(P))return Pn(P,F)},q[Vy]=function(P,F){if(!Ur(P))return vn(P,F)},q._xdrOnLoad=function(P,F){if(!Ur(F))return Be(P,F)};function Be(P,F){var H=kK(P);if(P&&(H+""=="200"||H===""))r=0,q[Vy](F,0);else{var G=Ld(H);G&&G[bI]&&G[bI]>G[TI]&&!U?q[PI](F,G):q[Bu](F,_d(P))}}function mt(){try{var P={xdrOnComplete:function(H,G,J){var te=Xt(J);if(te)return Be(H,te)},fetchOnComplete:function(H,G,J,te){var ue=Xt(te);if(ue)return ht(H.status,ue,H.url,ue[Ye],H.statusText,J||"")},xhrOnComplete:function(H,G,J){var te=Xt(J);if(te)return Ht(H,te,te[Ye])},beaconOnRetry:function(H,G,J){return Or(H,G,J)}},F={enableSendPromise:I,isOneDs:!1,disableCredentials:!1,disableXhr:R,disableBeacon:!y,disableBeaconSync:!w,senderOnCompleteCallBack:P};return F}catch{}return null}function Ht(P,F,H){P.readyState===4&&ht(P.status,F,P.responseURL,H,Rc(P),kK(P)||P.response)}function xo(P,F,H){se(q[Lr](),2,26,"Failed to send telemetry.",{message:F}),q._buffer&&q._buffer[cm](P)}function Pn(P,F){for(var H=[],G=[],J=F.errors.reverse(),te=0,ue=J;te<ue.length;te++){var Oe=ue[te],Xe=P.splice(Oe.index,1)[0];ie(Oe.statusCode)?G[es](Xe):H[es](Xe)}P[Ye]>0&&q[Vy](P,F[TI]),H[Ye]>0&&q[Bu](H,Rc(null,["partial success",F[TI],"of",F.itemsReceived].join(" "))),G[Ye]>0&&(tr(G),se(q[Lr](),2,40,"Partial success. Delivered: "+P[Ye]+", Failed: "+H[Ye]+". Will retry to send "+G[Ye]+" our of "+F[bI]+" items"))}function vn(P,F){q._buffer&&q._buffer[cm](P)}function Xt(P){try{if(P){var F=P,H=F.oriPayload;return H&&H[Ye]?H:null}}catch{}return null}function pt(P,F){if(D)return!1;if(!P)return F&&se(F,1,7,"Cannot send empty telemetry"),!1;if(P.baseData&&!P[RI])return F&&se(F,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(P[RI]||(P[RI]="EventData"),!q[zh])return F&&se(F,1,28,"Sender was not initialized"),!1;if(oe(P))P[Py]=q._sample[Xh];else return F&&se(F,2,33,"Telemetry item was sampled out and not sent",{SampleRate:q._sample[Xh]}),!1;return!0}function nt(P,F){var H=P.iKey||_,G=e.constructEnvelope(P,H,F,A);if(!G){se(F,1,47,"Unable to create an AppInsights envelope");return}var J=!1;if(P[Hn]&&P[Hn][by]&&(ee(P[Hn][by],function(te){try{te&&te(G)===!1&&(J=!0,go(F,"Telemetry processor check returns false"))}catch(ue){se(F,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+nn(ue),{exception:Ee(ue)},!0)}}),delete P[Hn][by]),!J)return G}function Dt(P){var F=RK,H=q[Lr]();try{var G=pt(P,H),J=null;G&&(J=nt(P,H)),J&&(F=c.serialize(J))}catch{}return F}function yt(P){var F=RK;return P&&P[Ye]&&(F="["+P.join(",")+"]"),F}function j(P){var F=Qe();return{urlString:g,data:P,headers:F}}function oe(P){return q._sample.isSampledIn(P)}function xe(P,F,H,G){F===200&&P?q._onSuccess(P,P[Ye]):G&&q[Bu](P,G)}function le(P,F,H,G){G===void 0&&(G=!0);var J=function(Oe,Xe,Te){return xe(F,Oe,Xe,Te)},te=De(F),ue=P&&P.sendPOST;return ue&&te?(G&&q._buffer[Vh](F),ue(te,J,!H)):null}function De(P){if(we(P)&&P[Ye]>0){var F=q[Us].batchPayloads(P),H=Qe(),G={data:F,urlString:g,headers:H,disableXhrSync:R,disableFetchKeepAlive:!L,oriPayload:P};return G}return null}function Qe(){try{var P=u||{};return hI(g)&&(P[mI[6]]=mI[7]),P}catch{}return null}function rt(P){var F=P?P[Ye]:0;return q[Us].size()+F>v?((!d||d.isOnline())&&q[Gh](!0,null,10),!0):!1}function ht(P,F,H,G,J,te){var ue=null;if(q._appId||(ue=Ld(te),ue&&ue.appId&&(q._appId=ue.appId)),(P<200||P>=300)&&P!==0){if((P===301||P===307||P===308)&&!wn(H)){q[Bu](F,J);return}if(d&&!d.isOnline()){if(!U){var Oe=10;tr(F,Oe),se(q[Lr](),2,40,". Offline - Response Code: ".concat(P,". Offline status: ").concat(!d.isOnline(),". Will retry to send ").concat(F.length," items."))}return}!U&&ie(P)?(tr(F),se(q[Lr](),2,40,". Response code "+P+". Will retry to send "+F[Ye]+" items.")):q[Bu](F,J)}else wn(H),P===206?(ue||(ue=Ld(te)),ue&&!U?q[PI](F,ue):q[Bu](F,J)):(r=0,q[Vy](F,G))}function wn(P){return l>=10?!1:!ae(P)&&P!==""&&P!==g?(g=P,++l,!0):!1}function Wn(P,F){if(m)m(P,!1);else{var H=z&&z[jy]([3],!0);return le(H,P,F)}}function Or(P,F,H){var G=P,J=G&&G.oriPayload;if(W)B&&B(J,!0),se(q[Lr](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var te=[],ue=0;ue<J[Ye];ue++){var Oe=J[ue],Xe=[Oe],Te=De(Xe);H(Te,F)?q._onSuccess(Xe,Xe[Ye]):te[es](Oe)}te[Ye]>0&&(B&&B(te,!0),se(q[Lr](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}function Ur(P){try{if(P&&P[Ye])return ke(P[0])}catch{}return null}function Di(P,F){var H=null;if(we(P)){for(var G=P[Ye],J=0;J<P[Ye];J++)G+=P[J].item[Ye];var te=z.getSyncFetchPayload();te+G<=ppe?H=2:Ji()?H=3:(H=1,se(q[Lr](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var ue=z&&z[jy]([H],!0);return le(ue,P,F)}return null}function tr(P,F){if(F===void 0&&(F=1),!(!P||P[Ye]===0)){var H=q[Us];H[cm](P),r++;for(var G=0,J=P;G<J.length;G++){var te=J[G];te.cnt=te.cnt||0,te.cnt++,H[Jc](te)}Ya(F),$()}}function Ya(P){var F=10,H;if(r<=1)H=F;else{var G=(Math.pow(2,r)-1)/2,J=ji(Math.random()*G*F)+1;J=P*J,H=la(su(J,3600),F)}var te=xn()+H*1e3;o=te}function $(){if(!a&&!s){var P=o?la(0,o-xn()):0,F=la(k,P);a=di(function(){a=null,q[Gh](!0,null,1)},F)}}function Q(){a&&a.cancel(),a=null,o=null}function ie(P){return ae(V)?P===401||P===408||P===429||P===500||P===502||P===503||P===504:V[Ye]&&V.indexOf(P)>-1}function ve(){var P="getNotifyMgr";return q.core[P]?q.core[P]():q.core._notificationManager}function be(P,F){var H=ve();if(H&&H.eventsSendRequest)try{H.eventsSendRequest(P,F)}catch(G){se(q[Lr](),1,74,"send request notification failed: "+nn(G),{exception:Ee(G)})}}function qe(P,F){var H=F.disableInstrumentationKeyValidation,G=ae(H)?!1:H;if(G)return!0;var J="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",te=new RegExp(J);return te.test(P)}function ye(){q[zh]=null,q[Us]=null,q._appId=null,q._sample=null,u={},d=null,r=0,o=null,i=null,s=!1,a=null,c=null,l=0,f=0,m=null,p=null,g=null,h=null,v=0,C=!1,S=null,D=!1,_=null,A=La,U=!1,E=null,b=La,R=!1,L=!1,W=!1,N=null,B=null,z=null,gt(q,"_senderConfig",{g:function(){return z_({},NK)}})}}),n}return e.constructEnvelope=function(n,r,o,i){var s;r!==n.iKey&&!ae(r)?s=Yi(Yi({},n),{iKey:r}):s=n;var a=vpe[s.baseType]||pF;return a(o,s,i)},e})(Hc)});var gF=ne(()=>{LK()});var dm,qy,Zh,Qh,AK=ne(()=>{dm="instrumentationKey",qy="connectionString",Zh="endpointUrl",Qh="userOverrideEndpointUrl"});var FK={};bC(FK,{AppInsightsCore:()=>Bc,ApplicationInsights:()=>Cpe,Sender:()=>Yy,SeverityLevel:()=>oF,arrForEach:()=>ee,isNullOrUndefined:()=>ae,proxyFunctions:()=>yi,throwError:()=>An});function ype(t){return t&&t>0}var eg,vF,wpe,Cpe,OK=ne(()=>{pr();gF();zc();Ot();yd();Ne();AK();Ot();zc();gF();vF=void 0,wpe=(eg={diagnosticLogInterval:yh(ype,1e4)},eg[qy]=vF,eg.endpointUrl=vF,eg[dm]=vF,eg.extensionConfig={},eg);Cpe=(function(){function t(e){var n=new Bc,r;(ae(e)||ae(e[dm])&&ae(e[qy]))&&An("Invalid input configuration"),Je(t,this,function(i){gt(i,"config",{g:function(){return r}}),s(),i.initialize=s,i.track=o,yi(i,n,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function s(){var a=Vt(e||{},wpe);r=a.cfg,n.addUnloadHook(hr(a,function(){var c=r[qy];if(fo(c)){var l=Aw(function(d,p){vi(c,function(g){var h=g.value,v=r[dm];if(!g.rejected&&h){r[qy]=h;var C=Oy(h);v=C.instrumentationkey||v}d(v)})}),u=Aw(function(d,p){vi(c,function(g){var h=g.value,v=r[Zh];if(!g.rejected&&h){var C=Oy(h),w=C.ingestionendpoint;v=w?w+Ra:v}d(v)})});r[dm]=l,r[Zh]=r[Qh]||u}if(ke(c)){var f=Oy(c),m=f.ingestionendpoint;r[Zh]=r[Qh]?r[Qh]:m+Ra,r[dm]=f.instrumentationkey||r[dm]}r[Zh]=r[Qh]?r[Qh]:r[Zh]})),n.initialize(r,[new Yy])}});function o(i){i&&(i.baseData=i.baseData||{},i.baseType=i.baseType||"EventData"),n.track(i)}}return t.__ieDyn=1,t})()});var yF=M(Vu=>{"use strict";Object.defineProperty(Vu,"__esModule",{value:!0});Vu.TargetPopulation=Vu.Filters=Vu.VSCodeFilterProvider=void 0;var AI=require("vscode"),wF=class t{constructor(e,n,r){this.extensionName=e,this.extensionVersion=n,this.targetPopulation=r}static trimVersionSuffix(e){let n=/\-[a-zA-Z0-9]+$/;return e.split(n)[0]}getFilterValue(e){switch(e){case Aa.ApplicationVersion:return t.trimVersionSuffix(AI.version);case Aa.Build:return AI.env.appName;case Aa.ClientId:return AI.env.machineId;case Aa.ExtensionName:return this.extensionName;case Aa.ExtensionVersion:return t.trimVersionSuffix(this.extensionVersion);case Aa.Language:return AI.env.language;case Aa.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let e=new Map,n=Object.values(Aa);for(let r of n)e.set(r,this.getFilterValue(r));return e}};Vu.VSCodeFilterProvider=wF;var Aa;(function(t){t.Market="X-MSEdge-Market",t.CorpNet="X-FD-Corpnet",t.ApplicationVersion="X-VSCode-AppVersion",t.Build="X-VSCode-Build",t.ClientId="X-MSEdge-ClientId",t.ExtensionName="X-VSCode-ExtensionName",t.ExtensionVersion="X-VSCode-ExtensionVersion",t.Language="X-VSCode-Language",t.TargetPopulation="X-VSCode-TargetPopulation"})(Aa||(Vu.Filters=Aa={}));var HK;(function(t){t.Team="team",t.Internal="internal",t.Insiders="insider",t.Public="public"})(HK||(Vu.TargetPopulation=HK={}))});var BK=M(FI=>{"use strict";Object.defineProperty(FI,"__esModule",{value:!0});FI.BaseFeatureProvider=void 0;var CF=class{constructor(e){this.telemetry=e,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let e=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,e}};FI.BaseFeatureProvider=CF});var WK=M(OI=>{"use strict";Object.defineProperty(OI,"__esModule",{value:!0});OI.FilteredFeatureProvider=void 0;var Epe=BK(),EF=class extends Epe.BaseFeatureProvider{constructor(e,n){super(e),this.telemetry=e,this.filterProviders=n,this.cachedTelemetryEvents=[]}getFilters(){let e=new Map;for(let n of this.filterProviders){let r=n.getFilters();for(let o of r.keys()){let i=r.get(o);e.set(o,i)}}return e}PostEventToTelemetry(e){if(this.cachedTelemetryEvents.includes(e))return;let n=JSON.stringify(e);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",n]])),this.cachedTelemetryEvents.push(e)}};OI.FilteredFeatureProvider=EF});var jK=M(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});Yu.TasApiFeatureProvider=Yu.TASAPI_FETCHERROR_EVENTNAME=void 0;var Spe=WK();Yu.TASAPI_FETCHERROR_EVENTNAME="call-tas-error";var SF="ErrorType",xF=class extends Spe.FilteredFeatureProvider{constructor(e,n,r){super(n,r),this.httpClient=e,this.telemetry=n,this.filterProviders=r}async fetch(){let e=this.getFilters(),n={};for(let a of e.keys()){let c=e.get(a);n[a]=c}let r;try{r=await this.httpClient.get({headers:n})}catch(a){let c=a,l=new Map;c.responseReceived&&!c.responseOk?l.set(SF,"ServerError"):c.responseReceived===!1?l.set(SF,"NoResponse"):l.set(SF,"GenericError"),this.telemetry.postEvent(Yu.TASAPI_FETCHERROR_EVENTNAME,l)}if(!r)throw Error(Yu.TASAPI_FETCHERROR_EVENTNAME);e.keys.length>0&&this.PostEventToTelemetry(n);let o=r.data,i=o.Configs,s=[];for(let a of i)if(a.Parameters)for(let c of Object.keys(a.Parameters)){let l=c+(a.Parameters[c]?"":"cf");s.includes(l)||s.push(l)}return{features:s,assignmentContext:o.AssignmentContext,configs:i}}};Yu.TasApiFeatureProvider=xF});var VK=M(rg=>{"use strict";Object.defineProperty(rg,"__esModule",{value:!0});rg.HttpClient=rg.FetchError=void 0;var ng=class extends Error{constructor(e,n,r){super(e),this.responseReceived=n,this.responseOk=r}};rg.FetchError=ng;var _F=class{constructor(e){this.endpoint=e}async get(e){let n=await fetch(this.endpoint,{method:"GET",headers:e==null?void 0:e.headers});if(!n)throw new ng("No response received",!1);if(!n.ok)throw new ng("Response not ok",!0,!1);let r=await n.json();if(!r)throw new ng("No data received",!1);return{data:r}}};rg.HttpClient=_F});var YK=M(UI=>{"use strict";Object.defineProperty(UI,"__esModule",{value:!0});UI.MemoryKeyValueStorage=void 0;var DF=class{constructor(){this.storage=new Map}async getValue(e,n){return this.storage.has(e)?await Promise.resolve(this.storage.get(e)):await Promise.resolve(n||void 0)}setValue(e,n){this.storage.set(e,n)}};UI.MemoryKeyValueStorage=DF});var qK=M(MI=>{"use strict";Object.defineProperty(MI,"__esModule",{value:!0});MI.ExperimentationServiceBase=void 0;var xpe=YK(),IF=class{get features(){return this._features}set features(e){this._features=e,this.telemetry&&this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext)}constructor(e,n,r,o,i){this.telemetry=e,this.assignmentContextTelemetryPropertyName=n,this.telemetryEventName=r,this.storageKey=o,this.storage=i,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(i=new xpe.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise((s,a)=>{this.resolveInitialFetchPromise=s})}async getFeaturesAsync(e=!1){if(this.fetchPromise!=null){try{await this.fetchPromise}catch{}return this.features}if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});try{this.fetchPromise=Promise.all(this.featureProviders.map(async r=>await r.getFeatures()));let n=await this.fetchPromise;this.updateFeatures(n,e)}catch{}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(e,n=!1){let r={features:[],assignmentContext:"",configs:[]};for(let o of e){for(let i of o.features)r.features.includes(i)||r.features.push(i);for(let i of o.configs){let s=r.configs.find(a=>a.Id===i.Id);s?s.Parameters=Object.assign(Object.assign({},s.Parameters),i.Parameters):r.configs.push(i)}r.assignmentContext+=o.assignmentContext}(n||!this.featuresConsumed)&&(this.features=r),this.storage&&this.storage.setValue(this.storageKey,r)}async loadCachedFeatureData(){let e;this.storage&&(e=await this.storage.getValue(this.storageKey),e!==void 0&&e.configs===void 0&&(e.configs=[])),this.features.features.length===0&&(this.features=e||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(e){return this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isCachedFlightEnabled(e){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isFlightEnabledAsync(e){let n=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(e),n.features.includes(e)}getTreatmentVariable(e,n){this.featuresConsumed=!0,this.PostEventToTelemetry(`${e}.${n}`);let r=this.features.configs.find(o=>o.Id===e);return r==null?void 0:r.Parameters[n]}async getTreatmentVariableAsync(e,n,r){if(r){let o=this.featuresConsumed,i=this.getTreatmentVariable(e,n);if(i===void 0)this.featuresConsumed=o;else return i}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(e,n)}PostEventToTelemetry(e){this.cachedTelemetryEvents.includes(e)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",e]])),this.cachedTelemetryEvents.push(e))}invokeInit(){this.init()}addFeatureProvider(...e){if(!(e==null||this.featureProviders==null))for(let n of e)this.featureProviders.push(n)}};MI.ExperimentationServiceBase=IF});var GK=M($I=>{"use strict";Object.defineProperty($I,"__esModule",{value:!0});$I.PollingService=void 0;var PF=class{constructor(e){this.fetchInterval=e}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(e){this.onTick=e}StartPolling(e=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(e&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}};$I.PollingService=PF});var zK=M(HI=>{"use strict";Object.defineProperty(HI,"__esModule",{value:!0});HI.ExperimentationServiceAutoPolling=void 0;var _pe=qK(),Dpe=GK(),bF=class extends _pe.ExperimentationServiceBase{constructor(e,n,r,o,i,s,a){if(super(e,o,i,s,a),this.telemetry=e,this.filterProviders=n,this.refreshRateMs=r,this.assignmentContextTelemetryPropertyName=o,this.telemetryEventName=i,this.storageKey=s,this.storage=a,r<1e3&&r!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");r>0&&(this.pollingService=new Dpe.PollingService(r),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(e=!1){if(this.pollingService){this.pollingService.StopPolling();let n=await super.getFeaturesAsync(e);return this.pollingService.StartPolling(),n}else return await super.getFeaturesAsync(e)}};HI.ExperimentationServiceAutoPolling=bF});var KK=M(WI=>{"use strict";Object.defineProperty(WI,"__esModule",{value:!0});WI.ExperimentationService=void 0;var Ipe=jK(),Ppe=VK(),bpe=zK(),BI=class extends bpe.ExperimentationServiceAutoPolling{constructor(e){super(e.telemetry,e.filterProviders||[],e.refetchInterval!=null?e.refetchInterval:0,e.assignmentContextTelemetryPropertyName,e.telemetryEventName,e.storageKey,e.keyValueStorage),this.options=e,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new Ipe.TasApiFeatureProvider(new Ppe.HttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}};WI.ExperimentationService=BI;BI.REFRESH_RATE_IN_MINUTES=30});var JK=M(jI=>{"use strict";Object.defineProperty(jI,"__esModule",{value:!0});jI.ExperimentationService=void 0;var Tpe=KK();Object.defineProperty(jI,"ExperimentationService",{enumerable:!0,get:function(){return Tpe.ExperimentationService}})});var XK=M(VI=>{"use strict";Object.defineProperty(VI,"__esModule",{value:!0});VI.MementoKeyValueStorage=void 0;var TF=class{constructor(e){this.mementoGlobalStorage=e}async getValue(e,n){return await this.mementoGlobalStorage.get(e)||n}setValue(e,n){this.mementoGlobalStorage.update(e,n)}};VI.MementoKeyValueStorage=TF});var ZK=M(kF=>{"use strict";Object.defineProperty(kF,"__esModule",{value:!0});var RF=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,n){}getTreatmentVariableAsync(e,n){return Promise.resolve(void 0)}};kF.default=RF});var e5=M(og=>{"use strict";Object.defineProperty(og,"__esModule",{value:!0});og.getExperimentationServiceAsync=og.getExperimentationService=void 0;var Rpe=yF(),kpe=JK(),NF=require("vscode"),Npe=XK(),Lpe=ZK(),Ape="https://default.exp-tas.com/vscode/ab",Fpe="query-expfeature",Ope="abexp.assignmentcontext",Upe="VSCode.ABExp.FeatureData",Mpe=1e3*60*30;function QK(t,e,n,r,o,...i){if(!o)throw new Error("Memento storage was not provided.");let s=NF.workspace.getConfiguration("telemetry");if(!(NF.env.isTelemetryEnabled===void 0?s.get("enableTelemetry",!0):NF.env.isTelemetryEnabled))return new Lpe.default;let l=[new Rpe.VSCodeFilterProvider(t,e,n),...i],u=new Npe.MementoKeyValueStorage(o);return new kpe.ExperimentationService({filterProviders:l,telemetry:r,storageKey:Upe,keyValueStorage:u,featuresTelemetryPropertyName:"",assignmentContextTelemetryPropertyName:Ope,telemetryEventName:Fpe,endpoint:Ape,refetchInterval:Mpe})}og.getExperimentationService=QK;async function $pe(t,e,n,r,o,...i){let s=QK(t,e,n,r,o,...i);return await s.initializePromise,s}og.getExperimentationServiceAsync=$pe});var n5=M(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});qu.TargetPopulation=qu.getExperimentationServiceAsync=qu.getExperimentationService=void 0;var t5=e5();Object.defineProperty(qu,"getExperimentationService",{enumerable:!0,get:function(){return t5.getExperimentationService}});Object.defineProperty(qu,"getExperimentationServiceAsync",{enumerable:!0,get:function(){return t5.getExperimentationServiceAsync}});var Hpe=yF();Object.defineProperty(qu,"TargetPopulation",{enumerable:!0,get:function(){return Hpe.TargetPopulation}})});var _9=M((xVe,zge)=>{zge.exports={name:"remote-containers",displayName:"%displayName%",description:"%description%",version:"0.439.0",publisher:"ms-vscode-remote",icon:"resources/dev-containers.png",repository:{type:"git",url:"https://github.com/Microsoft/vscode-remote-release.git"},bugs:{url:"https://github.com/Microsoft/vscode-remote-release/issues"},license:"SEE LICENSE IN LICENSE.txt",engines:{vscode:"^1.99.0"},extensionKind:["ui"],capabilities:{untrustedWorkspaces:{supported:"limited",description:"%capabilities.untrustedWorkspaces.description%"},virtualWorkspaces:!0},categories:["Other"],keywords:["remote","docker","containers","remote development","dev container","devcontainer","development container","continueOn"],aiKey:"0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255",activationEvents:["onStartupFinished","workspaceContains:.devcontainer/devcontainer.json","workspaceContains:.devcontainer.json","onResolveRemoteAuthority:dev-container","onResolveRemoteAuthority:attached-container","onResolveRemoteAuthority:k8s-container","onResolveRemoteAuthority:apple-container","onDebugResolve:extensionHost"],main:"./dist/extension/extension",l10n:"./l10n",enabledApiProposals:["resolvers","tunnels","workspaceTrust","terminalDimensions","contribEditSessions","contribViewsRemote","contribRemoteHelp"],contributes:{continueEditSession:[{command:"remote-containers.openRepositoryFromRemoteHubWithEditSession",group:"0_local@2",when:"!isWeb && remoteHub:hasVirtualFolders",qualifiedName:"%continueEditSession.containerVolume%",remoteGroup:"remote_30_dev-container_2_actions@8"},{command:"remote-containers.openRepositoryFromGitWithEditSession",group:"0_local@2",when:"git.state == initialized && gitOpenRepositoryCount != 0 && remoteName =~ /(codespaces*.*|tunnel)/ && false",qualifiedName:"%continueEditSession.containerVolume%",remoteGroup:"remote_30_dev-container_2_actions@8"}],languages:[{id:"jsonc",filenames:["devcontainer-feature.json",".devcontainer-internal.json"]}],jsonValidation:[{fileMatch:"devcontainer-feature.json",url:"https://raw.githubusercontent.com/devcontainers/spec/main/schemas/devContainerFeature.schema.json"}],configuration:{title:"%configuration.title%",properties:{"remote.containers.defaultExtensions":{scope:"application",deprecationMessage:"%configuration.defaultExtensions.deprecationMessage%",markdownDeprecationMessage:"%configuration.defaultExtensions.markdownDeprecationMessage%"},"dev.containers.defaultExtensions":{scope:"application",type:"array",description:"%configuration.defaultExtensions.description%",default:[],items:{type:"string",pattern:"([a-z0-9A-Z][a-z0-9\\-A-Z]*)\\.([a-z0-9A-Z][a-z0-9\\-A-Z]*)",errorMessage:"%configuration.defaultExtensions.errorMessage%"}},"dev.containers.defaultFeatures":{scope:"application",type:"object",description:"%configuration.defaultFeatures%",default:{}},"remote.containers.workspaceMountConsistency":{scope:"application",deprecationMessage:"%configuration.workspaceMountConsistency.deprecationMessage%",markdownDeprecationMessage:"%configuration.workspaceMountConsistency.markdownDeprecationMessage%"},"dev.containers.workspaceMountConsistency":{scope:"application",type:"string",enum:["consistent","cached","delegated"],enumDescriptions:["%configuration.workspaceMountConsistency.consistent%","%configuration.workspaceMountConsistency.cached%","%configuration.workspaceMountConsistency.delegated%"],description:"%configuration.workspaceMountConsistency.description%",default:"cached"},"dev.containers.gpuAvailability":{scope:"machine",type:"string",enum:["all","detect","none"],enumDescriptions:["%configuration.gpuAvailability.all%","%configuration.gpuAvailability.detect%","%configuration.gpuAvailability.none%"],description:"%configuration.gpuAvailability.description%",default:"detect"},"remote.containers.cacheVolume":{scope:"application",deprecationMessage:"%configuration.cacheVolume.deprecationMessage%",markdownDeprecationMessage:"%configuration.cacheVolume.markdownDeprecationMessage%"},"dev.containers.cacheVolume":{scope:"application",type:"boolean",description:"%configuration.cacheVolume.description%",default:!0},"remote.containers.copyGitConfig":{scope:"machine",deprecationMessage:"%configuration.copyGitConfig.deprecationMessage%",markdownDeprecationMessage:"%configuration.copyGitConfig.markdownDeprecationMessage%"},"dev.containers.copyGitConfig":{scope:"machine",type:"boolean",markdownDescription:"%configuration.copyGitConfig.markdownDescription%",default:!0},"remote.containers.gitCredentialHelperConfigLocation":{scope:"machine",deprecationMessage:"%configuration.gitCredentialHelperConfigLocation.deprecationMessage%",markdownDeprecationMessage:"%configuration.gitCredentialHelperConfigLocation.markdownDeprecationMessage%"},"dev.containers.gitCredentialHelperConfigLocation":{scope:"machine",type:"string",enum:["system","global","none"],enumDescriptions:["%configuration.gitCredentialHelperConfigLocation.system%","%configuration.gitCredentialHelperConfigLocation.global%","%configuration.gitCredentialHelperConfigLocation.none%"],description:"%configuration.gitCredentialHelperConfigLocation.description%",default:"global"},"dev.containers.dockerCredentialHelper":{scope:"machine",type:"boolean",markdownDescription:"%configuration.dockerCredentialHelper.markdownDescription%",default:!0},"dev.containers.githubCLILoginWithToken":{scope:"machine",type:"boolean",markdownDescription:"%configuration.githubCLILoginWithToken.markdownDescription%",default:!1},"dev.containers.mountWaylandSocket":{scope:"application",ignoreSync:!0,type:"boolean",markdownDescription:"%configuration.mountWaylandSocket.markdownDescription%",default:!0},"remote.containers.logLevel":{scope:"application",deprecationMessage:"%configuration.logLevel.deprecationMessage%",markdownDeprecationMessage:"%configuration.logLevel.markdownDeprecationMessage%"},"dev.containers.logLevel":{scope:"application",type:"string",description:"%configuration.logLevel.description%",default:"debug",enum:["info","debug","trace"]},"remote.containers.dockerPath":{scope:"application",deprecationMessage:"%configuration.dockerPath.deprecationMessage%",markdownDeprecationMessage:"%configuration.dockerPath.markdownDeprecationMessage%"},"dev.containers.dockerPath":{scope:"application",type:"string",description:"%configuration.dockerPath.description%",default:"docker"},"remote.containers.dockerComposePath":{scope:"application",deprecationMessage:"%configuration.dockerComposePath.deprecationMessage%",markdownDeprecationMessage:"%configuration.dockerComposePath.markdownDeprecationMessage%"},"dev.containers.dockerComposePath":{scope:"application",type:"string",description:"%configuration.dockerComposePath.description%",default:"docker-compose"},"dev.containers.dockerSocketPath":{scope:"application",type:"string",description:"%configuration.dockerSocketPath.description%",default:"/var/run/docker.sock"},"remote.containers.executeInWSL":{scope:"application",deprecationMessage:"%configuration.executeInWSL.deprecationMessage%",markdownDeprecationMessage:"%configuration.executeInWSL.markdownDeprecationMessage%"},"dev.containers.executeInWSL":{scope:"application",type:"boolean",description:"%configuration.executeInWSL.description%",default:!1},"remote.containers.executeInWSLDistro":{scope:"application",deprecationMessage:"%configuration.executeInWSLDistro.deprecationMessage%",markdownDeprecationMessage:"%configuration.executeInWSLDistro.markdownDeprecationMessage%"},"dev.containers.executeInWSLDistro":{scope:"application",type:"string",markdownDescription:"%configuration.executeInWSLDistro.markdownDescription%"},"dev.containers.forwardWSLServices":{scope:"application",type:"boolean",description:"%configuration.forwardWSLServices.description%",default:!0},"dotfiles.repository":{scope:"machine",type:"string",description:"%configuration.dotfiles.repository.description%"},"dotfiles.installCommand":{scope:"machine",type:"string",description:"%configuration.dotfiles.installCommand.description%"},"dotfiles.targetPath":{scope:"machine",type:"string",description:"%configuration.dotfiles.targetPath.description%",default:"~/dotfiles"},"remote.containers.dotfiles.repository":{scope:"machine",deprecationMessage:"%configuration.dotfiles.repository.deprecationMessage%",markdownDeprecationMessage:"%configuration.dotfiles.repository.markdownDeprecationMessage%"},"remote.containers.dotfiles.installCommand":{scope:"machine",deprecationMessage:"%configuration.dotfiles.installCommand.deprecationMessage%",markdownDeprecationMessage:"%configuration.dotfiles.installCommand.markdownDeprecationMessage%"},"remote.containers.dotfiles.targetPath":{scope:"machine",deprecationMessage:"%configuration.dotfiles.targetPath.deprecationMessage%",markdownDeprecationMessage:"%configuration.dotfiles.targetPath.markdownDeprecationMessage%"},"remote.containers.repositoryConfigurationPaths":{scope:"application",deprecationMessage:"%configuration.repositoryConfigurationPaths.deprecationMessage%",markdownDeprecationMessage:"%configuration.repositoryConfigurationPaths.markdownDeprecationMessage%"},"dev.containers.repositoryConfigurationPaths":{scope:"application",type:"array",markdownDescription:"%configuration.repositoryConfigurationPaths.markdownDescription%",default:[],items:{type:"string"}},"dev.containers.experimentalLockfile":{scope:"application",type:"boolean",description:"%configuration.experimentalLockfile.description%",default:!1},"dev.containers.experimentalMountGitWorktreeCommonDir":{scope:"application",type:"boolean",markdownDescription:"%configuration.experimentalMountGitWorktreeCommonDir.markdownDescription%",default:!1,tags:["experimental"]},"dev.containers.optimisticallyLaunchDocker":{scope:"application",type:"boolean",description:"%configuration.optimisticallyLaunchDocker.description%",default:!0},"dev.containers.experimentalAppleContainerSupport":{scope:"application",type:"boolean",markdownDescription:"%configuration.experimentalAppleContainerSupport.markdownDescription%",default:!1,tags:["experimental"]}}},commands:[{command:"remote-containers.reopenInContainer",title:"%command.reopenInContainer%",category:"%command.category%"},{command:"remote-containers.rebuildAndReopenInContainer",title:"%command.rebuildAndReopenInContainer%",category:"%command.category%"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",title:"%command.rebuildNoCacheAndReopenInContainer%",category:"%command.category%"},{command:"remote-containers.reopenLocally",title:"%command.reopenLocally%",category:"%command.category%"},{command:"remote-containers.reopenInWSL",title:"%command.reopenInWSL%",category:"%command.category%"},{command:"remote-containers.reopenInSSH",title:"%command.reopenInSSH%",category:"%command.category%"},{command:"remote-containers.reopenInTunnel",title:"%command.reopenInTunnel%",category:"%command.category%"},{command:"remote-containers.openFolder",title:"%command.openFolder%",category:"%command.category%",icon:{light:"resources/light/reopen-folder.svg",dark:"resources/dark/reopen-folder.svg"}},{command:"remote-containers.openFolderInContainerInCurrentWindow",title:"%command.openFolderInContainerInCurrentWindow%",category:"%command.category%",icon:"$(arrow-right)"},{command:"remote-containers.openFolderInContainerInNewWindow",title:"%command.openFolderInContainerInNewWindow%",category:"%command.category%",icon:"$(empty-window)"},{command:"remote-containers.openInformationAboutMountPerformance",title:"%command.openInformationAboutMountPerformance%",category:"%command.category%",icon:"$(info)"},{command:"remote-containers.openRepositoryInVolume",title:"%command.openRepositoryInVolume%",category:"%command.category%"},{command:"remote-containers.openRepositoryInUniqueVolume",title:"%command.openRepositoryInUniqueVolume%",icon:"$(repo-clone)",category:"%command.category%"},{command:"remote-containers.openRepositoryFromRemoteHubWithEditSession",title:"%command.openRepositoryFromRemoteHubWithEditSession%",icon:"$(repo-clone)",category:"%command.category%"},{command:"remote-containers.openRepositoryFromGitWithEditSession",title:"%command.openRepositoryFromGitWithEditSession%",icon:"$(repo-clone)",category:"%command.category%"},{command:"remote-containers.openPullRequestInVolume",title:"%command.openPullRequestInVolume%",category:"%command.category%"},{command:"remote-containers.inspectVolume",title:"%command.inspectVolume%",category:"%command.category%"},{command:"remote-containers.openWorkspace",title:"%command.openWorkspace%",category:"%command.category%"},{command:"remote-containers.attachToRunningContainer",title:"%command.attachToRunningContainer%",category:"%command.category%"},{command:"remote-containers.attachToRunningContainerFromViewlet",title:"%command.attachToRunningContainerFromViewlet%",category:"%command.category%"},{command:"remote-containers.inspectVolumeFromViewlet",title:"%command.inspectVolumeFromViewlet%",category:"%command.category%"},{command:"remote-containers.cloneInVolumeFromViewlet",title:"%command.cloneInVolumeFromViewlet%",category:"%command.category%"},{command:"remote-containers.cleanUpDevContainers",title:"%command.cleanUpDevContainers%",category:"%command.category%",icon:"$(clear-all)"},{command:"remote-containers.pruneVolumes",title:"%command.pruneVolumes%",category:"%command.category%",icon:"$(clear-all)"},{command:"remote-containers.explorerVolumesRefresh",title:"%command.explorerVolumesRefresh%",category:"%command.category%",icon:"$(refresh)"},{command:"remote-containers.attachToK8sContainer",title:"%command.attachToK8sContainer%",category:"%command.category%"},{command:"remote-containers.attachToK8sContainerFromViewlet",title:"%command.attachToK8sContainerFromViewlet%",category:"%command.category%"},{command:"remote-containers.attachToAppleContainer",title:"%command.attachToAppleContainer%",category:"%command.category%"},{command:"remote-containers.switchContainer",title:"%command.switchContainer%",category:"%command.category%"},{command:"remote-containers.rebuildContainer",title:"%command.rebuildContainer%",category:"%command.category%",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.rebuildContainerNoCache",title:"%command.rebuildContainerNoCache%",category:"%command.category%",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.createDevContainerFile",title:"%command.createDevContainerFile%",category:"%command.category%"},{command:"remote-containers.createDevContainerFileWithCopilot",title:"%command.createDevContainerFileWithCopilot%",category:"%command.category%"},{command:"remote-containers.createDevContainer",title:"%command.createDevContainer%",category:"%command.category%"},{command:"remote-containers.settings",title:"%command.settings%",category:"%command.category%"},{command:"remote-containers.getHelp",title:"%command.getHelp%",category:"%command.category%"},{command:"remote-containers.getStarted",title:"%command.getStarted%",category:"%command.category%"},{command:"remote-containers.trySample",title:"%command.trySample%",category:"%command.category%"},{command:"remote-containers.reportIssue",title:"%command.reportIssue%",category:"%command.category%"},{command:"remote-containers.provideFeedback",title:"%command.provideFeedback%",category:"%command.category%"},{command:"remote-containers.openDevContainerFile",title:"%command.openDevContainerFile%",category:"%command.category%",icon:{light:"resources/light/gear.svg",dark:"resources/dark/gear.svg"}},{command:"remote-containers.openAttachConfigByNameFile",title:"%command.openAttachConfigByNameFile%",category:"%command.category%"},{command:"remote-containers.openAttachDevContainerFile",title:"%command.openAttachDevContainerFile%",category:"%command.category%"},{command:"remote-containers.revealLogTerminal",title:"%command.revealLogTerminal%",category:"%command.category%"},{command:"remote-containers.openLogFile",title:"%command.openLogFile%",category:"%command.developerCategory%"},{command:"remote-containers.openLastLogFile",title:"%command.openLastLogFile%",category:"%command.category%"},{command:"remote-containers.testConnection",title:"%command.testConnection%",category:"%command.developerCategory%"},{command:"remote-containers.attachToContainerInCurrentWindow",title:"%command.attachToContainerInCurrentWindow%",category:"%command.category%",icon:"$(arrow-right)"},{command:"remote-containers.attachToContainerInNewWindow",title:"%command.attachToContainerInNewWindow%",category:"%command.category%",icon:"$(empty-window)"},{command:"remote-containers.stopContainer",title:"%command.stopContainer%",category:"%command.category%"},{command:"remote-containers.startContainer",title:"%command.startContainer%",category:"%command.category%",icon:{light:"resources/light/vm-start.svg",dark:"resources/dark/vm-start.svg"}},{command:"remote-containers.removeContainer",title:"%command.removeContainer%",category:"%command.category%",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.removeRecentFolder",title:"%command.removeRecentFolder%",category:"%command.category%",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.showDetails",title:"%command.showDetails%",category:"%command.category%"},{command:"remote-containers.explorerTargetsRefresh",title:"%command.explorerTargetsRefresh%",category:"%command.category%",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.explorerDetailsRefresh",title:"%command.explorerDetailsRefresh%",category:"%command.category%",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.inspectDockerResource",title:"%command.inspectDockerResource%",category:"%command.category%"},{command:"remote-containers.inspectInBasicDevContainer",title:"%command.inspectInBasicDevContainer%",category:"%command.category%"},{command:"remote-containers.cloneInVolume",title:"%command.cloneInVolume%",category:"%command.category%"},{command:"remote-containers.removeVolume",title:"%command.removeVolume%",category:"%command.category%"},{command:"remote-containers.newContainer",title:"%command.newContainer%",category:"%command.category%",icon:{light:"resources/light/plus.svg",dark:"resources/dark/plus.svg"}},{command:"remote-containers.showContainerLog",title:"%command.showContainerLog%",category:"%command.category%"},{command:"remote-containers.addExtensionToConfig",title:"%command.addExtensionToConfig%",category:"%command.category%"},{command:"remote-containers.checkoutPRInVolume",title:"%command.checkoutPRInVolume%",category:"%command.category%"},{command:"remote-containers.showReopenInContainerNotificationReset",title:"%command.showReopenInContainerNotificationReset%",category:"%command.category%"},{command:"remote-containers.showRecoveryContainerNotificationReset",title:"%command.showRecoveryContainerNotificationReset%",category:"%command.category%"},{command:"remote-containers.labelPortAndUpdateConfig",title:"%command.labelPortAndUpdateConfig%",category:"%command.category%",icon:"$(tag)"},{command:"remote-containers.installDocker",title:"%command.installDocker%",category:"%command.category%"},{command:"remote-containers.installDockerInWSL",title:"%command.installDockerInWSL%",category:"%command.category%"},{command:"remote-containers.installUserCLI",title:"%command.installUserCLI%",category:"%command.category%"},{command:"remote-containers.configureContainerFeatures",title:"%command.configureContainerFeatures%",category:"%command.category%"}],menus:{commandPalette:[{command:"remote-containers.reopenInContainer",when:"!hideConnectCommands && workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.reopenInContainer",when:"!hideConnectCommands && workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.reopenInContainer",when:"!hideConnectCommands && workspaceFolderCount != 0 && remoteName == dev-container && isRecoveryContainer"},{command:"remote-containers.rebuildAndReopenInContainer",when:"!hideRebuildCommands && workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildAndReopenInContainer",when:"!hideRebuildCommands && workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"!hideRebuildCommands && workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"!hideRebuildCommands && workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.reopenLocally",when:"!hideConnectCommands && canReopenLocally"},{command:"remote-containers.reopenInWSL",when:"!hideConnectCommands && canReopenInWSL"},{command:"remote-containers.reopenInSSH",when:"!hideConnectCommands && canReopenInSSH"},{command:"remote-containers.reopenInTunnel",when:"!hideConnectCommands && canReopenInTunnel"},{command:"remote-containers.openFolder",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.openRepositoryInVolume",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.openPullRequestInVolume",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.createDevContainer",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.openWorkspace",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.attachToRunningContainer",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.attachToRunningContainerFromViewlet",when:"false"},{command:"remote-containers.inspectVolumeFromViewlet",when:"false"},{command:"remote-containers.openRepositoryFromRemoteHubWithEditSession",when:"false"},{command:"remote-containers.openRepositoryFromGitWithEditSession",when:"false"},{command:"remote-containers.cloneInVolumeFromViewlet",when:"false"},{command:"remote-containers.inspectInBasicDevContainer",when:"false"},{command:"remote-containers.cloneInVolume",when:"false"},{command:"remote-containers.removeVolume",when:"false"},{command:"remote-containers.attachToK8sContainer",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.attachToAppleContainer",when:"!hideConnectCommands && config.dev.containers.experimentalAppleContainerSupport && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.attachToK8sContainerFromViewlet",when:"false"},{command:"remote-containers.checkoutPRInVolume",when:"false"},{command:"remote-containers.switchContainer",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.rebuildContainer",when:"!hideRebuildCommands && remoteName =~ /^dev-container$/"},{command:"remote-containers.rebuildContainerNoCache",when:"!hideRebuildCommands && remoteName =~ /^dev-container$/"},{command:"remote-containers.testConnection",when:"remoteName =~ /^(dev|attached)-container$/"},{command:"remote-containers.createDevContainerFile",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",when:"remoteName =~ /^(dev-container|wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.createDevContainerFileWithCopilot",when:"false && github.copilot.activated && !remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFileWithCopilot",when:"false && github.copilot.activated && remoteName =~ /^(dev-container|wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.openDevContainerFile",when:"remoteName =~ /^(dev|attached)-container$/"},{command:"remote-containers.openAttachConfigByNameFile",when:"remoteName == attached-container"},{command:"remote-containers.openAttachDevContainerFile",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.getStarted",when:"!remoteName && !virtualWorkspace || remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.trySample",when:"!hideConnectCommands && !remoteName && !virtualWorkspace"},{command:"remote-containers.trySample",when:"!hideConnectCommands && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.provideFeedback",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container)$/"},{command:"remote-containers.attachToContainerInCurrentWindow",when:"false"},{command:"remote-containers.attachToContainerInNewWindow",when:"false"},{command:"remote-containers.stopContainer",when:"false"},{command:"remote-containers.removeContainer",when:"false"},{command:"remote-containers.startContainer",when:"false"},{command:"remote-containers.removeRecentFolder",when:"false"},{command:"remote-containers.showDetails",when:"false"},{command:"remote-containers.explorerTargetsRefresh",when:"false"},{command:"remote-containers.explorerVolumesRefresh",when:"false"},{command:"remote-containers.explorerDetailsRefresh",when:"false"},{command:"remote-containers.inspectDockerResource",when:"false"},{command:"remote-containers.openFolderInContainerInCurrentWindow",when:"false"},{command:"remote-containers.openFolderInContainerInNewWindow",when:"false"},{command:"remote-containers.openInformationAboutMountPerformance",when:"false"},{command:"remote-containers.newContainer",when:"false"},{command:"remote-containers.showContainerLog",when:"false"},{command:"remote-containers.labelPortAndUpdateConfig",when:"false"},{command:"remote-containers.addExtensionToConfig",when:"false"},{command:"remote-containers.installDockerInWSL",when:"!hideConnectCommands && isWindows && !remoteName && !virtualWorkspace"},{command:"remote-containers.configureContainerFeatures",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.configureContainerFeatures",when:"remoteName =~ /^(dev-container|wsl|ssh-remote|tunnel)$/"}],"statusBar/remoteIndicator":[{command:"remote-containers.openDevContainerFile",group:"remote_30_dev-container_2_actions@0",when:"true"},{command:"remote-containers.createDevContainer",group:"remote_30_dev-container_2_actions@1",when:"!hideConnectCommands"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_2_actions@2",when:"!hideConnectCommands"},{command:"remote-containers.configureContainerFeatures",group:"remote_30_dev-container_2_actions@3",when:"remoteName =~ /^(dev-container)$/"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@4",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@4",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@5",when:"!hideConnectCommands && workspaceFolderCount == 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@5",when:"!hideConnectCommands && remoteName =~ /tunnel*.*/ && gitOpenRepositoryCount == 0"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@5",when:"!hideConnectCommands && workspaceFolderCount == 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildContainer",group:"remote_30_dev-container_2_actions@6",when:"!hideRebuildCommands && remoteName =~ /^dev-container$/"},{command:"remote-containers.reopenLocally",group:"remote_30_dev-container_2_actions@7",when:"!hideConnectCommands && canReopenLocally"},{command:"remote-containers.reopenInWSL",group:"remote_30_dev-container_2_actions@7",when:"!hideConnectCommands && canReopenInWSL"},{command:"remote-containers.reopenInSSH",group:"remote_30_dev-container_2_actions@7",when:"!hideConnectCommands && canReopenInSSH"},{command:"remote-containers.reopenInTunnel",group:"remote_30_dev-container_2_actions@7",when:"!hideConnectCommands && canReopenInTunnel"},{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@8",when:"!hideConnectCommands && workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@8",when:"!hideConnectCommands && workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_2_actions@8",when:"!hideConnectCommands && workspaceFolderCount == 0 && !remoteName && !virtualWorkspace"}],"view/title":[{command:"remote-containers.explorerTargetsRefresh",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation@3"},{command:"remote-containers.newContainer",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation@1"},{command:"remote-containers.cleanUpDevContainers",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation@2"},{command:"remote-containers.newContainer",when:"!hideConnectCommands && (view == dockerContainers || view == vscode-containers.views.containers)",group:"navigation"},{command:"remote-containers.explorerDetailsRefresh",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.attachToContainerInNewWindow",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.rebuildContainer",when:"!hideRebuildCommands && view == detailsContainers && remoteName == dev-container",group:"navigation"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && remoteName =~ /^(dev|attached)-container$/",group:"navigation"},{command:"remote-containers.pruneVolumes",when:"view == devVolumes",group:"navigation@2"},{command:"remote-containers.explorerVolumesRefresh",when:"view == devVolumes",group:"navigation@3"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"view == devVolumes",group:"navigation@1"}],"view/item/context":[{command:"remote-containers.attachToRunningContainerFromViewlet",when:"!hideConnectCommands && (view == dockerContainers || view == vscode-containers.views.containers) && viewItem =~ /^runningContainer$/i",group:"containers_1_general@2"},{command:"remote-containers.inspectVolumeFromViewlet",when:"!hideConnectCommands && (view == dockerVolumes || view == vscode-containers.views.volumes) && viewItem == volume",group:"volumes_1_general@2"},{command:"remote-containers.checkoutPRInVolume",when:"!hideConnectCommands && view =~ /pr:/ && viewItem =~ /pullrequest(:local)?:nonactive|description/",group:"1_pullrequest@3"},{command:"remote-containers.attachToK8sContainerFromViewlet",group:"2@4",when:"!hideConnectCommands && view == extension.vsKubernetesExplorer && viewItem =~ /vsKubernetes\\.resource\\.pod/i"},{command:"remote-containers.openFolderInContainerInCurrentWindow",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"1_folder@1"},{command:"remote-containers.openFolderInContainerInCurrentWindow",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"inline@1"},{command:"remote-containers.openFolderInContainerInNewWindow",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"1_folder@2"},{command:"remote-containers.openFolderInContainerInNewWindow",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"inline@2"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"2_folder@1"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"inline@3"},{command:"workbench.action.closeFolder",when:"view == targetsContainers && viewItem =~ /active.*Folder/",group:"1_folder@1"},{command:"remote-containers.reopenLocally",when:"!hideConnectCommands && canReopenLocally && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInWSL",when:"!hideConnectCommands && canReopenInWSL && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInSSH",when:"!hideConnectCommands && canReopenInSSH && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInTunnel",when:"!hideConnectCommands && canReopenInTunnel && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.attachToContainerInCurrentWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container$/",group:"1_container@1"},{command:"remote-containers.attachToContainerInCurrentWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container$/",group:"inline@1"},{command:"remote-containers.attachToContainerInNewWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container$/",group:"1_container@2"},{command:"remote-containers.attachToContainerInNewWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container$/",group:"inline@2"},{command:"remote-containers.stopContainer",when:"view == targetsContainers && viewItem =~ /^running(Dev|)Container/",group:"2_container@2"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"2_container@3"},{command:"remote-containers.rebuildContainer",when:"!hideRebuildCommands && view == targetsContainers && viewItem =~ /activeDevContainer/",group:"2_container@1"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"inline@3"},{command:"remote-containers.startContainer",when:"view == targetsContainers && viewItem =~ /^exited(Dev|)Container/",group:"1_container@3"},{command:"remote-containers.showDetails",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@4"},{command:"remote-containers.inspectDockerResource",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@5"},{command:"remote-containers.showContainerLog",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@6"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && viewItem == devContainer"},{command:"remote-containers.inspectDockerResource",when:"view == detailsContainers && viewItem =~ /^(image|volume)$/"},{command:"remote-containers.openInformationAboutMountPerformance",when:"view == detailsContainers && viewItem == mountPerformanceInfo",group:"inline@1"},{command:"remote-containers.cloneInVolume",when:"view == devVolumes && viewItem =~ /^(devVolume)$/",group:"1_volumes@1"},{command:"remote-containers.inspectInBasicDevContainer",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@1"},{command:"remote-containers.inspectDockerResource",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@2"},{command:"remote-containers.removeVolume",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"3_volumes-destructive@1"}],"ports/item/port/inline":[{command:"remote-containers.labelPortAndUpdateConfig",group:"0_manage@4",when:"remoteName =~ /^(dev|attached)-container$/ && tunnelType == Forwarded"}],"extension/context":[{command:"remote-containers.addExtensionToConfig",group:"2_configure",when:"!isBuiltinExtension && !isWorkspaceScopedExtension && remoteName =~ /^(dev-container|attached-container|wsl|ssh-remote|tunnel)?$/"}]},resourceLabelFormatters:[{scheme:"vscode-remote",authority:"dev-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.dev-container.workspaceSuffix%"}},{scheme:"vscode-remote",authority:"attached-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.attached-container.workspaceSuffix%"}},{scheme:"vscode-remote",authority:"exec+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.exec.workspaceSuffix%"}},{scheme:"vscode-remote",authority:"k8s-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.k8s-container.workspaceSuffix%"}},{scheme:"vscode-remote",authority:"apple-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.apple-container.workspaceSuffix%"}}],views:{remote:[{id:"targetsContainers",name:"%views.remote.targetsContainers%",when:"!hideConnectCommands",group:"targets@2",remoteName:["dev-container","attached-container","exec","k8s-container","apple-container"]},{id:"detailsContainers",name:"%views.remote.detailsContainers%",when:"!hideConnectCommands && remote-containers:showDetails",group:"details@1",remoteName:["dev-container","attached-container"]},{id:"devVolumes",name:"%views.remote.devVolumes%",when:"!hideConnectCommands",group:"details@2",remoteName:["dev-container","attached-container"]}]},viewsWelcome:[{view:"targetsContainers",when:"remote-containers:needsDockerStartOrInstall",contents:"%viewsWelcome.targetsContainers.needsDockerStartOrInstall%"},{view:"targetsContainers",when:"remote-containers:needsSSHCredentials",contents:"%viewsWelcome.targetsContainers.needsSSHCredentials%"},{view:"targetsContainers",when:"remote-containers:noContainersWithFolder",contents:"%viewsWelcome.targetsContainers.noContainersWithFolder%"},{view:"targetsContainers",when:"remote-containers:noContainersWithoutFolder",contents:"%viewsWelcome.targetsContainers.noContainersWithoutFolder%"},{view:"devVolumes",when:"remote-containers:noDevVolumes",contents:"%viewsWelcome.devVolumes.noDevVolumes%"}],remoteHelp:{getStarted:"https://aka.ms/vscode-remote/containers/tutorial-sandbox",documentation:"https://aka.ms/vscode-remote/containers",issues:"https://aka.ms/vscode-remote/containers/issues",remoteName:["dev-container","attached-container","exec","k8s-container","apple-container"]}},scripts:{"vscode:prepublish":"npx npm-run-all --npm-path npm clean compile-prod dev-containers-user-cli-prepare",compile:"npx npm-run-all --npm-path npm clean-dist compile-dev",watch:"npx npm-run-all --npm-path npm clean-dist compile-watch",postinstall:"yarn --cwd node_modules/@devcontainers/cli",precommit:"node build/hygiene.js",package:"vsce package --yarn",lint:"eslint -c .eslintrc.js --rulesdir ./build/eslint --max-warnings 0 --ext .ts ./src ./test","compile-prod":"npx npm-run-all --npm-path npm compile-cli-prod copy-cli esbuild-prod","compile-dev":"npx npm-run-all --npm-path npm compile-cli-dev copy-cli esbuild-dev","compile-watch":"npx npm-run-all --npm-path npm --parallel compile-cli-watch watch-cli esbuild-watch","esbuild-prod":"node esbuild.js --production","esbuild-dev":"node esbuild.js","esbuild-watch":"node esbuild.js --watch","compile-cli-prod":"yarn --cwd node_modules/@devcontainers/cli compile-prod","compile-cli-dev":"yarn --cwd node_modules/@devcontainers/cli compile-dev","compile-cli-watch":"yarn --cwd node_modules/@devcontainers/cli compile-watch","copy-cli":'copyfiles --up 4 --all "node_modules/@devcontainers/cli/dist/spec-node/devContainersSpecCLI.js" dist',"watch-cli":"npm-watch","type-check":"npx npm-run-all --npm-path npm clean-built tsc-b","tsc-b":"tsc -b","type-check-watch":"npx npm-run-all --npm-path npm clean-built tsc-b-w","tsc-b-w":"tsc -b -w","dev-containers-cli-publish":"npx npm-run-all --npm-path npm dev-containers-cli-prepare dev-containers-cli-npm-publish","dev-containers-cli-package":"npx npm-run-all --npm-path npm dev-containers-cli-prepare dev-containers-cli-npm-pack","dev-containers-cli-prepare":"npx npm-run-all --npm-path npm clean dev-containers-cli-compile dev-containers-cli-copy-module","dev-containers-cli-compile":"npx npm-run-all --npm-path npm compile-prod","dev-containers-cli-copy-module":"copyfiles ThirdPartyNotices.txt dist/node/devContainersCLI.js dev-containers-cli","dev-containers-cli-npm-publish":"cd dev-containers-cli && npm publish","dev-containers-cli-npm-pack":"cd dev-containers-cli && npm pack","dev-containers-user-cli-package":"npx npm-run-all --npm-path npm dev-containers-user-cli-prepare dev-containers-user-cli-npm-pack","dev-containers-user-cli-prepare":"npx npm-run-all --npm-path npm dev-containers-user-cli-copy-module","dev-containers-user-cli-clean-prepare":"npx npm-run-all --npm-path npm clean dev-containers-user-prepare","dev-containers-user-cli-copy-module":'copyfiles ThirdPartyNotices.txt dist/node/devContainersUserCLI.js dist/spec-node/devContainersSpecCLI.js "scripts/**/*" dev-containers-user-cli',"dev-containers-user-cli-npm-pack":"cd dev-containers-user-cli && npm pack",clean:"npx npm-run-all --npm-path npm clean-dist clean-built","clean-dist":"rimraf dist dev-containers-cli/dist dev-containers-cli/scripts dev-containers-user-cli/dist dev-containers-user-cli/scripts","clean-built":"rimraf built",test:"env TS_NODE_PROJECT=test/core/tsconfig.json mocha -r ts-node/register --exit test/core/**/*.test.ts","test-matrix":"env TS_NODE_PROJECT=test/core/tsconfig.json mocha -r ts-node/register --exit","test-no-env":"mocha -r ts-node/register --exit test/core/**/*.test.ts","test-dev-containers":"env TS_NODE_PROJECT=test/dev-containers/tsconfig.json mocha -r ts-node/register --exit test/dev-containers/**/*.test.ts",copytestconfigsforalpine:"/bin/bash -c 'cd test/configs && for f in *; do if [[ -d $f ]] && [[ $f != *alpine* ]]; then cp -r -T $f $f-alpine ; fi ; done'"},watch:{"copy-cli":"node_modules/@devcontainers/cli/dist/spec-node/devContainersSpecCLI.js"},devDependencies:{"@stylistic/eslint-plugin":"^3.0.1","@types/adm-zip":"^0.5.7","@types/chai":"^4.3.20","@types/follow-redirects":"^1.14.4","@types/js-yaml":"^4.0.9","@types/markdown-it":"^14.1.2","@types/minimist":"^1.2.5","@types/mocha":"^10.0.10","@types/ncp":"^2.0.8","@types/node":"^20.19.22","@types/pull-stream":"^3.6.7","@types/recursive-readdir":"^2.2.4","@types/semver":"^7.7.1","@types/stats-lite":"^2.2.2","@types/tar":"^6.1.13","@types/tar-stream":"^3.1.4","@types/vscode":"~1.86.0","@types/yargs":"^17.0.33","@typescript-eslint/eslint-plugin":"^8.46.2","@typescript-eslint/experimental-utils":"^5.62.0","@typescript-eslint/parser":"^8.46.2","@vscode/l10n-dev":"^0.0.35","@vscode/vsce":"^3.6.2",ajv:"^8.17.1",chai:"^4.5.0",copyfiles:"^2.4.1",esbuild:"^0.25.11",eslint:"^8.57.0","eslint-plugin-local":"^6.0.0","event-stream":"^4.0.1","gulp-eslint":"^6.0.0","gulp-filter":"^9.0.1",husky:"^9.1.7",jsonc:"^2.0.0",minimist:"^1.2.8",mocha:"^11.7.4","npm-run-all":"^4.1.5","npm-watch":"^0.13.0","p-all":"^5.0.1",rimraf:"^6.0.1","stats-lite":"^2.2.0","ts-node":"^10.9.2",typescript:"^5.9.3","typescript-formatter":"^7.2.2",vinyl:"^3.0.1","vinyl-fs":"^4.0.2"},dependencies:{"@devcontainers/cli":"https://github.com/devcontainers/cli.git#f27ecff93d139cf12a9eaaf6888f6e8c62f7ec24","@vscode/extension-telemetry":"^0.9.9","@vscode/l10n":"^0.0.18","adm-zip":"^0.5.16",applicationinsights:"^2.9.8","find-process":"^2.0.0","follow-redirects":"^1.15.11","js-yaml":"^4.1.1","jsonc-parser":"^3.3.1",muxrpc:"^6.7.3","node-pty":"^1.0.0","pull-pushable":"^2.2.0","pull-stream":"^3.7.0","pull-stream-to-stream":"^2.0.0",semver:"^7.7.3","stream-to-pull-stream":"^1.7.3",tar:"^6.2.1","tar-stream":"^3.1.7","vscode-tas-client":"^0.1.84","vscode-uri":"^3.1.0",yargs:"~17.7.2"}}});var Ive={};bC(Ive,{activate:()=>Kge,attachToContainer:()=>wC,deactivate:()=>Qge});module.exports=Y9(Ive);var O=Y(require("vscode")),b9=Y(Mr()),re=require("vscode"),T9=Y(require("os")),M0=Y(require("fs")),ut=Y(require("path")),R9=Y(require("querystring"));function Tg(t,e=!1){let n=t.length,r=0,o="",i=0,s=16,a=0,c=0,l=0,u=0,f=0;function m(w,y){let S=0,D=0;for(;S<w||!y;){let _=t.charCodeAt(r);if(_>=48&&_<=57)D=D*16+_-48;else if(_>=65&&_<=70)D=D*16+_-65+10;else if(_>=97&&_<=102)D=D*16+_-97+10;else break;r++,S++}return S<w&&(D=-1),D}function d(w){r=w,o="",i=0,s=16,f=0}function p(){let w=r;if(t.charCodeAt(r)===48)r++;else for(r++;r<t.length&&_m(t.charCodeAt(r));)r++;if(r<t.length&&t.charCodeAt(r)===46)if(r++,r<t.length&&_m(t.charCodeAt(r)))for(r++;r<t.length&&_m(t.charCodeAt(r));)r++;else return f=3,t.substring(w,r);let y=r;if(r<t.length&&(t.charCodeAt(r)===69||t.charCodeAt(r)===101))if(r++,(r<t.length&&t.charCodeAt(r)===43||t.charCodeAt(r)===45)&&r++,r<t.length&&_m(t.charCodeAt(r))){for(r++;r<t.length&&_m(t.charCodeAt(r));)r++;y=r}else f=3;return t.substring(w,y)}function g(){let w="",y=r;for(;;){if(r>=n){w+=t.substring(y,r),f=2;break}let S=t.charCodeAt(r);if(S===34){w+=t.substring(y,r),r++;break}if(S===92){if(w+=t.substring(y,r),r++,r>=n){f=2;break}switch(t.charCodeAt(r++)){case 34:w+='"';break;case 92:w+="\\";break;case 47:w+="/";break;case 98:w+="\b";break;case 102:w+="\f";break;case 110:w+=`
`;break;case 114:w+="\r";break;case 116:w+="	";break;case 117:let _=m(4,!0);_>=0?w+=String.fromCharCode(_):f=4;break;default:f=5}y=r;continue}if(S>=0&&S<=31)if(bg(S)){w+=t.substring(y,r),f=2;break}else f=6;r++}return w}function h(){if(o="",f=0,i=r,c=a,u=l,r>=n)return i=n,s=17;let w=t.charCodeAt(r);if(W0(w)){do r++,o+=String.fromCharCode(w),w=t.charCodeAt(r);while(W0(w));return s=15}if(bg(w))return r++,o+=String.fromCharCode(w),w===13&&t.charCodeAt(r)===10&&(r++,o+=`
`),a++,l=r,s=14;switch(w){case 123:return r++,s=1;case 125:return r++,s=2;case 91:return r++,s=3;case 93:return r++,s=4;case 58:return r++,s=6;case 44:return r++,s=5;case 34:return r++,o=g(),s=10;case 47:let y=r-1;if(t.charCodeAt(r+1)===47){for(r+=2;r<n&&!bg(t.charCodeAt(r));)r++;return o=t.substring(y,r),s=12}if(t.charCodeAt(r+1)===42){r+=2;let S=n-1,D=!1;for(;r<S;){let _=t.charCodeAt(r);if(_===42&&t.charCodeAt(r+1)===47){r+=2,D=!0;break}r++,bg(_)&&(_===13&&t.charCodeAt(r)===10&&r++,a++,l=r)}return D||(r++,f=1),o=t.substring(y,r),s=13}return o+=String.fromCharCode(w),r++,s=16;case 45:if(o+=String.fromCharCode(w),r++,r===n||!_m(t.charCodeAt(r)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return o+=p(),s=11;default:for(;r<n&&v(w);)r++,w=t.charCodeAt(r);if(i!==r){switch(o=t.substring(i,r),o){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return o+=String.fromCharCode(w),r++,s=16}}function v(w){if(W0(w)||bg(w))return!1;switch(w){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function C(){let w;do w=h();while(w>=12&&w<=15);return w}return{setPosition:d,getPosition:()=>r,scan:e?C:h,getToken:()=>s,getTokenValue:()=>o,getTokenOffset:()=>i,getTokenLength:()=>r-i,getTokenStartLine:()=>c,getTokenStartCharacter:()=>i-u,getTokenError:()=>f}}function W0(t){return t===32||t===9}function bg(t){return t===10||t===13}function _m(t){return t>=48&&t<=57}var KO;(function(t){t[t.lineFeed=10]="lineFeed",t[t.carriageReturn=13]="carriageReturn",t[t.space=32]="space",t[t._0=48]="_0",t[t._1=49]="_1",t[t._2=50]="_2",t[t._3=51]="_3",t[t._4=52]="_4",t[t._5=53]="_5",t[t._6=54]="_6",t[t._7=55]="_7",t[t._8=56]="_8",t[t._9=57]="_9",t[t.a=97]="a",t[t.b=98]="b",t[t.c=99]="c",t[t.d=100]="d",t[t.e=101]="e",t[t.f=102]="f",t[t.g=103]="g",t[t.h=104]="h",t[t.i=105]="i",t[t.j=106]="j",t[t.k=107]="k",t[t.l=108]="l",t[t.m=109]="m",t[t.n=110]="n",t[t.o=111]="o",t[t.p=112]="p",t[t.q=113]="q",t[t.r=114]="r",t[t.s=115]="s",t[t.t=116]="t",t[t.u=117]="u",t[t.v=118]="v",t[t.w=119]="w",t[t.x=120]="x",t[t.y=121]="y",t[t.z=122]="z",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.asterisk=42]="asterisk",t[t.backslash=92]="backslash",t[t.closeBrace=125]="closeBrace",t[t.closeBracket=93]="closeBracket",t[t.colon=58]="colon",t[t.comma=44]="comma",t[t.dot=46]="dot",t[t.doubleQuote=34]="doubleQuote",t[t.minus=45]="minus",t[t.openBrace=123]="openBrace",t[t.openBracket=91]="openBracket",t[t.plus=43]="plus",t[t.slash=47]="slash",t[t.formFeed=12]="formFeed",t[t.tab=9]="tab"})(KO||(KO={}));var Xo=new Array(20).fill(0).map((t,e)=>" ".repeat(e)),Dm=200,j0={" ":{"\n":new Array(Dm).fill(0).map((t,e)=>`
`+" ".repeat(e)),"\r":new Array(Dm).fill(0).map((t,e)=>"\r"+" ".repeat(e)),"\r\n":new Array(Dm).fill(0).map((t,e)=>`\r
`+" ".repeat(e))},"	":{"\n":new Array(Dm).fill(0).map((t,e)=>`
`+"	".repeat(e)),"\r":new Array(Dm).fill(0).map((t,e)=>"\r"+"	".repeat(e)),"\r\n":new Array(Dm).fill(0).map((t,e)=>`\r
`+"	".repeat(e))}},JO=[`
`,"\r",`\r
`];function V0(t,e,n){let r,o,i,s,a;if(e){for(s=e.offset,a=s+e.length,i=s;i>0&&!Rg(t,i-1);)i--;let S=a;for(;S<t.length&&!Rg(t,S);)S++;o=t.substring(i,S),r=i7(o,n)}else o=t,r=0,i=0,s=0,a=t.length;let c=s7(n,t),l=JO.includes(c),u=0,f=0,m;n.insertSpaces?m=Xo[n.tabSize||4]??Im(Xo[1],n.tabSize||4):m="	";let d=m==="	"?"	":" ",p=Tg(o,!1),g=!1;function h(){if(u>1)return Im(c,u)+Im(m,r+f);let S=m.length*(r+f);return!l||S>j0[d][c].length?c+Im(m,r+f):S<=0?c:j0[d][c][S]}function v(){let S=p.scan();for(u=0;S===15||S===14;)S===14&&n.keepLines?u+=1:S===14&&(u=1),S=p.scan();return g=S===16||p.getTokenError()!==0,S}let C=[];function w(S,D,_){!g&&(!e||D<a&&_>s)&&t.substring(D,_)!==S&&C.push({offset:D,length:_-D,content:S})}let y=v();if(n.keepLines&&u>0&&w(Im(c,u),0,0),y!==17){let S=p.getTokenOffset()+i,D=m.length*r<20&&n.insertSpaces?Xo[m.length*r]:Im(m,r);w(D,i,S)}for(;y!==17;){let S=p.getTokenOffset()+p.getTokenLength()+i,D=v(),_="",A=!1;for(;u===0&&(D===12||D===13);){let k=p.getTokenOffset()+i;w(Xo[1],S,k),S=p.getTokenOffset()+p.getTokenLength()+i,A=D===12,_=A?h():"",D=v()}if(D===2)y!==1&&f--,n.keepLines&&u>0||!n.keepLines&&y!==1?_=h():n.keepLines&&(_=Xo[1]);else if(D===4)y!==3&&f--,n.keepLines&&u>0||!n.keepLines&&y!==3?_=h():n.keepLines&&(_=Xo[1]);else{switch(y){case 3:case 1:f++,n.keepLines&&u>0||!n.keepLines?_=h():_=Xo[1];break;case 5:n.keepLines&&u>0||!n.keepLines?_=h():_=Xo[1];break;case 12:_=h();break;case 13:u>0?_=h():A||(_=Xo[1]);break;case 6:n.keepLines&&u>0?_=h():A||(_=Xo[1]);break;case 10:n.keepLines&&u>0?_=h():D===6&&!A&&(_="");break;case 7:case 8:case 9:case 11:case 2:case 4:n.keepLines&&u>0?_=h():(D===12||D===13)&&!A?_=Xo[1]:D!==5&&D!==17&&(g=!0);break;case 16:g=!0;break}u>0&&(D===12||D===13)&&(_=h())}D===17&&(n.keepLines&&u>0?_=h():_=n.insertFinalNewline?c:"");let U=p.getTokenOffset()+i;w(_,S,U),y=D}return C}function Im(t,e){let n="";for(let r=0;r<e;r++)n+=t;return n}function i7(t,e){let n=0,r=0,o=e.tabSize||4;for(;n<t.length;){let i=t.charAt(n);if(i===Xo[1])r++;else if(i==="	")r+=o;else break;n++}return Math.floor(r/o)}function s7(t,e){for(let n=0;n<e.length;n++){let r=e.charAt(n);if(r==="\r")return n+1<e.length&&e.charAt(n+1)===`
`?`\r
`:"\r";if(r===`
`)return`
`}return t&&t.eol||`
`}function Rg(t,e){return`\r
`.indexOf(t.charAt(e))!==-1}var kg;(function(t){t.DEFAULT={allowTrailingComma:!1}})(kg||(kg={}));function XO(t,e){let n=[],r=new Object,o,i={value:{},offset:0,length:0,type:"object",parent:void 0},s=!1;function a(c,l,u,f){i.value=c,i.offset=l,i.length=u,i.type=f,i.colonOffset=void 0,o=i}try{NC(t,{onObjectBegin:(c,l)=>{if(e<=c)throw r;o=void 0,s=e>c,n.push("")},onObjectProperty:(c,l,u)=>{if(e<l||(a(c,l,u,"property"),n[n.length-1]=c,e<=l+u))throw r},onObjectEnd:(c,l)=>{if(e<=c)throw r;o=void 0,n.pop()},onArrayBegin:(c,l)=>{if(e<=c)throw r;o=void 0,n.push(0)},onArrayEnd:(c,l)=>{if(e<=c)throw r;o=void 0,n.pop()},onLiteralValue:(c,l,u)=>{if(e<l||(a(c,l,u,QO(c)),e<=l+u))throw r},onSeparator:(c,l,u)=>{if(e<=l)throw r;if(c===":"&&o&&o.type==="property")o.colonOffset=l,s=!1,o=void 0;else if(c===","){let f=n[n.length-1];typeof f=="number"?n[n.length-1]=f+1:(s=!0,n[n.length-1]=""),o=void 0}}})}catch(c){if(c!==r)throw c}return{path:n,previousNode:o,isAtPropertyKey:s,matches:c=>{let l=0;for(let u=0;l<c.length&&u<n.length;u++)if(c[l]===n[u]||c[l]==="*")l++;else if(c[l]!=="**")return!1;return l===c.length}}}function ZO(t,e=[],n=kg.DEFAULT){let r=null,o=[],i=[];function s(c){Array.isArray(o)?o.push(c):r!==null&&(o[r]=c)}return NC(t,{onObjectBegin:()=>{let c={};s(c),i.push(o),o=c,r=null},onObjectProperty:c=>{r=c},onObjectEnd:()=>{o=i.pop()},onArrayBegin:()=>{let c=[];s(c),i.push(o),o=c,r=null},onArrayEnd:()=>{o=i.pop()},onLiteralValue:s,onError:(c,l,u)=>{e.push({error:c,offset:l,length:u})}},n),o[0]}function kC(t,e=[],n=kg.DEFAULT){let r={type:"array",offset:-1,length:-1,children:[],parent:void 0};function o(c){r.type==="property"&&(r.length=c-r.offset,r=r.parent)}function i(c){return r.children.push(c),c}NC(t,{onObjectBegin:c=>{r=i({type:"object",offset:c,length:-1,parent:r,children:[]})},onObjectProperty:(c,l,u)=>{r=i({type:"property",offset:l,length:-1,parent:r,children:[]}),r.children.push({type:"string",value:c,offset:l,length:u,parent:r})},onObjectEnd:(c,l)=>{o(c+l),r.length=c+l-r.offset,r=r.parent,o(c+l)},onArrayBegin:(c,l)=>{r=i({type:"array",offset:c,length:-1,parent:r,children:[]})},onArrayEnd:(c,l)=>{r.length=c+l-r.offset,r=r.parent,o(c+l)},onLiteralValue:(c,l,u)=>{i({type:QO(c),offset:l,length:u,parent:r,value:c}),o(l+u)},onSeparator:(c,l,u)=>{r.type==="property"&&(c===":"?r.colonOffset=l:c===","&&o(l))},onError:(c,l,u)=>{e.push({error:c,offset:l,length:u})}},n);let a=r.children[0];return a&&delete a.parent,a}function Ng(t,e){if(!t)return;let n=t;for(let r of e)if(typeof r=="string"){if(n.type!=="object"||!Array.isArray(n.children))return;let o=!1;for(let i of n.children)if(Array.isArray(i.children)&&i.children[0].value===r&&i.children.length===2){n=i.children[1],o=!0;break}if(!o)return}else{let o=r;if(n.type!=="array"||o<0||!Array.isArray(n.children)||o>=n.children.length)return;n=n.children[o]}return n}function RC(t){switch(t.type){case"array":return t.children.map(RC);case"object":let e=Object.create(null);for(let n of t.children){let r=n.children[1];r&&(e[n.children[0].value]=RC(r))}return e;case"null":case"string":case"number":case"boolean":return t.value;default:return}}function NC(t,e,n=kg.DEFAULT){let r=Tg(t,!1),o=[],i=0;function s(I){return I?()=>i===0&&I(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter()):()=>!0}function a(I){return I?T=>i===0&&I(T,r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter()):()=>!0}function c(I){return I?T=>i===0&&I(T,r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter(),()=>o.slice()):()=>!0}function l(I){return I?()=>{i>0?i++:I(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter(),()=>o.slice())===!1&&(i=1)}:()=>!0}function u(I){return I?()=>{i>0&&i--,i===0&&I(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter())}:()=>!0}let f=l(e.onObjectBegin),m=c(e.onObjectProperty),d=u(e.onObjectEnd),p=l(e.onArrayBegin),g=u(e.onArrayEnd),h=c(e.onLiteralValue),v=a(e.onSeparator),C=s(e.onComment),w=a(e.onError),y=n&&n.disallowComments,S=n&&n.allowTrailingComma;function D(){for(;;){let I=r.scan();switch(r.getTokenError()){case 4:_(14);break;case 5:_(15);break;case 3:_(13);break;case 1:y||_(11);break;case 2:_(12);break;case 6:_(16);break}switch(I){case 12:case 13:y?_(10):C();break;case 16:_(1);break;case 15:case 14:break;default:return I}}}function _(I,T=[],R=[]){if(w(I),T.length+R.length>0){let L=r.getToken();for(;L!==17;){if(T.indexOf(L)!==-1){D();break}else if(R.indexOf(L)!==-1)break;L=D()}}}function A(I){let T=r.getTokenValue();return I?h(T):(m(T),o.push(T)),D(),!0}function U(){switch(r.getToken()){case 11:let I=r.getTokenValue(),T=Number(I);isNaN(T)&&(_(2),T=0),h(T);break;case 7:h(null);break;case 8:h(!0);break;case 9:h(!1);break;default:return!1}return D(),!0}function k(){return r.getToken()!==10?(_(3,[],[2,5]),!1):(A(!1),r.getToken()===6?(v(":"),D(),b()||_(4,[],[2,5])):_(5,[],[2,5]),o.pop(),!0)}function E(){f(),D();let I=!1;for(;r.getToken()!==2&&r.getToken()!==17;){if(r.getToken()===5){if(I||_(4,[],[]),v(","),D(),r.getToken()===2&&S)break}else I&&_(6,[],[]);k()||_(4,[],[2,5]),I=!0}return d(),r.getToken()!==2?_(7,[2],[]):D(),!0}function x(){p(),D();let I=!0,T=!1;for(;r.getToken()!==4&&r.getToken()!==17;){if(r.getToken()===5){if(T||_(4,[],[]),v(","),D(),r.getToken()===4&&S)break}else T&&_(6,[],[]);I?(o.push(0),I=!1):o[o.length-1]++,b()||_(4,[],[4,5]),T=!0}return g(),I||o.pop(),r.getToken()!==4?_(8,[4],[]):D(),!0}function b(){switch(r.getToken()){case 3:return x();case 1:return E();case 10:return A(!0);default:return U()}}return D(),r.getToken()===17?n.allowEmptyContent?!0:(_(4,[],[]),!1):b()?(r.getToken()!==17&&_(9,[],[]),!0):(_(4,[],[]),!1)}function QO(t){switch(typeof t){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":{if(t){if(Array.isArray(t))return"array"}else return"null";return"object"}default:return"null"}}function e1(t,e,n,r){let o=e.slice(),s=kC(t,[]),a,c;for(;o.length>0&&(c=o.pop(),a=Ng(s,o),a===void 0&&n!==void 0);)typeof c=="string"?n={[c]:n}:n=[n];if(a)if(a.type==="object"&&typeof c=="string"&&Array.isArray(a.children)){let l=Ng(a,[c]);if(l!==void 0)if(n===void 0){if(!l.parent)throw new Error("Malformed AST");let u=a.children.indexOf(l.parent),f,m=l.parent.offset+l.parent.length;if(u>0){let d=a.children[u-1];f=d.offset+d.length}else f=a.offset+1,a.children.length>1&&(m=a.children[1].offset);return af(t,{offset:f,length:m-f,content:""},r)}else return af(t,{offset:l.offset,length:l.length,content:JSON.stringify(n)},r);else{if(n===void 0)return[];let u=`${JSON.stringify(c)}: ${JSON.stringify(n)}`,f=r.getInsertionIndex?r.getInsertionIndex(a.children.map(d=>d.children[0].value)):a.children.length,m;if(f>0){let d=a.children[f-1];m={offset:d.offset+d.length,length:0,content:","+u}}else a.children.length===0?m={offset:a.offset+1,length:0,content:u}:m={offset:a.offset+1,length:0,content:u+","};return af(t,m,r)}}else if(a.type==="array"&&typeof c=="number"&&Array.isArray(a.children)){let l=c;if(l===-1){let u=`${JSON.stringify(n)}`,f;if(a.children.length===0)f={offset:a.offset+1,length:0,content:u};else{let m=a.children[a.children.length-1];f={offset:m.offset+m.length,length:0,content:","+u}}return af(t,f,r)}else if(n===void 0&&a.children.length>=0){let u=c,f=a.children[u],m;if(a.children.length===1)m={offset:a.offset+1,length:a.length-2,content:""};else if(a.children.length-1===u){let d=a.children[u-1],p=d.offset+d.length,g=a.offset+a.length;m={offset:p,length:g-2-p,content:""}}else m={offset:f.offset,length:a.children[u+1].offset-f.offset,content:""};return af(t,m,r)}else if(n!==void 0){let u,f=`${JSON.stringify(n)}`;if(!r.isArrayInsertion&&a.children.length>c){let m=a.children[c];u={offset:m.offset,length:m.length,content:f}}else if(a.children.length===0||c===0)u={offset:a.offset+1,length:0,content:a.children.length===0?f:f+","};else{let m=c>a.children.length?a.children.length:c,d=a.children[m-1];u={offset:d.offset+d.length,length:0,content:","+f}}return af(t,u,r)}else throw new Error(`Can not ${n===void 0?"remove":r.isArrayInsertion?"insert":"modify"} Array index ${l} as length is not sufficient`)}else throw new Error(`Can not add ${typeof c!="number"?"index":"property"} to parent of type ${a.type}`);else{if(n===void 0)throw new Error("Can not delete in empty document");return af(t,{offset:s?s.offset:0,length:s?s.length:0,content:JSON.stringify(n)},r)}}function af(t,e,n){if(!n.formattingOptions)return[e];let r=LC(t,e),o=e.offset,i=e.offset+e.content.length;if(e.length===0||e.content.length===0){for(;o>0&&!Rg(r,o-1);)o--;for(;i<r.length&&!Rg(r,i);)i++}let s=V0(r,{offset:o,length:i-o},{...n.formattingOptions,keepLines:!1});for(let c=s.length-1;c>=0;c--){let l=s[c];r=LC(r,l),o=Math.min(o,l.offset),i=Math.max(i,l.offset+l.length),i+=l.content.length-l.length}let a=t.length-(r.length-i)-o;return[{offset:o,length:a,content:r.substring(o,i)}]}function LC(t,e){return t.substring(0,e.offset)+e.content+t.substring(e.offset+e.length)}var t1;(function(t){t[t.None=0]="None",t[t.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",t[t.UnexpectedEndOfString=2]="UnexpectedEndOfString",t[t.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",t[t.InvalidUnicode=4]="InvalidUnicode",t[t.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",t[t.InvalidCharacter=6]="InvalidCharacter"})(t1||(t1={}));var n1;(function(t){t[t.OpenBraceToken=1]="OpenBraceToken",t[t.CloseBraceToken=2]="CloseBraceToken",t[t.OpenBracketToken=3]="OpenBracketToken",t[t.CloseBracketToken=4]="CloseBracketToken",t[t.CommaToken=5]="CommaToken",t[t.ColonToken=6]="ColonToken",t[t.NullKeyword=7]="NullKeyword",t[t.TrueKeyword=8]="TrueKeyword",t[t.FalseKeyword=9]="FalseKeyword",t[t.StringLiteral=10]="StringLiteral",t[t.NumericLiteral=11]="NumericLiteral",t[t.LineCommentTrivia=12]="LineCommentTrivia",t[t.BlockCommentTrivia=13]="BlockCommentTrivia",t[t.LineBreakTrivia=14]="LineBreakTrivia",t[t.Trivia=15]="Trivia",t[t.Unknown=16]="Unknown",t[t.EOF=17]="EOF"})(n1||(n1={}));var o1=XO,Me=ZO,cf=kC,rs=Ng;var AC=RC;var r1;(function(t){t[t.InvalidSymbol=1]="InvalidSymbol",t[t.InvalidNumberFormat=2]="InvalidNumberFormat",t[t.PropertyNameExpected=3]="PropertyNameExpected",t[t.ValueExpected=4]="ValueExpected",t[t.ColonExpected=5]="ColonExpected",t[t.CommaExpected=6]="CommaExpected",t[t.CloseBraceExpected=7]="CloseBraceExpected",t[t.CloseBracketExpected=8]="CloseBracketExpected",t[t.EndOfFileExpected=9]="EndOfFileExpected",t[t.InvalidCommentToken=10]="InvalidCommentToken",t[t.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",t[t.UnexpectedEndOfString=12]="UnexpectedEndOfString",t[t.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",t[t.InvalidUnicode=14]="InvalidUnicode",t[t.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",t[t.InvalidCharacter=16]="InvalidCharacter"})(r1||(r1={}));function bn(t,e,n,r){return e1(t,e,n,r)}function Io(t,e){let n=e.slice(0).sort((o,i)=>{let s=o.offset-i.offset;return s===0?o.length-i.length:s}),r=t.length;for(let o=n.length-1;o>=0;o--){let i=n[o];if(i.offset+i.length<=r)t=LC(t,i);else throw new Error("Overlapping edit");r=i.offset}return t}var Bt=Y(require("fs")),Ws=require("util"),u7="\\\\.\\pipe\\";function Cr(t){return new Promise(e=>Bt.stat(t,(n,r)=>e(n?process.platform==="win32"&&n.code==="EBUSY"&&t.startsWith(u7):r.isFile())))}function i1(t){return new Promise(e=>Bt.stat(t,(n,r)=>e(!n&&r.isDirectory())))}function s1(t){return new Promise(e=>Bt.stat(t,(n,r)=>e(!n&&r.isSocket())))}var at=(0,Ws.promisify)(Bt.readFile),Lg=(0,Ws.promisify)(Bt.writeFile),Mve=(0,Ws.promisify)(Bt.appendFile),sl=(0,Ws.promisify)(Bt.rename),al=(0,Ws.promisify)(Bt.readdir),a1=(0,Ws.promisify)(Bt.unlink),os=t=>new Promise((e,n)=>Bt.mkdir(t,{recursive:!0},r=>r?n(r):e())),c1=(0,Ws.promisify)(Bt.rmdir),cl=(0,Ws.promisify)(Bt.rm),$ve=(0,Ws.promisify)(Bt.copyFile);function lf(t,e,n,r=!1){let o=t.relative(e,n);return(r||!!o)&&!o.startsWith("..")&&!t.isAbsolute(o)}var Ue=Y(require("vscode")),Ar=require("vscode"),fC=Y(require("path"));var nu=Y(require("path")),jp=Y(Mr());var d1=Y(require("os")),Fg=Y(require("fs")),m1=Y(require("path"));var Y0=require("events"),js=class{nodeEmitter=new Y0.EventEmitter;disposables;constructor(...e){this.disposables=e}event=e=>(this.nodeEmitter.on("event",e),{dispose:()=>{this.nodeEmitter.off("event",e)}});fire(e){this.nodeEmitter.emit("event",e)}dispose(){this.nodeEmitter.removeAllListeners(),this.disposables.forEach(e=>e.dispose())}},FC=class{nodeEmitter=new Y0.EventEmitter;event=e=>{let n=r=>r.results.push(e(r.data));return this.nodeEmitter.on("event",n),{dispose:()=>{this.nodeEmitter.off("event",n)}}};fire(e){let n=[];return this.nodeEmitter.emit("event",{data:e,results:n}),n}dispose(){this.nodeEmitter.removeAllListeners()}};function l1(t,e){return{sendTelemetryEvent:async()=>{},isCachedFlightEnabled:async()=>!1,product:e,package:t,getTelemetryLevel:()=>"off"}}function uf(t){return t.replaceAll(/ghcr.io\/devcontainers\/([^/,]+)\/([^/,]+)/g,"devcontainers-$1:$2")}var nr=(a=>(a[a.Trace=1]="Trace",a[a.Debug=2]="Debug",a[a.Info=3]="Info",a[a.Warning=4]="Warning",a[a.Error=5]="Error",a[a.Critical=6]="Critical",a[a.Off=7]="Off",a))(nr||{}),G0={info:3,debug:2,trace:1},f7=Object.keys(G0).reduce((t,e)=>(t[G0[e]]=e,t),[]);function UC(t){return G0[t]||3}function ro(t){return f7[t]||3}var Fe={write:()=>{},raw:()=>{},start:()=>Date.now(),stop:()=>{},event:()=>{}},Vs=/(\x9B|\x1B\[)[0-?]*[ -\/]*[@-~]/g;function z0(t,e){let n=!!e;return{event:r=>{n&&(n=!1,t.forEach(o=>o.event({type:"text",level:3,timestamp:Date.now(),text:e}))),t.forEach(o=>o.event(r))}}}function K0(t,e){let n=p7(t);return{event(r){let o=m7(r,e());o&&n.write(o)},join:n.join}}function J0(t,e,n){return{event(r){let o=d7(r,e(),n.getTime());o&&t(o)}}}function sn(t,e=2){return{event:t.event,write(n,r=e){t.event({type:"text",level:r,timestamp:Date.now(),text:n})},raw(n,r=e){t.event({type:"raw",level:r,timestamp:Date.now(),text:n})},start(n,r=e){let o=Date.now();return t.event({type:"start",level:r,timestamp:o,text:n}),o},stop(n,r,o=e){t.event({type:"stop",level:o,timestamp:Date.now(),text:n,startTimestamp:r})},get dimensions(){return t.dimensions},onDidChangeDimensions:t.onDidChangeDimensions}}function d7(t,e,n){if(!(!("level"in t)||t.level<e))switch(t.type){case"text":return`[${Ag(u1,`${t.timestamp-n} ms`)}] ${OC(t.text)}`;case"raw":return t.text;case"start":return 1>=e?`${Ag(w7,`[${t.timestamp-n} ms] Start`)}: ${OC(t.text)}`:`[${Ag(u1,`${t.timestamp-n} ms`)}] Start: ${OC(t.text)}`;case"stop":return 1>=e?`${Ag(v7,`[${t.timestamp-n} ms] Stop`)} (${t.timestamp-t.startTimestamp} ms): ${OC(t.text)}`:void 0;default:throw p1(t)}}function OC(t){return C7(t).replace(/\r?\n/g,`\r
`).replace(/(\r?\n)?$/,`\r
`)}function m7(t,e){if(!(!("level"in t)||t.level<e))switch(t.type){case"text":case"raw":return`[${new Date(t.timestamp).toISOString()}] ${q0(t.text)}`;case"start":return`[${new Date(t.timestamp).toISOString()}] Start: ${q0(t.text)}`;case"stop":return 2>=e?`[${new Date(t.timestamp).toISOString()}] Stop (${t.timestamp-t.startTimestamp} ms): ${q0(t.text)}`:void 0;default:throw p1(t)}}function q0(t){return t.replace(Vs,"").replace(/(\r?\n)?$/,d1.EOL)}function p1(t){return new Error(`Unknown log event type: ${t.type}`)}function p7(t){let e=[],n=!1,r,o;function i(){n=!1,o&&!e.length&&(r=void 0,o(),o=void 0)}function s(a,c=!1){if(a&&e.push(a),!c&&!n&&e.length){n=!0;let l=e.join("");e.length=0,Fg.appendFile(t,l,u=>{u&&(u.code==="ENOENT"?Fg.mkdir(m1.dirname(t),{recursive:!0},f=>{f?(i(),console.error(f)):Fg.appendFile(t,l,m=>{i(),m&&console.error(m),s()})}):(i(),console.error(u))),i(),s()})}}return{write:s,join:()=>r||(n?r=new Promise(a=>o=a):Promise.resolve())}}var h7="38;2;143;99;79",h1="38;2;99;143;79",g7="38;2;86;156;214",v7=h7,w7=h1,u1=h1,y7=g7;function Ag(t,e){return e.split(`
`).map(n=>`\x1B[1m\x1B[${t}m${n}\x1B[39m\x1B[22m`).join(`
`)}function C7(t){let e,n=0,r=[];for(Vs.lastIndex=0;e=Vs.exec(t);)r.push(f1(t.substring(n,e.index))),r.push(e[0]),n=Vs.lastIndex;return r.push(f1(t.substr(n))),r.join("")}function f1(t){let e=/(?<=^|[^A-Za-z0-9_\-\.])[0-9]+(\.[0-9]+)*(?=$|[^A-Za-z0-9_\-\.])/g,n,r=0,o=[];for(;n=e.exec(t);)o.push(t.substring(r,n.index)),o.push(Ag(y7,n[0])),r=e.lastIndex;return o.push(t.substr(r)),o.join("")}function ot(t){return t.split(/\r?\n/).map(e=>`\x1B[1m\x1B[31m${e}\x1B[39m\x1B[22m`).join(`\r
`)+`\r
`}function X0(t){return t.split(/\r?\n/).map(e=>`\x1B[1m\x1B[33m${e}\x1B[39m\x1B[22m`).join(`\r
`)+`\r
`}var pe=class extends Error{description;detail;step;originalError;manageContainer=!1;params;containerId;dockerParams;volumeName;repositoryPath;folderPath;containerProperties;config;actions=[];data={};constructor(e){var n;super(e.originalError&&e.originalError.message||e.description),Object.assign(this,e),this.actions||(this.actions=[]),this.data||(this.data={}),(n=this.originalError)!=null&&n.stack&&(this.stack=this.originalError.stack)}};var Se=Y(require("path")),Dx=Y(require("fs")),VY=Y(jC()),ok=require("string_decoder"),Wl=Y(tS());var Rp=Y(require("crypto")),YY=Y(DT()),Bl=Y(Mr()),qY=Y(lB()),GY=Y(iW());var yse=Y(require("path")),zR=require("string_decoder");var ux=Y(require("path")),nY=Y(require("stream")),rY=Y(require("os")),Pp=Y(require("child_process")),jv=require("string_decoder");var VV=Y(require("path")),YV=Y(require("assert"));var sW;(()=>{"use strict";var t={975:E=>{function x(T){if(typeof T!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(T))}function b(T,R){for(var L,N="",B=0,W=-1,z=0,V=0;V<=T.length;++V){if(V<T.length)L=T.charCodeAt(V);else{if(L===47)break;L=47}if(L===47){if(!(W===V-1||z===1))if(W!==V-1&&z===2){if(N.length<2||B!==2||N.charCodeAt(N.length-1)!==46||N.charCodeAt(N.length-2)!==46){if(N.length>2){var q=N.lastIndexOf("/");if(q!==N.length-1){q===-1?(N="",B=0):B=(N=N.slice(0,q)).length-1-N.lastIndexOf("/"),W=V,z=0;continue}}else if(N.length===2||N.length===1){N="",B=0,W=V,z=0;continue}}R&&(N.length>0?N+="/..":N="..",B=2)}else N.length>0?N+="/"+T.slice(W+1,V):N=T.slice(W+1,V),B=V-W-1;W=V,z=0}else L===46&&z!==-1?++z:z=-1}return N}var I={resolve:function(){for(var T,R="",L=!1,N=arguments.length-1;N>=-1&&!L;N--){var B;N>=0?B=arguments[N]:(T===void 0&&(T=process.cwd()),B=T),x(B),B.length!==0&&(R=B+"/"+R,L=B.charCodeAt(0)===47)}return R=b(R,!L),L?R.length>0?"/"+R:"/":R.length>0?R:"."},normalize:function(T){if(x(T),T.length===0)return".";var R=T.charCodeAt(0)===47,L=T.charCodeAt(T.length-1)===47;return(T=b(T,!R)).length!==0||R||(T="."),T.length>0&&L&&(T+="/"),R?"/"+T:T},isAbsolute:function(T){return x(T),T.length>0&&T.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var T,R=0;R<arguments.length;++R){var L=arguments[R];x(L),L.length>0&&(T===void 0?T=L:T+="/"+L)}return T===void 0?".":I.normalize(T)},relative:function(T,R){if(x(T),x(R),T===R||(T=I.resolve(T))===(R=I.resolve(R)))return"";for(var L=1;L<T.length&&T.charCodeAt(L)===47;++L);for(var N=T.length,B=N-L,W=1;W<R.length&&R.charCodeAt(W)===47;++W);for(var z=R.length-W,V=B<z?B:z,q=-1,ce=0;ce<=V;++ce){if(ce===V){if(z>V){if(R.charCodeAt(W+ce)===47)return R.slice(W+ce+1);if(ce===0)return R.slice(W+ce)}else B>V&&(T.charCodeAt(L+ce)===47?q=ce:ce===0&&(q=0));break}var Be=T.charCodeAt(L+ce);if(Be!==R.charCodeAt(W+ce))break;Be===47&&(q=ce)}var mt="";for(ce=L+q+1;ce<=N;++ce)ce!==N&&T.charCodeAt(ce)!==47||(mt.length===0?mt+="..":mt+="/..");return mt.length>0?mt+R.slice(W+q):(W+=q,R.charCodeAt(W)===47&&++W,R.slice(W))},_makeLong:function(T){return T},dirname:function(T){if(x(T),T.length===0)return".";for(var R=T.charCodeAt(0),L=R===47,N=-1,B=!0,W=T.length-1;W>=1;--W)if((R=T.charCodeAt(W))===47){if(!B){N=W;break}}else B=!1;return N===-1?L?"/":".":L&&N===1?"//":T.slice(0,N)},basename:function(T,R){if(R!==void 0&&typeof R!="string")throw new TypeError('"ext" argument must be a string');x(T);var L,N=0,B=-1,W=!0;if(R!==void 0&&R.length>0&&R.length<=T.length){if(R.length===T.length&&R===T)return"";var z=R.length-1,V=-1;for(L=T.length-1;L>=0;--L){var q=T.charCodeAt(L);if(q===47){if(!W){N=L+1;break}}else V===-1&&(W=!1,V=L+1),z>=0&&(q===R.charCodeAt(z)?--z==-1&&(B=L):(z=-1,B=V))}return N===B?B=V:B===-1&&(B=T.length),T.slice(N,B)}for(L=T.length-1;L>=0;--L)if(T.charCodeAt(L)===47){if(!W){N=L+1;break}}else B===-1&&(W=!1,B=L+1);return B===-1?"":T.slice(N,B)},extname:function(T){x(T);for(var R=-1,L=0,N=-1,B=!0,W=0,z=T.length-1;z>=0;--z){var V=T.charCodeAt(z);if(V!==47)N===-1&&(B=!1,N=z+1),V===46?R===-1?R=z:W!==1&&(W=1):R!==-1&&(W=-1);else if(!B){L=z+1;break}}return R===-1||N===-1||W===0||W===1&&R===N-1&&R===L+1?"":T.slice(R,N)},format:function(T){if(T===null||typeof T!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof T);return(function(R,L){var N=L.dir||L.root,B=L.base||(L.name||"")+(L.ext||"");return N?N===L.root?N+B:N+"/"+B:B})(0,T)},parse:function(T){x(T);var R={root:"",dir:"",base:"",ext:"",name:""};if(T.length===0)return R;var L,N=T.charCodeAt(0),B=N===47;B?(R.root="/",L=1):L=0;for(var W=-1,z=0,V=-1,q=!0,ce=T.length-1,Be=0;ce>=L;--ce)if((N=T.charCodeAt(ce))!==47)V===-1&&(q=!1,V=ce+1),N===46?W===-1?W=ce:Be!==1&&(Be=1):W!==-1&&(Be=-1);else if(!q){z=ce+1;break}return W===-1||V===-1||Be===0||Be===1&&W===V-1&&W===z+1?V!==-1&&(R.base=R.name=z===0&&B?T.slice(1,V):T.slice(z,V)):(z===0&&B?(R.name=T.slice(1,W),R.base=T.slice(1,V)):(R.name=T.slice(z,W),R.base=T.slice(z,V)),R.ext=T.slice(W,V)),z>0?R.dir=T.slice(0,z-1):B&&(R.dir="/"),R},sep:"/",delimiter:":",win32:null,posix:null};I.posix=I,E.exports=I}},e={};function n(E){var x=e[E];if(x!==void 0)return x.exports;var b=e[E]={exports:{}};return t[E](b,b.exports,n),b.exports}n.d=(E,x)=>{for(var b in x)n.o(x,b)&&!n.o(E,b)&&Object.defineProperty(E,b,{enumerable:!0,get:x[b]})},n.o=(E,x)=>Object.prototype.hasOwnProperty.call(E,x),n.r=E=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(E,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(E,"__esModule",{value:!0})};var r={};let o;n.r(r),n.d(r,{URI:()=>m,Utils:()=>k}),typeof process=="object"?o=process.platform==="win32":typeof navigator=="object"&&(o=navigator.userAgent.indexOf("Windows")>=0);let i=/^\w[\w\d+.-]*$/,s=/^\//,a=/^\/\//;function c(E,x){if(!E.scheme&&x)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${E.authority}", path: "${E.path}", query: "${E.query}", fragment: "${E.fragment}"}`);if(E.scheme&&!i.test(E.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(E.path){if(E.authority){if(!s.test(E.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(a.test(E.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let l="",u="/",f=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class m{static isUri(x){return x instanceof m||!!x&&typeof x.authority=="string"&&typeof x.fragment=="string"&&typeof x.path=="string"&&typeof x.query=="string"&&typeof x.scheme=="string"&&typeof x.fsPath=="string"&&typeof x.with=="function"&&typeof x.toString=="function"}scheme;authority;path;query;fragment;constructor(x,b,I,T,R,L=!1){typeof x=="object"?(this.scheme=x.scheme||l,this.authority=x.authority||l,this.path=x.path||l,this.query=x.query||l,this.fragment=x.fragment||l):(this.scheme=(function(N,B){return N||B?N:"file"})(x,L),this.authority=b||l,this.path=(function(N,B){switch(N){case"https":case"http":case"file":B?B[0]!==u&&(B=u+B):B=u}return B})(this.scheme,I||l),this.query=T||l,this.fragment=R||l,c(this,L))}get fsPath(){return C(this,!1)}with(x){if(!x)return this;let{scheme:b,authority:I,path:T,query:R,fragment:L}=x;return b===void 0?b=this.scheme:b===null&&(b=l),I===void 0?I=this.authority:I===null&&(I=l),T===void 0?T=this.path:T===null&&(T=l),R===void 0?R=this.query:R===null&&(R=l),L===void 0?L=this.fragment:L===null&&(L=l),b===this.scheme&&I===this.authority&&T===this.path&&R===this.query&&L===this.fragment?this:new p(b,I,T,R,L)}static parse(x,b=!1){let I=f.exec(x);return I?new p(I[2]||l,D(I[4]||l),D(I[5]||l),D(I[7]||l),D(I[9]||l),b):new p(l,l,l,l,l)}static file(x){let b=l;if(o&&(x=x.replace(/\\/g,u)),x[0]===u&&x[1]===u){let I=x.indexOf(u,2);I===-1?(b=x.substring(2),x=u):(b=x.substring(2,I),x=x.substring(I)||u)}return new p("file",b,x,l,l)}static from(x){let b=new p(x.scheme,x.authority,x.path,x.query,x.fragment);return c(b,!0),b}toString(x=!1){return w(this,x)}toJSON(){return this}static revive(x){if(x){if(x instanceof m)return x;{let b=new p(x);return b._formatted=x.external,b._fsPath=x._sep===d?x.fsPath:null,b}}return x}}let d=o?1:void 0;class p extends m{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=C(this,!1)),this._fsPath}toString(x=!1){return x?w(this,!0):(this._formatted||(this._formatted=w(this,!1)),this._formatted)}toJSON(){let x={$mid:1};return this._fsPath&&(x.fsPath=this._fsPath,x._sep=d),this._formatted&&(x.external=this._formatted),this.path&&(x.path=this.path),this.scheme&&(x.scheme=this.scheme),this.authority&&(x.authority=this.authority),this.query&&(x.query=this.query),this.fragment&&(x.fragment=this.fragment),x}}let g={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function h(E,x,b){let I,T=-1;for(let R=0;R<E.length;R++){let L=E.charCodeAt(R);if(L>=97&&L<=122||L>=65&&L<=90||L>=48&&L<=57||L===45||L===46||L===95||L===126||x&&L===47||b&&L===91||b&&L===93||b&&L===58)T!==-1&&(I+=encodeURIComponent(E.substring(T,R)),T=-1),I!==void 0&&(I+=E.charAt(R));else{I===void 0&&(I=E.substr(0,R));let N=g[L];N!==void 0?(T!==-1&&(I+=encodeURIComponent(E.substring(T,R)),T=-1),I+=N):T===-1&&(T=R)}}return T!==-1&&(I+=encodeURIComponent(E.substring(T))),I!==void 0?I:E}function v(E){let x;for(let b=0;b<E.length;b++){let I=E.charCodeAt(b);I===35||I===63?(x===void 0&&(x=E.substr(0,b)),x+=g[I]):x!==void 0&&(x+=E[b])}return x!==void 0?x:E}function C(E,x){let b;return b=E.authority&&E.path.length>1&&E.scheme==="file"?`//${E.authority}${E.path}`:E.path.charCodeAt(0)===47&&(E.path.charCodeAt(1)>=65&&E.path.charCodeAt(1)<=90||E.path.charCodeAt(1)>=97&&E.path.charCodeAt(1)<=122)&&E.path.charCodeAt(2)===58?x?E.path.substr(1):E.path[1].toLowerCase()+E.path.substr(2):E.path,o&&(b=b.replace(/\//g,"\\")),b}function w(E,x){let b=x?v:h,I="",{scheme:T,authority:R,path:L,query:N,fragment:B}=E;if(T&&(I+=T,I+=":"),(R||T==="file")&&(I+=u,I+=u),R){let W=R.indexOf("@");if(W!==-1){let z=R.substr(0,W);R=R.substr(W+1),W=z.lastIndexOf(":"),W===-1?I+=b(z,!1,!1):(I+=b(z.substr(0,W),!1,!1),I+=":",I+=b(z.substr(W+1),!1,!0)),I+="@"}R=R.toLowerCase(),W=R.lastIndexOf(":"),W===-1?I+=b(R,!1,!0):(I+=b(R.substr(0,W),!1,!0),I+=R.substr(W))}if(L){if(L.length>=3&&L.charCodeAt(0)===47&&L.charCodeAt(2)===58){let W=L.charCodeAt(1);W>=65&&W<=90&&(L=`/${String.fromCharCode(W+32)}:${L.substr(3)}`)}else if(L.length>=2&&L.charCodeAt(1)===58){let W=L.charCodeAt(0);W>=65&&W<=90&&(L=`${String.fromCharCode(W+32)}:${L.substr(2)}`)}I+=b(L,!0,!1)}return N&&(I+="?",I+=b(N,!1,!1)),B&&(I+="#",I+=x?B:h(B,!1,!1)),I}function y(E){try{return decodeURIComponent(E)}catch{return E.length>3?E.substr(0,3)+y(E.substr(3)):E}}let S=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function D(E){return E.match(S)?E.replace(S,(x=>y(x))):E}var _=n(975);let A=_.posix||_,U="/";var k;(function(E){E.joinPath=function(x,...b){return x.with({path:A.join(x.path,...b)})},E.resolvePath=function(x,...b){let I=x.path,T=!1;I[0]!==U&&(I=U+I,T=!0);let R=A.resolve(I,...b);return T&&R[0]===U&&!x.authority&&(R=R.substring(1)),x.with({path:R})},E.dirname=function(x){if(x.path.length===0||x.path===U)return x;let b=A.dirname(x.path);return b.length===1&&b.charCodeAt(0)===46&&(b=""),x.with({path:b})},E.basename=function(x){return A.basename(x.path)},E.extname=function(x){return A.extname(x.path)}})(k||(k={})),sW=r})();var{URI:Ce,Utils:Lo}=sW;var aW=Y(require("path"));var Rl=Y(Mr());function It(t,e){if(Pv(e)){let n=t.dirname(e);return{isWorkspaceFile:!0,workspaceOrFolderPath:e,rootFolderPath:n,configFolderPath:n}}return{isWorkspaceFile:!1,workspaceOrFolderPath:e,rootFolderPath:e,configFolderPath:e}}function Pv(t){return aW.extname(t)===".code-workspace"}async function TS(t,e){if(e.isWorkspaceFile)try{let n=e.rootFolderPath,r=(await t.readFile(e.workspaceOrFolderPath)).toString(),i=Me(r).folders;if(i&&i.length>0){for(let s of i){let a=s.path,c;if(a){if(t.path.isAbsolute(a))return Rl.t("Workspace contains an absolute folder path '{0}'.",a);c=t.path.resolve(n,a)}else{let l=s.uri;return l?Ce.parse(l).scheme!=="file"?Rl.t("Workspace contains folder '{0}' not on the local file system.",l):Rl.t("Workspace contains an absolute folder path '{0}'.",l):Rl.t("Workspace contains a folder that defines neither a path nor a URI.")}if(!moe(t,c,n))return Rl.t("Folder '{0}' is not a subfolder of shared root folder '{1}'.",c,n)}return}return Rl.t("Workspace does not define any folders")}catch(n){return Rl.t("Problems loading workspace file {0}: {1}",e.workspaceOrFolderPath,n&&(n.message||n.toString()))}}function moe(t,e,n){return e===n?!0:!e||!n||n.length>e.length||e.length>n.length&&e.charAt(n.length)!==t.path.sep?!1:poe(t.platform,n,e.substr(0,n.length))}function poe(t,e,n){return t==="linux"?e===n:e.toLowerCase()===n.toLowerCase()}var lr=Y(require("path")),KS=Y(tS()),FR=Y(require("crypto")),GS=Y(bv()),UV=require("string_decoder");var OR=Y(Mr());var gp=Y(require("path"));async function fj(t,e){let n=await Boe(t),r=n["agent-socket"];if(!r){e.write("gpg-agent: No agent-socket found in container.");return}let o=n.homedir;try{let{stdout:a}=await t.exec(`ls '${o}/private-keys-v1.d' 2>/dev/null`);if(a.trim()){e.write("gpg-agent: Private keys found in container, not forwarding.");return}}catch{}let i=!1,s=n["keyboxd-socket"];if(s)try{await t.exec(`grep -e '^s*use-keyboxds*$' '${o}/common.conf' 2>/dev/null`),i=!0}catch{}return{homedir:o,gpgSocket:r,keyboxdSocket:s,useKeyboxd:i}}async function dj(t,e,n,r){let o=await Hoe(t,r),i=o["agent-extra-socket"];if(!i){r.write(`gpg-agent: No agent-extra-socket found on ${t.type} host.`);return}let s=o.homedir,a=!1,c=o["keyboxd-socket"];if(c)try{let w=(await t.readFile(t.path.join(s,"common.conf"))).toString();a=/^\s*use-keyboxd\s*$/m.test(w)}catch{}let l=gp.posix.join(n.homedir,"pubring.kbx"),u=await Ai(e,l);u&&r.write(`GPG forwarding: ${l} exists in container.`);let f=gp.posix.join(n.homedir,"pubring.gpg"),m=await Ai(e,f);m&&r.write(`GPG forwarding: ${f} exists in container.`);let d=gp.posix.join(n.homedir,"trustdb.gpg"),p=await Ai(e,d);p&&r.write(`GPG forwarding: ${d} exists in container.`);let g=a&&n.keyboxdSocket&&!n.useKeyboxd&&!u&&!m,h=a&&(n.useKeyboxd||g),v=[],C=(async()=>{if(await e.exec(`mkdir -p -m 700 '${gp.posix.dirname(n.gpgSocket)}'`),h)g&&await e.exec(`mkdir -p -m 700 '${n.homedir}' && echo '
use-keyboxd' >> '${gp.posix.join(n.homedir,"common.conf")}'`);else if(a||n.useKeyboxd){if(!n.useKeyboxd&&!u&&!m||n.useKeyboxd&&(await e.exec("gpg --export --export-options backup")).stdout.trim().length===0){try{let w=await X({exec:t.exec,cmd:"gpg",args:["--export","--export-options","backup"],output:r});w.stdout.byteLength&&v.push(async()=>{try{await e.exec(`${Ff(w.stdout.byteLength)} | gpg --import --import-options restore`,{stdin:w.stdout})}catch(y){r.write(`GPG forwarding: Failed to import public keys: ${y==null?void 0:y.message}`)}})}catch(w){r.write(`GPG forwarding: Failed to export public keys: ${w==null?void 0:w.message}`)}try{let w=await X({exec:t.exec,cmd:"gpgsm",args:["--export","--armor"],output:r});w.stdout.byteLength&&v.push(async()=>{try{await e.exec(`${Ff(w.stdout.byteLength)} | gpgsm --import`,{stdin:w.stdout})}catch(y){r.write(`GPG forwarding: Failed to import certificates: ${y==null?void 0:y.message}`)}})}catch(w){r.write(`GPG forwarding: Failed to export certificates: ${w==null?void 0:w.message}`)}}}else u||await kl(t,e,t.path.join(s,"pubring.kbx"),l,"gpg"),m||await kl(t,e,t.path.join(s,"pubring.gpg"),f,"gpg"),p||await kl(t,e,t.path.join(s,"trustdb.gpg"),d,"gpg");if((a||n.useKeyboxd)&&!p)try{let w=await X({exec:t.exec,cmd:"gpg",args:["--export-ownertrust"],output:r});w.stdout.byteLength&&v.push(async()=>{try{await e.exec(`${Ff(w.stdout.byteLength)} | gpg --import-ownertrust`,{stdin:w.stdout})}catch(y){r.write(`GPG forwarding: Failed to import ownertrust: ${y==null?void 0:y.message}`)}})}catch(w){r.write(`GPG forwarding: Failed to export ownertrust: ${w==null?void 0:w.message}`)}await Woe(t,r)})();return{cliHost:t,remoteGpgSocket:n.gpgSocket,localGpgSocket:i,remoteKeyboxdSocket:h?n.keyboxdSocket:void 0,localKeyboxdSocket:h?c:void 0,importTasks:async()=>{await C;for(let w of v)await w()}}}async function Hoe(t,e){try{let{stdout:n}=await X({exec:t.exec,cmd:"gpgconf",args:["--list-dirs"],output:e,print:!0});return n.toString().trim().split(/\r?\n/).reduce((r,o)=>{let i=o.indexOf(":");if(i!==-1){let s=decodeURIComponent(o.substring(i+1));t.platform==="win32"&&/^\/.\//.test(s)&&(s=`${s.charAt(1)}:${s.substring(2).replace(/\//g,"\\")}`),r[o.substring(0,i)]=s}return r},{})}catch{return{}}}async function Boe(t){try{let{stdout:e}=await t.exec("gpgconf --list-dirs");return e.trim().split(`
`).reduce((n,r)=>{let o=r.indexOf(":");return o!==-1&&(n[r.substring(0,o)]=decodeURIComponent(r.substring(o+1))),n},{})}catch{return{}}}async function Woe(t,e){try{await X({exec:t.exec,cmd:"gpg-connect-agent",args:["updatestartuptty","/bye"],output:e})}catch{}}var fR=Y(require("path"));async function Tv(t,e,n){if(!("exec"in t)){for(let r=e,o="";r!==o;o=r,r=t.path.dirname(r))if(await t.isFile(t.path.join(r,".git","config")))return r;return}try{let{stdout:r}=await X({exec:t.exec,cmd:"git",args:["rev-parse","--show-cdup"],cwd:e,output:n}),o=r.toString().trim();return t.path.resolve(e,o)}catch{return}}async function dR(t,e,n,r){try{return await X({exec:t.exec,cmd:"git",args:["ls-remote",e],cwd:".",env:n,output:r,print:"onerror"}),!0}catch(o){return(o==null?void 0:o.code)==="ENOENT"?void 0:!1}}async function hj(t,e,n,r,o){let i=r[1],s={get:"fill",store:"approve",erase:"reject"}[i];if(s===void 0)throw new Error(`Expected get, store or erase, got: ${i}`);let a=await mj(n?t:e,s,o).catch(c=>{if(n)throw c});if(!n&&(a==="ENOENT"||(a==null?void 0:a.code)!==0)){let c=await mj(t,s,o);c!=="ENOENT"&&(a=c,c.code===0&&(n=!0))}return a==="ENOENT"?{result:{stdout:"",stderr:"",code:127},preferLocalCLIHost:n}:{result:a,preferLocalCLIHost:n}}async function mj({exec:t},e,n){try{let{stdout:r,stderr:o}=await X({exec:t,cmd:"git",args:["credential",e],env:{GIT_TERMINAL_PROMPT:"0"},stdin:Buffer.from(n),output:Fe});return{stdout:r.toString(),stderr:o.toString(),code:0}}catch(r){if((r==null?void 0:r.code)==="ENOENT"||(r==null?void 0:r.code)==="EPIPE")return"ENOENT";if(!(r&&r.stdout&&r.stderr))throw r;let{stdout:o,stderr:i,code:s}=r;return{stdout:o.toString(),stderr:i.toString(),code:s||0}}}async function gj(t,e,n){let r=await mR(t,e,n);if(!r)return;r.startsWith("refs/")&&(r=r.substr(5)),r.startsWith("remotes/")&&(r=r.substr(8));let o=r.indexOf("/");if(o===-1)return;let i=r.substr(0,o),s=r.substr(o+1);try{let{stdout:a}=await X({exec:t.exec,cmd:"git",args:["remote","get-url",i],cwd:e.rootFolderPath,output:n}),c=a.toString().trim();if(c.endsWith(".git")&&(c=c.substr(0,c.length-4)),c.startsWith("https://github.com/")){let l=await qoe(t,e,i,n);if(l&&s!==l)return`${c}/tree/${s}`}return c}catch{return}}async function LS(t,e,n){if(!("exec"in t)){let o=await Tv(t,e.rootFolderPath,n);if(!o)return;try{return(await t.readFile(t.path.join(o,".git","config"))).toString().split(/^\[/m).filter(a=>a.startsWith("remote")).map(a=>(/^\s*url\s*=\s*(\S+)/m.exec(a)||[])[1]).filter(Boolean)}catch(i){if((i==null?void 0:i.code)!=="ENOENT")throw i;return[]}}let r;try{let{stdout:o}=await X({exec:t.exec,cmd:"git",args:["remote","-v"],cwd:e.rootFolderPath,output:n});r=o.toString()}catch{return}return Array.from(new Set(joe(/^[^\s]+\s+([^\s]+)/gm,r,1)))}function joe(t,e,n){return{[Symbol.iterator]:function*(){let r;for(;r=t.exec(e);)yield r[n],t.lastIndex===r.index&&t.lastIndex++}}}async function vj(t,e,n){return await Voe(t,e,n)||Yoe(t,e,n)}async function Voe(t,e,n){try{let{stdout:r}=await X({exec:t.exec,cmd:"git",args:["status","--porcelain"],cwd:e.rootFolderPath,output:n});return!!r.toString().trim()}catch{return}}async function Yoe(t,e,n){let r=await mR(t,e,n);if(r)try{let{stdout:o}=await X({exec:t.exec,cmd:"git",args:["log",`${r}..HEAD`],cwd:e.rootFolderPath,output:n});return!!o.toString().trim()}catch{return}}async function wj(t,e,n,r){let o=await mR(t,e,r);if(!o)return!1;try{let i=t.platform==="win32"?n.replace(/\\/g,"/"):n;return await X({exec:t.exec,cmd:"git",args:["cat-file","-e",`${o}:${i}`],cwd:e.rootFolderPath,output:r}),!0}catch{return!1}}async function mR(t,e,n){try{let{stdout:r}=await X({exec:t.exec,cmd:"git",args:["rev-parse","--abbrev-ref","--symbolic-full-name","@{u}"],cwd:e.rootFolderPath,output:n});return r.toString().trim()}catch{return}}async function qoe(t,e,n,r){try{let{stdout:o}=await X({exec:t.exec,cmd:"git",args:["remote","show",n],cwd:e.rootFolderPath,output:r});return(o.toString().match(/^\s*HEAD branch:\s*(.*)$/m)||[])[1]}catch{return}}async function yj(t,e,n,r,o,i,s){let{extensionPath:a,onDidInput:c}=t;if(await e.isFolder(e.path.join(n,".git"))){if(s&&(e.type==="container"&&await Fi({ptyExec:e.ptyExec,cmd:"git",args:["config","--global","--add","safe.directory",n],cwd:n,output:sn(o,3)}),await Goe(e,n,o))){let d=r.tokenEnvVar?{...r.env,GIT_ASKPASS:e.path.join(a,"scripts","gitAskPass.sh"),GIT_TOKEN:e.env[r.tokenEnvVar]}:r.env;return{gitClone:Fi({ptyExec:e.ptyExec,cmd:"git",args:["pull","--ff-only"],cwd:n,env:d,onDidInput:c,output:sn(o,3)}).catch(g=>g),gitUnshallow:void 0}}return{gitClone:void 0,gitUnshallow:void 0}}await e.mkdirp(n);let l=r.tokenEnvVar?{...r.env,GIT_ASKPASS:e.path.join(a,"scripts","gitAskPass.sh"),GIT_TOKEN:e.env[r.tokenEnvVar]}:r.env,u=[];if(r.fullClone||u.push("--depth","1"),r.branch&&u.push("--branch",r.branch),r.recurseSubmodules&&u.push("--recurse-submodules"),e.type==="container"&&r.url.startsWith("file:")){let d=e.path.join(Ce.parse(r.url).path,".git");await Fi({ptyExec:e.ptyExec,cmd:"git",args:["config","--global","--add","safe.directory",d],cwd:n,env:l,output:sn(o,3)})}let f=Fi({ptyExec:e.ptyExec,cmd:"git",args:["clone",...u,r.url,"."],cwd:n,env:l,onDidInput:c,output:sn(o,3)}),m=r.fullClone?f:(async()=>(await f,await Fi({ptyExec:e.ptyExec,cmd:"git",args:["config","remote.origin.fetch","+refs/heads/*:refs/remotes/origin/*"],cwd:n,env:l,output:i}),Fi({ptyExec:e.ptyExec,cmd:"git",args:["fetch","--unshallow","--tags"],cwd:n,env:l,onDidInput:c,output:i})))();return{gitClone:f,gitUnshallow:m}}async function Goe(t,e,n){return(await X({exec:t.exec,cmd:"git",args:["status","--porcelain"],cwd:e,output:n}).catch(o=>o)).stdout.toString().trim()===""}async function AS(t,e,n){let r=await Rv(t,e,[".gitconfig"],"git"," && grep -e '^\\[' ~/.gitconfig | grep -v -E '^\\[(filter|safe)([[:blank:]]+|\\])'"),o=await zoe(t,e,n);(r||o)&&(await Koe(t,e.shellServer),Joe(t,e).catch(i=>{t.output.write(`Error copying allowed signers: ${(i==null?void 0:i.stack)||(i==null?void 0:i.message)||i}`,5)}))}var Cj=["git","config"];async function zoe(t,e,n){let{cliHost:r}=t,o=await pj(r);if(!await r.isFile(o)&&(r.type==="local"||(r=await Gr(process.cwd(),t.loadNativeModule,t.output),o=await pj(r),!await r.isFile(o))))return!1;let i=(async()=>{let s=await n,a=s.XDG_CONFIG_HOME?[s.XDG_CONFIG_HOME]:[e.homeFolder,".config"];return fR.posix.join(...a,...Cj)})();return kl(r,e.shellServer,o,i,"git")}async function pj(t){let{env:e}=t,n=e.XDG_CONFIG_HOME?[e.XDG_CONFIG_HOME]:[await t.homedir(),".config"];return t.path.join(...n,...Cj)}async function Koe(t,e){await e.exec(`# Cleaning up git config
for key in core.editor core.sshCommand gpg.program gpg.openpgp.program gpg.x509.program gpg.ssh.program
do
	value="$(git config --global --get $key)"
	executable="\${value%% *}"
	([ -z "$executable" ] || [ "$executable" = "${t.product.applicationName}" ]) && continue
	command -v "$executable" >/dev/null 2>&1 || (echo "Removing Git config key: $key = $value" && git config --global --unset $key)
done
git config --global --unset http.sslBackend || true`)}async function Joe(t,e){let{cliHost:n,output:r}=t,{homeFolder:o,shellServer:i}=e,s=await Xoe(n,"gpg.ssh.allowedSignersFile",r);if(!s)return;let a=await n.homedir(),c=/^~[/\\]/.test(s)?n.path.join(a,s.substring(2)):s,l=n.path.resolve(a,c);r.write(`Copying allowed signers file: ${l}`);let u=n.path.relative(a,l),f=n.platform==="win32"?u.replace(/\\/g,"/"):u,m=fR.posix.resolve(o,f);await kl(n,i,l,m,"ssh")&&await i.exec(`git config --global gpg.ssh.allowedSignersFile '${m}'`)}async function Xoe(t,e,n){try{let{stdout:r}=await X({exec:t.exec,cmd:"git",args:["config","--global","--get",e],output:n}),o=r.toString();return t.platform==="win32"&&o.endsWith(`\r
`)?o.substring(0,o.length-2):o.endsWith(`
`)?o.substring(0,o.length-1):o}catch{return}}var Ll=require("stream");async function Ej(t,e){let{stdout:n}=await t.exec(`cat /proc/${e}/environ`,{logOutput:!1});return n.split("\0").map(r=>{let o=r.indexOf("=");return o!==-1?[r.slice(0,o),r.slice(o+1)]:[]}).reduce((r,[o,i])=>(o&&(r[o]=i),r),{})}async function pR(t){let e=`for pid in \`cd /proc && ls -d [0-9]*\`; do { echo $pid ; readlink /proc/$pid/cwd || echo ; readlink /proc/$pid/ns/mnt || echo ; cat /proc/$pid/stat | tr "
" " " ; echo ; cat /proc/$pid/environ | tr "
" " " ; echo ; cat < /proc/$pid/cmdline | tr "
" " " ; echo ; } ; echo --- ; done ; readlink /proc/self/ns/mnt 2>/dev/null`,{stdout:n}=await t.exec(e,{logOutput:!1}),r=6,o=n.split(`
---
`),i=o.pop().trim();return{processes:o.map(a=>a.split(`
`)).filter(a=>a.length>=r).map(([a,c,l,u,f,m])=>{let d=/.*\) [^ ]* ([^ ]*) ([^ ]*)/.exec(u)||[];return{pid:a,ppid:d[1],pgrp:d[2],cwd:c,mntNS:l,cmd:m.replace(/\0/g," "),env:f.split("\0").reduce((p,g)=>{let h=g.indexOf("=");return h!==-1&&(p[g.substr(0,h)]=g.substr(h+1)),p},{})}}),mntNS:i}}function Sj(t){let e={};return t.forEach(n=>e[n.pid]={process:n,childProcesses:[]}),t.filter(n=>n.ppid).forEach(n=>{var r;return(r=e[n.ppid])==null?void 0:r.childProcesses.push(e[n.pid])}),e}function hR(t,e="  ",n="  "){return`${n}${t.process.pid}: ${t.process.cmd}
${t.childProcesses.map(r=>hR(r,e,n+e))}`}var Oi=Y(require("path")),Ij=Y(require("fs"));async function ni(t,e=process.cwd(),n=process.env){if(process.platform!=="win32")return t;if(Oi.isAbsolute(t))return await gR(t)||t;if(/[/\\]/.test(t)){let s=Oi.join(e,t);return await gR(s)||s}let r,o;if(n){for(let s of Object.keys(n))if(s.toLowerCase()==="path"){let a=n[s];typeof a=="string"&&(r=a,o=a.split(Oi.delimiter).filter(Boolean),o.push(Oi.join(n.ProgramW6432||"C:\\Program Files","Docker\\Docker\\resources\\bin")));break}}if(o===void 0||o.length===0){let s=new Error(`No PATH to look up executable '${t}'.`);throw s.code="ENOENT",s}for(let s of o){let a;Oi.isAbsolute(s)?a=Oi.join(s,t):a=Oi.join(e,s,t);let c=await gR(a);if(c)return c}let i=new Error(`Exectuable '${t}' not found on PATH '${r}'.`);throw i.code="ENOENT",i}var xj=process.env.PATHEXT,_j=xj?xj.toLowerCase().split(";"):[".com",".exe",".bat",".cmd"];async function gR(t){if(_j.indexOf(Oi.extname(t))!==-1)return await Dj(t)?t:void 0;for(let e of _j){let n=t+e;if(await Dj(n))return n}}function Dj(t){return new Promise(e=>Ij.stat(t,(n,r)=>e(!n&&r.isFile())))}var vR="dev-containers-",Pj="credentials not found in native keychain";async function Rj(t,e,n,r,o,i){let s=await bj(n?t:e,r,o,i).catch(a=>{if(n)throw a});return!n&&(s==null?void 0:s.code)!==0&&(s=await bj(t,r,o,i),s.code===0&&(n=!0)),{result:s,preferLocalCLIHost:n}}async function bj(t,e,n,r){let o,i=e[1];try{let s=i==="store"?JSON.parse(n).ServerURL:n.trim(),a=await Zoe(t,s,r);if(!a)return{stdout:i==="get"?Pj:"Docker credential helper not found.",stderr:"",code:1};if("identitytoken"in a)return i!=="get"?{stdout:`Docker credential command not supported without credential helper: ${i}.`,stderr:"",code:1}:{stdout:JSON.stringify({ServerURL:s,Username:"<token>",Secret:a.identitytoken}),stderr:"",code:0};if("auth"in a){if(i!=="get")return{stdout:`Docker credential command not supported without credential helper: ${i}.`,stderr:"",code:1};let[u,f]=Buffer.from(a.auth,"base64").toString().split(":");return{stdout:JSON.stringify({ServerURL:s,Username:u,Secret:f}),stderr:"",code:0}}o=`docker-credential-${a.helper}`;let{stdout:c,stderr:l}=await X({exec:t.exec,cmd:o,args:e.slice(1),stdin:Buffer.from(n),output:Fe});return{stdout:c.toString(),stderr:l.toString(),code:0}}catch(s){if(o&&((s==null?void 0:s.code)==="ENOENT"||(s==null?void 0:s.code)==="EPIPE"))return{stdout:i==="get"?Pj:`Docker credential helper '${o}' not found: ${(s==null?void 0:s.message)||String(s)}.`,stderr:"",code:1};if(!(s&&s.stdout&&s.stderr))throw s;let{stdout:a,stderr:c,code:l}=s;return{stdout:a.toString(),stderr:c.toString(),code:l||0}}}async function Zoe(t,e,n){var o,i,s,a,c;n.write(`Looking up Docker credential helper for '${e}'.`);try{let l=Me((await t.readFile(t.path.join(await t.homedir(),".docker","config.json"))).toString()),u=Ce.parse(e).authority||e,f=(o=l==null?void 0:l.credHelpers)==null?void 0:o[u];if(f)return{helper:f};let m=(s=(i=l==null?void 0:l.auths)==null?void 0:i[e])==null?void 0:s.identitytoken;if(m)return{identitytoken:m};let d=(c=(a=l==null?void 0:l.auths)==null?void 0:a[e])==null?void 0:c.auth;if(d)return{auth:d};if(l!=null&&l.credsStore)return{helper:l.credsStore}}catch(l){(l==null?void 0:l.code)!=="ENOENT"&&n.write(`Error reading Docker config: ${(l==null?void 0:l.message)||String(l)}.`)}let r=await kj(t);return r?{helper:r}:void 0}async function wR(t,e){let n=t.path.join(await t.homedir(),".docker","config.json");try{let r=await t.readFile(n),o=Me(r.toString());return!!(o!=null&&o.credsStore)||Object.keys((o==null?void 0:o.credHelpers)||{}).some(i=>{var s;return(s=o==null?void 0:o.credHelpers)==null?void 0:s[i]})||Object.keys((o==null?void 0:o.auths)||{}).some(i=>{var s,a;return(a=(s=o==null?void 0:o.auths)==null?void 0:s[i])==null?void 0:a.auth})||Tj(t)}catch(r){return(r==null?void 0:r.code)!=="ENOENT"?(e.write(`Error reading Docker config (${n}): ${(r==null?void 0:r.stack)||(r==null?void 0:r.message)||String(r)}.`),!1):Tj(t)}}async function Tj(t){let e=await kj(t);return!!e&&await Qoe(t,`docker-credential-${e}`)}async function kj(t){if(t.platform==="darwin")return"osxkeychain";if(t.platform==="win32")return"wincred";if(t.platform==="linux")try{return await X({exec:t.exec,cmd:"/bin/sh",args:["-c","command -v docker-credential-pass >/dev/null 2>&1"],output:Fe}),"pass"}catch{return"secretservice"}}async function Qoe(t,e){try{return t.platform==="win32"?!!await ni(e,t.cwd,t.env):(await X({exec:t.exec,cmd:"/bin/sh",args:["-c",`command -v '${e}' >/dev/null 2>&1`],output:Fe}),!0)}catch{return!1}}function Nl(t){return`remote.containers.${t}`}function us(t){return`dev.containers.${t}`}var CR=Y(require("path"));var eie=Y(require("http")),tie=Y(require("https"));function yR(t,e={}){return new Promise((n,r)=>{let o=t.startsWith("https:")?tie:eie,i;if(Object.keys(e).length>0){let a=new URL(t);i={headers:e,host:a.host,path:a.pathname}}o.get(i??t,a=>{var c;if(a.statusCode<200||a.statusCode>299){if(a.statusCode===302){let l=(c=a.headers)==null?void 0:c.location;l&&n(yR(l,e))}r(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`))}else{a.on("error",r);let l=[];a.on("data",u=>l.push(u)),a.on("end",()=>n(Buffer.concat(l)))}}).on("error",r)})}async function cr(t){let e=await at(CR.join(t,"package.json"),"utf8");return JSON.parse(e)}async function kv(t){let e=await at(CR.join(t,"product.json"),"utf8"),n=JSON.parse(e);return n.commit||(n.commit=await vp(n.quality)),n.serverDataFolderName||(n.serverDataFolderName=".vscode-server-oss"),n}async function vp(t="insider"){let e=`https://update.code.visualstudio.com/api/update/server-linux-x64/${t}/latest`,n=await yR(e);return JSON.parse(n.toString()).version}function FS(t){return["bin",t.serverApplicationName]}async function Wt(t){return new Promise(e=>setTimeout(e,t))}var Wie=bV(),OV=VS(),LR=LV(),jie=FV(),Vie=["docker","oras","skopeo"];async function JS(t,e,n){var R,L,N,B,W,z;let{cliHost:r,wslCLIHost:o,output:i}=t,{shellServer:s,launchRootShellServer:a}=e,c="Launching Dev Containers helper.",l=i.start(c);if(Al)return i.stop(c,l),{remoteEnv:{},ready:Promise.resolve(),reconnect:()=>Promise.resolve()};let u=[r];r.type!=="local"&&u.push(await Gr(process.cwd(),t.loadNativeModule,i)),r.type!=="wsl"&&o&&u.push(o);let f=FR.randomUUID(),m={},d=await AR(u,V=>Zie(V,i)),p=d?lr.posix.join(((R=e.env)==null?void 0:R.TMPDIR)||"/tmp",`vscode-ssh-auth-${f}.sock`):void 0;d&&(m[p]=d,i.write(`ssh-agent: SSH_AUTH_SOCK in container (${p}) forwarded to ${d.cliHost.type} host (${d.unparsed}).`));let g=(L=e.env)!=null&&L.DISPLAY?void 0:Yie(u,V=>Qie(V,i)),h=-1,v;if(g)do v=lr.posix.join(((N=e.env)==null?void 0:N.TMPDIR)||"/tmp",".X11-unix",`X${++h}`);while(await qie(s,v));let C=g?`:${h}`:void 0;g&&(await s.exec(`mkdir -p '${lr.posix.dirname(v)}'`),m[v]=g,i.write(`X11 forwarding: DISPLAY in container (${C}) forwarded to ${g.cliHost.type} host (${g.unparsed}).`));let w=await fj(e.shellServer,i),y=w?await AR(u,V=>dj(V,e.shellServer,w,i)):void 0;y&&(m[y.remoteGpgSocket]={name:"gpg-agent",unparsed:y.localGpgSocket,cliHost:y.cliHost,connectTo:{socketPath:y.localGpgSocket}},i.write(`gpg-agent: Socket in container (${y.remoteGpgSocket}) forwarded to ${y.cliHost.type} host (${y.localGpgSocket}).`),y.localKeyboxdSocket&&y.remoteKeyboxdSocket&&(m[y.remoteKeyboxdSocket]={name:"keyboxd",unparsed:y.localKeyboxdSocket,cliHost:y.cliHost,connectTo:{socketPath:y.localKeyboxdSocket}},i.write(`GPG keyboxd: Socket in container (${y.remoteKeyboxdSocket}) forwarded to ${y.cliHost.type} host (${y.localKeyboxdSocket}).`))),((n==null?void 0:n.getNewConfiguration("githubCLILoginWithToken"))??t.isGitHubCLILoginWithTokenEnabled)&&await ese(e,u,i);let D=lr.posix.join(((B=e.env)==null?void 0:B.TMPDIR)||"/tmp",`vscode-remote-containers-ipc-${f}.sock`),_=lr.posix.join(((W=e.env)==null?void 0:W.TMPDIR)||"/tmp",`vscode-remote-containers-server-${f}.js`),A=lr.posix.join(((z=e.env)==null?void 0:z.TMPDIR)||"/tmp",`vscode-remote-containers-${f}.js`),k=((n==null?void 0:n.getNewConfiguration("dockerCredentialHelper"))??t.isDockerCredentialHelperEnabled)&&a&&await MV(s,Vie)?lr.posix.join("/usr/local/bin",`docker-credential-${vR}${f}`):void 0,E=u.find(V=>V.type==="local"),x=$V(t,e,"Container",void 0,!1,!1,_,A,k,m,D,E),b=x.then(async V=>{await V.ready,await(y==null?void 0:y.importTasks())}),I=x.then(V=>V.mrpcExec),T=x.then(V=>V.mrpcPtyExec);return b.catch(console.error),t.onAdoptProcess(V=>ose(e.shellServer,D,p,v,V).catch(console.error)),i.stop(c,l),{remoteContainersCLI:A,remoteEnv:{REMOTE_CONTAINERS_IPC:D,...p?{SSH_AUTH_SOCK:p}:void 0,...C?{DISPLAY:C}:void 0,...v?{REMOTE_CONTAINERS_DISPLAY_SOCK:v}:void 0},mrpcExec:I,mrpcPtyExec:T,ready:b,reconnect:()=>x.then(V=>V.reconnect())}}function Yie(t,e){for(let n of t){let r=e(n);if(r)return r}}async function AR(t,e){for(let n of t){let r=await e(n);if(r)return r}}async function MV(t,e){try{return await t.exec(`(${e.map(n=>`command -v '${n}'`).join(" || ")}) >/dev/null 2>&1`),!0}catch{return!1}}async function qie(t,e){try{return await t.exec(`test -e ${e}`),!0}catch{return!1}}async function xp(t,e,n,r,o){let{passwdUser:i,homeFolder:s,nodeExecutable:a,mrpcExec:c,mrpcPtyExec:l,setBaseEnv:u,connect:f,reconnect:m,terminate:d}=await $V(t,{remoteExec:e,platform:o},"Host",n,!0,r,void 0);return{passwdUser:i,homeFolder:s,nodeExecutable:a,exec:c,ptyExec:l,setBaseEnv:u,connect:f,reconnect:m,terminate:d}}async function $V(t,e,n,r,o,i,s,a,c,l,u,f){let{cliHost:m,product:d,output:p}=t,{remoteExec:g,platform:h,nodeExecutable:v,launchRootShellServer:C}=e,w=a&&at(lr.join(t.extensionPath,"dist","common","remoteContainersCLI.js"),{encoding:"utf8"}),y=at(lr.join(t.extensionPath,"dist","common","remoteContainersServer.js"),{encoding:"utf8"}),S=await jt(g,p,void 0,h,n),D=o?await Uf(S,await Fl(S)):void 0,_=(await S.exec({posix:"echo ~",win32:"echo $env:userprofile"})).stdout.trim().split(`
`)[0],A=!0;if(!v||!s){let I=S.path.join(_,".vscode-remote-containers");v||(v=await ise(t,S,I,_,d,i)),s||(s=S.path.join(I,"dist",`vscode-remote-containers-server-${t.package.version}.js`),await Ai(S,s)?A=!1:await S.exec(`mkdir -p '${S.path.dirname(s)}'`))}if(a){let I=`EOF-${a}`;await S.exec(`cat <<'${I}' >${a}
${await w}
${I}
`)}if(c&&C&&((m==null?void 0:m.type)!=="local"&&f&&await wR(f,p)||m&&await wR(m,p))){let I=(await S.exec(`cat ~/.docker/config.json || echo "{
}"`)).stdout,T=Me(I);if(!(T!=null&&T.credsStore)||T.credsStore.startsWith(vR)){let R=await C(),L=`EOF-${c}`;await R.exec(`mkdir -p ${lr.posix.dirname(c)} && cat <<'${L}' >${c}
#!/bin/sh
${v} ${a} docker-credential-helper $@
${L}
`),await R.exec(`chmod +x ${c}`);let N=bn(I,["credsStore"],lr.posix.basename(c).substring(18),{formattingOptions:{}}),B=Io(I,N);await S.exec(`mkdir -p ~/.docker && cat <<'${L}' >~/.docker/config.json
${B}
${L}
`)}}if(A){let I=`EOF-${s}`,T=`${s}_${Date.now()}`;await S.exec(`cat <<'${I}' >${T}
${await y}
${I}
mv ${T} ${s}`)}let U=()=>Gie(t,n,S,v,s,l,u,f),k=await U(),E;async function x(){let I=`${n}: Reconnecting Dev Container server`,T=p.start(I);await k.terminate().catch(()=>{}),S=await jt(g,p,void 0,void 0,n),k=await U(),E&&await new Promise((R,L)=>{k.mrpc.setBaseEnv(E,N=>N?L(N):R())}),b(k),p.stop(I,T)}async function b(I){if(await I.reconnect,I===k)try{await x()}catch(T){p.write(`Reconnecting Dev Container server failed: ${(T==null?void 0:T.message)||String(T)}`)}}return b(k),{ready:k.ready,passwdUser:D,nodeExecutable:v,homeFolder:_,mrpcExec:Kie(()=>k.mrpc,n,r||_),mrpcPtyExec:Jie(()=>k.mrpc,n,r||_),mrpcExecToEnd:Xie(()=>k.mrpc,n,r||_),setBaseEnv:I=>new Promise((T,R)=>{E=I,k.mrpc.setBaseEnv(I,L=>L?R(L):T())}),connect:k.mrpc.connect,reconnect:x,terminate:()=>k.terminate()}}async function Gie(t,e,n,r,o,i,s,a){let{cliHost:c,output:l}=t,u=Object.keys(i||{}),f={...u.reduce((E,x)=>(E[x]="duplex",E),{}),rpc:"async",connected:"async",ready:"async"},m={exec:"async",stdin:"sink",stdout:"source",stderr:"source",exit:"async",terminate:"async",dispose:"async",ptyExec:"async",ptyIn:"sink",ptyOut:"source",ptyResize:"async",ptyExit:"async",ptyTerminate:"async",ptyDispose:"async",execToEnd:"async",setBaseEnv:"async",connect:"duplex"},d=n.process,p=`set -e ; echo -n ${ri} >&2 ; ${s?`rm -f '${s}' ; `:""}REMOTE_CONTAINERS_SOCKETS='${JSON.stringify(u)}' REMOTE_CONTAINERS_IPC='${s||""}' '${r}' '${o}' ; exit
`;d.stdin.write(p);let g,h=new Promise(E=>g=E),v=new UV.StringDecoder;d.stderr.on("data",E=>{let x=v.write(E).replace(/^.*DeprecationWarning: Buffer\(\) is deprecated.*$\r?\n?/mg,"").trim();if(g){let b=x.indexOf(ri);b!==-1&&(g(),g=void 0,x=x.substr(0,b)+x.substr(b+1))}x&&l.write(ot(`${e} server: ${x}`))});let C=!1,w,y=new Promise(E=>w=E);d.exit.then(async({code:E,signal:x})=>{l.write(`${e} server terminated (code: ${E}, signal: ${x}).`),C?(l.write(`${e} server terminated. Reconnecting in 5 seconds...`),await Wt(5*1e3),w()):l.write(`${e} server terminated early. Not reconnecting.`)},E=>{l.write(`${e} server did not launch or terminated: ${(E==null?void 0:E.stack)||(E==null?void 0:E.message)||String(E)}`)});let S=(c==null?void 0:c.type)==="local",D={git:S,docker:S},_,A=new Promise(E=>_=E),U=Wie(m,f)({...u.reduce((E,x)=>{let b=i[x];return E[x]=zie(t,b),E},{}),rpc:async(E,x)=>{try{let{args:b,stdin:I}=JSON.parse(E);if(b[0]==="git-credential-helper"){let T=await hj(a,c,D.git,b,I);D.git=T.preferLocalCLIHost,x(void 0,JSON.stringify(T.result))}else if(b[0]==="docker-credential-helper"){let T=await Rj(a,c,D.docker,b,I,l);D.docker=T.preferLocalCLIHost,x(void 0,JSON.stringify(T.result))}}catch(b){console.error(b),x(b)}},connected:E=>{E()},ready:E=>{C=!0,_(),E()}});(0,GS.default)(OV.source(d.stdout),U.createStream(),OV.sink(d.stdin)),await Promise.race([h,d.exit.then(({code:E,signal:x})=>{throw new Error(`${e} server terminated (code: ${E}, signal: ${x}).`)})]);function k(){return C=!1,d.terminate()}return{ready:A,mrpc:U,terminate:k,reconnect:y}}function zie(t,e){let{sendTelemetryEvent:n,output:r}=t,o=!1;function i(s){if(!o&&s instanceof Error&&s.code==="ENOENT"&&(o=!0,r.event({type:"notification",message:OR.t("Could not connect to {0} on {1} host ({2}). Make sure the service is running.",e.name,e.cliHost.type,e.unparsed)}),n)){let a={serviceName:e.name,hostType:e.cliHost.type,hostPlatform:e.cliHost.platform},c=e.cliHost.authority;if(c){let l=c.indexOf("+");l!==-1&&(a.hostAuthority=c.substring(0,l))}n("serviceConnectionFailure",a)}}return()=>{let s=e.cliHost.connect(e.connectTo);return{sink:a=>{s.sink((c,l)=>{i(c),a(c,l)})},source:(a,c)=>{s.source(a,(l,u)=>{i(l),c(l,u)})}}}}function Kie(t,e,n){return async r=>{let{cmd:o,args:i,cwd:s,env:a,output:c}=r,l=`Run in ${e}: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),f=t(),m=await new Promise((d,p)=>{f.exec({cmd:o,args:i,cwd:s||n,env:a},(g,h)=>{g?p(g):d(h)})});return{stdin:LR.sink(f.stdin(m,d=>{d&&d.message!=="unexpected end of parent stream"&&console.error(d)})),stdout:LR.source(f.stdout(m)),stderr:LR.source(f.stderr(m)),exit:new Promise((d,p)=>{f.exit(m,(g,h)=>{var v;c.stop(l,u),g?((v=g.message)!=null&&v.endsWith("ENOENT")&&!g.code&&(g.code="ENOENT"),p(g)):d(h)})}),terminate:async()=>new Promise((d,p)=>{f.terminate(m,g=>{g?p(g):d()})})}}}function Jie(t,e,n){return async r=>{let{cmd:o,args:i,cwd:s,env:a,output:c}=r,l=`Run in ${e}: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),f=t(),m=await new Promise((h,v)=>{var C,w;f.ptyExec({cmd:o,args:i,cwd:s||n,env:a,rows:(C=c.dimensions)==null?void 0:C.rows,cols:(w=c.dimensions)==null?void 0:w.columns},(y,S)=>{y?v(y):h(S)})}),d=[c.onDidChangeDimensions&&c.onDidChangeDimensions(h=>f.ptyResize(m,h.columns,h.rows))],p=jie();(0,GS.default)(p,f.ptyIn(m,h=>{h&&h.message!=="unexpected end of parent stream"&&console.error(h)}));let g=new js;return(0,GS.default)(f.ptyOut(m),h=>{h(null,function v(C,w){if(C!==!0){if(C)throw C;g.fire(w),h(null,v)}})}),{write:h=>p.push(h),onData:g.event,resize:(h,v)=>f.ptyResize(m,h,v),exit:new Promise((h,v)=>{f.ptyExit(m,(C,w)=>{d.forEach(y=>y==null?void 0:y.dispose()),c.stop(l,u),C?v(C):h(w)})}),terminate:async()=>new Promise((h,v)=>{f.ptyTerminate(m,C=>{C?v(C):h()})})}}}function Xie(t,e,n){return async r=>{let{cmd:o,args:i,cwd:s,env:a,output:c}=r,l=`Run in ${e}: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),f=t();return new Promise((m,d)=>{f.execToEnd({cmd:o,args:i,cwd:s||n,env:a},(p,g)=>{if(c.stop(l,u),p||!g)d({stdin:new Ll.Writable,stdout:Ll.Readable.from([]),stderr:Ll.Readable.from([]),exit:Promise.reject(p),terminate:async()=>{}});else{let h=Ll.Readable.from([Buffer.from(g.stdout.data)]),v=new Promise(y=>h.on("end",y)),C=Ll.Readable.from([Buffer.from(g.stderr.data)]),w=new Promise(y=>C.on("end",y));m({stdin:new Ll.Writable,stdout:h,stderr:C,exit:Promise.all([v,w]).then(()=>({code:g.code,signal:g.signal})),terminate:async()=>{}})}})})}}var Av="\\\\.\\pipe\\openssh-ssh-agent";async function UR(t){return t.platform==="win32"&&t.isFile(Av)}async function Zie(t,e){let n=t.env.SSH_AUTH_SOCK;if(n)return{name:"ssh-agent",unparsed:n,cliHost:t,connectTo:{socketPath:n}};if(e.write(`ssh-agent: SSH_AUTH_SOCK not set on ${t.type} host.`),await UR(t))return{name:"ssh-agent",unparsed:Av,cliHost:t,connectTo:{socketPath:Av}}}function Qie(t,e){let n=t.env.DISPLAY,r=n==null?void 0:n.match(/^(?<hostOrPath>[^:]+)?:(?<display>\d+)(?:\.(?<screen>\d+))?$/);if(r!=null&&r.groups){let{hostOrPath:o,display:i}=r.groups,s=OR.t("X11 display");return!o||o==="localhost/unix"?{name:s,unparsed:n,cliHost:t,connectTo:{socketPath:`/tmp/.X11-unix/X${i}`}}:o.startsWith("/")?{name:s,unparsed:n,cliHost:t,connectTo:{socketPath:`${o}:${i}`}}:{name:s,unparsed:n,cliHost:t,connectTo:{host:o,port:6e3+parseInt(i,10)}}}n?e.write(`X11 forwarding: DISPLAY value on ${t.type} host not supported (${n}).`):e.write(`X11 forwarding: DISPLAY not set on ${t.type} host.`)}async function MR(t){let e=t.env.WAYLAND_DISPLAY,n=t.env.XDG_RUNTIME_DIR,r=e&&t.path.isAbsolute(e)?e:e&&n&&t.path.join(n,e),o=n&&t.path.join(n,"wayland-0"),i=r||o;if(i&&await t.isSocket(i))return i}async function HV(t){let e=FR.randomUUID();return lr.posix.join((t==null?void 0:t.TMPDIR)||"/tmp",`vscode-wayland-${e}.sock`)}async function BV(t,e){let{shellServer:n,remoteWaylandSocket:r}=t;if(!r||e.WAYLAND_DISPLAY)return{};let o=e.XDG_RUNTIME_DIR;o||(o=(await n.exec('umask 077 && XRD="/tmp/user/$(id -u)" && mkdir -p $XRD && echo $XRD')).stdout.trim());let i=lr.posix.basename(r);return await n.exec(`test -e ${o}/${i} || ln -sf ${r} ${o}/${i}`),o===e.XDG_RUNTIME_DIR?{WAYLAND_DISPLAY:i}:{XDG_RUNTIME_DIR:o,WAYLAND_DISPLAY:i}}async function ese(t,e,n){let r="Checking for GitHub CLI",o=n.start(r);await MV(t.shellServer,["gh"])&&(async()=>{let s="Setting up GitHub CLI",a=n.start(s);try{if(!await nse(t.remoteExec,n)){let l=await AR(e,u=>tse(u.exec,n))||void 0;l&&await rse(t.remoteExec,l,n)}}catch(c){n.write(`Error setting up GitHub CLI: ${(c==null?void 0:c.stack)||(c==null?void 0:c.message)||String(c)}`)}finally{n.stop(s,a)}})(),n.stop(r,o)}async function tse(t,e){try{let{stdout:n}=await X({exec:t,cmd:"gh",args:["auth","token"],output:e});return n.toString().trim()}catch{return}}async function nse(t,e){try{return await X({exec:t,cmd:"gh",args:["auth","status"],output:e}),!0}catch{return!1}}async function rse(t,e,n){try{await X({exec:t,cmd:"gh",args:["auth","login","--with-token"],stdin:Buffer.from(e),output:n})}catch{}}var yp=new Set;async function ose(t,e,n,r,o){let i=await o.processId;if(i&&i>0){let s=await Ej(t,i),a=s.REMOTE_CONTAINERS_IPC;a&&a!==e&&!yp.has(a)&&a.indexOf("vscode-remote-containers-ipc")!==-1&&(yp.add(a),await t.exec(`rm '${a}' && ln -s '${e}' '${a}'`));let c=s.SSH_AUTH_SOCK;c&&n&&c!==n&&!yp.has(c)&&c.indexOf("vscode-ssh-auth")!==-1&&(yp.add(c),await t.exec(`rm '${c}' && ln -s '${n}' '${c}'`));let l=s.REMOTE_CONTAINERS_DISPLAY_SOCK;l&&r&&l!==r&&!yp.has(l)&&(yp.add(l),await t.exec(`rm '${l}' && ln -s '${r}' '${l}'`))}}async function ise(t,e,n,r,o,i){let s=o.commit||await vp(o.quality),a=o.commit?o.quality||"insider":"stable",c=lr.posix,l=`${a.substring(0,1).toUpperCase()}${a.substring(1)}${a==="insider"?"s":""}-${s}`,u=D=>Ai(e,D),f=c.join(Ep(c,r,o),"cli","servers",l,"server");if(await qS(f,u))return Cp(f);let m=c.join($R(c,r,o),"cli","servers",l,"server");if(await qS(m,u))return Cp(m);let d=c.join(Ep(c,r,o),"bin",s);if(await qS(d,u))return Cp(d);let p=c.join(n,"bin",s);if(await qS(p,u))return Cp(p);let{localCacheFolder:g,output:h,alternateDownload:v}=t,C;if((await e.exec("uname -s")).stdout.trim().split(`
`)[0]==="Darwin")C=(await e.exec("uname -m")).stdout.trim()==="arm64"?zS.arm64:zS.x64;else{let D=await HR(e);C=XS(D,!1)}let y={localCacheFolder:g,build:C,commit:s,quality:a,web:!1,output:h,alternateDownload:v,legacy:!1},S=_p(y);if(await Cr(S)||await Ov(y),C.id==="darwin")await Fv({output:h},e,S,p,i);else{let D=[];await KS.t({file:S,filter:A=>/^[^/]*\/(LICENSE$|node$|node_modules\/node-pty\/)/.test(A),onentry:A=>{new KS.WriteEntry.Tar(A).on("data",k=>D.push(k))}});let _=Buffer.concat(D);await Fv({output:h},e,_,p,i,!1)}return Cp(p)}async function qS(t,e){let n=Cp(t),r=lr.posix.join(t,"node_modules","node-pty","package.json");return await e(n)&&await e(r)}function Cp(t){return lr.posix.join(t,"node")}var Uv=Y(require("net"));var Mv=VS(),BR=t=>{if("port"in t)return Mv.duplex(Uv.connect(t.port,t.host));let e=t.socketPath;if(process.platform!=="win32"||e.startsWith("\\\\.\\pipe\\"))return Mv.duplex(Uv.connect(e));let n=new Uv.Socket;return cse(n,e)};function sse(t){let e=[];return t.split("-").map(n=>{let r=n.match(/.{2}/g);r!==null&&r.reverse().map(o=>{e.push(parseInt(o,16))})}),Buffer.from(e)}function ase(t,e,n){return e||n===void 0?{headerSize:t,err:e}:t===0?{headerSize:t,data:n}:n.length>t?(n=n.slice(t,n.length),t=0,{headerSize:t,data:n}):(t=t-n.length,{headerSize:t})}function cse(t,e){let n=0,r=[],o=[],i,s=u=>{u instanceof Error&&console.error(u),t.destroy();for(let f of r)f.cb(u,void 0);r=[];for(let f of o)f(u,(m,d)=>{});o=[]};function a(u,f){i.source(u,function(m,d){let p=ase(n,m,d);n=p.headerSize,p.err||p.data?f(p.err||null,p.data):a(u,f)})}return(async()=>{let u=await at(e),m=u.toString().match(/!<socket >(\d+)( s)? ((([A-Fa-f0-9]{2}){4}-?){4})/),d,p;if(m!==null){let g=m[1],h=m[3];d=parseInt(g,10);let v=sse(h),C=Buffer.alloc(12);C.writeUInt32LE(process.pid,0),p=Buffer.concat([v,C]),n=28}else{let g=u.indexOf(10);d=parseInt(u.slice(0,g).toString(),10),p=u.slice(g+1),n=0}t.on("error",g=>{s(g)}),t.connect(d,"127.0.0.1",()=>{t.write(p,g=>{if(!g){i=Mv.duplex(t);for(let h of r)a(h.abort,h.cb);r=[];for(let h of o)i.sink(h);o=[]}})})})().catch(u=>{s(u)}),{source:function(u,f){i!==void 0?a(u,f):r.push({abort:u,cb:f})},sink:function(u){i!==void 0?i.sink(u):o.push(u)}}}function WV(t,e,n){return r=>{let o=(async()=>{let i="port"in r?`{ host: '${r.host}', port: ${r.port} }`:`{ path: '${r.socketPath}' }`,s=await e({cmd:t,args:["-e",`// Connection forwarding to ${"port"in r?`${r.host}:${r.port}`:r.socketPath} on remote host.
const net = require('net');
const fs = require('fs');
process.stdin.pause();
const client = net.createConnection(${i}, () => {
	console.error('Connection established');
	client.pipe(process.stdout);
	process.stdin.pipe(client);
});
client.on('close', function (hadError) {
	console.error(hadError ? 'Remote close with error' : 'Remote close');
	process.exit(hadError ? 1 : 0);
});
client.on('error', function (err) {
	process.stderr.write(err && (err.stack || err.message) || String(err));
});
process.stdin.on('close', function (hadError) {
	console.error(hadError ? 'Remote stdin close with error' : 'Remote stdin close');
	process.exit(hadError ? 1 : 0);
});
process.on('uncaughtException', function (err) {
	fs.writeSync(process.stderr.fd, \`Uncaught Exception: \${String(err && (err.stack || err.message) || err)}\\n\`);
});
`],output:sn(n,1)});return s.exit.then(({code:a,signal:c})=>{n.write(`Connection forwarding to ${"port"in r?`${r.host}:${r.port}`:r.socketPath} on remote host terminated with code ${a} and signal ${c}.`,1)},a=>{n.write(`Connection forwarding to ${"port"in r?`${r.host}:${r.port}`:r.socketPath} on remote host terminated with error: ${a&&a.message||String(a)}`)}),s.stderr.on("data",a=>{n.write(`Connection forwarding to ${"port"in r?`${r.host}:${r.port}`:r.socketPath} on remote host stderr: ${a.toString("utf8")}`,1)}),{sink:Mv.sink(s.stdin),source:Mv.source(s.stdout)}})();return{sink:i=>{o.then(s=>s.sink(i),s=>i(s,()=>{})).catch(s=>n.write(`Connection forwarding to sink error: ${(s==null?void 0:s.stack)||(s==null?void 0:s.message)||String(s)}`))},source:(i,s)=>{o.then(a=>a.source(i,s),a=>s(a)).catch(a=>n.write(`Connection forwarding to source error: ${(a==null?void 0:a.stack)||(a==null?void 0:a.message)||String(a)}`))}}}}var ZS=!1;function Mf(t,e,n){return ZS?function(o){return lse(t(o),`${e} ${JSON.stringify(o)}`,n)}:t}function lse(t,e,n){return ZS?{source:jV(t.source,`${e} Source`,n),sink:use(t.sink,`${e} Sink`,n)}:t}function jV(t,e,n){return ZS?function(o,i){n.write(`${e} end in (${typeof o}${o&&typeof o=="object"?`: ${Object.keys(o)}`:""}): ${o&&typeof o=="object"&&o.stack||o}`),t(o,function(a,c){n.write(`${e} end out (${typeof a}${a&&typeof a=="object"?`: ${Object.keys(a)}`:""}): ${a&&typeof a=="object"&&a.stack||a}`),n.write(`${e} data: ${c==null?void 0:c.toString("hex")}`),i(a,c)})}:t}function use(t,e,n){return ZS?function(o){t(jV(o,e,n))}:t}var WR=Y(Mr()),qV=/^\\\\wsl(\.localhost|\$)?\\/;function xr(t){return qV.test(t.toLowerCase())}function $f(t){let e=t.toLowerCase(),n=qV.exec(e);if(!n)return"";let r=e.indexOf("\\",n[0].length);return t.substring(n[0].length,r)}async function $v(t){let{stdout:e}=await X({exec:ds(void 0),cmd:"wsl",args:["-l","-v"],output:t}),n=e.toString(e[1]===0?"utf16le":"utf8").trim();return(/^\*\s*(\S+)/m.exec(n)||[])[1]}async function Ol(t,e,n){let{stdout:r}=await X({exec:ds(void 0),cmd:"wsl",args:["-d",t,"-e","wslpath","-u",e],output:n}),o=r.toString().trim();if(o.startsWith("/mnt/wsl/")&&e.match(/^[a-zA-Z]:/)){let i=`/mnt/${e[0].toLowerCase()}${e.substring(2).replace(/\\/g,"/")}`;try{return await X({exec:ds(void 0),cmd:"wsl",args:["-d",t,"-e","test","-e",i],output:n}),i}catch(s){(s==null?void 0:s.code)!==1&&n.write(`Error checking WSL path: ${(s==null?void 0:s.stack)||(s==null?void 0:s.message)||s}`)}}return o}async function fse(t,e){let{stdout:n}=await X({exec:ds(void 0),cmd:"wsl",args:["-d",t,"-e","/bin/sh","-c","echo ~"],output:e});return n.toString().trim()}async function GV(t,e,n){let{stdout:r}=await X({exec:t.exec,cmd:"wslpath",args:["-w",e],output:n});return r.toString().trim()}async function Dp(t,e){let n=$f(t),r=await Ol(n,t,e);return Ce.parse(`vscode-remote://wsl+${n}${r}`)}function Ip(t){if(t.scheme==="vscode-remote"){let e=QS(t.authority);if(e){let n=t.path;return Pv(n)&&(n=VV.posix.dirname(n)),{wslDistro:e,wslPath:n}}}}function QS(t){return(/wsl\+(.*)/.exec(t)||[])[1]}async function ex(t,e,n,r,o,i,s,a){var p;let{distro:c,cwd:l}=await jR(t,e,s);YV.ok(!c.startsWith("-"),WR.t("Distro must not start with a dash: {0}",c));let u=Hf("wsl",["-d",c,"-e"],l),f=await xp({extensionPath:n,localCacheFolder:r,package:await cr(n),product:o,loadNativeModule:i,output:s,alternateDownload:a},u,l,!1),m=await Bf({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:s},{shell:((p=f.passwdUser)==null?void 0:p.shell)||"/bin/sh",remoteExec:f.exec});delete m.WSL_INTEROP,await f.setBaseEnv(m);let d=so("wsl",l,m,f.exec,f.ptyExec,Mf(f.connect,"WSL",s),f.nodeExecutable,s);return d.toCommonURI=async g=>{try{return Ce.file((await X({exec:f.exec,cmd:"wslpath",args:["-w",g],output:s})).stdout.toString().trim())}catch{return}},d.reconnect=()=>f.reconnect(),d.terminate=()=>f.terminate(),d}async function jR(t,{defaultDistro:e},n){let r,o;return typeof t=="object"?(r=t.wslDistro,o=t.wslPath):t&&xr(t)?(r=$f(t),o=await Ol(r,t,n)):(r=e||await $v(n)||(()=>{throw new pe({description:WR.t("No default WSL distro found.")})})(),o=t?await Ol(r,t,n):await fse(r,n)),{distro:r,cwd:o}}function Wf(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}async function zV(t,e,n,r,o){try{return(await Yn(e,{posix:X({exec:t,cmd:"cat",args:[r],output:o}),win32:X({exec:t,cmd:n,args:["-e",`require('fs').createReadStream('${r.replace(/\\/g,"\\\\")}').pipe(process.stdout)`],output:o})})).stdout}catch(i){let s=new Error(`Could not read file: ${r}`);throw s.originalError=i,s.code="ENOENT",s}}async function KV(t,e,n,r,o,i){await Yn(e,{posix:X({exec:t,cmd:"dd",args:[`of=${r}`],stdin:o,output:i}),win32:X({exec:t,cmd:n,args:["-e",`process.stdin.pipe(require('fs').createWriteStream('${r.replace(/\\/g,"\\\\")}'))`],stdin:o,output:i})})}async function tx(t,e,n,r,o){await Yn(e,{posix:()=>X({exec:t,cmd:"mv",args:["-n",n,r],output:o}),win32:()=>X({exec:t,cmd:"powershell",args:["-NoProfile","-Command",`Move-Item -Path '${n}' -Destination '${r}'`],env:ao(),output:o})})()}async function nx(t,e,n,r,o){let{recursive:i,force:s}=r;await Yn(e,{posix:()=>X({exec:t,cmd:"rm",args:[i&&"-r",s&&"-f",n].filter(Boolean),output:o}),win32:()=>X({exec:t,cmd:"powershell",args:["-NoProfile","-Command",`Remove-Item${i?" -Recurse":""}${s?" -Force":""} '${n}'`],env:ao(),output:o})})()}async function rx(t,e,n,r){await Yn(e,{posix:()=>X({exec:t,cmd:"mkdir",args:["-p",n],output:r}),win32:()=>X({exec:t,cmd:"powershell",args:["-NoProfile","-Command",`New-Item -ItemType Directory '${n}'`],env:ao(),output:r})})()}async function JV(t,e,n,r){return(await Yn(e,{posix:()=>X({exec:t,cmd:"ls",args:["-a",n],output:r}),win32:()=>X({exec:t,cmd:"powershell",args:["-NoProfile","-Command",`(Get-ChildItem '${n}').Name`],env:ao(),output:r})})()).stdout.toString().trim().split(/\r?\n/).filter(i=>i!=="."&&i!=="..")}var YR=Y(require("path")),sx=Y(require("os")),ax=Y(require("crypto"));var XV=Y(require("os")),ox=Y(require("assert")),ix=Y(Mr());async function ZV(t,e,n,r,o,i,s,a,c,l){var v;let u=t.substr(6),f=u.indexOf(":"),m=[(l==null?void 0:l.settings.executablePath)||"ssh"];if(l!=null&&l.settings.executableArgs&&m.push(...l.settings.executableArgs),l!=null&&l.settings.configFilePath&&m.push("-F",dse(l==null?void 0:l.settings.configFilePath)),f!==-1){let C=u.substr(f+1);ox.ok(!C.startsWith("-"),ix.t("Port number must not start with a dash: {0}",C));let w=u.substr(0,f);ox.ok(!w.startsWith("-"),ix.t("Hostname must not start with a dash: {0}",w)),m.push("-p",C,w)}else ox.ok(!u.startsWith("-"),ix.t("Hostname must not start with a dash: {0}",u)),m.push(u);let d=Hf(m[0],m.slice(1),void 0,await(l==null?void 0:l.sshAskpassEnv)||{}),p=await xp({extensionPath:r,localCacheFolder:o,package:await cr(r),product:i,loadNativeModule:s,output:a,alternateDownload:c},d,e,!1),g=await Bf({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:a},{shell:((v=p.passwdUser)==null?void 0:v.shell)||"/bin/sh",remoteExec:p.exec});await p.setBaseEnv(g);let h=so("remote",e||p.homeFolder,g,p.exec,p.ptyExec,p.connect,p.nodeExecutable,a);return h.toCommonURI=()=>Promise.resolve(void 0),h.reconnect=()=>p.reconnect(),h.terminate=()=>p.terminate(),h}function dse(t){return t.replace(/^~($|\/|\\)/,`${XV.homedir()}$1`)}function Hv(t,e){let n=mse(t);if(n)return Ce.parse(`vscode-remote://${VR(n)}${e}`)}function VR(t){let e=t.hostName;if(t.user||t.hostName.toLowerCase()!==t.hostName||t.port||t.hostName.match(/[\/\\\+]/)){let n=JSON.stringify(t);e=Buffer.from(n,"utf8").toString("hex")}return`ssh-remote+${e}`}function mse(t){if(!t.startsWith("ssh://"))return;let e=t.substr(6);return QV(e)}function QV(t){let e=t.match(/^(?:(.*)@)?(.+?)(?::(\d+))?$/);if(e){let[,n,r,o]=e;return{hostName:r,user:n,port:o?parseInt(o,10):void 0}}return{hostName:t}}function Ul(t){var e;return!!(t&&"host"in t&&((e=t.host)!=null&&e.startsWith("ssh://")))}function Ml(t){return!!(t!=null&&t.startsWith("ssh-remote+"))}function Bv(t){let e=/^ssh-remote\+(.*)$/.exec(t);if(!e)return;let n=e[1];try{let r=JSON.parse(Buffer.from(n,"hex").toString("utf8"));if(r&&r.hostName)return r}catch{}return QV(n)}var pse=!1;async function qR(t,e,n,r,o,i,s,a,c,l){return t!=null&&t.startsWith("ssh://")&&!(l!=null&&l.localDocker)?ZV(t,e,r,o,i,s,n,a,c,l):typeof e=="object"||r.executeInWSL==="forWSLPath"&&e&&xr(e)||r.executeInWSL==="always"?ex(e,r,o,i,s,n,a,c):pse?hse(e||process.cwd(),o,i,s,n,a,c):Gr(e||process.cwd(),n,a)}async function Gr(t,e,n=Fe){let r=ds(t),o=await tY(t,e);return eY(t,r,o,n?Mf(BR,"Local",n):BR,e,n)}async function hse(t,e,n,r,o,i,s){let a=ds(t),c=await xp({extensionPath:e,localCacheFolder:n,package:await cr(e),product:r,loadNativeModule:o,output:i,alternateDownload:s},a,t,!0,process.platform);return eY(t,c.exec,c.ptyExec,Mf(c.connect,"Local Test",i),o,i)}function so(t,e,n,r,o,i,s,a){let c,l,u;return{type:t,platform:"linux",exec:r,ptyExec:o,cwd:e,env:n,path:YR.posix,async homedir(){if(typeof l>"u"){let m=(await X({exec:r,cmd:"id",args:["-u"],output:Fe})).stdout.toString().trim(),d=await jt(r,Fe,void 0,"linux","Host"),p=await Uf(d,m);l=this.env.HOME||(p==null?void 0:p.home)||"/"}return l},async tmpdir(){return this.env.TMPDIR||"/tmp"},isFile:async f=>{try{return await X({exec:r,cmd:"test",args:["-f",f],output:Fe}),!0}catch(m){if((m==null?void 0:m.code)!==1)throw m;return!1}},isFolder:async f=>{try{return await X({exec:r,cmd:"test",args:["-d",f],output:Fe}),!0}catch(m){if((m==null?void 0:m.code)!==1)throw m;return!1}},isSocket:async f=>{try{return await X({exec:r,cmd:"test",args:["-S",f],output:Fe}),!0}catch(m){if((m==null?void 0:m.code)!==1)throw m;return!1}},readFile:async f=>{try{return(await X({exec:r,cmd:"cat",args:[f],output:Fe})).stdout}catch(m){let d=new Error(`Could not read file: ${f}`);throw d.originalError=m,d.code="ENOENT",d}},writeFile:async(f,m)=>{await X({exec:r,cmd:"/bin/sh",args:["-c",`cat >'${f}'`],stdin:m,output:Fe})},rename:async(f,m)=>{await X({exec:r,cmd:"mv",args:[f,m],output:Fe})},rm:async(f,{recursive:m,force:d}={})=>{await X({exec:r,cmd:"rm",args:[...m?["-r"]:[],...d?["-f"]:[],f],output:Fe})},mkdirp:async f=>{await X({exec:r,cmd:"mkdir",args:["-p",f],output:Fe})},readDir:async f=>(await X({exec:r,cmd:"ls",args:["-a",f],output:Fe})).stdout.toString().trim().split(`
`).filter(m=>m!=="."&&m!==".."),readDirWithTypes:async f=>{let m={f:1,"*":1,"/":2,"@":64};return(await X({exec:r,cmd:"ls",args:["-aF",f],output:Fe})).stdout.toString().trim().split(`
`).map(d=>"/*@=%|>".indexOf(d[d.length-1])!==-1?[d.substr(0,d.length-1),d[d.length-1]]:[d,"f"]).filter(([d])=>d!=="."&&d!=="..").map(([d,p])=>[d,m[p]||0])},getUsername:async()=>(c===void 0&&(c=(await X({exec:r,cmd:"id",args:["-u","-n"],output:Fe})).stdout.toString().trim()),c),toCommonURI:()=>Promise.resolve(void 0),connect:i,locateCertificatesFile:function(){return u||(u=cx(this,void 0,a))},nodeExecutable:s}}function eY(t,e,n,r,o,i){let s;return{type:"local",platform:process.platform,exec:e,ptyExec:n,cwd:t,env:process.env,path:YR,homedir:async()=>sx.homedir(),tmpdir:async()=>sx.tmpdir(),isFile:Cr,isFolder:i1,isSocket:s1,readFile:at,writeFile:Lg,rename:sl,rm:cl,mkdirp:async a=>{await os(a)},readDir:al,getUsername:lx,toCommonURI:async a=>Ce.file(a),connect:r,locateCertificatesFile:function(){return s||(s=cx(this,o,i))}}}var gse=["/etc/ssl/certs/ca-certificates.crt","/etc/ssl/certs/ca-bundle.crt","/etc/ssl/ca-bundle.pem"];async function cx(t,e,n){if(t.env.NODE_EXTRA_CA_CERTS&&await t.isFile(t.env.NODE_EXTRA_CA_CERTS))return t.env.NODE_EXTRA_CA_CERTS;if(t.platform==="linux"){for(let c of gse)if(await t.isFile(c))return c;return}if(t.type!=="local")return;let r=await(e==null?void 0:e("@vscode/proxy-agent"));if(!(r!=null&&r.loadSystemCertificates))return;let o=await r.loadSystemCertificates({loadSystemCertificatesFromNode:()=>{},log:{trace(c,...l){n.write(c,1)},debug(c,...l){n.write(c,2)},info(c,...l){n.write(c,3)},warn(c,...l){n.write(c,4)},error(c,...l){n.write(typeof c=="string"?c:String(c),5)}}});if(!o.length)return;let i=Buffer.from(o.join(t.platform==="win32"?`\r
`:`
`)),s=ax.createHash("sha256").update(i).digest("hex"),a=t.path.join(await Wv(t),`certificates-${s}.pem`);if(!await t.isFile(a)){await t.mkdirp(t.path.dirname(a));let c=`${a}-${ax.randomUUID()}`;await t.writeFile(c,i),await t.rename(c,a)}return a}var vse=ux.join(__dirname,"..","..","node_modules",".bin","ts-node"),Al=ux.basename(process.argv[0])==="ts-node"||process.argv.indexOf("ts-node/register")!==-1;async function X(t){let{exec:e,cmd:n,args:r,cwd:o,env:i,stdin:s,output:a,print:c}=t,l=await e({cmd:n,args:r,cwd:o,env:i,output:a});return new Promise((u,f)=>{let m=[],d=[],p=c==="continuous"?new jv.StringDecoder:void 0;l.stdout.on("data",v=>{m.push(v),c==="continuous"&&a.write(p.write(v))}),l.stdout.on("error",v=>{if((v==null?void 0:v.code)!=="ENOTCONN")throw v});let g=c==="continuous"?new jv.StringDecoder:void 0;l.stderr.on("data",v=>{d.push(v),c==="continuous"&&a.write(ot(g.write(v)))}),l.stderr.on("error",v=>{if((v==null?void 0:v.code)!=="ENOTCONN")throw v});let h=[];l.exit.then(({code:v})=>{try{h.forEach(y=>y.dispose());let C=Buffer.concat(m),w=Buffer.concat(d);(c===!0||v&&c==="onerror")&&(a.write(C.toString().replace(/\r?\n/g,`\r
`)),a.write(ot(w.toString()))),c&&v&&a.write(`Exit code ${v}`),v?f({message:`Command failed: ${n} ${(r||[]).join(" ")}`,stdout:C,stderr:w,code:v}):u({stdout:C,stderr:w})}catch(C){f(C)}},v=>{c&&(v!=null&&v.message)&&a.write(ot(v==null?void 0:v.message)),f(v)}),s instanceof Buffer?(l.stdin.write(s,v=>{v&&f(v)}),l.stdin.end()):s instanceof nY.Readable?s.pipe(l.stdin):typeof s=="function"&&h.push(s(v=>l.stdin.write(v)))})}async function Fi(t){let{ptyExec:e,cmd:n,args:r,cwd:o,env:i,output:s,resolveOn:a,onDidInput:c}=t,l=await e({cmd:n,args:r,cwd:o,env:i,output:s});return new Promise((u,f)=>{let m="",d=[c&&c(p=>l.write(p))];l.onData(p=>{m+=p,s.raw(p),a&&a.exec(m)&&u({cmdOutput:m})}),l.exit.then(({code:p,signal:g})=>{try{d.forEach(h=>h==null?void 0:h.dispose()),p||g?f({message:`Command failed: ${n} ${(r||[]).join(" ")}`,cmdOutput:m,code:p,signal:g}):u({cmdOutput:m})}catch(h){f(h)}},p=>{p!=null&&p.message&&s.write(ot(p==null?void 0:p.message)),d.forEach(g=>g==null?void 0:g.dispose()),f(p)})})}var wse={SIGHUP:1,SIGINT:2,SIGQUIT:3,SIGILL:4,SIGTRAP:5,SIGABRT:6,SIGIOT:6,SIGBUS:7,SIGEMT:void 0,SIGFPE:8,SIGKILL:9,SIGUSR1:10,SIGSEGV:11,SIGUSR2:12,SIGPIPE:13,SIGALRM:14,SIGTERM:15,SIGSTKFLT:16,SIGCHLD:17,SIGCLD:void 0,SIGCONT:18,SIGSTOP:19,SIGTSTP:20,SIGTTIN:21,SIGTTOU:22,SIGURG:23,SIGXCPU:24,SIGXFSZ:25,SIGVTALRM:26,SIGPROF:27,SIGWINCH:28,SIGIO:29,SIGPOLL:29,SIGPWR:30,SIGINFO:void 0,SIGLOST:void 0,SIGSYS:31,SIGUNUSED:31};function ds(t){return async function(e){let{cmd:n,args:r,output:o}=e,i=`Run: ${n} ${(r||[]).join(" ").replace(/\n.*/g,"")}`,s=o.start(i),a=e.cwd||t,c=e.env?{...process.env,...e.env}:process.env,l=await ni(n,a,c),u=Pp.spawn(l,r,{cwd:a,env:c,windowsHide:!0});return{stdin:u.stdin,stdout:u.stdout,stderr:u.stderr,exit:new Promise((f,m)=>{u.once("error",d=>{o.stop(i,s),m(d)}),u.once("close",(d,p)=>{o.stop(i,s),f({code:d,signal:p})})}),async terminate(){u.kill("SIGKILL")}}}}async function tY(t,e){let n=await e("node-pty");if(!n)throw new Error("Missing node-pty");return async function(r){var g,h;let{cmd:o,args:i,output:s}=r,a=`Run: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,c=s.start(a),l=!1,u=r.cwd||t,f=r.env?{...process.env,...r.env}:process.env,m=await ni(o,u,f),d=n.spawn(m,i||[],{cwd:u,env:f,cols:(g=s.dimensions)==null?void 0:g.columns,rows:(h=s.dimensions)==null?void 0:h.rows,useConpty:l}),p=[s.onDidChangeDimensions&&s.onDidChangeDimensions(v=>d.resize(v.columns,v.rows))];return{onData:d.onData.bind(d),write:d.write.bind(d),resize:d.resize.bind(d),exit:new Promise(v=>{d.onExit(({exitCode:C,signal:w})=>{if(p.forEach(y=>y==null?void 0:y.dispose()),s.stop(a,c),v({code:C,signal:w}),process.platform==="win32")try{d.kill()}catch{}})}),async terminate(){d.kill("SIGKILL")}}}}function oY(t){let e=async function(n){let r=await t(n),o=new js;if(r.stdout){let i=new jv.StringDecoder;r.stdout.on("data",s=>o.fire(i.write(s).replaceAll(/\r?\n/g,`\r
`))),r.stdout.on("close",()=>{let s=i.end();s&&o.fire(s)})}if(r.stderr){let i=new jv.StringDecoder;r.stderr.on("data",s=>o.fire(i.write(s).replaceAll(/\r?\n/g,`\r
`))),r.stderr.on("close",()=>{let s=i.end();s&&o.fire(s)})}return{onData:o.event,write:r.stdin.write.bind(r.stdin),resize:()=>{},exit:r.exit.then(({code:i,signal:s})=>({code:typeof i=="number"?i:void 0,signal:typeof s=="string"?wse[s]:void 0})),terminate:r.terminate.bind(r)}};return e.isTTY=!1,e}function Hf(t,e,n,r){return async function(o){let{env:i,cmd:s,args:a,output:c}=o,l=o.cwd||n,u=l?`cd '${l}' && `:"",f=Object.keys(i||{}).map(y=>i[y]===void 0?"":`${y}='${i[y]}' `).join(""),m=(a||[]).map(y=>` '${y.replace(/'/g,`'"'"'`)}'`).join(""),d=`${u}${f}${s}${m}`,p=d!==s?["/bin/sh","-c",d]:[d],g=[...e,...p],h=`Run: ${t} ${g.join(" ").replace(/\n.*/g,"")}`,v=c.start(h),C=await ni(t,process.cwd(),process.env),w=Pp.spawn(C,g,{windowsHide:!0,env:r?{...process.env,...r}:void 0});return{stdin:w.stdin,stdout:w.stdout,stderr:w.stderr,exit:new Promise((y,S)=>{w.once("error",D=>{c.stop(h,v),S(D)}),w.once("close",(D,_)=>{c.stop(h,v),y({code:D,signal:_})})}),async terminate(){w.kill("SIGKILL")}}}}function fx(t){let e=/^'?v?(\d+(\.\d+)*)/.exec(t);if(e)return e[1].split(".").map(n=>parseInt(n,10))}function dx(t,e){for(let n=0,r=Math.max(t.length,e.length);n<r;n++){let o=t[n]||0,i=e[n]||0;if(o!==i)return o<i}return!1}var iY=Al?(t,e,n)=>Pp.spawn(vse,[t,...e||[]],{...n,windowsHide:!0}):Pp.fork;async function jf(t,e){if(!e){try{return require(t)}catch{}return}try{return require(`${e}/node_modules.asar/${t}`)}catch{}try{return require(`${e}/node_modules/${t}`)}catch{}try{return __non_webpack_require__(`${e}/node_modules.asar/${t}`)}catch{}try{return __non_webpack_require__(`${e}/node_modules/${t}`)}catch{}}function sY(t){let{output:e}=t,n=[];return{output:sn({...e,get dimensions(){return e.dimensions},event:o=>n?n.push(o):e.event(o)}),flush:()=>{n&&(n.forEach(o=>e.event(o)),n=void 0)}}}function aY(t,e,n){return sn({...t,get dimensions(){return t.dimensions},event:o=>{o.channel===e&&t.event(o),n.event(o)}})}function Yn(t,e){return e&&typeof e=="object"&&"win32"in e?t==="win32"?e.win32:e.posix:e}async function Ai(t,e){return Yn(t.platform,{posix:async()=>{try{return await t.exec(`test -f '${e}'`),!0}catch{return!1}},win32:async()=>(await t.exec(`Test-Path '${e}' -PathType Leaf`)).stdout.trim()==="True"})()}var GR;async function lx(){return GR===void 0&&(GR=(async()=>{try{return rY.userInfo().username}catch(t){if(process.platform!=="linux")throw t;return(await X({exec:ds(void 0),cmd:"id",args:["-u","-n"],output:Fe})).stdout.toString().trim()}})()),GR}function cY(t){let e=t.replace(/['\\]/g,"\\$&"),n=Wf(t).replaceAll("'","\\'");return` (command -v getent >/dev/null 2>&1 && getent passwd '${e}' || grep -E '^${n}|^[^:]*:[^:]*:${n}:' /etc/passwd || true)`}async function lY(t,e,n,r,o,i){let s="Extracting tarball",a=i.start(s),c=`${r}_${Date.now()}`;try{await rx(t,e,c,i);let l=n instanceof Buffer?n:await(async()=>{let u=[];for await(let f of n)u.push(f);return Buffer.concat(u)})();await X({exec:t,cmd:"tar",args:["--no-same-owner",`-x${o?"z":""}`,"--strip-components","1","-C",c],stdin:l,output:i,print:"continuous"}),await tx(t,e,c,r,i)}catch(l){try{await nx(t,e,c,{recursive:!0,force:!0},i)}catch{}throw l}finally{i.stop(s,a)}}async function Wv(t){return t.path.join(await t.tmpdir(),t.platform==="linux"?`vsch-${await t.getUsername()}`:"vsch")}async function mx(t,e){let{output:n}=t,r=await jt(e.remoteExec,n);try{for(let i=0;i<3;i++){let s=Date.now();await r.exec("echo ping!"),n.write(`Roundtrip ${i+1} to container took ${Date.now()-s} ms`)}}finally{r.process.terminate()}let o=await jt(t.cliHost.exec,n);try{for(let i=0;i<3;i++){let s=Date.now();await o.exec("echo ping!"),n.write(`Roundtrip ${i+1} to host took ${Date.now()-s} ms`)}}finally{o.process.terminate()}}function ao(t){return t?{...t,PSModulePath:void 0}:{PSModulePath:void 0}}var ri="\u2404";async function jt(t,e,n,r="linux",o="Container"){let i=typeof t=="function",s=r==="win32",a=n?{VSCODE_REMOTE_CONTAINERS_SESSION:n}:{},c=i?await t({env:s?ao(a):a,cmd:s?"powershell":"/bin/sh",args:s?["-NoProfile","-Command","-"]:[],output:e}):t;if(!i){let d=s?`powershell -NoProfile -Command "powershell -NoProfile -Command -"
`:`/bin/sh -c 'echo ${ri}; /bin/sh'
`;c.stdin.write(d),await new Promise(g=>{let h="",v=new zR.StringDecoder;c.stdout.on("data",function C(w){h+=v.write(w),h.includes(d)&&(c.stdout.off("data",C),g())})})}let l=Cse(c),u;async function f(d,p){let g=u=(async()=>{try{await u}catch{}return m(Yn(r,d),p)})();try{return await Promise.race([g,l.unexpectedExit])}finally{l.disposeStdioListeners(),u===g&&(u=void 0)}}async function m(d,p){let g=`Run in ${o.toLowerCase()}: ${d.replace(/\n.*/g,"")}`,h;if((p==null?void 0:p.logOutput)!=="silent"&&(h=e.start(g,p==null?void 0:p.logLevel)),c.stdin.destroyed){e.write("Stdin closed!");let{code:A,signal:U}=await c.exit;return Promise.reject({message:`Shell server terminated (code: ${A}, signal: ${U})`,code:A,signal:U})}r==="win32"?c.stdin.write(`[Console]::Write('${ri}'); ( ${d} ); [Console]::Write("${ri}$LastExitCode ${ri}"); [Console]::Error.Write('${ri}')
`):c.stdin.write(`echo -n ${ri}; ( ${d} ); echo -n ${ri}$?${ri}; echo -n ${ri} >&2
`);let[v,C]=uY(c.stdout,[1,2],(p==null?void 0:p.logOutput)==="continuous"?(A,U,k)=>{U===1&&k===0&&e.write(A,p==null?void 0:p.logLevel)}:()=>{}),w=uY(c.stderr,[1],(p==null?void 0:p.logOutput)==="continuous"?(A,U,k)=>{U===0&&k===0&&e.write(A,p==null?void 0:p.logLevel)}:()=>{})[0];p!=null&&p.stdin&&(await v,c.stdin.write(p==null?void 0:p.stdin));let[y,S]=await C,[D]=await w,_=parseInt(S,10)||0;return((p==null?void 0:p.logOutput)===void 0||(p==null?void 0:p.logOutput)===!0)&&(e.write(y,p==null?void 0:p.logLevel),e.write(D,p==null?void 0:p.logLevel),_&&e.write(`Exit code ${_}`,p==null?void 0:p.logLevel)),(p==null?void 0:p.logOutput)==="continuous"&&_&&e.write(`Exit code ${_}`,p==null?void 0:p.logLevel),(p==null?void 0:p.logOutput)!=="silent"&&e.stop(g,h,p==null?void 0:p.logLevel),_?Promise.reject({message:`Command in ${o.toLowerCase()} failed: ${d}`,code:_,stdout:y,stderr:D}):{stdout:y,stderr:D}}return{exec:f,process:c,platform:r,path:Yn(r,yse)}}function uY(t,e,n){let r=e.map(()=>{let u;return{promise:new Promise((m,d)=>u={resolve:m,reject:d}),...u}}),o=new zR.StringDecoder("utf8"),i=[],s=0,a=[];function c(u){let f=o.write(u);l(f)}function l(u){let f=u.indexOf(ri);if(f!==-1){let m=u.substr(0,f);i.push(m),n(m,s,a.length),a.push(i.join("")),i.length=0,a.length===e[s]&&(r[s].resolve(a),s++,a=[],s===e.length&&t.off("data",c)),f+1<u.length&&l(u.substr(f+1))}else i.push(u),n(u,s,a.length)}return t.on("data",c),r.map(u=>u.promise)}function Cse(t){let e,n=new Promise((c,l)=>e=l),r=[],o=[],i=c=>r.push(c),s=c=>o.push(c);return t.stdout.on("data",i),t.stderr.on("data",s),t.exit.then(({code:c,signal:l})=>{e(`Shell server terminated (code: ${c}, signal: ${l})
${Buffer.concat(r).toString()}
${Buffer.concat(o).toString()}`)},c=>{e(`Shell server failed: ${c&&(c.stack||c.message)}`)}),{unexpectedExit:n,disposeStdioListeners:()=>{t.stdout.off("data",i),t.stderr.off("data",s),r.length=0,o.length=0}}}var IY=Y(require("net")),PY=Y(DY());async function bY({forwardedPorts:t,output:e,getLogLevel:n},r,o,i){e.write(`Port forwarding for container port ${o} starts listening on local port.`,2);let s=i?{VSCODE_REMOTE_CONTAINERS_SESSION:i}:void 0;return new Promise((a,c)=>{let l=!0,u=new Set,f=IY.createServer({pauseOnConnect:!0},m=>{let d=m.remotePort,p=f.address().port;e.write(`Port forwarding connection from ${d} > ${p} > ${o} in the container.`),n()===1&&(async()=>{let g=await(0,PY.default)("port",d);e.write(`Port forwarding process for ${d} > ${p} > ${o} in the container:
${JSON.stringify(g,void 0,"  ")}`)})().catch(console.error),Wse(e,r,[r.nodeExecutable,"-e",`
				const net = require('net');
				const fs = require('fs');
				process.stdin.pause();
				const client = net.createConnection({ host: '127.0.0.1', port: ${o} }, () => {
					console.error('Connection established');
					client.pipe(process.stdout);
					process.stdin.pipe(client);
				});
				client.on('close', function (hadError) {
					console.error(hadError ? 'Remote close with error' : 'Remote close');
					process.exit(hadError ? 1 : 0);
				});
				client.on('error', function (err) {
					process.stderr.write(err && (err.stack || err.message) || String(err));
				});
				process.stdin.on('close', function (hadError) {
					console.error(hadError ? 'Remote stdin close with error' : 'Remote stdin close');
					process.exit(hadError ? 1 : 0);
				});
				process.on('uncaughtException', function (err) {
					fs.writeSync(process.stderr.fd, \`Uncaught Exception: \${String(err && (err.stack || err.message) || err)}\\n\`);
				});
			`],s).then(g=>{let h;g.exit.then(({code:v,signal:C})=>{h||(u.delete(m),m.end()),e.write(`Port forwarding ${d} > ${p} > ${o} terminated${h?` by extension (${h})`:""} with code ${v} and signal ${C}.`)},v=>{u.delete(m),m.end(),e.write(`Port forwarding ${d} > ${p} > ${o} terminated with error: ${v&&v.message||String(v)}`)}),g.stderr.on("data",v=>{e.write(`Port forwarding ${d} > ${p} > ${o} stderr: ${v.toString("utf8")}`,2)}),m.on("close",v=>{e.write(`Port forwarding ${d} > ${p} > ${o}: Local close${v?" with error":""}`,2),u.delete(m),h="closed",g.stdin.end(),setTimeout(()=>{h="killed",g.terminate().catch(console.error)},5e3)}),g.stdout.pipe(m),m.pipe(g.stdin),u.add(m)}).catch(console.error)});f.on("listening",()=>{var d,p;let m={targetPort:o,server:f,connections:u};f.on("close",()=>{t.delete(m)}),t.add(m),e.write(`Port forwarding local port ${(d=f.address())==null?void 0:d.port} to container port ${o}`),l?(l=!1,a(f)):e.write(`Port forwarding local port ${(p=f.address())==null?void 0:p.port} to container port ${o} failed before listening`)}),f.on("error",m=>{var d;if(m&&(m.code==="EADDRINUSE"||m.code==="EACCES")){f.listen(0,"127.0.0.1");return}l?(l=!1,c(m)):e.write(`Port forwarding local port ${(d=f.address())==null?void 0:d.port} to container port ${o} error: ${(m==null?void 0:m.message)||String(m)}`)}),f.on("close",()=>{var m;l?(l=!1,c(new Error("Closed"))):e.write(`Port forwarding local port ${(m=f.address())==null?void 0:m.port} to container port ${o} closed`)}),f.listen(o,"127.0.0.1")})}async function Wse(t,e,n,r){return e.remoteExec({env:r,cmd:n[0],args:n.slice(1),output:t})}function TY(t,e){return[...t].find(n=>{let r=n.server.address();return(r==null?void 0:r.port)===e})}var Tp=Y(require("path"));var tk=Y(Mr());function wx(t,e){let n,r=t.platform==="win32",o={...t,get env(){return n||(n=kY(r,t.env))}},i=Yse.bind(void 0,r,o);return t.containerWorkspaceFolder&&(o.containerWorkspaceFolder=NY(i,t.containerWorkspaceFolder)),vx(i,e)}function RY(t,e,n,r){let o=t==="win32";return vx(qse.bind(void 0,o,e,kY(o,n)),r)}function vx(t,e){if(typeof e=="string")return NY(t,e);if(Array.isArray(e))return e.map(n=>vx(t,n));if(e&&typeof e=="object"){let n=Object.create(null);return Object.keys(e).forEach(r=>{n[r]=vx(t,e[r])}),n}return e}var jse=/\$\{(.*?)\}/g;function kY(t,e){if(t){let n=Object.create(null);return Object.keys(e).forEach(r=>{n[r.toLowerCase()]=e[r]}),n}return e}function NY(t,e){return e.replace(jse,Vse.bind(void 0,t))}function Vse(t,e,n){let r,o=n.split(":");return o.length>1&&(n=o[0],r=o[1]),t(e,n,r)}function Yse(t,e,n,r,o){switch(r){case"env":case"localEnv":return LY(t,e.env,o,n,e.configFile);case"localWorkspaceFolder":return e.localWorkspaceFolder!==void 0?e.localWorkspaceFolder:n;case"localWorkspaceFolderBasename":return e.localWorkspaceFolder!==void 0?(t?Tp.win32:Tp.posix).basename(e.localWorkspaceFolder):n;case"containerWorkspaceFolder":return e.containerWorkspaceFolder!==void 0?e.containerWorkspaceFolder:n;case"containerWorkspaceFolderBasename":return e.containerWorkspaceFolder!==void 0?Tp.posix.basename(e.containerWorkspaceFolder):n;default:return n}}function qse(t,e,n,r,o,i){switch(o){case"containerEnv":return LY(t,n,i,r,e);default:return r}}function LY(t,e,n,r,o){if(n){t&&(n=n.toLowerCase());let i=e[n];return typeof i=="string"?i:""}throw new pe({description:o?tk.t("'{0}' in {1} can not be resolved because no environment variable name is given.",r,Tp.posix.basename(o.path)):tk.t("'{0}' can not be resolved because no environment variable name is given.",r)})}var yx=Y(require("path"));var Gse=["install.sh","install","bootstrap.sh","bootstrap","script/bootstrap","setup.sh","setup","script/setup"];async function AY(t,e,n,r,o){let{repository:i,installCommand:s,targetPath:a}=t.dotfilesConfiguration;if(i=o.getDotfileConfiguration("dotfiles.repository")||i,s=o.getDotfileConfiguration("dotfiles.installCommand")||s,a=o.getDotfileConfiguration("dotfiles.targetPath")||a,!i)return;await r;let c=await n;i.indexOf(":")===-1&&!/^\.{0,2}\//.test(i)&&(i=`https://github.com/${i}.git`);let l=e.shellServer,u=FY(e),f=Object.keys(c).filter(m=>!(m.startsWith("BASH_FUNC_")&&m.endsWith("%%"))).reduce((m,d)=>`${m}${d}=${zse(c[d])} `,"");try{t.output.event({type:"progress",name:"Installing Dotfiles",status:"running"}),s?await l.exec(`# Clone & install dotfiles
${Cx(u)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${f}git clone ${i} ${a} || exit $?
if [ -x ${s} ]
then
	echo Executing script ${s}
	cd ${a} && ${f}${s}
else
	echo Error: ${s} not executable
	exit 126
fi
`,{logOutput:"continuous",logLevel:3}):await l.exec(`# Clone & install dotfiles
${Cx(u)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${f}git clone ${i} ${a} || exit $?
cd ${a}
for f in ${Gse.join(" ")}
do
	if [ -e $f ]
	then
		installCommand=$f
		break
	fi
done
if [ -z "$installCommand" ]
then
	dotfiles=$(ls -d ${a}/.* 2>/dev/null | grep -v -E '/(.|..|.git)$')
	if [ ! -z "$dotfiles" ]
	then
		echo Linking dotfiles: $dotfiles
		ln -sf $dotfiles ~ 2>/dev/null
	else
		echo No dotfiles found.
	fi
else
	if [ -x "$installCommand" ]
	then
		echo Executing script '${a}'/"$installCommand"
		${f}./"$installCommand"
	else
		echo Error: '${a}'/"$installCommand" not executable
		exit 126
	fi
fi
`,{logOutput:"continuous",logLevel:3}),t.output.event({type:"progress",name:"Installing Dotfiles",status:"succeeded"})}catch{t.output.event({type:"progress",name:"Installing Dotfiles",status:"failed"})}}function zse(t){return`'${(t||"").replace(/'+/g,`'"$&"'`)}'`}function FY(t){return yx.posix.join(Mi(t),".dotfilesMarker")}async function OY(t){let e=FY(t),n=yx.posix.resolve(t.homeFolder,".devcontainer",".dotfilesMarker");try{await t.shellServer.exec(`test -f '${e}' && test ! -e '${n}' && mkdir -p '${yx.posix.dirname(n)}' && cp '${e}' '${n}'`)}catch{}}var rk=Y(require("path"));async function UY(t,e){var i;let n=Mi(t),r=rk.posix.join(n,".writeMachineMCPConfigMarker"),o=MY(t);if(await Ex(t.shellServer,r)&&!await Ai(t.shellServer,o)){let s=(i=e.customizations)==null?void 0:i.vscode,a=(Array.isArray(s)?s:s?[s]:[]).map(l=>l.mcp).filter(Boolean),c=Kse(a);Object.keys(c).length&&await t.shellServer.exec(`mkdir -p '${rk.posix.dirname(o)}' && cat >'${o}' <<'mcpJSON'
${JSON.stringify(c,null,"	")}
mcpJSON
`)}}function Kse(t){let e={},n=Object.assign({},...t.map(s=>s.servers));Object.keys(n).length&&(e.servers=n);let r=t.filter(s=>s.inputs).map(s=>s.inputs).flat(),o=new Set,i=[];for(let s=r.length-1;s>=0;s--){let a=r[s];o.has(a.id)||(o.add(a.id),i.push(a))}return i.length&&(e.inputs=i.reverse()),e}var jl=0,$Y=/Extension host agent listening on (\d+)/;var Jse="updateContentCommand";async function Ix(t){let{params:e,createdAt:n,startedAt:r,sharedDataFolder:o,sharedDataFolderIsLocalCacheFolder:i,remoteWorkspaceFolder:s,containerUser:a,containerGroup:c,containerEnv:l,remoteExec:u,remotePtyExec:f,remoteExecAsRoot:m,rootShellServer:d,remoteWaylandSocket:p}=t,g;if(d&&a==="root"?g=d:g=await jt(u,e.output,e.sessionId),!l){let I=(await g.exec("echo $PATH")).stdout.trim();l=I?{PATH:I}:{}}a||(a=await Fl(g)),!m&&a==="root"&&(m=u);let h=await HR(g),v=await Uf(g,a);v||e.output.write(X0(`User ${a} not found with 'getent passwd'.`));let C=await Zse(l,v),w=await Xse(g,l,v),y=Ep(Se.posix,w,e.product),{commit:S,quality:D}=e.product,_=!1,A=S&&await eae(y,S,D||"insider",e.web,_),U=XS(h,D==="stable"),k=S&&o&&await zY(Se.posix,o,U,S,D||"insider",e.web,_),E=A&&Hl("linux",A),x;d?x=Promise.resolve(d):a==="root"&&(x=Promise.resolve(g));let b={createdAt:n,startedAt:r,osRelease:h,build:U,user:a,gid:c||(v==null?void 0:v.gid),env:l,shell:C,homeFolder:w,userDataFolder:y,sharedDataFolderIsLocalCacheFolder:i,sharedDataFolder:o,legacy:_,installFolder:A,sharedInstallFolder:k,remoteWorkspaceFolder:s,nodeExecutable:E,remoteExec:u,remotePtyExec:f,remoteExecAsRoot:m,shellServer:g,remoteWaylandSocket:p};return(x||m)&&(b.launchRootShellServer=()=>x||(x=jt(m,e.output))),b}async function Fl(t){return(await t.exec("id -un")).stdout.trim()}async function Xse(t,e,n){if(e.HOME){if(e.HOME===(n==null?void 0:n.home)||(n==null?void 0:n.uid)==="0")return e.HOME;try{return await t.exec(`[ ! -e '${e.HOME}' ] || [ -w '${e.HOME}' ]`),e.HOME}catch{}}return(n==null?void 0:n.home)||"/root"}async function Zse(t,e){return t.SHELL||e&&e.shell||"/bin/sh"}async function Uf(t,e){let{stdout:n}=await t.exec(cY(e),{logOutput:!1});if(n.trim())return Qse(n)}function Qse(t){let e=t.replace(/\n$/,"").split(":");return{name:e[0],uid:e[2],gid:e[3],home:e[5],shell:e[6]}}async function eae(t,e,n,r,o){return Se.posix.join(t,"bin",`${e}${n==="stable"?"":`-${n}`}${r?"-web":""}${o?"-legacy":""}`)}async function zY(t,e,n,r,o,i,s){return t.join(e,"bin",n.id,`${r}${o==="stable"?"":`-${o}`}${i?"-web":""}${s?"-legacy":""}`)}function KY(t){return Se.posix.join(t.userDataFolder,"extensions")}function Mi(t){return Se.posix.join(typeof t=="string"?t:t.userDataFolder,"data/Machine")}function Px(t){return Se.posix.join(t.userDataFolder,"data/Machine/settings.json")}function MY(t){return Se.posix.join(t.userDataFolder,"data/User/mcp.json")}function tae(t){return Se.posix.join(t,".vscode-remote")}function Ep(t,e,n){return t.join(e,n.serverDataFolderName)}function $R(t,e,n){return t.join(e,n.dataFolderName)}function bx(t){return Se.posix.join("/var",/^\.*(.*)$/.exec(t)[1])}function Hl(t,e){return Yn(t,{posix:()=>Se.posix.join(e,"node"),win32:()=>Se.win32.join(e,"node.exe")})()}var qv=class{constructor(e){this.settings=e}getConfiguration(e){return this.settings[us(e)]||this.settings[Nl(e)]}getNewConfiguration(e){return this.settings[us(e)]}getDotfileConfiguration(e){return this.settings[Nl(e)]||this.settings[e]}};async function Vl(t,e,n,r,o=jl,i,s){await nae(t,e);let a=await rae(t,e,r);await UY(e,r);let{serverDownloaded:c,didCheckRequirements:l}=await uae(t,e),u,f,m=Promise.resolve(),d;if(e.nodeExecutable){let y=await JS(t,e,a);u=y.remoteContainersCLI,f=y.remoteEnv,m=y.ready;let S=i;i=S&&(async(..._)=>(await y.ready,S(..._))),d=y.mrpcExec;let D=t.cliHost.reconnect;D&&(t.cliHost.reconnect=async _=>{await D(_),y.reconnect().catch(A=>t.output.write(ot(A&&(A.stack||A.message)||String(A))))})}let g=t.computeExtensionHostEnv||t.postCreate.enabled?Bf(t,e,r,d).then(async y=>({...y,...f,...await BV(e,y),REMOTE_CONTAINERS:"true",...RY(t.cliHost.platform,n.configFilePath,e.env,r.remoteEnv||{})})):Promise.resolve({}),h=a.getConfiguration("gitCredentialHelperConfigLocation")??t.credentialHelperConfigLocation;e.nodeExecutable&&(await Rv(t,e,[".ssh","known_hosts"],"ssh"),h!=="none"&&await xx(e,u,t.output,"system"));let v,C,w;if(e.installFolder){let S=await Iae(t,e,o,d,async()=>mae(t,e,r,!1),void 0,!0,!1,l),D=S.serverPort;w=S.connectionToken,v=D,t.forwardServerPort&&e.nodeExecutable&&(C=await bY(t,e,D,t.sessionId),v=C.address().port,t.backgroundTasks.push(async()=>Rae(t,e,r)))}if(t.postCreate.enabled){let y,S=new Promise(_=>y=()=>{_()}),D=(async()=>{let _={...f,REMOTE_CONTAINERS:"true"},A=["onCreateCommand","updateContentCommand","postCreateCommand","postStartCommand","postAttachCommand"],U=A.reduce((k,E)=>(k[E]=(r[`${E}s`]||[]).length>0,k),{});if(t.prebuild){let k=A.indexOf("updateContentCommand");if((!A.slice(0,k+1).some(b=>U[b])||!i?"prebuild":await i(!1,!1,!0,a,_))!=="prebuild")throw new Error('"prebuild" expected')}else{let k=!0,E=!0,x=r.waitFor||Jse,b=A.indexOf(x),I=A.indexOf("postCreateCommand"),T=b<=I&&!A.slice(0,b+1).some(B=>U[B]),R=a.getDotfileConfiguration("dotfiles.repository")||t.dotfilesConfiguration.repository,L=!A.slice(0,I+1).some(B=>U[B])&&!R,N=T?"skipNonBlocking":L||!i?"stopForPersonalization":await i(k,E,!1,a,_);if(N==="skipNonBlocking"){if(y(),t.postCreate.skipNonBlocking)return;k=!1,N=!A.slice(b+1,I+1).some(W=>U[W])&&!R||!i?"stopForPersonalization":await i(k,E,!1,a,_)}if(N==="stopForPersonalization"){i||await AY(t,e,g,m,a),e.nodeExecutable&&((a.getConfiguration("copyGitConfig")??t.isCopyGitConfigEnabled)&&await AS(t,e,g.then(z=>({...e.env,...z}))),await xx(e,u,t.output,h)),await(s==null?void 0:s()),E=!1;let B=b>I&&!A.slice(I+1,b+1).some(z=>U[z]),W=!A.slice(I+1).some(z=>U[z]);N=B?"skipNonBlocking":W||!i?"done":await i(k,E,!1,a,_)}if(N==="skipNonBlocking"){if(y(),t.postCreate.skipNonBlocking)return;k=!1,N=!A.slice(b+1).some(W=>U[W])||!i?"done":await i(k,E,!1,a,_)}if(N!=="done")throw new Error('"done" expected')}})();D.then(()=>{t.postCreate.done()},_=>{t.postCreate.done(_)}),t.backgroundTasks.push(D),await Promise.race([S,D])}return{hostOrContainerPort:v,hostPortServer:C,connectionToken:w,remoteEnv:t.computeExtensionHostEnv?await g:{},serverDownloaded:c}}async function nae(t,e){let n=tae(e.homeFolder);!await _x(e.shellServer,e.userDataFolder)&&await _x(e.shellServer,n)&&await dc(t,e,["/bin/sh","-c",`cp -r '${n}' '${e.userDataFolder}'`])}async function rae(t,e,n){var s;let r=Mi(e),o=Se.posix.join(r,".writeMachineSettingsMarker"),i=Px(e);if(await Ex(e.shellServer,o)&&!await Ai(e.shellServer,i)){let a=(s=n.customizations)==null?void 0:s.vscode,c=(Array.isArray(a)?a:a?[a]:[]).map(d=>d.settings).filter(Boolean),l=await oae(e.shellServer,t.getLogLevel()),u=l.length?`

Some of the command line tools available on the \`PATH\`: ${l.map(d=>`\`${d}\``).join(", ")}`:"",f=e.osRelease.prettyName||"Linux";c.push({"github.copilot.chat.codeGeneration.instructions":[{text:`This workspace is in a dev container running on ${f}.

Use \`"$BROWSER" <url>\` to open a webpage in the host's default browser.${u}`}]});let m=sae(c);if(aae(m,n.portsAttributes),cae(m,n.otherPortsAttributes),Object.keys(m).length)return await e.shellServer.exec(`mkdir -p '${Se.posix.dirname(i)}' && cat >'${i}' <<'settingsJSON'
${JSON.stringify(m,null,"	")}
settingsJSON
`),new qv(m)}try{let{stdout:a}=await e.shellServer.exec(`cat ${i}`);return new qv(Me(a)||{})}catch{return new qv({})}}async function oae(t,e){let n=["apt","dpkg","snap","dnf","yum","rpm","apk","docker","git","gh","kubectl","podman","curl","wget","ssh","scp","rsync","gpg","ps","lsof","netstat","top","tree","find","grep","zip","unzip","tar","gzip","bzip2","xz"],{stdout:r}=await t.exec(`which ${n.join(" ")} || true`,{logOutput:e===1});return r.split(`
`).filter(Boolean).map(i=>Se.posix.basename(i)).filter(i=>n.includes(i))}var iae=["github.copilot.chat.reviewSelection.instructions","github.copilot.chat.codeGeneration.instructions","github.copilot.chat.commitMessageGeneration.instructions","github.copilot.chat.pullRequestDescriptionGeneration.instructions","github.copilot.chat.testGeneration.instructions"];function sae(t){let e=t.reduce((n,r)=>iae.reduce((o,i)=>{let s=r[i];return Array.isArray(s)&&(o[i]=o[i]?o[i].concat(s):s),o},n),{});return Object.assign({},...t,e)}function aae(t,e){if(!t||!e||!Object.keys(e).length)return;let n="remote.portsAttributes";if(!t[n]){t[n]=e;return}for(let r in e)t[n][r]||(t[n][r]=e[r])}function cae(t,e){if(!t||!e)return;let n="remote.otherPortsAttributes";t[n]||(t[n]=e)}async function Tx(t,e,n,r){let o=typeof t.gid=="string"?`${t.user}:${t.gid}`:t.user,i=await e();if((await i.exec(`stat -c %u ${n}`)).stdout.trim()==="0"){let c=Se.posix.dirname(n);c!=="/"&&await i.exec(`chown ${o} ${c}`),n!=="/"&&await i.exec(`chown -R ${o} ${n}`)}else if(r&&(await i.exec(`stat -c %u ${r}`)).stdout.trim()==="0"){let u=Se.posix.dirname(r);u!=="/"&&await i.exec(`chown -R ${o} ${u}`)}}async function xx(t,e,n,r){if(e||Al)if(r==="none")n.write("Git credential helper not enabled.");else{let o=r==="system"?t.launchRootShellServer&&await t.launchRootShellServer():t.shellServer;o?await o.exec(`command -v git >/dev/null 2>&1 && git config --${r} --replace-all credential.helper '!f() { ${t.nodeExecutable} ${e} git-credential-helper $*; }; f' || true`):n.write("Cannot configure system wide Git credential helper without root access.")}}async function Rv(t,e,n,r,o){let{cliHost:i}=t,s=i.path.join(await i.homedir(),...n);if(!await i.isFile(s)&&(i.type==="local"||(i=await Gr(process.cwd(),t.loadNativeModule,t.output),s=i.path.join(await i.homedir(),...n),!await i.isFile(s))))return!1;let a=Se.posix.join(e.homeFolder,...n);return kl(i,e.shellServer,s,a,r,o)}async function kl(t,e,n,r,o,i=""){let s=await lae(t,n);if(s)try{let a=await r,c=Se.posix.dirname(a);return await e.exec(`# Test for ${a} and ${o}
[ -e '${a}' ] ${i}&& echo '${a}' exists && exit 1
command -v ${o} >/dev/null 2>&1 || (echo ${o} not found && exit 1) || exit 1
mkdir -p '${c}'
[ -w '${c}' ] || (echo '${c}' not writable && exit 1) || exit 1`),await e.exec(`# Copy ${n} to ${a}
${Ff(s.byteLength)} >>'${a}'`,{stdin:s}),!0}catch(a){if(a&&a.code!==1)throw a}return!1}async function lae(t,e){try{return await t.readFile(e)}catch(n){if(n&&(n.code==="ENOENT"||n.code==="EISDIR"))return;throw n}}async function uae(t,e){let n=await HY(t,e,e.legacy);if(n!=="retryWithLegacyServer")return n;let r=await HY(t,e,!0);return e.legacy=!0,e.installFolder=r.installFolder,e.sharedInstallFolder=r.sharedInstallFolder,e.nodeExecutable=r.installFolder&&Hl("linux",r.installFolder),r}async function HY(t,e,n){let r=await fae(t,e,n),o=!1;if(r.installFolder){let i=Se.posix.join(r.installFolder,"bin","helpers","check-requirements.sh");if(o=await Dae(e.shellServer,i),o)try{await e.shellServer.exec(`'${i}'`)}catch(s){if((s==null?void 0:s.code)===100){if(!n)return"retryWithLegacyServer"}else throw(s==null?void 0:s.code)===99?new pe({description:Bl.t("The container does not meet all the requirements of the VS Code Server."),detail:s==null?void 0:s.stdout.toString().trim(),step:"checkRequirements",data:{reload:!1,learnMoreUrl:"https://aka.ms/vscode-remote/faq/old-linux"},originalError:s}):s}}return{...r,didCheckRequirements:o}}async function fae(t,e,n){let{commit:r}=t.product,{shellServer:o,launchRootShellServer:i,build:s}=e;if(!(r&&e.installFolder))return{serverDownloaded:void 0,installFolder:void 0,sharedInstallFolder:void 0};let a=n?`${e.installFolder}-legacy`:e.installFolder,c=n&&e.sharedInstallFolder?`${e.sharedInstallFolder}-legacy`:e.sharedInstallFolder;dae(e.osRelease,s),s.preview&&t.output.write(`\r
\x1B[1mSupport for ${s.label} is in preview.\x1B[22m\r
\r
`);let l=await _x(o,a),u;if(l||s===QY[s.arch]&&(i?u=(await i()).exec("apk info | grep -e '^libstdc++$' || (apk update && apk add libstdc++)"):u=o.exec(`apk info | grep -e '^libstdc++$' || (echo "ERROR: libstdc++ not found. Please install." >&2 && exit 1)`)),c&&await _x(o,c))return l||await o.exec(`mkdir -p '${Se.posix.dirname(a)}' && ln -snf '${c}' '${a}'`),i&&(async()=>{await(await i()).exec(`touch '${c}'`)})().catch(console.error),await u,{serverDownloaded:!1,installFolder:a,sharedInstallFolder:c};if(l)return{serverDownloaded:!1,installFolder:a,sharedInstallFolder:c};t.progress(4),t.output.write(`Installing VS Code Server for commit ${r}\r
`);let f=!!(c&&i),m=f?c:a,d=f?await i():o,p={localCacheFolder:t.localCacheFolder,build:s,commit:r,quality:t.product.quality||"insider",web:t.web,output:t.output,alternateDownload:t.alternateDownload,legacy:n},g=_p(p),h=await Cr(g);h||await Ov(p);try{if(e.sharedDataFolderIsLocalCacheFolder)await WY(p);else{let v=Fv(t,d,g,m);t.cliHost.type!=="local"&&await Promise.race([v,Wt(2e4).then(()=>!0)])&&mx(t,e).catch(C=>t.output.write(`Error testing connection: ${(C==null?void 0:C.stack)||(C==null?void 0:C.message)||C}`)),await v}}catch(v){if(v&&v.stderr&&/unexpected end of file|not in gzip format/i.test(v.stderr.toString()))await Ov(p),e.sharedDataFolderIsLocalCacheFolder?await WY(p):await Fv(t,d,g,m);else throw v}return f&&(await o.exec(`mkdir -p '${Se.posix.dirname(a)}' && ln -snf '${c}' '${a}'`),(async()=>{await d.exec(`touch '${c}' && cd '${Se.posix.dirname(c)}' && ls -td *[^_]????????????? | tail -n +10 | xargs rm -rf`)})().catch(console.error)),await u,{serverDownloaded:!h,installFolder:a,sharedInstallFolder:c}}function dae(t,e){let n=t.version;if(e.minVersion&&n){let r=fx(n.trim());if(r&&dx(r,e.minVersion)){let o=Bl.t("{0} {1} or later required.",e.label,e.minVersion.join("."));throw new pe({description:o,data:{reload:!1}})}}}async function Ov(t){let{build:e,commit:n,quality:r,web:o,legacy:i,output:s}=t,a="Downloading VS Code Server",c=s.start(a);s.write(`${n} ${e.id} ${r}${o?" web":""}${i?" legacy":""}`);let l=_p(t);await os(Se.dirname(l));let u=`https://update.code.visualstudio.com/commit:${n}/server-${i?e.id.replace("linux-","linux-legacy-"):e.id}${o?"-web":""}/${r}`;s.write(`URL: ${u}`),s.write(`Path: ${l}`);let f,m;try{m=`${l}_${Date.now()}`,await new Promise((d,p)=>{let g=Dx.createWriteStream(m);s.write("Starting download.",1),VY.https.get(u,{trackRedirects:!0},v=>{var y;if(v.statusCode<200||v.statusCode>299){s.write(`Download failed: ${v.statusCode} ${v.statusMessage}.`,1),p(new pe({description:Bl.t("Downloading the VS Code Server failed. Please try again later."),originalError:`Failed to download VS Code Server (${u}): HTTP ${v.statusCode} - ${v.statusMessage}`}));return}let w=(y=[...v.redirects,v].find(S=>S.headers["x-sha256"]))==null?void 0:y.headers["x-sha256"];f=Array.isArray(w)?w[0]:w,s.write("Downloading data.",1),v.on("error",p),v.pipe(g),v.on("end",d)}).on("error",p)}),f&&await BY(u,m,f,s)}catch(d){if(s.write("Downloading failed.",1),s.write((d==null?void 0:d.stack)||(d==null?void 0:d.message)||String(d),1),t.alternateDownload)s.write(d&&(d.originalError||d.message)),s.write("Retrying to download VS Code Server."),m=`${l}_${Date.now()}`,await t.alternateDownload(u,m),f&&await BY(u,m,f,s);else throw d||new pe({description:Bl.t("Downloading the VS Code Server failed. Please try again later.")})}finally{s.stop(a,c)}await sl(m,l)}async function BY(t,e,n,r){let o=Rp.createHash("sha256"),i=await at(e);o.update(i);let s=o.digest("hex");if(s!==n)throw r.write(`Failed to download VS Code Server (${t}): SHA mismatch, actual ${s} != expected ${n} (${e}, ${i.byteLength} bytes)`),new pe({description:Bl.t("Downloading the VS Code Server failed. Please try again later.")})}async function Fv(t,e,n,r,o,i=!0){let s="Installing VS Code Server",a=t.output.start(s),c=`${r}_${Date.now()}`;try{if(await e.exec(`mkdir -p ${c}`),o)typeof n=="string"&&n.endsWith(".zip")?await e.exec(`unzip ${n} -d ${c}`):await e.exec(`cat ${n} | tar --no-same-owner -x${i?"z":""} -C ${c}`);else{let l=typeof n=="string"?await at(n):n;await e.exec(`${Ff(l.byteLength,!0)} | tar --no-same-owner -x${i?"z":""} -C ${c}`,{stdin:l,logOutput:"continuous"})}await e.exec(`mv -n ${Se.posix.join(c,"*",".")} ${r} && rmdir ${c}`)}catch(l){try{await e.exec(`rm -rf ${c}`)}catch{}throw l}finally{t.output.stop(s,a)}}async function WY(t){let{localCacheFolder:e,build:n,commit:r,quality:o,web:i,legacy:s,output:a}=t,c="Unpacking VS Code Server",l=a.start(c);a.write(`${r} ${n.id} ${o} ${i?"web":""} ${s?"legacy":""}`);let u=await zY(Se,e,n,r,o,i,s),f=`${u}_${Date.now()}`;try{await os(f);let m=_p(t);await(await ds(void 0)({cmd:"tar",args:["--no-same-owner","-xzf",m,"--strip-components","1","-C",f],cwd:process.cwd(),output:a})).exit,await cl(u,{recursive:!0,force:!0}),await sl(f,u)}catch(m){try{await cl(f,{recursive:!0,force:!0})}catch{}throw m}finally{a.stop(c,l)}}function _p(t){let{localCacheFolder:e,build:n,commit:r,quality:o,web:i,legacy:s}=t,a=Se.join(e,"serverCache",r),c=`vscode-server-${n.id}${o==="stable"?"":`-${o}`}${i?"-web":""}${s?"-legacy":""}${n.archiveExt||".tar.gz"}`;return Se.join(a,c)}async function JY(t,e){let n=await eq(e),r={},{stdout:o}=await dc(t,e,[Se.posix.join(e.installFolder,...FS(n)),...tq(e.userDataFolder),...nq(t.getTelemetryLevel()),"--list-extensions"],e.installFolder,{remoteEnv:r});return o.toString().split(`
`).filter(i=>!!i)}async function mae(t,e,n,r){let o="Preparing Extensions",i=t.output.start(o),{sharedDataFolder:s}=e,a=s?Cae(s):void 0,c=XY(e),l=Mi(e),u=Se.posix.join(l,".installExtensionsMarker"),f=!await Ex(e.shellServer,u),m=hae(t,f,n);if(e.sharedDataFolderIsLocalCacheFolder)e.launchRootShellServer&&await(await e.launchRootShellServer()).exec(`mkdir -p '${a}' && chown -R ${e.user} ${a}`),await e.shellServer.exec(`mkdir -p '${a}' && ln -s -T '${a}' '${c}' || true`);else{let p=yae(t.localCacheFolder),g=await gae(t,e,p,a,c,[...m.builtinExtensions,...m.extensions]);vae(t,e,p,a,c,g).catch(console.error)}m.extensions=m.extensions.filter(p=>!m.builtinExtensions.includes(p)),t.product.version&&YY.lte("1.77.0",t.product.version.split("-")[0])&&(t.output.write(`Optimizing extensions for quality: ${t.product.quality}`),m.builtinExtensions=await pae(t,e,c,m.builtinExtensions));let d=[].concat(...m.builtinExtensions.map(p=>["--install-builtin-extension",p]),...m.extensions.map(p=>["--install-extension",p]));return r&&d.length&&d.push("--do-not-sync"),t.output.stop(o,i),{...m,args:d}}async function pae(t,e,n,r){if(r.length===0)return r;let{shellServer:o}=e,i=(await o.exec(`test -d ${n} && ls ${n} || true`)).stdout.trim().split(`
`).filter(a=>!!a&&a.endsWith("vsix"));t.output.write(`Available vsix: ${i.join(", ")||"None"}`);let s=r.map(a=>{let c=i.find(l=>l.startsWith(a.toLocaleLowerCase()));return c?`${n}/${c}`:a});return t.output.write(`Optimized extensions to install: ${s.join(", ")||"None"}`),s}function hae(t,e,n){var a,c;let r=e?[]:t.installBuiltinExtensions||[],o=t.getAdditionalExtensionsToInstall(e),i=[...e?[]:(((a=n.customizations)==null?void 0:a.vscode)||[]).map(l=>l.extensions||[]),o],s=[];for(let l of i.flat()){let u=(c=/^(?<removal>-)?(?<idAndVersion>(?<id>[^@ ]*)[^ ]*)$/.exec(l))==null?void 0:c.groups;if(u){let f=s.findIndex(m=>m.id===u.id);f!==-1&&s.splice(f,1),u.removal||s.push(u)}}return{builtinExtensions:r,extensions:s.map(l=>l.idAndVersion)}}async function gae(t,e,n,r,o,i){t.output.write(`Extensions cache, install extensions: ${i.join(", ")||"None"}`);let{shellServer:s}=e,a=(await s.exec(`test -d ${o} && ls ${o} || true`)).stdout.trim().split(`
`).filter(c=>!!c);if(r){let c=(await s.exec(`test -d ${r} && ls ${r} || true`)).stdout.trim().split(`
`).filter(u=>!!u),l=c.filter(u=>i.some(f=>u.toLowerCase().startsWith(f.toLowerCase()))&&a.indexOf(u)===-1);if(t.output.write(`Extensions cache, link in container: ${l.join(", ")||"None"}`),l.length){await s.exec(`mkdir -p '${o}' && ln -s '${r}'/* '${o}' || true`);let{launchRootShellServer:u}=e;u&&(async()=>{await(await u()).exec(`cd ${r} && touch ${l.map(m=>`'${m}'`).join(" ")}`)})().catch(console.error)}return{remoteExtensions:[...new Set([...a,...c])],cachedExtensions:c}}else{await os(n);let c=await al(n),l=c.filter(u=>i.some(f=>u.toLowerCase().startsWith(f.toLowerCase()))&&a.indexOf(u)===-1);if(t.output.write(`Extensions cache, copy to remote: ${l.join(", ")||"None"}`),l.length){let u=Se.basename(n),f=Wl.c({cwd:Se.dirname(n)},l.map(p=>Se.join(u,p))),m=Se.posix.join(o,`tmp-${Date.now()}`),d=await new Promise(p=>{let g=[];f.on("data",h=>g.push(h)),f.on("end",()=>p(Buffer.concat(g)))});await s.exec(`# Copy extensions to remote
mkdir -p ${m}
${Ff(d.byteLength)} | tar --no-same-owner -x --strip-components 1 -C ${m}
mv ${m}/* ${o} && rmdir ${m}`,{stdin:d})}return{remoteExtensions:a.concat(l),cachedExtensions:c}}}async function vae(t,e,n,r,o,i){if(r&&!e.launchRootShellServer)return;let s=1e4,a=6e4;for(await Wt(s);;)i=await wae(t,e,n,r,o,i),await Wt(a)}async function wae(t,e,n,r,o,{remoteExtensions:i,cachedExtensions:s}){let{shellServer:a,launchRootShellServer:c,remoteExec:l}=e,u=(await a.exec(`ls ${o} || true`,{logOutput:"silent"})).stdout.trim().split(`
`).filter(m=>!!m);if(!r){let m=i.filter(d=>u.indexOf(d)===-1);t.output.write(`Extensions cache, remote removals: ${m.join(", ")||"None"}`);for(let d of m)try{await a1(Se.join(n,d))}catch(p){if(!(p&&p.code==="ENOENT"))throw p}}let f=u.filter(m=>i.indexOf(m)===-1&&s.indexOf(m)===-1);if(t.output.write(`Extensions cache, copy to ${r?"shared cache":"local"}: ${f.join(", ")||"None"}`,1),f.length)if(r){let m=await c();await m.exec(`mkdir -p '${r}' && cd '${o}' && cp ${f.map(d=>`'${d}'`).join(" ")} '${r}'`),await m.exec(`cd '${r}' && ls -t | tail -n +500 | xargs rm -f`)}else{let m=Se.posix.basename(o),d=await l({cmd:"tar",cwd:Se.posix.dirname(o),args:["c",...f.map(v=>Se.posix.join(m,v))],output:t.output}),p=Se.join(Se.dirname(n),`${Se.basename(n)}-${Date.now()}`);await os(p);let g=Wl.x({cwd:p,strip:1}),h=new Promise((v,C)=>{g.on("error",C),g.on("finish",v)});d.stdout.pipe(g),await h;for(let v of await al(p))await sl(Se.join(p,v),Se.join(n,v));await c1(p)}return{remoteExtensions:u,cachedExtensions:s}}var ik="extensionsCache";function yae(t){return Se.join(t,ik)}function Cae(t){return Se.posix.join(t,ik)}function XY(t){return Se.posix.join(t.userDataFolder,ik)}var ZY={x64:{label:"x86-64",id:"linux-x64",arch:"x64",stable:!0,preview:!1},armhf:{label:"ARM",id:"linux-armhf",arch:"armhf",stable:!0,preview:!0},arm64:{label:"ARM64",id:"linux-arm64",arch:"arm64",stable:!0,preview:!0}},QY={x64:{label:"Alpine Linux",id:"linux-alpine",arch:"x64",stable:!0,preview:!0,minVersion:[3,9]},arm64:{label:"Alpine Linux ARM64",id:"alpine-arm64",arch:"arm64",stable:!0,preview:!0,minVersion:[3,9]}},zS={x64:{label:"Mac",id:"darwin",arch:"x64",stable:!0,preview:!0,archiveExt:".zip"},arm64:{label:"Mac ARM",id:"darwin-arm64",arch:"arm64",stable:!0,preview:!0,archiveExt:".zip"}},Eae={x64:{label:"Windows",id:"win32-x64",arch:"x64",stable:!0,preview:!0,archiveExt:".zip"},arm64:{label:"Windows ARM",id:"win32-arm64",arch:"arm64",stable:!0,preview:!0,archiveExt:".zip"}},Sae={linux:ZY,alpine:QY,darwin:zS,win32:Eae},xae={x86_64:"x64",armv7l:"armhf",arm64:"arm64",aarch64:"arm64"};function XS(t,e){var o;let n=xae[t.hardware],r=n&&(((o=Sae[t.id])==null?void 0:o[n])||ZY[n]);if(!r||e&&!r.stable)throw new pe({description:t.id==="alpine"?Bl.t("Alpine Linux is not supported on the hardware architecture '{0}' of the container.",t.hardware):Bl.t("The hardware architecture '{0}' of the container is not supported.",t.hardware),data:{learnMoreUrl:"https://aka.ms/vscode-remote/linux",reload:!1}});return r}async function HR(t){let e="unknown",n="unknown",r="unknown",o;try{e=(await t.exec("uname -m")).stdout.trim();let{stdout:i}=await t.exec("(cat /etc/os-release || cat /usr/lib/os-release) 2>/dev/null");n=(i.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",r=(i.match(/^VERSION_ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",o=(i.match(/^PRETTY_NAME=([^\u001b\r\n]*)/m)||[])[1]||void 0}catch(i){console.error(i)}return{hardware:e,id:n,version:r,prettyName:o}}async function _ae(t,e,n,r){let o=await Yn(n,{async win32(){var c;return{amd64:"x86_64",arm64:"arm64"}[((c=e.PROCESSOR_ARCHITECTURE)==null?void 0:c.toLowerCase())||""]||"unknown"},async posix(){return(await X({exec:t,cmd:"uname",args:["-m"],output:r})).stdout.toString().trim()}})(),i=n,s="unknown",a;if(n==="linux")try{let c=(await X({exec:t,cmd:"/bin/sh",args:["(cat /etc/os-release || cat /usr/lib/os-release) 2>/dev/null"],output:r})).stdout.toString();i=(c.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",s=(c.match(/^VERSION_ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",a=(c.match(/^PRETTY_NAME=([^\u001b\r\n]*)/m)||[])[1]||void 0}catch(c){console.error(c)}return{hardware:o,id:i,version:s,prettyName:a}}async function Ex(t,e){try{return await t.exec(Cx(e)),!0}catch{return!1}}function Cx(t){return`test ! -f '${t}' && set -o noclobber && mkdir -p '${Se.posix.dirname(t)}' && { > '${t}' ; } 2> /dev/null`}async function _x(t,e){try{return await t.exec(`test -d '${e}'`),!0}catch{return!1}}async function Dae(t,e){try{return await t.exec(`test -x '${e}'`),!0}catch{return!1}}async function Iae(t,e,n,r,o,i,s,a,c){let{installFolder:l,sharedInstallFolder:u,shellServer:f}=e,{processes:m,mntNS:d}=await pR(f),p=await eq(e),g=`(${Se.posix.join(...FS(p))})`.replace(".","\\."),h=new RegExp(`${Se.posix.join(Se.posix.dirname(l).replace(".","\\."),"[^/]*",g)}`),v=m.filter(z=>z.mntNS===d&&h.test(z.cmd));t.output.write(`Running extension host agents:
${JSON.stringify(v,void 0,"  ")}`,1);let C=v.length?(await f.exec(`readlink -f '${l}'`)).stdout.toString().trim():void 0,{current:w,others:y}=v.reduce((z,V)=>(z[(V.cwd===C||V.cwd===l||V.cwd===u)&&h.test(V.cmd)?"current":"others"].push(V),z),{current:[],others:[]});if(s&&y.length){t.output.write(`Terminating old extension host agent.\r
`);try{await f.exec(`kill -9 ${y.map(z=>z.pgrp?`-${z.pgrp}`:z.pid).join(" ")}`)}catch{}}let{commit:S,quality:D}=t.product,_=Se.posix.join(Mi(e),`.connection-token-${S}${D==="stable"?"":`-${D}`}${t.web?"-web":""}${e.legacy?"-legacy":""}`),A=Se.posix.join(Mi(e),`.devport-${S}${D==="stable"?"":`-${D}`}${t.web?"-web":""}${e.legacy?"-legacy":""}`);if(w.length){t.output.write(`Extension host agent is already running.\r
`);try{let{stdout:z}=await f.exec(`cat '${A}' 2>/dev/null`),V=z.toString().trim(),q=parseInt(V,10),ce=new RegExp(" '?--connection-token-file'? ").test(w[0].cmd)?(await f.exec(`cat '${_}'`)).stdout.toString().trim():void 0;return{serverPort:q,connectionToken:ce}}catch(z){console.error(z),t.output.write(`Agent port not found. Terminating old extension host agent.\r
`);try{await f.exec(`kill -9 ${w.map(V=>V.pgrp?`-${V.pgrp}`:V.pid).join(" ")}`)}catch{}}}let U="isLocalContainer"in t&&t.isLocalContainer,k=`${_}-${Rp.randomUUID()}`,{stdout:E}=await f.exec(`cat '${_}' 2>/dev/null || (umask 377 && echo '${Rp.randomUUID()}' >'${k}' && mv -n '${k}' '${_}' && rm -f '${k}' && cat '${_}')`),x=E.toString().trim();t.progress(5);let b="Starting VS Code Server",I=t.output.start(b),T=[Se.posix.join(l,...FS(p)),"--log",ro(t.getLogLevel()),"--force-disable-user-env",...tq(e.userDataFolder),...Pae(U),...nq(t.getTelemetryLevel()),"--accept-server-license-terms","--host","127.0.0.1","--port",String(n),"--connection-token-file",_,"--extensions-download-dir",XY(e),...(await o()).args,"--start-server",...U?["--disable-websocket-compression"]:[""],...a?["--enable-remote-auto-shutdown"]:[],...c?["--skip-requirements-check"]:[]],R={SHELL:e.shell,...await i};delete R.NODE_OPTIONS;let N=(await dc(t,{remoteExec:e.remoteExec},T,l,{remoteEnv:R,resolveOn:$Y,print:"continuous"})).cmdOutput;t.output.stop(b,I);let B=($Y.exec(N)||[])[1];if(!B)throw new Error("Port not found");return await f.exec(`echo ${B} >'${A}'`),{serverPort:parseInt(B,10),connectionToken:x}}async function eq({shellServer:t,installFolder:e}){return JSON.parse((await t.exec(`cat '${Se.posix.join(e,"product.json")}'`,{logOutput:!1})).stdout.toString().trim())}function tq(t){return["--server-data-dir",t]}function Pae(t){return t?["--use-host-proxy"]:[]}function nq(t){return t?["--telemetry-level",t]:[]}var bae=/^([a-z0-9\-]+):(\d{1,5})$/;function Tae(t){let e=t.match(bae);if(!(!e||e.length!==3))return{host:e[1],port:Number(e[2])}}async function Rae(t,e,n){let r=(n.forwardPorts||[]).map(i=>typeof i=="number"?`localhost:${i}`:i).map(Tae).filter(Boolean),o=await t.getTunnels();await Promise.all(r.filter(i=>!o.find(s=>s.remoteAddress.host===i.host&&s.remoteAddress.port===i.port)).map(async({host:i,port:s})=>t.openTunnel(e,s,i)))}async function dc(t,{remoteExec:e},n,r,o={}){let i=o.print||(o.silent?"off":"end"),s=await e({env:o.remoteEnv,cwd:r,cmd:n[0],args:n.slice(1),output:o.silent?Fe:t.output}),a=[],c=[],l=new ok.StringDecoder,u=new ok.StringDecoder,f="",m="",d,p,g=new Promise((y,S)=>{d=y,p=S});s.stdout.on("data",y=>{a.push(y);let S=l.write(y);i==="continuous"&&t.output.write(S.replace(/\r?\n/g,`\r
`)),f+=S,o.resolveOn&&o.resolveOn.exec(f)&&d()}),s.stderr.on("data",y=>{c.push(y);let S=u.write(y);i==="continuous"&&t.output.write(S.replace(/\r?\n/g,`\r
`)),m+=S}),o.stdin instanceof Buffer?(s.stdin.write(o.stdin,y=>{y&&p(y)}),s.stdin.end()):o.stdin instanceof Dx.ReadStream&&o.stdin.pipe(s.stdin),i!=="off"&&s.exit.catch(y=>{y!=null&&y.message&&t.output.write(ot(y==null?void 0:y.message))});let h=await Promise.race([s.exit,g]),v=Buffer.concat(a),C=Buffer.concat(c);i==="end"&&(t.output.write(f.replace(/\r?\n/g,`\r
`)),t.output.write(ot(m)));let w=`${f}
${m}`;return h&&(h.code||h.signal)?Promise.reject({message:`Command failed: ${n.join(" ")}`,cmdOutput:w,stdout:v,stderr:C,code:h.code,signal:h.signal}):{cmdOutput:w,stdout:v,stderr:C}}function Ff(t,e=!1){let r=t%8192;return`(dd iflag=fullblock bs=8192 count=${(t-r)/8192}${e?"":" 2>/dev/null"}; dd iflag=fullblock bs=${r} count=1${e?"":" 2>/dev/null"})`}async function Bf(t,e,n,r){let o=Lae(n,t);if(!o||o==="none")return{};let i=await kae(o,t,e.shellServer);return i||(t.output.write("userEnvProbe: not found in cache"),i=await jY(o,t,e,r,"cat /proc/self/environ","\0"),i||(t.output.write("userEnvProbe: falling back to printenv"),i=await jY(o,t,e,r,"printenv",`
`)),i&&await Nae(i,o,t,e.shellServer),i||{})}async function kae(t,e,n){if(!n||!e.containerSessionDataFolder)return;let r=rq(t,e.containerSessionDataFolder);try{if(await Ai(n,r)){let{stdout:o}=await n.exec(`cat '${r}'`);return JSON.parse(o)}}catch(o){e.output.write(`Failed to read/parse user env cache: ${o}`,5)}}async function Nae(t,e,n,r){if(!r||!n.containerSessionDataFolder)return;let o=rq(e,n.containerSessionDataFolder);try{await r.exec(`mkdir -p '${Se.posix.dirname(o)}' && cat > '${o}' << 'envJSON'
${JSON.stringify(t,null,"	")}
envJSON
`)}catch(i){n.output.write(`Failed to cache user env: ${i}`,5)}}function rq(t,e){return Se.posix.join(e,`env-${t}.json`)}async function jY(t,e,n,r,o,i){var s;if(t==="none")return{};try{let a=Rp.randomUUID(),c=new RegExp(a+"([^]*)"+a),l=n.shell;e.output.write(`userEnvProbe shell: ${l}`);let u=Se.posix.basename(l),f=`echo -n ${a}; ${o}; echo -n ${a}`,m;/^pwsh(-preview)?$/.test(u)?m=t==="loginInteractiveShell"||t==="loginShell"?["-Login","-Command"]:["-Command"]:m=[t==="loginInteractiveShell"?"-lic":t==="loginShell"?"-lc":t==="interactiveShell"?"-ic":"-c"];let d=sn(e.output,1),p=dc({output:d},{remoteExec:await r||n.remoteExec},[l,...m,f],n.installFolder);Promise.race([p,Wt(2e3)]).then(async _=>{if(!_){let A,U=n.shellServer||await jt(n.remoteExec,e.output);try{({processes:A}=await pR(U))}finally{n.shellServer||await U.process.terminate()}let k=A.find(E=>E.cmd.startsWith(l)&&E.cmd.indexOf(a)!==-1);if(k){let x=Sj(A)[k.pid];e.output.write(`userEnvProbe is taking longer than 2 seconds. Process tree:
${hR(x)}`)}else e.output.write("userEnvProbe is taking longer than 2 seconds. Process not found.")}},()=>{}).catch(_=>e.output.write(ot(_&&(_.stack||_.message)||"Error reading process tree.")));let g=await Promise.race([p,Wt(1e4)]);if(!g)return e.output.write(ot("userEnvProbe is taking longer than 10 seconds. Avoid waiting for user input in your shell's startup scripts. Continuing.")),{};let h=g.stdout.toString(),v=c.exec(h),C=v?v[1]:"";if(!C||C.trim()==="-n")return;let w=C.split(i).reduce((_,A)=>{let U=A.indexOf("=");return U!==-1&&(_[A.substring(0,U)]=A.substring(U+1)),_},{});e.output.write(`userEnvProbe parsed: ${JSON.stringify(w,void 0,"  ")}`,1),delete w.PWD;let y=w.PATH,S=(s=n.env)==null?void 0:s.PATH,D=!(e.allowSystemConfigChange&&n.launchRootShellServer)&&y&&S;if(D){let _=n.user;w.PATH=Aae(y,S,_==="root"||_==="0")}return e.output.write(`userEnvProbe PATHs:
Probe:     ${typeof y=="string"?`'${y}'`:"None"}
Container: ${typeof S=="string"?`'${S}'`:"None"}${D?`
Merged:    ${typeof w.PATH=="string"?`'${w.PATH}'`:"None"}`:""}`),w}catch(a){return e.output.write(ot("Error reading shell environment.")),e.output.write(ot((a==null?void 0:a.stack)||(a==null?void 0:a.message)||String(a))),{}}}function Lae(t,e){let n=t==null?void 0:t.userEnvProbe;return e.output.write(`userEnvProbe: ${n||e.defaultUserEnvProbe}${n?"":" (default)"}`),n||(n=e.defaultUserEnvProbe),n}function Aae(t,e,n){let r=t.split(":"),o=0;for(let i of e.split(":")){let s=r.indexOf(i);s===-1?(n||!/\/sbin(\/|$)/.test(i))&&r.splice(o++,0,i):o=s+1}return r.join(":")}async function sk(t){for(let e of t)await(typeof e=="function"?e():e)}async function oq(t){let{localCacheFolder:e,output:n,alternateDownload:r,exec:o,env:i,isFile:s,userDataFolder:a,homeFolder:c,product:l,platform:u}=t,f=l.commit||await vp(l.quality),m=l.commit?l.quality||"insider":"stable",d=u==="win32"?Se.win32:Se.posix,p=`${m.substring(0,1).toUpperCase()}${m.substring(1)}${m==="insider"?"s":""}-${f}`,g=d.join(Ep(d,c,l),"cli","servers",p,"server");if(await Sx(u,g,s))return Hl(u,g);let h=d.join($R(d,c,l),"cli","servers",p,"server");if(await Sx(u,h,s))return Hl(u,h);let v=d.join(Ep(d,c,l),"bin",f);if(await Sx(u,v,s))return Hl(u,v);let C=d.join(a,"bin",f);if(await Sx(u,C,s))return Hl(u,C);let w=await _ae(o,i,u,n),y=XS(w,!1),S={localCacheFolder:e,build:y,commit:f,quality:m,web:!1,output:n,alternateDownload:r,legacy:!1},D=_p(S);await Cr(D)||await Ov(S);let _=D.endsWith(".zip")?await Oae(D):await Fae(D);return await lY(o,u,_,C,!1,n),Hl(u,C)}async function Sx(t,e,n){let r=Hl(t,e),i=(t==="win32"?Se.win32:Se.posix).join(e,"node_modules","node-pty","package.json");return await n(r)&&await n(i)}async function Fae(t){let e=[];return await Wl.t({file:t,filter:n=>/^[^/]*\/(LICENSE$|node$|node_modules\/node-pty\/)/.test(n),onentry:n=>{new Wl.WriteEntry.Tar(n).on("data",o=>e.push(o))}}),Buffer.concat(e)}async function Oae(t){let n=new qY.default(t).getEntries().filter(o=>/^[^/]*\/(LICENSE$|node(\.exe)?$|node_modules\/node-pty\/.*[^/]$)/.test(o.entryName)),r=GY.pack();for(let o of n){let i=await new Promise((s,a)=>{o.getDataAsync((c,l)=>{l?a(l):s(c)})});r.entry({name:o.entryName,mode:o.attr>>>16&4095},i)}return r.finalize(),r}var eG=Y(require("crypto")),iw=Y(require("path"));function Cq(t){return typeof t>"u"||t===null}function Uae(t){return typeof t=="object"&&t!==null}function Mae(t){return Array.isArray(t)?t:Cq(t)?[]:[t]}function $ae(t,e){var n,r,o,i;if(e)for(i=Object.keys(e),n=0,r=i.length;n<r;n+=1)o=i[n],t[o]=e[o];return t}function Hae(t,e){var n="",r;for(r=0;r<e;r+=1)n+=t;return n}function Bae(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var Wae=Cq,jae=Uae,Vae=Mae,Yae=Hae,qae=Bae,Gae=$ae,qn={isNothing:Wae,isObject:jae,toArray:Vae,repeat:Yae,isNegativeZero:qae,extend:Gae};function Eq(t,e){var n="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+=`

`+t.mark.snippet),r+" "+n):r}function zv(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=Eq(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}zv.prototype=Object.create(Error.prototype);zv.prototype.constructor=zv;zv.prototype.toString=function(e){return this.name+": "+Eq(this,e)};var Ao=zv;function ak(t,e,n,r,o){var i="",s="",a=Math.floor(o/2)-1;return r-e>a&&(i=" ... ",e=r-a+i.length),n-r>a&&(s=" ...",n=r+a-s.length),{str:i+t.slice(e,n).replace(/\t/g,"\u2192")+s,pos:r-e+i.length}}function ck(t,e){return qn.repeat(" ",e-t.length)+t}function zae(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],o=[],i,s=-1;i=n.exec(t.buffer);)o.push(i.index),r.push(i.index+i[0].length),t.position<=i.index&&s<0&&(s=r.length-2);s<0&&(s=r.length-1);var a="",c,l,u=Math.min(t.line+e.linesAfter,o.length).toString().length,f=e.maxLength-(e.indent+u+3);for(c=1;c<=e.linesBefore&&!(s-c<0);c++)l=ak(t.buffer,r[s-c],o[s-c],t.position-(r[s]-r[s-c]),f),a=qn.repeat(" ",e.indent)+ck((t.line-c+1).toString(),u)+" | "+l.str+`
`+a;for(l=ak(t.buffer,r[s],o[s],t.position,f),a+=qn.repeat(" ",e.indent)+ck((t.line+1).toString(),u)+" | "+l.str+`
`,a+=qn.repeat("-",e.indent+u+3+l.pos)+`^
`,c=1;c<=e.linesAfter&&!(s+c>=o.length);c++)l=ak(t.buffer,r[s+c],o[s+c],t.position-(r[s]-r[s+c]),f),a+=qn.repeat(" ",e.indent)+ck((t.line+c+1).toString(),u)+" | "+l.str+`
`;return a.replace(/\n$/,"")}var Kae=zae,Jae=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Xae=["scalar","sequence","mapping"];function Zae(t){var e={};return t!==null&&Object.keys(t).forEach(function(n){t[n].forEach(function(r){e[String(r)]=n})}),e}function Qae(t,e){if(e=e||{},Object.keys(e).forEach(function(n){if(Jae.indexOf(n)===-1)throw new Ao('Unknown option "'+n+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(n){return n},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=Zae(e.styleAliases||null),Xae.indexOf(this.kind)===-1)throw new Ao('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var zr=Qae;function iq(t,e){var n=[];return t[e].forEach(function(r){var o=n.length;n.forEach(function(i,s){i.tag===r.tag&&i.kind===r.kind&&i.multi===r.multi&&(o=s)}),n[o]=r}),n}function ece(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,n;function r(o){o.multi?(t.multi[o.kind].push(o),t.multi.fallback.push(o)):t[o.kind][o.tag]=t.fallback[o.tag]=o}for(e=0,n=arguments.length;e<n;e+=1)arguments[e].forEach(r);return t}function uk(t){return this.extend(t)}uk.prototype.extend=function(e){var n=[],r=[];if(e instanceof zr)r.push(e);else if(Array.isArray(e))r=r.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(n=n.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit));else throw new Ao("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(i){if(!(i instanceof zr))throw new Ao("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(i.loadKind&&i.loadKind!=="scalar")throw new Ao("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(i.multi)throw new Ao("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(i){if(!(i instanceof zr))throw new Ao("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var o=Object.create(uk.prototype);return o.implicit=(this.implicit||[]).concat(n),o.explicit=(this.explicit||[]).concat(r),o.compiledImplicit=iq(o,"implicit"),o.compiledExplicit=iq(o,"explicit"),o.compiledTypeMap=ece(o.compiledImplicit,o.compiledExplicit),o};var tce=uk,nce=new zr("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),rce=new zr("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),oce=new zr("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),ice=new tce({explicit:[nce,rce,oce]});function sce(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function ace(){return null}function cce(t){return t===null}var lce=new zr("tag:yaml.org,2002:null",{kind:"scalar",resolve:sce,construct:ace,predicate:cce,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function uce(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function fce(t){return t==="true"||t==="True"||t==="TRUE"}function dce(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var mce=new zr("tag:yaml.org,2002:bool",{kind:"scalar",resolve:uce,construct:fce,predicate:dce,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function pce(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function hce(t){return 48<=t&&t<=55}function gce(t){return 48<=t&&t<=57}function vce(t){if(t===null)return!1;var e=t.length,n=0,r=!1,o;if(!e)return!1;if(o=t[n],(o==="-"||o==="+")&&(o=t[++n]),o==="0"){if(n+1===e)return!0;if(o=t[++n],o==="b"){for(n++;n<e;n++)if(o=t[n],o!=="_"){if(o!=="0"&&o!=="1")return!1;r=!0}return r&&o!=="_"}if(o==="x"){for(n++;n<e;n++)if(o=t[n],o!=="_"){if(!pce(t.charCodeAt(n)))return!1;r=!0}return r&&o!=="_"}if(o==="o"){for(n++;n<e;n++)if(o=t[n],o!=="_"){if(!hce(t.charCodeAt(n)))return!1;r=!0}return r&&o!=="_"}}if(o==="_")return!1;for(;n<e;n++)if(o=t[n],o!=="_"){if(!gce(t.charCodeAt(n)))return!1;r=!0}return!(!r||o==="_")}function wce(t){var e=t,n=1,r;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),r=e[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),e=e.slice(1),r=e[0]),e==="0")return 0;if(r==="0"){if(e[1]==="b")return n*parseInt(e.slice(2),2);if(e[1]==="x")return n*parseInt(e.slice(2),16);if(e[1]==="o")return n*parseInt(e.slice(2),8)}return n*parseInt(e,10)}function yce(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!qn.isNegativeZero(t)}var Cce=new zr("tag:yaml.org,2002:int",{kind:"scalar",resolve:vce,construct:wce,predicate:yce,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Ece=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Sce(t){return!(t===null||!Ece.test(t)||t[t.length-1]==="_")}function xce(t){var e,n;return e=t.replace(/_/g,"").toLowerCase(),n=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:n*parseFloat(e,10)}var _ce=/^[-+]?[0-9]+e/;function Dce(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(qn.isNegativeZero(t))return"-0.0";return n=t.toString(10),_ce.test(n)?n.replace("e",".e"):n}function Ice(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||qn.isNegativeZero(t))}var Pce=new zr("tag:yaml.org,2002:float",{kind:"scalar",resolve:Sce,construct:xce,predicate:Ice,represent:Dce,defaultStyle:"lowercase"}),bce=ice.extend({implicit:[lce,mce,Cce,Pce]}),Tce=bce,Sq=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),xq=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Rce(t){return t===null?!1:Sq.exec(t)!==null||xq.exec(t)!==null}function kce(t){var e,n,r,o,i,s,a,c=0,l=null,u,f,m;if(e=Sq.exec(t),e===null&&(e=xq.exec(t)),e===null)throw new Error("Date resolve error");if(n=+e[1],r=+e[2]-1,o=+e[3],!e[4])return new Date(Date.UTC(n,r,o));if(i=+e[4],s=+e[5],a=+e[6],e[7]){for(c=e[7].slice(0,3);c.length<3;)c+="0";c=+c}return e[9]&&(u=+e[10],f=+(e[11]||0),l=(u*60+f)*6e4,e[9]==="-"&&(l=-l)),m=new Date(Date.UTC(n,r,o,i,s,a,c)),l&&m.setTime(m.getTime()-l),m}function Nce(t){return t.toISOString()}var Lce=new zr("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Rce,construct:kce,instanceOf:Date,represent:Nce});function Ace(t){return t==="<<"||t===null}var Fce=new zr("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Ace}),hk=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Oce(t){if(t===null)return!1;var e,n,r=0,o=t.length,i=hk;for(n=0;n<o;n++)if(e=i.indexOf(t.charAt(n)),!(e>64)){if(e<0)return!1;r+=6}return r%8===0}function Uce(t){var e,n,r=t.replace(/[\r\n=]/g,""),o=r.length,i=hk,s=0,a=[];for(e=0;e<o;e++)e%4===0&&e&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|i.indexOf(r.charAt(e));return n=o%4*6,n===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):n===18?(a.push(s>>10&255),a.push(s>>2&255)):n===12&&a.push(s>>4&255),new Uint8Array(a)}function Mce(t){var e="",n=0,r,o,i=t.length,s=hk;for(r=0;r<i;r++)r%3===0&&r&&(e+=s[n>>18&63],e+=s[n>>12&63],e+=s[n>>6&63],e+=s[n&63]),n=(n<<8)+t[r];return o=i%3,o===0?(e+=s[n>>18&63],e+=s[n>>12&63],e+=s[n>>6&63],e+=s[n&63]):o===2?(e+=s[n>>10&63],e+=s[n>>4&63],e+=s[n<<2&63],e+=s[64]):o===1&&(e+=s[n>>2&63],e+=s[n<<4&63],e+=s[64],e+=s[64]),e}function $ce(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var Hce=new zr("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Oce,construct:Uce,predicate:$ce,represent:Mce}),Bce=Object.prototype.hasOwnProperty,Wce=Object.prototype.toString;function jce(t){if(t===null)return!0;var e=[],n,r,o,i,s,a=t;for(n=0,r=a.length;n<r;n+=1){if(o=a[n],s=!1,Wce.call(o)!=="[object Object]")return!1;for(i in o)if(Bce.call(o,i))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(i)===-1)e.push(i);else return!1}return!0}function Vce(t){return t!==null?t:[]}var Yce=new zr("tag:yaml.org,2002:omap",{kind:"sequence",resolve:jce,construct:Vce}),qce=Object.prototype.toString;function Gce(t){if(t===null)return!0;var e,n,r,o,i,s=t;for(i=new Array(s.length),e=0,n=s.length;e<n;e+=1){if(r=s[e],qce.call(r)!=="[object Object]"||(o=Object.keys(r),o.length!==1))return!1;i[e]=[o[0],r[o[0]]]}return!0}function zce(t){if(t===null)return[];var e,n,r,o,i,s=t;for(i=new Array(s.length),e=0,n=s.length;e<n;e+=1)r=s[e],o=Object.keys(r),i[e]=[o[0],r[o[0]]];return i}var Kce=new zr("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Gce,construct:zce}),Jce=Object.prototype.hasOwnProperty;function Xce(t){if(t===null)return!0;var e,n=t;for(e in n)if(Jce.call(n,e)&&n[e]!==null)return!1;return!0}function Zce(t){return t!==null?t:{}}var Qce=new zr("tag:yaml.org,2002:set",{kind:"mapping",resolve:Xce,construct:Zce}),_q=Tce.extend({implicit:[Lce,Fce],explicit:[Hce,Yce,Kce,Qce]}),ql=Object.prototype.hasOwnProperty,Rx=1,Dq=2,Iq=3,kx=4,lk=1,ele=2,sq=3,tle=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,nle=/[\x85\u2028\u2029]/,rle=/[,\[\]\{\}]/,Pq=/^(?:!|!!|![a-z\-]+!)$/i,bq=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function aq(t){return Object.prototype.toString.call(t)}function ta(t){return t===10||t===13}function qf(t){return t===9||t===32}function Fo(t){return t===9||t===32||t===10||t===13}function Np(t){return t===44||t===91||t===93||t===123||t===125}function ole(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function ile(t){return t===120?2:t===117?4:t===85?8:0}function sle(t){return 48<=t&&t<=57?t-48:-1}function cq(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function ale(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}function Tq(t,e,n){e==="__proto__"?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,writable:!0,value:n}):t[e]=n}var Rq=new Array(256),kq=new Array(256);for(Yf=0;Yf<256;Yf++)Rq[Yf]=cq(Yf)?1:0,kq[Yf]=cq(Yf);var Yf;function cle(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||_q,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Nq(t,e){var n={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return n.snippet=Kae(n),new Ao(e,n)}function Pe(t,e){throw Nq(t,e)}function Nx(t,e){t.onWarning&&t.onWarning.call(null,Nq(t,e))}var lq={YAML:function(e,n,r){var o,i,s;e.version!==null&&Pe(e,"duplication of %YAML directive"),r.length!==1&&Pe(e,"YAML directive accepts exactly one argument"),o=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),o===null&&Pe(e,"ill-formed argument of the YAML directive"),i=parseInt(o[1],10),s=parseInt(o[2],10),i!==1&&Pe(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&Nx(e,"unsupported YAML version of the document")},TAG:function(e,n,r){var o,i;r.length!==2&&Pe(e,"TAG directive accepts exactly two arguments"),o=r[0],i=r[1],Pq.test(o)||Pe(e,"ill-formed tag handle (first argument) of the TAG directive"),ql.call(e.tagMap,o)&&Pe(e,'there is a previously declared suffix for "'+o+'" tag handle'),bq.test(i)||Pe(e,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch{Pe(e,"tag prefix is malformed: "+i)}e.tagMap[o]=i}};function Yl(t,e,n,r){var o,i,s,a;if(e<n){if(a=t.input.slice(e,n),r)for(o=0,i=a.length;o<i;o+=1)s=a.charCodeAt(o),s===9||32<=s&&s<=1114111||Pe(t,"expected valid JSON character");else tle.test(a)&&Pe(t,"the stream contains non-printable characters");t.result+=a}}function uq(t,e,n,r){var o,i,s,a;for(qn.isObject(n)||Pe(t,"cannot merge mappings; the provided source object is unacceptable"),o=Object.keys(n),s=0,a=o.length;s<a;s+=1)i=o[s],ql.call(e,i)||(Tq(e,i,n[i]),r[i]=!0)}function Lp(t,e,n,r,o,i,s,a,c){var l,u;if(Array.isArray(o))for(o=Array.prototype.slice.call(o),l=0,u=o.length;l<u;l+=1)Array.isArray(o[l])&&Pe(t,"nested arrays are not supported inside keys"),typeof o=="object"&&aq(o[l])==="[object Object]"&&(o[l]="[object Object]");if(typeof o=="object"&&aq(o)==="[object Object]"&&(o="[object Object]"),o=String(o),e===null&&(e={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(i))for(l=0,u=i.length;l<u;l+=1)uq(t,e,i[l],n);else uq(t,e,i,n);else!t.json&&!ql.call(n,o)&&ql.call(e,o)&&(t.line=s||t.line,t.lineStart=a||t.lineStart,t.position=c||t.position,Pe(t,"duplicated mapping key")),Tq(e,o,i),delete n[o];return e}function gk(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):Pe(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function Tn(t,e,n){for(var r=0,o=t.input.charCodeAt(t.position);o!==0;){for(;qf(o);)o===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),o=t.input.charCodeAt(++t.position);if(e&&o===35)do o=t.input.charCodeAt(++t.position);while(o!==10&&o!==13&&o!==0);if(ta(o))for(gk(t),o=t.input.charCodeAt(t.position),r++,t.lineIndent=0;o===32;)t.lineIndent++,o=t.input.charCodeAt(++t.position);else break}return n!==-1&&r!==0&&t.lineIndent<n&&Nx(t,"deficient indentation"),r}function Fx(t){var e=t.position,n;return n=t.input.charCodeAt(e),!!((n===45||n===46)&&n===t.input.charCodeAt(e+1)&&n===t.input.charCodeAt(e+2)&&(e+=3,n=t.input.charCodeAt(e),n===0||Fo(n)))}function vk(t,e){e===1?t.result+=" ":e>1&&(t.result+=qn.repeat(`
`,e-1))}function lle(t,e,n){var r,o,i,s,a,c,l,u,f=t.kind,m=t.result,d;if(d=t.input.charCodeAt(t.position),Fo(d)||Np(d)||d===35||d===38||d===42||d===33||d===124||d===62||d===39||d===34||d===37||d===64||d===96||(d===63||d===45)&&(o=t.input.charCodeAt(t.position+1),Fo(o)||n&&Np(o)))return!1;for(t.kind="scalar",t.result="",i=s=t.position,a=!1;d!==0;){if(d===58){if(o=t.input.charCodeAt(t.position+1),Fo(o)||n&&Np(o))break}else if(d===35){if(r=t.input.charCodeAt(t.position-1),Fo(r))break}else{if(t.position===t.lineStart&&Fx(t)||n&&Np(d))break;if(ta(d))if(c=t.line,l=t.lineStart,u=t.lineIndent,Tn(t,!1,-1),t.lineIndent>=e){a=!0,d=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=c,t.lineStart=l,t.lineIndent=u;break}}a&&(Yl(t,i,s,!1),vk(t,t.line-c),i=s=t.position,a=!1),qf(d)||(s=t.position+1),d=t.input.charCodeAt(++t.position)}return Yl(t,i,s,!1),t.result?!0:(t.kind=f,t.result=m,!1)}function ule(t,e){var n,r,o;if(n=t.input.charCodeAt(t.position),n!==39)return!1;for(t.kind="scalar",t.result="",t.position++,r=o=t.position;(n=t.input.charCodeAt(t.position))!==0;)if(n===39)if(Yl(t,r,t.position,!0),n=t.input.charCodeAt(++t.position),n===39)r=t.position,t.position++,o=t.position;else return!0;else ta(n)?(Yl(t,r,o,!0),vk(t,Tn(t,!1,e)),r=o=t.position):t.position===t.lineStart&&Fx(t)?Pe(t,"unexpected end of the document within a single quoted scalar"):(t.position++,o=t.position);Pe(t,"unexpected end of the stream within a single quoted scalar")}function fle(t,e){var n,r,o,i,s,a;if(a=t.input.charCodeAt(t.position),a!==34)return!1;for(t.kind="scalar",t.result="",t.position++,n=r=t.position;(a=t.input.charCodeAt(t.position))!==0;){if(a===34)return Yl(t,n,t.position,!0),t.position++,!0;if(a===92){if(Yl(t,n,t.position,!0),a=t.input.charCodeAt(++t.position),ta(a))Tn(t,!1,e);else if(a<256&&Rq[a])t.result+=kq[a],t.position++;else if((s=ile(a))>0){for(o=s,i=0;o>0;o--)a=t.input.charCodeAt(++t.position),(s=ole(a))>=0?i=(i<<4)+s:Pe(t,"expected hexadecimal character");t.result+=ale(i),t.position++}else Pe(t,"unknown escape sequence");n=r=t.position}else ta(a)?(Yl(t,n,r,!0),vk(t,Tn(t,!1,e)),n=r=t.position):t.position===t.lineStart&&Fx(t)?Pe(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}Pe(t,"unexpected end of the stream within a double quoted scalar")}function dle(t,e){var n=!0,r,o,i,s=t.tag,a,c=t.anchor,l,u,f,m,d,p=Object.create(null),g,h,v,C;if(C=t.input.charCodeAt(t.position),C===91)u=93,d=!1,a=[];else if(C===123)u=125,d=!0,a={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),C=t.input.charCodeAt(++t.position);C!==0;){if(Tn(t,!0,e),C=t.input.charCodeAt(t.position),C===u)return t.position++,t.tag=s,t.anchor=c,t.kind=d?"mapping":"sequence",t.result=a,!0;n?C===44&&Pe(t,"expected the node content, but found ','"):Pe(t,"missed comma between flow collection entries"),h=g=v=null,f=m=!1,C===63&&(l=t.input.charCodeAt(t.position+1),Fo(l)&&(f=m=!0,t.position++,Tn(t,!0,e))),r=t.line,o=t.lineStart,i=t.position,Ap(t,e,Rx,!1,!0),h=t.tag,g=t.result,Tn(t,!0,e),C=t.input.charCodeAt(t.position),(m||t.line===r)&&C===58&&(f=!0,C=t.input.charCodeAt(++t.position),Tn(t,!0,e),Ap(t,e,Rx,!1,!0),v=t.result),d?Lp(t,a,p,h,g,v,r,o,i):f?a.push(Lp(t,null,p,h,g,v,r,o,i)):a.push(g),Tn(t,!0,e),C=t.input.charCodeAt(t.position),C===44?(n=!0,C=t.input.charCodeAt(++t.position)):n=!1}Pe(t,"unexpected end of the stream within a flow collection")}function mle(t,e){var n,r,o=lk,i=!1,s=!1,a=e,c=0,l=!1,u,f;if(f=t.input.charCodeAt(t.position),f===124)r=!1;else if(f===62)r=!0;else return!1;for(t.kind="scalar",t.result="";f!==0;)if(f=t.input.charCodeAt(++t.position),f===43||f===45)lk===o?o=f===43?sq:ele:Pe(t,"repeat of a chomping mode identifier");else if((u=sle(f))>=0)u===0?Pe(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?Pe(t,"repeat of an indentation width identifier"):(a=e+u-1,s=!0);else break;if(qf(f)){do f=t.input.charCodeAt(++t.position);while(qf(f));if(f===35)do f=t.input.charCodeAt(++t.position);while(!ta(f)&&f!==0)}for(;f!==0;){for(gk(t),t.lineIndent=0,f=t.input.charCodeAt(t.position);(!s||t.lineIndent<a)&&f===32;)t.lineIndent++,f=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>a&&(a=t.lineIndent),ta(f)){c++;continue}if(t.lineIndent<a){o===sq?t.result+=qn.repeat(`
`,i?1+c:c):o===lk&&i&&(t.result+=`
`);break}for(r?qf(f)?(l=!0,t.result+=qn.repeat(`
`,i?1+c:c)):l?(l=!1,t.result+=qn.repeat(`
`,c+1)):c===0?i&&(t.result+=" "):t.result+=qn.repeat(`
`,c):t.result+=qn.repeat(`
`,i?1+c:c),i=!0,s=!0,c=0,n=t.position;!ta(f)&&f!==0;)f=t.input.charCodeAt(++t.position);Yl(t,n,t.position,!1)}return!0}function fq(t,e){var n,r=t.tag,o=t.anchor,i=[],s,a=!1,c;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=i),c=t.input.charCodeAt(t.position);c!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Pe(t,"tab characters must not be used in indentation")),!(c!==45||(s=t.input.charCodeAt(t.position+1),!Fo(s))));){if(a=!0,t.position++,Tn(t,!0,-1)&&t.lineIndent<=e){i.push(null),c=t.input.charCodeAt(t.position);continue}if(n=t.line,Ap(t,e,Iq,!1,!0),i.push(t.result),Tn(t,!0,-1),c=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&c!==0)Pe(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return a?(t.tag=r,t.anchor=o,t.kind="sequence",t.result=i,!0):!1}function ple(t,e,n){var r,o,i,s,a,c,l=t.tag,u=t.anchor,f={},m=Object.create(null),d=null,p=null,g=null,h=!1,v=!1,C;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=f),C=t.input.charCodeAt(t.position);C!==0;){if(!h&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Pe(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),i=t.line,(C===63||C===58)&&Fo(r))C===63?(h&&(Lp(t,f,m,d,p,null,s,a,c),d=p=g=null),v=!0,h=!0,o=!0):h?(h=!1,o=!0):Pe(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,C=r;else{if(s=t.line,a=t.lineStart,c=t.position,!Ap(t,n,Dq,!1,!0))break;if(t.line===i){for(C=t.input.charCodeAt(t.position);qf(C);)C=t.input.charCodeAt(++t.position);if(C===58)C=t.input.charCodeAt(++t.position),Fo(C)||Pe(t,"a whitespace character is expected after the key-value separator within a block mapping"),h&&(Lp(t,f,m,d,p,null,s,a,c),d=p=g=null),v=!0,h=!1,o=!1,d=t.tag,p=t.result;else if(v)Pe(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=l,t.anchor=u,!0}else if(v)Pe(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=l,t.anchor=u,!0}if((t.line===i||t.lineIndent>e)&&(h&&(s=t.line,a=t.lineStart,c=t.position),Ap(t,e,kx,!0,o)&&(h?p=t.result:g=t.result),h||(Lp(t,f,m,d,p,g,s,a,c),d=p=g=null),Tn(t,!0,-1),C=t.input.charCodeAt(t.position)),(t.line===i||t.lineIndent>e)&&C!==0)Pe(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return h&&Lp(t,f,m,d,p,null,s,a,c),v&&(t.tag=l,t.anchor=u,t.kind="mapping",t.result=f),v}function hle(t){var e,n=!1,r=!1,o,i,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&Pe(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(n=!0,s=t.input.charCodeAt(++t.position)):s===33?(r=!0,o="!!",s=t.input.charCodeAt(++t.position)):o="!",e=t.position,n){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(i=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):Pe(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Fo(s);)s===33&&(r?Pe(t,"tag suffix cannot contain exclamation marks"):(o=t.input.slice(e-1,t.position+1),Pq.test(o)||Pe(t,"named tag handle cannot contain such characters"),r=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);i=t.input.slice(e,t.position),rle.test(i)&&Pe(t,"tag suffix cannot contain flow indicator characters")}i&&!bq.test(i)&&Pe(t,"tag name cannot contain such characters: "+i);try{i=decodeURIComponent(i)}catch{Pe(t,"tag name is malformed: "+i)}return n?t.tag=i:ql.call(t.tagMap,o)?t.tag=t.tagMap[o]+i:o==="!"?t.tag="!"+i:o==="!!"?t.tag="tag:yaml.org,2002:"+i:Pe(t,'undeclared tag handle "'+o+'"'),!0}function gle(t){var e,n;if(n=t.input.charCodeAt(t.position),n!==38)return!1;for(t.anchor!==null&&Pe(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Fo(n)&&!Np(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&Pe(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function vle(t){var e,n,r;if(r=t.input.charCodeAt(t.position),r!==42)return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Fo(r)&&!Np(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&Pe(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),ql.call(t.anchorMap,n)||Pe(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],Tn(t,!0,-1),!0}function Ap(t,e,n,r,o){var i,s,a,c=1,l=!1,u=!1,f,m,d,p,g,h;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,i=s=a=kx===n||Iq===n,r&&Tn(t,!0,-1)&&(l=!0,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)),c===1)for(;hle(t)||gle(t);)Tn(t,!0,-1)?(l=!0,a=i,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)):a=!1;if(a&&(a=l||o),(c===1||kx===n)&&(Rx===n||Dq===n?g=e:g=e+1,h=t.position-t.lineStart,c===1?a&&(fq(t,h)||ple(t,h,g))||dle(t,g)?u=!0:(s&&mle(t,g)||ule(t,g)||fle(t,g)?u=!0:vle(t)?(u=!0,(t.tag!==null||t.anchor!==null)&&Pe(t,"alias node should not have any properties")):lle(t,g,Rx===n)&&(u=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):c===0&&(u=a&&fq(t,h))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&Pe(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),f=0,m=t.implicitTypes.length;f<m;f+=1)if(p=t.implicitTypes[f],p.resolve(t.result)){t.result=p.construct(t.result),t.tag=p.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(ql.call(t.typeMap[t.kind||"fallback"],t.tag))p=t.typeMap[t.kind||"fallback"][t.tag];else for(p=null,d=t.typeMap.multi[t.kind||"fallback"],f=0,m=d.length;f<m;f+=1)if(t.tag.slice(0,d[f].tag.length)===d[f].tag){p=d[f];break}p||Pe(t,"unknown tag !<"+t.tag+">"),t.result!==null&&p.kind!==t.kind&&Pe(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+p.kind+'", not "'+t.kind+'"'),p.resolve(t.result,t.tag)?(t.result=p.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):Pe(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||u}function wle(t){var e=t.position,n,r,o,i=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(Tn(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(i=!0,s=t.input.charCodeAt(++t.position),n=t.position;s!==0&&!Fo(s);)s=t.input.charCodeAt(++t.position);for(r=t.input.slice(n,t.position),o=[],r.length<1&&Pe(t,"directive name must not be less than one character in length");s!==0;){for(;qf(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!ta(s));break}if(ta(s))break;for(n=t.position;s!==0&&!Fo(s);)s=t.input.charCodeAt(++t.position);o.push(t.input.slice(n,t.position))}s!==0&&gk(t),ql.call(lq,r)?lq[r](t,r,o):Nx(t,'unknown document directive "'+r+'"')}if(Tn(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Tn(t,!0,-1)):i&&Pe(t,"directives end mark is expected"),Ap(t,t.lineIndent-1,kx,!1,!0),Tn(t,!0,-1),t.checkLineBreaks&&nle.test(t.input.slice(e,t.position))&&Nx(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Fx(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Tn(t,!0,-1));return}if(t.position<t.length-1)Pe(t,"end of the stream or a document separator is expected");else return}function Lq(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var n=new cle(t,e),r=t.indexOf("\0");for(r!==-1&&(n.position=r,Pe(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)wle(n);return n.documents}function yle(t,e,n){e!==null&&typeof e=="object"&&typeof n>"u"&&(n=e,e=null);var r=Lq(t,n);if(typeof e!="function")return r;for(var o=0,i=r.length;o<i;o+=1)e(r[o])}function Cle(t,e){var n=Lq(t,e);if(n.length!==0){if(n.length===1)return n[0];throw new Ao("expected a single document in the stream, but found more")}}var Ele=yle,Sle=Cle,Aq={loadAll:Ele,load:Sle},Fq=Object.prototype.toString,Oq=Object.prototype.hasOwnProperty,wk=65279,xle=9,Kv=10,_le=13,Dle=32,Ile=33,Ple=34,fk=35,ble=37,Tle=38,Rle=39,kle=42,Uq=44,Nle=45,Lx=58,Lle=61,Ale=62,Fle=63,Ole=64,Mq=91,$q=93,Ule=96,Hq=123,Mle=124,Bq=125,Kr={};Kr[0]="\\0";Kr[7]="\\a";Kr[8]="\\b";Kr[9]="\\t";Kr[10]="\\n";Kr[11]="\\v";Kr[12]="\\f";Kr[13]="\\r";Kr[27]="\\e";Kr[34]='\\"';Kr[92]="\\\\";Kr[133]="\\N";Kr[160]="\\_";Kr[8232]="\\L";Kr[8233]="\\P";var $le=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Hle=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Ble(t,e){var n,r,o,i,s,a,c;if(e===null)return{};for(n={},r=Object.keys(e),o=0,i=r.length;o<i;o+=1)s=r[o],a=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),c=t.compiledTypeMap.fallback[s],c&&Oq.call(c.styleAliases,a)&&(a=c.styleAliases[a]),n[s]=a;return n}function Wle(t){var e,n,r;if(e=t.toString(16).toUpperCase(),t<=255)n="x",r=2;else if(t<=65535)n="u",r=4;else if(t<=4294967295)n="U",r=8;else throw new Ao("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+qn.repeat("0",r-e.length)+e}var jle=1,Jv=2;function Vle(t){this.schema=t.schema||_q,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=qn.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=Ble(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Jv:jle,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function dq(t,e){for(var n=qn.repeat(" ",e),r=0,o=-1,i="",s,a=t.length;r<a;)o=t.indexOf(`
`,r),o===-1?(s=t.slice(r),r=a):(s=t.slice(r,o+1),r=o+1),s.length&&s!==`
`&&(i+=n),i+=s;return i}function dk(t,e){return`
`+qn.repeat(" ",t.indent*e)}function Yle(t,e){var n,r,o;for(n=0,r=t.implicitTypes.length;n<r;n+=1)if(o=t.implicitTypes[n],o.resolve(e))return!0;return!1}function Ax(t){return t===Dle||t===xle}function Xv(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==wk||65536<=t&&t<=1114111}function mq(t){return Xv(t)&&t!==wk&&t!==_le&&t!==Kv}function pq(t,e,n){var r=mq(t),o=r&&!Ax(t);return(n?r:r&&t!==Uq&&t!==Mq&&t!==$q&&t!==Hq&&t!==Bq)&&t!==fk&&!(e===Lx&&!o)||mq(e)&&!Ax(e)&&t===fk||e===Lx&&o}function qle(t){return Xv(t)&&t!==wk&&!Ax(t)&&t!==Nle&&t!==Fle&&t!==Lx&&t!==Uq&&t!==Mq&&t!==$q&&t!==Hq&&t!==Bq&&t!==fk&&t!==Tle&&t!==kle&&t!==Ile&&t!==Mle&&t!==Lle&&t!==Ale&&t!==Rle&&t!==Ple&&t!==ble&&t!==Ole&&t!==Ule}function Gle(t){return!Ax(t)&&t!==Lx}function Gv(t,e){var n=t.charCodeAt(e),r;return n>=55296&&n<=56319&&e+1<t.length&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}function Wq(t){var e=/^\n* /;return e.test(t)}var jq=1,mk=2,Vq=3,Yq=4,kp=5;function zle(t,e,n,r,o,i,s,a){var c,l=0,u=null,f=!1,m=!1,d=r!==-1,p=-1,g=qle(Gv(t,0))&&Gle(Gv(t,t.length-1));if(e||s)for(c=0;c<t.length;l>=65536?c+=2:c++){if(l=Gv(t,c),!Xv(l))return kp;g=g&&pq(l,u,a),u=l}else{for(c=0;c<t.length;l>=65536?c+=2:c++){if(l=Gv(t,c),l===Kv)f=!0,d&&(m=m||c-p-1>r&&t[p+1]!==" ",p=c);else if(!Xv(l))return kp;g=g&&pq(l,u,a),u=l}m=m||d&&c-p-1>r&&t[p+1]!==" "}return!f&&!m?g&&!s&&!o(t)?jq:i===Jv?kp:mk:n>9&&Wq(t)?kp:s?i===Jv?kp:mk:m?Yq:Vq}function Kle(t,e,n,r,o){t.dump=(function(){if(e.length===0)return t.quotingType===Jv?'""':"''";if(!t.noCompatMode&&($le.indexOf(e)!==-1||Hle.test(e)))return t.quotingType===Jv?'"'+e+'"':"'"+e+"'";var i=t.indent*Math.max(1,n),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-i),a=r||t.flowLevel>-1&&n>=t.flowLevel;function c(l){return Yle(t,l)}switch(zle(e,a,t.indent,s,c,t.quotingType,t.forceQuotes&&!r,o)){case jq:return e;case mk:return"'"+e.replace(/'/g,"''")+"'";case Vq:return"|"+hq(e,t.indent)+gq(dq(e,i));case Yq:return">"+hq(e,t.indent)+gq(dq(Jle(e,s),i));case kp:return'"'+Xle(e)+'"';default:throw new Ao("impossible error: invalid scalar style")}})()}function hq(t,e){var n=Wq(t)?String(e):"",r=t[t.length-1]===`
`,o=r&&(t[t.length-2]===`
`||t===`
`),i=o?"+":r?"":"-";return n+i+`
`}function gq(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function Jle(t,e){for(var n=/(\n+)([^\n]*)/g,r=(function(){var l=t.indexOf(`
`);return l=l!==-1?l:t.length,n.lastIndex=l,vq(t.slice(0,l),e)})(),o=t[0]===`
`||t[0]===" ",i,s;s=n.exec(t);){var a=s[1],c=s[2];i=c[0]===" ",r+=a+(!o&&!i&&c!==""?`
`:"")+vq(c,e),o=i}return r}function vq(t,e){if(t===""||t[0]===" ")return t;for(var n=/ [^ ]/g,r,o=0,i,s=0,a=0,c="";r=n.exec(t);)a=r.index,a-o>e&&(i=s>o?s:a,c+=`
`+t.slice(o,i),o=i+1),s=a;return c+=`
`,t.length-o>e&&s>o?c+=t.slice(o,s)+`
`+t.slice(s+1):c+=t.slice(o),c.slice(1)}function Xle(t){for(var e="",n=0,r,o=0;o<t.length;n>=65536?o+=2:o++)n=Gv(t,o),r=Kr[n],!r&&Xv(n)?(e+=t[o],n>=65536&&(e+=t[o+1])):e+=r||Wle(n);return e}function Zle(t,e,n){var r="",o=t.tag,i,s,a;for(i=0,s=n.length;i<s;i+=1)a=n[i],t.replacer&&(a=t.replacer.call(n,String(i),a)),(mc(t,e,a,!1,!1)||typeof a>"u"&&mc(t,e,null,!1,!1))&&(r!==""&&(r+=","+(t.condenseFlow?"":" ")),r+=t.dump);t.tag=o,t.dump="["+r+"]"}function wq(t,e,n,r){var o="",i=t.tag,s,a,c;for(s=0,a=n.length;s<a;s+=1)c=n[s],t.replacer&&(c=t.replacer.call(n,String(s),c)),(mc(t,e+1,c,!0,!0,!1,!0)||typeof c>"u"&&mc(t,e+1,null,!0,!0,!1,!0))&&((!r||o!=="")&&(o+=dk(t,e)),t.dump&&Kv===t.dump.charCodeAt(0)?o+="-":o+="- ",o+=t.dump);t.tag=i,t.dump=o||"[]"}function Qle(t,e,n){var r="",o=t.tag,i=Object.keys(n),s,a,c,l,u;for(s=0,a=i.length;s<a;s+=1)u="",r!==""&&(u+=", "),t.condenseFlow&&(u+='"'),c=i[s],l=n[c],t.replacer&&(l=t.replacer.call(n,c,l)),mc(t,e,c,!1,!1)&&(t.dump.length>1024&&(u+="? "),u+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),mc(t,e,l,!1,!1)&&(u+=t.dump,r+=u));t.tag=o,t.dump="{"+r+"}"}function eue(t,e,n,r){var o="",i=t.tag,s=Object.keys(n),a,c,l,u,f,m;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new Ao("sortKeys must be a boolean or a function");for(a=0,c=s.length;a<c;a+=1)m="",(!r||o!=="")&&(m+=dk(t,e)),l=s[a],u=n[l],t.replacer&&(u=t.replacer.call(n,l,u)),mc(t,e+1,l,!0,!0,!0)&&(f=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,f&&(t.dump&&Kv===t.dump.charCodeAt(0)?m+="?":m+="? "),m+=t.dump,f&&(m+=dk(t,e)),mc(t,e+1,u,!0,f)&&(t.dump&&Kv===t.dump.charCodeAt(0)?m+=":":m+=": ",m+=t.dump,o+=m));t.tag=i,t.dump=o||"{}"}function yq(t,e,n){var r,o,i,s,a,c;for(o=n?t.explicitTypes:t.implicitTypes,i=0,s=o.length;i<s;i+=1)if(a=o[i],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(n?a.multi&&a.representName?t.tag=a.representName(e):t.tag=a.tag:t.tag="?",a.represent){if(c=t.styleMap[a.tag]||a.defaultStyle,Fq.call(a.represent)==="[object Function]")r=a.represent(e,c);else if(Oq.call(a.represent,c))r=a.represent[c](e,c);else throw new Ao("!<"+a.tag+'> tag resolver accepts not "'+c+'" style');t.dump=r}return!0}return!1}function mc(t,e,n,r,o,i,s){t.tag=null,t.dump=n,yq(t,n,!1)||yq(t,n,!0);var a=Fq.call(t.dump),c=r,l;r&&(r=t.flowLevel<0||t.flowLevel>e);var u=a==="[object Object]"||a==="[object Array]",f,m;if(u&&(f=t.duplicates.indexOf(n),m=f!==-1),(t.tag!==null&&t.tag!=="?"||m||t.indent!==2&&e>0)&&(o=!1),m&&t.usedDuplicates[f])t.dump="*ref_"+f;else{if(u&&m&&!t.usedDuplicates[f]&&(t.usedDuplicates[f]=!0),a==="[object Object]")r&&Object.keys(t.dump).length!==0?(eue(t,e,t.dump,o),m&&(t.dump="&ref_"+f+t.dump)):(Qle(t,e,t.dump),m&&(t.dump="&ref_"+f+" "+t.dump));else if(a==="[object Array]")r&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?wq(t,e-1,t.dump,o):wq(t,e,t.dump,o),m&&(t.dump="&ref_"+f+t.dump)):(Zle(t,e,t.dump),m&&(t.dump="&ref_"+f+" "+t.dump));else if(a==="[object String]")t.tag!=="?"&&Kle(t,t.dump,e,i,c);else{if(a==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new Ao("unacceptable kind of an object to dump "+a)}t.tag!==null&&t.tag!=="?"&&(l=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?l="!"+l:l.slice(0,18)==="tag:yaml.org,2002:"?l="!!"+l.slice(18):l="!<"+l+">",t.dump=l+" "+t.dump)}return!0}function tue(t,e){var n=[],r=[],o,i;for(pk(t,n,r),o=0,i=r.length;o<i;o+=1)e.duplicates.push(n[r[o]]);e.usedDuplicates=new Array(i)}function pk(t,e,n){var r,o,i;if(t!==null&&typeof t=="object")if(o=e.indexOf(t),o!==-1)n.indexOf(o)===-1&&n.push(o);else if(e.push(t),Array.isArray(t))for(o=0,i=t.length;o<i;o+=1)pk(t[o],e,n);else for(r=Object.keys(t),o=0,i=r.length;o<i;o+=1)pk(t[r[o]],e,n)}function nue(t,e){e=e||{};var n=new Vle(e);n.noRefs||tue(t,n);var r=t;return n.replacer&&(r=n.replacer.call({"":r},"",r)),mc(n,0,r,!0,!0)?n.dump+`
`:""}var rue=nue,oue={dump:rue};function yk(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var Zv=Aq.load,z_e=Aq.loadAll,K_e=oue.dump;var J_e=yk("safeLoad","load"),X_e=yk("safeLoadAll","loadAll"),Z_e=yk("safeDump","dump");var vs=Y(require("path")),Xq=Y(require("os")),Zq=Y(require("crypto")),Qq=Y(tS());var Qv=Y(require("path")),zq=Y(require("os"));var Gq=Y(require("crypto"));var gs={async readDocument(t){switch(t.scheme){case"file":try{return(await at(t.fsPath)).toString()}catch(e){if(e&&e.code==="ENOENT")return;throw e}default:throw new Error(`Unsupported scheme: ${t.toString()}`)}},async applyEdits(t,e,n){switch(t.scheme){case"file":let r=Io(n,e);await Lg(t.fsPath,r);break;default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}},Ke=class t{constructor(e,n=t.scheme){this.fileHost=e;this.scheme=n}static scheme="vscode-fileHost";async readDocument(e){switch(e.scheme){case this.scheme:try{return(await this.fileHost.readFile(_e(e,this.fileHost.platform))).toString()}catch{return}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}async applyEdits(e,n,r){switch(e.scheme){case this.scheme:let o=Io(r,n);await this.fileHost.writeFile(_e(e,this.fileHost.platform),Buffer.from(o));break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},co=class t{constructor(e){this.shellServer=e}static scheme="vscode-remote";static nonce;async readDocument(e){switch(e.scheme){case t.scheme:try{let{stdout:n}=await this.shellServer.exec(`cat ${e.path}`);return n}catch{return}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}async applyEdits(e,n,r){switch(e.scheme){case t.scheme:try{t.nonce||(t.nonce=Gq.randomUUID());let o=Io(r,n),i=`EOF-${t.nonce}`;await this.shellServer.exec(`cat <<'${i}' >${e.path}
${o}
${i}
`)}catch(o){console.log(o)}break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},Ek=class{constructor(e){this.documents=e}async readDocument(e){let n=this.documents[e.scheme];if(!n)throw new Error(`Unsupported scheme: ${e.toString()}`);return n.readDocument(e)}async applyEdits(e,n,r){let o=this.documents[e.scheme];if(!o)throw new Error(`Unsupported scheme: ${e.toString()}`);return o.applyEdits(e,n,r)}};function ur(t,e){let n={file:gs,[Ke.scheme]:new Ke(t)};return e&&(n[co.scheme]="readFile"in e?new Ke(e,co.scheme):new co(e)),new Ek(n)}var Ck=new Map;async function Sk(t,e){let n=t.toString(),r=Ck.get(n);if(r||Ck.set(n,r=[]),r.push(e),r.length===1){for(;r.length;)await r[0](),r.shift();Ck.delete(n)}}function _e(t,e){let n;return t.authority&&t.path.length>1&&(t.scheme==="file"||t.scheme===Ke.scheme)?n=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?n=t.path[1].toLowerCase()+t.path.substr(2):n=t.path,e==="win32"&&(n=n.replace(/\//g,"\\"),n[0]==="\\"&&n[1]!=="\\"&&(n=`C:${n}`)),n}function Rn(t,e,n){let r=t==="win32"?"/"+n.replace(/\\/g,"/"):n;return e.with({path:r})}function Gl(t,e){return[t.join(e,".devcontainer","devcontainer.json"),t.join(e,".devcontainer.json")]}function ew(t,e){let n=t.normalize(e);return Gl(t,"").includes(n)}async function Gf(t,e){let n=Gl(t.path,e);for(let r of n)if(await t.isFile(r))return Ce.file(r).with({scheme:Ke.scheme})}async function Kq(t){let e=Gl(Qv,t);for(let n of e)if(await Cr(n))return n}var pc=`{${zq.EOL}}`;async function $i(t,e,n,r){e.scheme==="file"&&await os(Qv.dirname(e.fsPath)),await t.applyEdits(e,n,r)}function zf(t){let e=Qv.posix.dirname(t.path);return t.with({path:e})}var tw=require("string_decoder");function nw(t){if(!(t.extensions||t.settings||t.devPort!==void 0))return t;let e={...t},n=e.customizations||(e.customizations={}),r=n.vscode||(n.vscode={});return e.extensions&&(r.extensions=(r.extensions||[]).concat(e.extensions),delete e.extensions),e.settings&&(r.settings={...e.settings,...r.settings||{}},delete e.settings),e.devPort!==void 0&&r.devPort===void 0&&(r.devPort=e.devPort,delete e.devPort),e}function xk(t,e,n){return Ox(t,e.configFilePath,n)}function Ox(t,e,n){let r=zf(e);return e.with({path:vs.posix.resolve(r.path,t.platform==="win32"&&e.scheme!==co.scheme?(vs.win32.isAbsolute(n)?"/":"")+n.replace(/\\/g,"/"):n)})}function Oo(t){return"dockerFile"in t||"build"in t&&"dockerfile"in t.build}function Ux(t){return t&&(Oo(t)||"image"in t||"dockerComposeFile"in t)}function Kf(t,e){return xk(t,e,sue(e))}function sue(t){return"dockerFile"in t?t.dockerFile:t.build.dockerfile}async function zl(t,e,n,r){if(Array.isArray(e.dockerComposeFile)){if(e.dockerComposeFile.length)return e.dockerComposeFile.map(o=>_e(xk(t,e,o),t.platform))}else if(typeof e.dockerComposeFile=="string")return[_e(xk(t,e,e.dockerComposeFile),t.platform)];if(r){let o=n==null?void 0:n.COMPOSE_FILE;if(o)return o.split(t.path.delimiter).map(a=>t.path.resolve(r,a));try{let a=t.path.join(r,".env"),c=await t.readFile(a),l=/^COMPOSE_FILE=(.+)$/m.exec(c.toString()),u=l&&l[1].trim();if(u)return u.split(t.path.delimiter).map(f=>t.path.resolve(r,f))}catch(a){if(!(a&&(a.code==="ENOENT"||a.code==="EISDIR")))throw a}let i=[t.path.resolve(r,"docker-compose.yml")],s=t.path.resolve(r,"docker-compose.override.yml");return await t.isFile(s)&&i.push(s),i}return[]}async function ii(t,e){let{cliHost:n,postCreate:r,output:o}=t;o.write(`Running Dev Containers CLI:   ${e.join(" ")}
`);let i=await aue(t),s=rw(n),a;try{await cue({exec:n.exec,cwd:t.cwd||i.cwd,cmd:s.cmd,args:[...s.args,i.script,...e],env:await _k(t,s.cmd),stdin:r==null?void 0:r.onDidInput,output:o,stdoutData:c=>a=c,stderrData:c=>o.event(c)}),o.write(a?JSON.stringify(a,void 0,4):"(No dev container CLI standard out)",1),o.write("Dev Containers CLI completed",1)}catch(c){throw c.data=a,c}return a}async function aue(t){let{cliHost:e,extensionPath:n,output:r}=t,o=vs.join(n,"dist","spec-node","devContainersSpecCLI.js"),i=e.type==="local"?n:e.path.join(await e.homedir(),".vscode-remote-containers","dist",`dev-containers-cli-${t.package.version}`),s=e.type==="local"?o:e.path.join(i,"dist","spec-node","devContainersSpecCLI.js");if(["wsl","remote"].indexOf(e.type)!==-1){let a="Checking for Dev Containers CLI",c=r.start(a),l=await e.isFile(s);if(r.stop(a,c),!l){let u="Copying Dev Containers CLI",f=r.start(u),m=`${i}-${Zq.randomUUID()}`,d=e.path.join(m,"dist","spec-node","devContainersSpecCLI.js");await e.mkdirp(e.path.dirname(d)),await Promise.all([Jq(vs.join(n,"package.json"),e,e.path.join(m,"package.json")),Jq(o,e,d),ow(vs.join(n,"scripts"),e,e.path.join(m,"scripts"),r)]),await e.rename(m,i),r.stop(u,f)}}return{cwd:i,script:s}}function rw(t){if(t.type==="local")return Al?{cmd:process.argv[0],args:[]}:{cmd:process.argv[0],args:[]};if(t.nodeExecutable)return{cmd:t.nodeExecutable,args:[]};throw new Error("Node executable required")}async function cue(t){let{exec:e,cmd:n,args:r,cwd:o,env:i,stdin:s,output:a,stdoutData:c,stderrData:l}=t,u=await e({cmd:n,args:r,cwd:o,env:i,output:a});return new Promise((f,m)=>{let d=new tw.StringDecoder,p="";u.stdout.on("data",C=>{p+=d.write(C);let w=p.split(`
`);p=w.pop();for(let y of w)if(y.trim())try{c(JSON.parse(y))}catch{a.write(y)}}),u.stdout.on("error",C=>{if((C==null?void 0:C.code)!=="ENOTCONN")throw C});let g=new tw.StringDecoder,h="";u.stderr.on("data",C=>{h+=g.write(C);let w=h.split(`
`);h=w.pop();for(let y of w)if(y.trim())try{l(JSON.parse(y))}catch{a.write(y)}}),u.stderr.on("error",C=>{if((C==null?void 0:C.code)!=="ENOTCONN")throw C});let v=[];u.exit.then(({code:C})=>{try{v.forEach(w=>w.dispose()),C?(a.write(`Exit code ${C}`),m({message:`Command failed: ${n} ${(r||[]).join(" ")}`,code:C})):f()}catch(w){m(w)}},m),typeof s=="function"&&v.push(s(C=>u.stdin.write(C)))})}async function _k(t,e){let{cliHost:n,env:r,appRoot:o}=t,i=await n.locateCertificatesFile();return{...r,...n.type==="local"?o?{NODE_PATH:`${n.path.join(o,"node_modules.asar")}${vs.delimiter}${n.path.join(o,"node_modules")}`}:void 0:n.type==="container"?void 0:{NODE_PATH:n.path.join(n.path.dirname(e),"node_modules")},...i?{NODE_EXTRA_CA_CERTS:i}:{},...Al?{TS_NODE_PROJECT:void 0}:{}}}async function Jq(t,e,n){await e.writeFile(n,await at(t))}async function ow(t,e,n,r){await e.mkdirp(n);let o=Qq.c({cwd:t,filter:l=>(console.log(l),!0)},["."]),i=new Promise((l,u)=>{o.on("error",u),o.on("finish",l)}),s=await e.exec({cmd:"tar",args:["--no-same-owner","-x","-f","-"],cwd:n,output:r}),a=new tw.StringDecoder;s.stdout.on("data",l=>{r.write(a.write(l))});let c=new tw.StringDecoder;s.stderr.on("data",l=>{r.write(ot(c.write(l)))}),o.pipe(s.stdin),await Promise.all([s.exit,i])}async function _r(){return vs.join(Xq.tmpdir(),process.platform==="linux"?`vsch-${await lx()}`:"vsch")}function lue(){return{contentHashes:{}}}async function $x(t,e,n,r){let o=t.getConfigurationState();if(o){let i=o.contentHashes,s=Object.keys(i),c=(await Dk(e,n,r)).contentHashes,l=Object.keys(c),u=new Set(l);s.forEach(d=>u.delete(d));let f=new Set(s);l.forEach(d=>f.delete(d));let m=[];for(let d of s)d in c&&c[d]!==i[d]&&m.push(d);if(u.size||f.size||m.length){let d=await Dk(e,n,r);(async()=>{await t.containerOutdated([...u,...f,...m].sort())==="ignore"&&await t.updateConfigurationState(d)})().catch(console.error)}}else await tG(t,e,n,r)}async function Hx(t,e,n,r,o){let i="Updating configuration state",s=o.start(i);await tG(t,e,n,r),o.stop(i,s)}async function tG(t,e,n,r){let o=await Dk(e,n,r);await t.updateConfigurationState(o)}async function Dk(t,e,n){let r=lue();Mx(r,iw.posix.basename(n.configFilePath.path),JSON.stringify({...n,forwardPorts:void 0,configFilePath:void 0,postStartCommand:void 0,postAttachCommand:void 0}));let o=zf(n.configFilePath).path;if(Oo(n)){let i=Kf(t,n),s=await e.readDocument(i);s!==void 0&&Mx(r,iw.posix.relative(o,i.path),s)}if("dockerComposeFile"in n){let i=await zl(t,n,t.env,t.cwd),s=await Promise.all(i.map(async a=>{let c=Ce.file(a).with({scheme:Ke.scheme});return{uri:c,content:await e.readDocument(c)}}));for(let{uri:a,content:c}of s)c!==void 0&&Mx(r,iw.posix.relative(o,a.path),c);for(let a=s.length-1;a>=0;a--){let{uri:c,content:l}=s[a];if(l){let u=uue(l),f=u&&u.services,m=f&&f[n.service],d=m&&m.build,p=d&&(typeof d=="string"?d:d.context);if(p){let g=Ox(t,c,p),h=nG(g,d.dockerfile||"Dockerfile"),v=await e.readDocument(h);v!==void 0&&Mx(r,iw.posix.relative(o,h.path),v)}if(m&&(m.image||m.build))break}}}return r}function uue(t){try{return Zv(t)}catch{return{}}}function Mx(t,e,n){let r=eG.createHash("sha256").update(n).digest("hex");t.contentHashes[e]=r}var Es=Y(require("path")),ia=Y(require("crypto"));var eu=Y(Mr());var Jr=Y(require("path")),Ak=Y(require("crypto"));var Xf=Y(Mr());var aG=Y(require("net")),Rk=Y(require("path"));var Ik=Y(require("path")),bk=Y(require("http")),rG=Y(require("os")),oG=Y(require("crypto"));async function iG(t,e){let n=await Tk(t),r=new Pk(n,e);return r.listen(),r}var Pk=class{constructor(e,n){this.ipcHandlePath=e;this.server=bk.createServer((r,o)=>{Promise.resolve(n(r,o)).catch(i=>console.error(i&&i.message||i))}),this.server.on("error",r=>console.error(r))}server;listen(){this.server.listen(this.ipcHandlePath)}dispose(){this.server.close()}};async function sG(t){return new Promise((e,n)=>{let r=[];t.setEncoding("utf8"),t.on("data",o=>r.push(o)),t.on("error",o=>n(o)),t.on("end",()=>{let o=JSON.parse(r.join(""));e(o)})})}async function Tk(t){let e=oG.randomUUID(),n=`${t}-${e}`;return process.platform==="win32"?`\\\\.\\pipe\\${n}-sock`:process.env.XDG_RUNTIME_DIR?Ik.join(process.env.XDG_RUNTIME_DIR,`${n}.sock`):Ik.join(rG.tmpdir(),`${n}.sock`)}var Bx=class{messages=[];dequeueRequest;push(e){this.messages.push(e),this.dequeueRequest&&(this.dequeueRequest.resolve(this.messages),this.dequeueRequest=void 0,this.messages=[])}async dequeue(e){if(this.messages.length){let n=this.messages;return this.messages=[],n}return this.dequeueRequest&&this.dequeueRequest.resolve([]),new Promise((n,r)=>{this.dequeueRequest={resolve:n,reject:r},typeof e=="number"&&setTimeout(r,e)})}};async function Kl(t,e,n){if(process.env.SSH_ASKPASS)return{};let r=await Tk("ssh-askpass");return await new Promise((o,i)=>{aG.createServer(s=>{s.setEncoding("utf8");let a="";s.on("data",async c=>{if(a+=c,a.endsWith(`
`))try{n.write(`SSH askpass request: ${a}`,1);let l=await e(JSON.parse(a));s.write(l,u=>{u&&console.error(u)}),s.end()}catch(l){console.error(l)}}),s.on("error",c=>console.error(c))}).on("error",s=>{i(s)}).listen(r,()=>{o()})}),{DISPLAY:process.env.DISPLAY||"1",ELECTRON_RUN_AS_NODE:"1",SSH_ASKPASS:Rk.join(t,"scripts",`ssh-askpass.${process.platform==="win32"?"bat":"sh"}`),SSH_ASKPASS_REQUIRE:"force",VSCODE_SSH_ASKPASS_NODE:process.execPath,VSCODE_SSH_ASKPASS_MAIN:Rk.join(t,"dist","common","sshAskpass.js"),VSCODE_SSH_ASKPASS_HANDLE:r}}var fue=0;function fr(t){return t.VSCODE_SSH_ASKPASS_HANDLE?{VSCODE_SSH_ASKPASS_COUNTER:String(++fue)}:{}}async function si(t,e){return(await ws(t,[e]))[0]}async function ws(t,e){let n=await jx(t,"container",e);for(let r of n){r.Ports=[];let o=r.NetworkSettings.Ports;for(let i in o){let[s,a]=i.split("/");for(let c of o[i]||[]){let{HostIp:l,HostPort:u}=c;r.Ports.push({IP:l,PrivatePort:parseInt(s),PublicPort:parseInt(u),Type:a})}}}return n}async function cG(t,e){return(await jx(t,"image",[e]))[0]}async function Wx(t,e){return(await jx(t,"volume",[e]))[0]}async function Jf(t,e){return jx(t,"volume",e)}async function jx(t,e,n){if(!n.length)return[];let r=Bi(t),o=await X({...r,args:(r.args||[]).concat(["inspect","--type",e,...n])});try{return JSON.parse(o.stdout.toString())}catch(i){throw console.error({stdout:o.stdout.toString(),stderr:o.stderr.toString()}),i}}async function Jl(t,e=!1,n=[]){let r=[];e&&r.push("-a");for(let i of n)r.push("--filter",`label=${i}`);return(await et(t,"ps","-q",...r)).stdout.toString().split(/\r?\n/).filter(i=>!!i)}async function Uo(t,e=[]){let n=[];for(let o of e)n.push("--filter",`label=${o}`);return(await et(t,"volume","ls","-q",...n)).stdout.toString().split(/\r?\n/).filter(o=>!!o)}async function Xl(t,e=[]){return(await et(t,"volume","ls","-q","-f","dangling=true",...e.map(r=>["-f",`label=${r}`]).flat())).stdout.toString().split(/\r?\n/).filter(r=>!!r)}async function Fp(t,e,n){let r=[];for(let o of n||[])r.push("--label",o);await et(t,"volume","create",...r,e)}async function Hi(t,e){var o;let n,r;try{for(let i=0,s=7;i<s;i++)try{return await et(t,"rm","-f",e)}catch(a){let c=((o=a==null?void 0:a.stderr)==null?void 0:o.toString().toLowerCase())||"";if(i===s-1||!c.includes("already in progress"))throw a;r||(n=await Vx(t,{container:[e],event:["destroy"]}),r=new Promise(l=>{n.stdout.on("data",()=>{l(),n.terminate(),r=new Promise(()=>{})})})),await Promise.race([r,Wt(1e3)])}}finally{n&&n.terminate()}throw new Error("Unreachable")}async function Vx(t,e){let{exec:n,cmd:r,args:o,env:i,output:s}=Bi(t),a=[];for(let m in e)for(let d of e[m])a.push("--filter",`${m}=${d}`);let c="isPodman"in t&&t.isPodman?"json":"{{json .}}",l=(o||[]).concat(["events","--format",c,...a]),u=await n({cmd:r,args:l,env:i,output:s}),f=[];return u.stderr.on("data",m=>f.push(m)),u.exit.then(({code:m,signal:d})=>{f.length&&s.write(ot(Buffer.concat(f).toString())),(m||d&&d!=="SIGKILL")&&s.write(ot(`Docker events terminated (code: ${m}, signal: ${d}).`))},m=>{s.write(ot(m&&(m.stack||m.message)))}),u}async function et(t,...e){let n=Bi(t);return X({...n,args:(n.args||[]).concat(e)})}async function kk(t){var e;try{let{stdout:n}=await et(t,"context","ls","--format","{{json .}}"),r=`[${n.toString().trim().split(/\r?\n/).join(",")}]`;return(e=JSON.parse(r).find(s=>s.Current))==null?void 0:e.Name}catch{return}}async function lG(t){try{let{stdout:e}=await et(t,"-v");return e.toString().toLowerCase().indexOf("podman")!==-1}catch{return!1}}async function uG(t,...e){let n=mG(t);return Fi({...n,args:(n.args||[]).concat(e)})}async function sw(t,...e){let n=Bi(t,"dockerComposeCLI"in t?await t.dockerComposeCLI():void 0);return X({...n,args:(n.args||[]).concat(e)})}function ys(t,e,n){return async function(r){let{exec:o,cmd:i,args:s,env:a}=Bi(t),{argsPrefix:c,args:l}=dG(e,n,r,!1);return o({cmd:i,args:(s||[]).concat(l),env:a,output:fG(r.output,i,c)})}}async function na(t,e,n,r){if(!await r("node-pty"))throw new Error("Missing node-pty");return async function(i){let{ptyExec:s,cmd:a,args:c,env:l}=mG(t),{argsPrefix:u,args:f}=dG(e,n,i,s.isTTY!==!1);return s({cmd:a,args:(c||[]).concat(f),env:l,output:fG(i.output,a,u)})}}function fG(t,e,n){return due(t,`Run: ${e} ${(n||[]).join(" ").replace(/\n.*/g,"")}`,"Run in container:")}function due(t,e,n){let r=new RegExp(Wf(e),"g");return sn({...t,get dimensions(){return t.dimensions},event:i=>t.event("text"in i?{...i,text:i.text.replace(r,n)}:i)})}function dG(t,e,n,r){let{env:o,cwd:i,cmd:s,args:a}=n,c=["exec","-i"];r&&c.push("-t"),e&&c.push("-u",e),o&&Object.keys(o).forEach(u=>c.push("-e",`${u}=${o[u]}`)),i&&c.push("-w",i),c.push(t);let l=c.slice();return c.push(s),a&&c.push(...a),{argsPrefix:l,args:c}}function Bi(t,e){return"dockerEnv"in t?{exec:t.common.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:{...t.dockerEnv,...fr(t.dockerEnv)},output:t.common.output}:"cliHost"in t?{exec:t.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:{...t.env,...fr(t.env)},output:t.output}:{...t,env:{...t.env,...fr(t.env)}}}function mG(t,e){return"dockerEnv"in t?{ptyExec:t.common.cliHost.ptyExec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:{...t.dockerEnv,...fr(t.dockerEnv)},output:t.common.output}:"cliHost"in t?{ptyExec:t.cliHost.ptyExec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:{...t.env,...fr(t.env)},output:t.output}:{...t,env:{...t.env,...fr(t.env)}}}var pG=Y(Mr()),mue="com.docker.compose.project";async function hG(t,e,n,r,o,i,s,a,c,l,u,f,m,d){var v,C;let{common:p}=t,{cliHost:g}=e,h;try{let w=await zl(g,n,g.env,g.cwd),y=g.path.join(g.cwd,".env"),S=Array.isArray(n.dockerComposeFile)&&n.dockerComposeFile.length===0&&await g.isFile(y)?y:void 0,D=!c,_=r.remoteUser,A=pue(n);h=await Up(t,s.Id,A,_),u&&c&&h.user!=="root"&&(h.launchRootShellServer?await Tx(h,h.launchRootShellServer,A,n.configFilePath.path):p.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files."));let U=await qx(p,c,s,A,h),k=ur(g,h.shellServer);D||await Hx(t.configurationTracking,g,k,n,p.output);let E=r.shutdownAction;E==="stopContainer"&&(E="stopCompose");let x={cwd:o,dockerCLI:t.dockerCLI,dockerComposeCLI:await t.dockerComposeCLI(),env:p.env,containerId:s.Id,user:h.user,sessionId:p.sessionId,shutdownAction:E,projectName:aw(s),composeFiles:w,envFile:S,buildContainerRunArgs:l,service:n.service,runServices:n.runServices,logLevel:p.getLogLevel(),delay:1e4},{shutdownArgs:b,doneWithDocuments:I}=await Yx(t,g,k,"dockerCompose",x,D?n:void 0);p.backgroundTasks.push(I);let T=((C=(((v=r.customizations)==null?void 0:v.vscode)||[]).slice().reverse().find(z=>typeof z.devPort=="number"))==null?void 0:C.devPort)||jl,{hostOrContainerPort:R,hostPortServer:L,connectionToken:N,remoteEnv:B,serverDownloaded:W}=await Vl(p,h,n,r,T,Mp(t,e,h,i,f,s.Id,a,m,d),U);return b.hostPortServer=L,{params:p,properties:h,config:n,resolvedAuthority:{host:hc,port:R,connectionToken:N,extensionHostEnv:B},tunnelInformation:p.isLocalContainer?Op(s):{},dockerParams:t,dockerContainerId:s.Id,serverDownloaded:W}}catch(w){let y=w instanceof pe?w:new pe({description:pG.t("An error occurred setting up the container."),originalError:w});throw s&&(y.manageContainer=!0,y.params=t.common,y.containerId=s.Id,y.dockerParams=t),h&&(y.containerProperties=h),y.config=n,y}}function pue(t){return t.workspaceFolder||"/"}function aw(t){let e=(t.Config.Labels||{})[mue];return e||void 0}function Cs(t,e,n){let r;return()=>r||(r=(async()=>{let o=!0,i;try{i=(await sw({...t,cmd:e},"compose","version","--short")).stdout}catch{i=(await sw({...t,cmd:n},"version","--short")).stdout,o=!1}let s=i.toString().trim();return t.output.write(`Docker Compose version: ${s}`),{version:s,cmd:o?e:n,args:o?["compose"]:[]}})())}var cw=Y(Mr());var Gx=Y(jC()),gG=Y(require("url"));function zx(t,e){return new Promise((n,r)=>{let o=new gG.URL(t.url),i={hostname:o.hostname,port:o.port,path:o.pathname+o.search,method:t.type,headers:t.headers},s=(o.protocol==="https:"?Gx.https:Gx.http).request(i,a=>{if(a.statusCode<200||a.statusCode>299)r(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`)),e&&e.write(`HTTP request failed with status code ${a.statusCode}: : ${a.statusMessage}`,5);else{a.on("error",r);let c=[];a.on("data",l=>c.push(l)),a.on("end",()=>n(Buffer.concat(c)))}});s.on("error",r),t.data&&s.write(t.data),s.end()})}async function $p(t,e,n,r){var c;let o=await vue(e,t.output),i=Object.keys(n.features||{}).map(l=>{let u=hue(o,l);return u?{configFeatureId:l,disallowedFeatureEntry:u}:void 0}).filter(Boolean);if(!i.length)return;let s=!1;if(r){let l=await Zl(t,r);((c=l==null?void 0:l.State)==null?void 0:c.Status)==="running"&&(await et(t,"stop","-t","0",l.Id),s=!0)}let a=i[0];throw Nk(a.configFeatureId,a.disallowedFeatureEntry.documentationURL,s)}function Nk(t,e,n){return new pe({description:n?cw.t("Cannot use the '{0}' feature since it was reported to be problematic. The existing dev container was stopped.",t):cw.t("Cannot use the '{0}' feature since it was reported to be problematic.",t),detail:cw.t("Please remove this feature from your devcontainer.json and rebuild the dev container before continuing."),data:{learnMoreUrl:e,reload:!1}})}function hue(t,e){return t.disallowedFeatures.find(n=>e.startsWith(n.featureIdPrefix)&&(e.length===n.featureIdPrefix.length||"/:@".indexOf(e[n.featureIdPrefix.length])!==-1))}var vG="devcontainers.controlManifest",gue=300*1e3;async function vue(t,e){let n=t.get(vG);return n&&Date.parse(n.timestamp)+gue>Date.now()?n.manifest:wue(t,n==null?void 0:n.manifest,e)}async function wue(t,e,n){let r;try{r=await yue()}catch(o){n.write(cw.t("Failed to fetch control manifest: {0}",o.message)),r=e||{disallowedFeatures:[]}}return t.update(vG,{timestamp:new Date().toISOString(),manifest:r}),r}async function yue(){let t=await zx({type:"GET",url:"https://containers.dev/static/devcontainer-control-manifest.json",headers:{"user-agent":"devcontainers-vscode",accept:"application/json"}}),e=Me(t.toString())||{};return Array.isArray(e.disallowedFeatures)?e.disallowedFeatures=e.disallowedFeatures.filter(n=>typeof n.featureIdPrefix=="string"):e.disallowedFeatures=[],e}async function Fk(t,e,n,r){if(e&&!/\/\.?devcontainer\.json$/.test(e.path))throw new Error(`Filename must be devcontainer.json or .devcontainer.json (${_e(e,t.common.cliHost.platform)}).`);let o=t.parsedAuthority;if(!o||un(o))return Cue(t,o,e,n,r);if(lo(o))return o.inspectVolume?Lk(t,o):Eue(t,o,e);if(ed(o))return o.inspectVolume?Lk(t,o):Sue(t,o,e);if(dw(o))return Lk(t,o);throw new Error(`Unexpected authority: ${JSON.stringify(o)}`)}async function Cue(t,e,n,r,o){let{common:i,dockerCLI:s,dockerComposeCLI:a,dockerComposePath:c}=t,{cliHost:l,env:u,output:f}=i,m=l.cwd,d=t.originalCwd||m,p=e&&It(l.path,Pv(e.hostPath)?l.path.join(m,Jr.basename(e.hostPath)):m);e!=null&&e.configFile&&!n&&(n=e.configFile,l.type==="wsl"&&n.scheme==="file"&&(n=Ce.from({scheme:Ke.scheme,path:await bG(n,l)})));let g={cliHost:l,dockerCLI:s,dockerComposeCLI:a,dockerComposePath:c,env:u,output:f},h=o?void 0:Ok(d),v=o||[`${fw}=${d}`,`${Qx}=${i.product.quality}`];return Uk(t,g,h,v,d,m,n,r,void 0,p,e==null?void 0:e.settings,[],"on")}function Ok(t,e){let n=[`${uw}=${t}`];if(e){let{buildCLIHost:r,configFile:o}=e,i;o.scheme===Ke.scheme||o.scheme==="file"&&r.type==="local"?i=_e(o,r.platform):i=o.toString(),n.push(`${Zf}=${i}`)}return n}async function Eue(t,e,n){let{repositoryPath:r,volumeName:o,folder:i}=e,s=ci(r);o=await _G(t,s,o);let{labels:a,remoteWorkspaceFolder:c}=DG(s,r,i,o),l=[...a],u=[...a,`${Qx}=${t.common.product.quality}`];e.configFile&&!n&&(n=e.configFile);let{containerId:f,shellServer:m,remoteContainersEnv:d,config:p,preInstalledExtensions:g}=await s.cloneAndInitializeRepository(t,e,s,o,n),h=i?s.workspaceFolder(i):s.fullRepositoryName,v=Hk(s,o,i,t.dockerSocketPath);return wG(t,e,n,p,g,f,m,d,o,h,c,l,u,v)}async function Sue(t,e,n){let{common:r}=t,{extensionPath:o,appRoot:i,loadNativeModule:s,output:a}=r,{volumeName:c,folder:l}=e,u=[`${Xx}=${c}`,`${SG}=${l}`],f=u;await Wk(t);let m=Bk(c,Qf(),t.dockerSocketPath),{stdout:d}=await et(t,...m),p=d.toString().trim(),g=ys(t,p,"root"),h=await jt(g,a),v=[],C=lw(l),w=C,y=await na(t,p,"root",s),S=so("container",C,{},g,y,()=>{throw new Error("not implemented")},"node",a),{configuration:D}=await Kx({cliHost:S,dockerPath:"docker",dockerComposePath:"docker-compose",env:{},extensionPath:o,appRoot:i,package:r.package,output:a},C,n,t.common.getLogLevel(),u,void 0,void 0,t.useExperimentalMountGitWorktreeCommonDir);return wG(t,e,n,D,v,p,h,{},c,C,w,u,f,m)}async function wG(t,e,n,r,o,i,s,a,c,l,u,f,m,d){var A,U,k;let p=It(Jr.posix,l),g=[`type=volume,source=${c},target=${Jr.posix.dirname(p.rootFolderPath)},external=true`],h=await IG(t,i,a,u),v={},{HOME:C,USERPROFILE:w}=t.common.env;C!=null&&C.startsWith("/")&&(v.HOME=C,await s.exec(`test -e "${C}" || (mkdir -p "$(dirname "${C}")" && ln -s ~ "${C}")`)),w!==void 0&&(v.USERPROFILE=w);let y=h.cliHost,S,D,_=Oo(r)||"image"in r;if(_||"dockerComposeFile"in r&&r.workspaceFolder||o.length){let E=o.length?{...r.customizations,vscode:{...(A=r.customizations)==null?void 0:A.vscode,extensions:[...((k=(U=r.customizations)==null?void 0:U.vscode)==null?void 0:k.extensions)||[],...o]}}:r.customizations;D=_?T=>({...T,workspaceFolder:void 0,workspaceMount:"",customizations:E}):T=>({...T,workspaceFolder:p.rootFolderPath,customizations:E});let x=y.path.join(await y.tmpdir(),`devcontainer-${Ak.randomUUID()}.json`),b=`EOF-${x}`,I=`${x}_${Date.now()}`;await s.exec(`cat <<'${b}' >${I}
${JSON.stringify({...D(r),configFilePath:void 0})}
${b}
mv ${I} ${x}`),S=Ce.from({scheme:Ke.scheme,path:x})}try{return await Uk(t,h,f,m,t.common.cliHost.cwd,y.cwd,n,S,D,p,e.settings,g,"off",d,!0,void 0,v)}finally{Promise.all(t.common.backgroundTasks.filter(E=>typeof E!="function").map(E=>E.catch(()=>{}))).then(()=>Hi(t,i))}}async function Lk(t,e){let{common:n,dockerCLI:r,dockerComposeCLI:o,dockerComposePath:i}=t,{cliHost:s,env:a,output:c}=n,{volumeName:l}=e,u,f,m=dw(e);m?(u=Zx,f="Inspect Volume"):(u=ci(e.repositoryPath).volumeDestination,f="Recovery Container");let d=[`${Hp}=${l}`],p=[`${Hp}=${l}`,`${Qx}=${n.product.quality}`],g=await xG(t),h=[`type=volume,source=${l},target=${u},external=true`],v={cliHost:s,dockerCLI:r,dockerComposeCLI:o,dockerComposePath:i,env:a,output:c},C=It(s.path,g);return Uk(t,v,d,p,g,g,void 0,void 0,void 0,C,e.settings,h,"never",void 0,!m,f)}async function Uk(t,e,n,r,o,i,s,a,c,l,u,f,m,d,p,g,h){var pt,nt,Dt,yt;let{common:v,userRepositoryConfigurationPaths:C}=t,{output:w,extensionPath:y,appRoot:S,postCreate:D,localWaylandSocket:_}=v,{cliHost:A}=e,U=[...f];if(t.cacheMount==="bind"&&(await os(v.localCacheFolder),U.push(`type=bind,source=${v.localCacheFolder},target=/vscode`)),t.cacheMount==="volume"){let j="vscode";(await Uo(e)).indexOf(j)===-1&&await Fp(e,j),U.push("type=volume,source=vscode,target=/vscode,external=true")}if(_){let j=await HV(void 0);U.push(`type=bind,source=${_},target=${j}`)}let k=s?{uri:s,type:xue(A,l,s),fileHost:A}:l?await CG(A,l,C,t.common.loadNativeModule,!a,w):void 0,E=k==null?void 0:k.uri;if((E==null?void 0:E.scheme)==="file"&&A.type!=="local"){let j=Jr.dirname(E.fsPath),oe=Jr.basename(E.fsPath),xe=oe===".devcontainer.json"?j:Jr.dirname(j),le=A.path.join(await A.tmpdir(),`devcontainer-config-${Ak.randomUUID()}`);await ow(xe,A,le,w),E=Ce.from({scheme:Ke.scheme,path:A.path.join(le,...oe===".devcontainer.json"?[oe]:[Jr.basename(j),oe])})}typeof t.removeOnStartup=="string"&&await ai(t,t.removeOnStartup)&&await Hi(t,t.removeOnStartup);let x=await Zl(e,r);x&&t.removeOnStartup===!0&&n&&(await Hi(t,x.Id),x=void 0);let b=!!x||!n,I=b?r:await _ue(t,e,k,n),T=!1,R=t.removeOnStartup!==!0?x||n&&await Zl(e,n):void 0;((pt=R==null?void 0:R.State)==null?void 0:pt.Status)==="running"&&(T=!0,et({...Bi(t),print:"continuous"},"exec","-i","-u","root",R.Id,"/bin/sh","-c",`echo "Container already running. Keep-alive process started." ; export VSCODE_REMOTE_CONTAINERS_SESSION=${t.common.sessionId} ; /bin/sh`).catch(()=>{T=!1,w.write("Keep-alive process ended.")}));let L="",N=v.postCreate.output,B=sn({...N,get dimensions(){return N.dimensions},event:j=>{(j.type==="text"||j.type==="raw")&&(L+=j.text),N.event(j)}}),W={...h,...e.env,...fr(e.env)},z={cliHost:A,dockerPath:e.dockerCLI,dockerComposePath:e.dockerComposePath,env:W,extensionPath:y,appRoot:S,package:v.package,postCreate:D,output:B},V=v.postCreate.output.dimensions||v.output.dimensions,q=v.additionalFeaturesToInstall,ce;try{ce=await ii(z,["up",...e.cliHost.type==="local"&&v.persistedFolder?["--user-data-folder",v.persistedFolder]:[],...e.dockerCLI!=="docker"?["--docker-path",e.dockerCLI]:[],...e.dockerComposePath!=="docker-compose"?["--docker-compose-path",e.dockerComposePath]:[],...v.containerSessionDataFolder?["--container-session-data-folder",v.containerSessionDataFolder]:[],...b?["--container-data-folder",Mi(t.common.product.serverDataFolderName)]:[],...b?["--container-system-data-folder",bx(t.common.product.serverDataFolderName)]:[],"--workspace-folder",i,...t.workspaceMountConsistencyDefault?["--workspace-mount-consistency",t.workspaceMountConsistencyDefault]:[],"--gpu-availability",t.gpuAvailability,...[].concat(...I.map(j=>["--id-label",j])),"--log-level",ro(v.getLogLevel()),"--log-format","json",...E?["--config",_e(E,A.platform)]:[],...a?["--override-config",_e(a,A.platform)]:[],"--default-user-env-probe",v.defaultUserEnvProbe,...t.buildNoCache?["--build-no-cache"]:[],...t.removeOnStartup===!0?["--remove-existing-container"]:[],...t.expectExistingContainer||!t.common.hostConfig.canRebuildContainer?["--expect-existing-container"]:[],...t.useExperimentalLockfile?["--experimental-lockfile"]:[],...t.useExperimentalMountGitWorktreeCommonDir?["--mount-git-worktree-common-dir"]:[],...[].concat(...U.map(j=>["--mount",j])),"--skip-post-create","--update-remote-user-uid-default",m,"--mount-workspace-git-root",...V?["--terminal-columns",String(V.columns),"--terminal-rows",String(V.rows)]:[],...Object.keys(q).length>0?["--additional-features",JSON.stringify(q)]:[],"--include-configuration","--include-merged-configuration"])}catch(j){let oe;if((nt=j==null?void 0:j.data)!=null&&nt.disallowedFeatureId){let{disallowedFeatureId:xe,didStopContainer:le,learnMoreUrl:De}=j.data;oe=Nk(xe,De,le),oe.originalError=j}else oe=j instanceof pe?j:new pe({description:Xf.t("An error occurred setting up the container."),originalError:j});throw j&&!(j instanceof pe)&&(j.cmdOutput=L),(Dt=j==null?void 0:j.data)!=null&&Dt.containerId&&(oe.manageContainer=!0,oe.params=t.common,oe.containerId=(yt=j==null?void 0:j.data)==null?void 0:yt.containerId,oe.dockerParams=t),oe.step="devContainersCLIUP",oe}if((ce==null?void 0:ce.outcome)!=="success")throw new pe({description:Xf.t("devcontainer command failed: {0}",JSON.stringify(ce)),step:"devContainersCLIUP"});ce.configuration.configFilePath=ce.mergedConfiguration.configFilePath=ce.configuration.configFilePath&&Ce.revive(ce.configuration.configFilePath).with({scheme:A.type==="local"?"file":Ke.scheme});let Be=await ai(t,ce.containerId);if(!Be)return jk(v.output,"Dev container not found.");T||(T=!0,et({...Bi(t),print:"continuous"},"exec","-i","-u","root",Be.Id,"/bin/sh","-c",`echo "New container started. Keep-alive process started." ; export VSCODE_REMOTE_CONTAINERS_SESSION=${t.common.sessionId} ; /bin/sh`).catch(()=>{T=!1,w.write("Keep-alive process ended.")}));let{configuration:mt,mergedConfiguration:Ht,remoteWorkspaceFolder:xo}=ce,Pn=Bp(v.cliHost.authority,u),vn=g||(mt.name?Xf.t("Dev Container: {0}{1}",mt.name,Pn):Xf.t("Dev Container{0}",Pn));v.setWorkspaceName(vn);let Xt;try{if(Oo(mt)||"image"in mt)Xt=await PG(t,e,mt,Ht,xo,o,i,Be,b,!R,p,I,E,a);else if("dockerComposeFile"in mt)Xt=await hG(t,e,mt,Ht,o,i,Be,b,!R,d,p,I,E,a);else throw new pe({description:Xf.t('Dev container config ({0}) is missing one of "image", "dockerFile" or "dockerComposeFile" properties.',mt.configFilePath.toString())})}catch(j){let oe=j instanceof pe?j:new pe({description:Xf.t("An error occurred setting up the container."),originalError:j});throw oe.step||(oe.step="setupDevContainer"),oe}if(Due(t,z,mt,a,c,Be,d,i,E,I,Xt.properties),Xt.configLocationType=k==null?void 0:k.type,(k==null?void 0:k.type)==="workspace")if(A.type==="container")Xt.configWorkspaceURI=k.uri.with({scheme:co.scheme,authority:v.authority});else{let j=_e(k.uri,A.platform),oe=Be.Mounts.find(xe=>lf(A.path,xe.Source,j));if(oe){let xe=A.path.relative(oe.Source,j),le=A.platform==="win32"?xe.replace(/\\/g,"/"):xe;Xt.configWorkspaceURI=Ce.from({scheme:co.scheme,authority:v.authority,path:Jr.posix.join(oe.Destination,le)})}}return Xt}function xue(t,e,n){return e&&(n.scheme===Ke.scheme||n.scheme==="file"&&t.type==="local")&&lf(Jr,e.rootFolderPath,_e(n,t.platform))?"workspace":n.scheme==="file"?"repositoryConfig":"unknown"}async function _ue(t,e,n,r){var s;let{cliHost:o}=e,i;if(n){let{uri:a}=n,c;a.scheme===Ke.scheme||a.scheme==="file"&&o.type==="local"?c=_e(a,o.platform):c=a.toString();let l=[...r,`${Zf}=${c}`];if(await Zl(e,l))i=l;else{let u=await Zl(e,r);u&&!((s=u.Config.Labels)!=null&&s[Zf])?t.removeOnStartup===!0?(await Hi(e,u.Id),i=l):i=r:i=l}}else i=r;return i}function Due(t,e,n,r,o,i,s,a,c,l,u){let{common:f}=t,{output:m,extensionPath:d,appRoot:p}=f,{cliHost:g}=e;if(f.hostConfig.canRebuildContainer&&t.watch){let h,v=n.configFilePath;if(v.scheme===Ke.scheme)if(g.type==="local")h=v.with({scheme:"file"});else if(g.type==="container")h=v.with({scheme:co.scheme,authority:f.authority});else{let C=_e(v,g.platform),w=i.Mounts.find(y=>lf(g.path,y.Source,C));if(w){let y=g.path.relative(w.Source,C),S=g.platform==="win32"?y.replace(/\\/g,"/"):y;h=Ce.from({scheme:co.scheme,authority:f.authority,path:Jr.posix.join(w.Destination,S)})}}else(v.scheme==="file"||v.scheme===co.scheme)&&(h=v);if(h){let D=function(){C||(y=w().finally(async()=>{await Wt(g.type==="container"?5e3:1e3),y=void 0,S&&(S=!1,D())}))},C=!1;async function w(){let A=e,U;try{if(g.type==="container"){let{stdout:x}=await et(t,...s);U=x.toString().trim();let b=ys(t,U,"root");if(r&&o){let R=r.path,L=`EOF-${R}`,N=`${R}_${Date.now()}`,B=await jt(b,m),W=Me((await B.exec(`cat '${v.path}'`)).stdout);await B.exec(`cat <<'${L}' >${N}
${JSON.stringify({...o(W),configFilePath:void 0})}
${L}
mv ${N} ${R}`)}let I=await na(t,U,"root",f.loadNativeModule);A={cliHost:so("container",a,{},b,I,()=>{throw new Error("not implemented")},"node",m),dockerPath:"docker",dockerComposePath:"docker-compose",env:{},extensionPath:d,appRoot:p,package:f.package,output:m}}let k=await Kx(A,a,c,f.getLogLevel(),l,i.Id,r,t.useExperimentalMountGitWorktreeCommonDir),E=ur(A.cliHost,u.shellServer);await $x({...t.configurationTracking,containerOutdated:async x=>{C=!0;let b=await t.configurationTracking.containerOutdated(x);return b==="ignore"&&(C=!1),b}},A.cliHost,E,k.configuration)}finally{U&&await Hi(t,U)}}let y,S=!1,_=t.watch(h,()=>{y?S=!0:D()});t.common.shutdowns.push(async()=>(await _).dispose())}}}async function Zl(t,e){let n=await Jl(t,!0,e);return(await ws(t,n)).filter(o=>o.State.Status!=="removing")[0]}async function Kx(t,e,n,r,o,i,s,a){let{cliHost:c,output:l}=t,u=await ii(t,["read-configuration",...t.dockerPath!=="docker"?["--docker-path",t.dockerPath]:[],...t.dockerComposePath!=="docker-compose"?["--docker-compose-path",t.dockerComposePath]:[],"--workspace-folder",e,...(o||[]).map(f=>["--id-label",f]).flat(),...i?["--container-id",i]:[],"--log-level",ro(r),"--log-format","json",...n?["--config",_e(n,c.platform)]:[],...s?["--override-config",_e(s,c.platform)]:[],"--mount-workspace-git-root",...a?["--mount-git-worktree-common-dir"]:[],...l.dimensions?["--terminal-columns",String(l.dimensions.columns),"--terminal-rows",String(l.dimensions.rows)]:[]]);return u.configuration.configFilePath=Ce.revive(u.configuration.configFilePath).with({scheme:c.type==="local"?"file":Ke.scheme}),u}async function yG(t,e,n,r,o,i){let s=await CG(t,e,n,r,o,i);return s==null?void 0:s.uri}async function CG(t,e,n,r,o,i){let s=await LS(t,e,Fe),a=s&&await Mk(s,n);if(a)return{uri:a,type:"repositoryConfig",fileHost:await Gr(process.cwd(),r,i)};let c=await Gf(t,e.configFolderPath);if(c)return{uri:c,type:"workspace",fileHost:t};o&&i&&(s!=null&&s.length?i.write(`No dev container config found. Additional locations checked:
${Jx(s,n).map(l=>`- ${Jr.join(l,".devcontainer","devcontainer.json")}`).join(`
`)}`):i.write("No dev container config found. No repository connection string found."))}async function Mk(t,e){let n=Jx(t,e);for(let r of n){let o=await Kq(r);if(o)return Ce.file(o)}}function Jx(t,e){let n=[],r=new Set(t.map(Iue).filter(o=>!!o));for(let o of r)for(let i of e){let s=Jr.join(i,o);n.push(s)}return n}function EG(t,e,n){let r=t.path.relative(e.rootFolderPath,_e(n,t.platform));return r&&!r.startsWith("..")&&!t.path.isAbsolute(r)}function Iue(t){let e;if(t.startsWith("https://"))e=t.substr(8);else{let n=/[^@:]+@([^:]+):(.+)/.exec(t);if(n)e=`${n[1]}/${n[2]}`;else return}if(!(e.toLowerCase().startsWith("github.com")&&(e=(/^[^/]+\/[^/]+\/[^/]+/.exec(e)||[])[0],!e)))return e.endsWith(".git")&&(e=e.substr(0,e.length-4)),e}var Xx="vsc.devcontainer.volume.name",SG="vsc.devcontainer.volume.folder";function $k(t){return t?`${t.volumeName}:${t.folder}`:void 0}function Ql(t){let e=(t.Config.Labels||{})[Xx],n=(t.Config.Labels||{})[SG];return e&&n?{volumeName:e,folder:n}:void 0}var ra=Y(require("url")),TG=Y(require("https"));var RG=Y(Mr());function oa(t){return t.toLowerCase().indexOf("github.com")>=0?kue(t):t.toLowerCase().indexOf("visualstudio.com")>=0?Tue(t):t.toLowerCase().indexOf("dev.azure.com")>=0?bue(t):t.toLowerCase().indexOf("gitlab.com")>=0?Rue(t):Pue(t)}function gc(t){let e="owner",n="repository";return{repository:"unknown",repositoryUrl:t,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:n,pullRequestId:void 0,fullRepositoryName:`${e}/${n}`}}function Pue(t){var s;let e="unknown-owner",n,r=t,o;o=(s=ra.parse(t))==null?void 0:s.path;let i=o==null?void 0:o.split("/");return!i||i.length<1?gc(t):(n=i[i.length-1],n.endsWith(".git")&&(n=n.substring(0,n.lastIndexOf("."))),{repository:"unknown",repositoryUrl:r,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:n,pullRequestId:void 0,fullRepositoryName:`${e}/${n}`})}function bue(t){var i,s;let e,n,r=t,o;if(t_(t)){let a=`http://${t}`;o=(i=ra.parse(a))==null?void 0:i.path;let c=o==null?void 0:o.split("/");if(!c||c.length<5)return gc(t);e=c[3],n=c[4]}else{o=(s=ra.parse(t))==null?void 0:s.path;let a=o==null?void 0:o.split("/");if(!a||a.length<5)return gc(t);e=a[2],n=a[4],n.endsWith(".git")&&(n=n.substring(0,n.lastIndexOf(".")))}return{repository:"ado",repositoryUrl:r,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:n,pullRequestId:void 0,fullRepositoryName:`${e}/${n}`}}function Tue(t){var i,s;let e,n,r=t,o;if(t_(t)){let a=`http://${t}`;o=(i=ra.parse(a))==null?void 0:i.path;let c=o==null?void 0:o.split("/");if(!c||c.length<5)return gc(t);e=c[3],n=c[4]}else{o=(s=ra.parse(t))==null?void 0:s.path;let a=o==null?void 0:o.split("/");if(!a||a.length<5)return gc(t);e=a[2],n=a[4],n.endsWith(".git")&&(n=n.substring(0,n.lastIndexOf(".")))}return{repository:"vso",repositoryUrl:r,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:n,pullRequestId:void 0,fullRepositoryName:`${e}/${n}`}}function Rue(t){var s,a;let e,n,r,o=t,i;if(t_(t)){let c=`http://${t}`;i=(s=ra.parse(c))==null?void 0:s.path,i&&(i=i.replace("/:","/"));let l=i==null?void 0:i.split("/");if(!l||l.length<3)return gc(t);e=l[1],n=l.slice(2,l.length-1).join("/")||void 0,r=l[l.length-1]}else{i=(a=ra.parse(t))==null?void 0:a.path;let c=i==null?void 0:i.split("/");if(!c||c.length<3)return gc(t);e=c[1],n=c.slice(2,c.length-1).join("/")||void 0,r=c[c.length-1]}return r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),{repository:"gitlab",repositoryUrl:o,ref:void 0,commit:!1,repositoryOwner:e,repositoryProject:n,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}${n?`/${n}`:""}/${r}`}}function kue(t){var c,l;let e,n,r=t,o,i,s;if(t_(t)){let u=`http://${t}`;s=(c=ra.parse(u))==null?void 0:c.path,s&&(s=s.replace("/:","/"))}else s=(l=ra.parse(t))==null?void 0:l.path;let a=s==null?void 0:s.split("/");if(!a||a.length<=2)return gc(t);if(e=a[1],n=a[2],n.endsWith(".git")&&(n=n.substring(0,n.lastIndexOf("."))),a.length>=3){if(a[3]==="commit"||a[3]==="tree"){let u=t.match(/\/tree\/|\/commit\//);u&&u.index&&(r=t.substring(0,u.index),o=t.substring(u.index+u[0].length))}if(a[3]==="pull"){i=a[4];let u=t.match(/\/pull\//);u&&u.index&&(r=t.substring(0,u.index))}}return{repository:"github",repositoryUrl:r,ref:o,commit:a[3]==="commit",repositoryOwner:e,repositoryName:n,pullRequestId:i,fullRepositoryName:`${e}/${n}`}}function t_(t){return t=t.toLowerCase(),t.indexOf("://")<0?t.indexOf("@")<t.indexOf(":"):!1}var mw=class extends Error{description;code;constructor(e,n){super(),this.code=e,this.description=n}},pw=class{inputUrl;gitUrlInfo;constructor(e){this.inputUrl=e,this.gitUrlInfo=oa(this.inputUrl)}repositoryName(){return this.gitUrlInfo.repositoryName}repositoryOwner(){return this.gitUrlInfo.repositoryOwner}async postClone(e,n,r,o){}installExtension(){return null}},Vk=class extends pw{constructor(e){super(e)}async parseUrl(e){var i,s,a;let n=(i=this.gitUrlInfo)==null?void 0:i.repositoryOwner,r=(s=this.gitUrlInfo)==null?void 0:s.repositoryName,o=(a=this.gitUrlInfo)==null?void 0:a.pullRequestId;return this.getPullRequestInfo(e,n,r,o)}async getPullRequestInfo(e,n,r,o){var u,f,m,d,p,g,h,v,C,w,y;let i=await this.fetchPullRequestInfo(e,n,r,o),s=(f=(u=i.head)==null?void 0:u.repo)==null?void 0:f.clone_url,a=(d=(m=i.base)==null?void 0:m.repo)==null?void 0:d.clone_url;if(!a)throw new mw(2,RG.t("Cannot access the head repository of the Pull Request."));let c=(p=i.head)==null?void 0:p.ref,l=((v=(h=(g=i.head)==null?void 0:g.repo)==null?void 0:h.owner)==null?void 0:v.login)===n?null:(y=(w=(C=i.head)==null?void 0:C.repo)==null?void 0:w.owner)==null?void 0:y.login;return{urlToClone:a,prRepositoryUrl:s,ref:c,sourceOwner:l}}async fetchPullRequestInfo(e,n,r,o){let i=`/repos/${n}/${r}/pulls/${o}`,s={"user-agent":"vscode-remote-containers"};e&&(s.authorization=`token ${e}`);let a={hostname:"api.github.com",port:443,path:i,method:"GET",headers:s};return new Promise((c,l)=>{let u="",f=TG.request(a,m=>{if(m.statusCode<200||m.statusCode>=300)return l(new Error(`Status Code: ${m.statusCode}`));m.on("data",d=>{u+=d}),m.on("end",()=>{let d=JSON.parse(u.toString());c(d)})});f.on("error",l),f.end()})}cloneOptions(e){return{url:e.urlToClone,fullClone:!0}}async postClone(e,n,r,o){if(e.sourceOwner){let l=e.prRepositoryUrl.replace(/\.[^/.]+$/,"");await X({exec:n.exec,cmd:"git",args:["remote","add",e.sourceOwner,l],cwd:r,output:o}),await X({exec:n.exec,cmd:"git",args:["fetch",e.sourceOwner,e.ref],cwd:r,output:o});try{await X({exec:n.exec,cmd:"git",args:["checkout","-t",`${e.sourceOwner}/${e.ref}`],cwd:r,output:o})}catch(u){if(!(u.stderr&&u.stderr.startsWith(`fatal: A branch named '${e.ref}' already exists`)))throw u}await X({exec:n.exec,cmd:"git",args:["config","--local",`remote.${e.sourceOwner}.github-pr-remote`,"true"],cwd:r,output:o})}else await X({exec:n.exec,cmd:"git",args:["checkout",e.ref],cwd:r,output:o});let i=this.gitUrlInfo.repositoryOwner,s=this.gitUrlInfo.repositoryName,a=this.gitUrlInfo.pullRequestId,c=`${i}#${s}#${a}`;await X({exec:n.exec,cmd:"git",args:["config","--local",`branch.${e.ref}.github-pr-owner-number`,c],cwd:r,output:o})}installExtension(){return"GitHub.vscode-pull-request-github"}},Yk=class extends pw{constructor(e){super(e)}async parseUrl(e){var n,r;return{urlToClone:(n=this.gitUrlInfo)==null?void 0:n.repositoryUrl,ref:(r=this.gitUrlInfo)==null?void 0:r.ref}}cloneOptions(e){let n=this.gitUrlInfo.commit;return{url:e.urlToClone,branch:!n&&e.ref||void 0,fullClone:n}}async postClone(e,n,r,o){this.gitUrlInfo.commit&&await X({exec:n.exec,cmd:"git",args:["checkout",e.ref],cwd:r,output:o})}},e_=class extends pw{constructor(n,r){super(n);this.branch=r}async parseUrl(n){return{urlToClone:this.inputUrl,ref:this.branch}}cloneOptions(n){return{url:n.urlToClone,branch:n.ref||void 0}}};function n_(t,e){if(e)return new e_(t,e);let n=oa(t);if(n.repository==="github"){if(n.pullRequestId)return new Vk(t);if(n.ref)return new Yk(t)}return new e_(t)}var zk="vsch.local.repository",r_="dev.container.volume";function ci(t){return{repositoryPath:t,fullRepositoryName:Kk(t),repositoryName:Jk(t),workspaceFolder:lw,volumeDestination:Qf(),oldVolumeName:Lue(t),alreadyCloned:!1,uniqueVolumeName:Aue(t),legacyUniqueVolumeName:Fue(t),getOldWorkspacePath:AG,cloneAndInitializeRepository:Oue,gitUrlHandler:n_(t),gitUrlInfo:oa(t)}}function Kk(t){let e=oa(t);return e==null?void 0:e.fullRepositoryName}function Jk(t){let e=oa(t);return e==null?void 0:e.repositoryName}function Qf(){return"/workspaces"}function Lue(t){let e=Kk(t);return`vsc-${Es.posix.basename(e)}-${NG(t)}`}function Aue(t){let e=kG(t),n=ia.createHash("sha256").update(t).digest("hex");return`${e}-${n}`}function Fue(t){let e=kG(t),n=NG(t);return`${e}-${n}`}function kG(t){let e=oa(t),n="";return e&&e.repositoryName&&(n=e.repositoryName,e.ref?n=`${n}-${e.ref.replace(/\//g,"-")}`:e.pullRequestId&&(n=`${n}-pull-${e.pullRequestId}`)),n}function NG(t){return ia.createHash("md5").update(t).digest("hex")}function lw(t){return Es.posix.join(`${Qf()}`,`${t}`)}async function Oue(t,{folder:e,cloneInfo:n},r,o,i){var f;await Wk(t);let{containerId:s,shellServer:a,remoteContainersEnv:c}=await Uue(t,r,o,e,i,t.configProvider,n),{config:l}=await Mue(t,r,e,i,a),u=(f=r.gitUrlHandler)==null?void 0:f.installExtension();return{repository:r,volumeName:o,containerId:s,shellServer:a,remoteContainersEnv:c,config:l,preInstalledExtensions:u?[u]:[]}}async function Uue(t,e,n,r,o,i,s){let{common:a}=t,{output:c,loadNativeModule:l}=a,u=e.fullRepositoryName,f,m,d,p;t.common.progress(1);let g=Hk(e,n,r,t.dockerSocketPath,t.buildContainerRunArgs);r?(c.write(`Cloning Github repository: ${u} into ${e.workspaceFolder(r)}
\r`),f=`fatal: destination path '${e.workspaceFolder(r)}' already exists`,p=e.workspaceFolder(r),d=`Repository '${u}' was already cloned into '${e.workspaceFolder(r)}'.
\r`):(c.write(`Cloning Github repository: ${u} into volume ${n}
\r`),f=`fatal: destination path '${u}' already exists`,p=`${u}`,d=`Repository '${u}' was already cloned into volume.`);let h=e.gitUrlHandler;if(!h)throw new pe({description:eu.t("Could not analyze the URL.")});s?m=h.cloneOptions(s):m={url:e.repositoryPath};let{stdout:v}=await et(t,...g),C=v.toString().trim(),w=ys(t,C,"root"),y=await jt(w,c),S=await JS(a,{remoteExec:w,user:"root",nodeExecutable:"node",shellServer:y,launchRootShellServer:async()=>y}),D=S.remoteContainersCLI,_=S.remoteEnv,A=S.ready,U=S.mrpcExec,k=await na(t,C,"root",l),E=so("container",p,{},await U||w,k,()=>{throw new Error("not implemented")},void 0,c);try{t.common.isCopyGitConfigEnabled&&await AS(t.common,{homeFolder:"/root",shellServer:y},{}),await xx({shellServer:y,nodeExecutable:"node"},D,c,"global"),await Rv(t.common,{homeFolder:"/root",shellServer:y},[".ssh","known_hosts"],"ssh"),await A;let b=sY(a),I=await yj(a,E,p,{...m,env:{..._,...m.env}},c,b.output,!!t.removeOnStartup);if(await I.gitClone,I.gitUnshallow&&(a.backgroundTasks.push(I.gitUnshallow.then(()=>{})),I.gitUnshallow.then(b.flush,b.flush)),I.gitClone&&s)try{await h.postClone(s,E,p,c)}catch{return qk(t,C,eu.t("Failed to checkout the repository {0}.",s.urlToClone))}}catch(b){let I=b&&(b.cmdOutput||b.stack||b.message)||String(b);if(I=I.replace(Vs,""),I.replace(/[\r\n]+/gm,"").includes(f))c.write(d),e.alreadyCloned=!0;else return qk(t,C,eu.t("Git clone failed. {0}",I))}let{configRaw:x}=await LG(t,e,r,o,y);if(!Ux(x)&&i){c.write(`Repository ${u} has no dev container files.
\r`);let b=!0;for(;b;){let I=await i.createConfiguration(p,E);if(I)b=!1;else{let T=eu.t("Select Configuration");if(I=await i.showError(eu.t("You must select a container configuration since the repository does not contain a dev container configuration. Without a dev container configuration the container cannot be started."),T),I!==T)return qk(t,C,eu.t("Cancelled container configuration selection."),{closeRemote:!0})}}}return{containerId:C,shellServer:y,remoteContainersEnv:_}}function Hk(t,e,n,r,o=[]){let i=n?t.volumeDestination:t.fullRepositoryName;return Bk(e,i,r,o)}function Bk(t,e,n,r=[]){return["run","-d","--mount",`type=volume,src=${t},dst=${e}`,"-v",`${n}:/var/run/docker.sock`,"--security-opt","label=disable",...r,`${FG}`,"sleep","infinity"]}function qk(t,e,n,r){throw e&&Hi(t,e),new pe({description:n,data:r})}async function LG(t,e,n,r,o){let i,s;if(n?s=e.workspaceFolder(n):s=`${AG(e.repositoryPath)}`,r)return i=(await o.exec(`cat ${r.path} 2>/dev/null`,{logOutput:!1})).stdout,{configRaw:i&&Me(i),configFile:r,workspaceFolder:s};if(r=await Mk([e.repositoryPath],t.userRepositoryConfigurationPaths),r&&(i=(await at(r.fsPath)).toString()),!r)for(let a of Gl(Es.posix,s))try{i=(await o.exec(`cat ${a} 2>/dev/null`,{logOutput:!1})).stdout,r=Ce.from({scheme:"vscode-remote",path:a});break}catch{}return{configRaw:i&&Me(i),configFile:r,workspaceFolder:s}}async function Mue(t,e,n,r,o){let{configRaw:i,configFile:s,workspaceFolder:a}=await LG(t,e,n,r,o);if(!s||!i)throw new pe({description:eu.t("The repository does not have a 'devcontainer.json' configuration file.")});let{common:c,configUpdater:l}=t,{cliHost:u,output:f}=c,m=nw({...i}),d=m;l&&(m.configFilePath=s,d=l(m),delete d.configFilePath);let p=wx({platform:u.platform,configFile:s,env:u.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:a},d);return p.configFilePath=s,("workspaceMount"in p||"workspaceFolder"in p)&&f.write("The options 'workspaceMount' or 'workspaceFolder' are ignored when cloning a repository into a volume."),{workspaceFolder:a,config:p}}function AG(t){return`/workspaces/${Es.posix.basename(Kk(t))}`}var FG="vsc-volume-bootstrap",Gk="bootstrap.Dockerfile",$ue="volume.Dockerfile";async function Wk(t,e,n,r){let{cliHost:o,output:i}="cliHost"in t?t:t.common;"cliHost"in t||(e=t.common.extensionPath,n=t.common.package.version,r=t.development);let s=o.path.join(await Wv(o),"bootstrap-image",r?`${n}-dev-${Date.now()}`:n),a=o.path.join(s,Gk),c=o.path.join(s,".vscode-remote-containers","dist",`dev-containers-cli-${n}`),l=o.path.join(c,"dist","spec-node","devContainersSpecCLI.js"),u=!await o.isFolder(s);if(!u&&!(await o.isFile(a)&&await o.isFile(l))){let g="Removing incomplete bootstrap-image folder.",h=i.start(g),v=`${s}-${ia.randomUUID()}`;await o.rename(s,v),await o.rm(v,{recursive:!0,force:!0}),u=!await o.isFolder(s),i.stop(g,h)}if(u){let g=`${s}-${ia.randomUUID()}`,h=o.path.join(g,".vscode-remote-containers","dist",`dev-containers-cli-${n}`);await o.mkdirp(o.path.join(h,"dist","spec-node")),await o.writeFile(o.path.join(g,Gk),await at(Es.join(e,"scripts",Gk))),await o.writeFile(o.path.join(h,"package.json"),await at(Es.join(e,"package.json"))),await o.writeFile(o.path.join(h,"dist","spec-node","devContainersSpecCLI.js"),await at(Es.join(e,"dist","spec-node","devContainersSpecCLI.js"))),await o.mkdirp(o.path.join(h,"scripts")),await o.writeFile(o.path.join(h,"scripts","updateUID.Dockerfile"),await at(Es.join(e,"scripts","updateUID.Dockerfile"))),await o.rename(g,s)}let f=["build","-f",a,"-t",FG,s],m=await o.locateCertificatesFile(),d=o.path.join(s,"host-ca-certificates.crt"),p=`${d}-${ia.randomUUID()}`;await o.writeFile(p,m?await o.readFile(m):Buffer.from("")),await o.rename(p,d),await uG(t,...f)}async function xG(t){let{common:e}=t,{cliHost:n,output:r}=e,o=await Hue(t),i=n.path.join(o,$ue),s=!await n.isFolder(o);if(!s&&!await n.isFile(i)){let u="Removing incomplete inspect-volume folder.",f=r.start(u),m=`${o}-${ia.randomUUID()}`;await n.rename(o,m),await n.rm(m,{recursive:!0,force:!0}),s=!await n.isFolder(o),r.stop(u,f)}if(s){let u=`${o}-${ia.randomUUID()}`;await ow(Es.join(e.extensionPath,"scripts","inspect-volume"),n,u,r),await n.rename(u,o)}let a=await n.locateCertificatesFile(),c=n.path.join(o,"host-ca-certificates.crt"),l=`${c}-${ia.randomUUID()}`;return await n.writeFile(l,a?await n.readFile(a):Buffer.from("")),await n.rename(l,c),o}async function Hue(t){let{common:e,development:n}=t,{cliHost:r}=e,o=e.package.version;return r.path.join(await Wv(r),"inspect-volume",n?`${o}-dev-${Date.now()}`:o)}async function _G(t,e,n){let r=[`${zk}=${e.repositoryPath}`];!n||n===li?r.push("vsch.local.repository.unique=true"):r.push("vsch.local.repository.unique=false"),e.gitUrlInfo.ref&&r.push(`vsch.local.repository.branch=${e.gitUrlInfo.ref}`),e.gitUrlInfo.pullRequestId&&r.push(`vsch.local.repository.pullRequestId=${e.gitUrlInfo.pullRequestId}`);let o=await Uo(t),i=Xk(e,n,o);return o.indexOf(i)===-1&&await Fp(t,i,r),i}function Xk(t,e,n){return e?e===li&&(n.indexOf(t.uniqueVolumeName)!==-1||n.indexOf(t.legacyUniqueVolumeName)===-1?e=t.uniqueVolumeName:e=t.legacyUniqueVolumeName):n.indexOf(t.uniqueVolumeName)!==-1||n.indexOf(t.oldVolumeName)===-1?e=t.uniqueVolumeName:e=t.oldVolumeName,e}var Wp="vsch.local.repository",Zk="vsch.local.repository.volume",Qk="vsch.local.repository.folder";function DG(t,e,n,r){return n?{labels:[`${Wp}=${e}`,`${Zk}=${r}`,`${Qk}=${n}`],remoteWorkspaceFolder:t.workspaceFolder(n)}:{labels:[`${Wp}=${e}`],remoteWorkspaceFolder:t.getOldWorkspacePath(e)}}async function IG(t,e,n,r){let{loadNativeModule:o,output:i}=t.common,s=ys(t,e,"root"),a=await na(t,e,"root",o),c=so("container",r,n,s,a,()=>{throw new Error("not implemented")},"node",i);return{cliHost:c,dockerCLI:"docker",dockerComposeCLI:Cs({exec:c.exec,env:n,output:i},"docker","docker-compose"),dockerComposePath:"docker-compose",env:n,output:i}}var OG=Y(Mr()),uw="devcontainer.local_folder",Zf="devcontainer.config_file",Hp="vsch.local.volume",Zx="/volume",Qx="vsch.quality",fw="vsch.local.folder";async function PG(t,e,n,r,o,i,s,a,c,l,u,f,m,d){let{common:p}=t,g;try{let h=!l,v=r.remoteUser;g=await Up(t,a.Id,o,v),u&&l&&o&&g.user!=="root"&&(g.launchRootShellServer?await Tx(g,g.launchRootShellServer,o,n.configFilePath.path):p.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files."));let C=await qx(p,l,a,o,g);return await Wue(a,c,t,e,g,n,r,h,i,s,f,m,d,C)}catch(h){throw Bue(h,a,t,g,n)}}function Bue(t,e,n,r,o){let i=t instanceof pe?t:new pe({description:OG.t("An error occurred setting up the container."),originalError:t});return e&&(i.manageContainer=!0,i.params=n.common,i.containerId=e.Id,i.dockerParams=n),r&&(i.containerProperties=r),o&&(i.config=o),i}async function Wue(t,e,n,r,o,i,s,a,c,l,u,f,m,d){var k,E;let{common:p}=n,g=ur(r.cliHost,o.shellServer);a||await Hx(n.configurationTracking,r.cliHost,g,i,p.output);let h=s.shutdownAction;h==="stopCompose"&&(h="stopContainer");let v={cwd:c,dockerCLI:n.dockerCLI,env:p.env,containerId:t.Id,user:o.user,sessionId:p.sessionId,shutdownAction:h,logLevel:p.getLogLevel(),delay:1e4},{shutdownArgs:C,doneWithDocuments:w}=await Yx(n,r.cliHost,g,"singleContainer",v,a?i:void 0);p.backgroundTasks.push(w);let y=((E=(((k=s.customizations)==null?void 0:k.vscode)||[]).slice().reverse().find(x=>typeof x.devPort=="number"))==null?void 0:E.devPort)||jl,{hostOrContainerPort:S,hostPortServer:D,connectionToken:_,remoteEnv:A,serverDownloaded:U}=await Vl(p,o,i,s,y,Mp(n,r,o,l,u,t.Id,e,f,m),d);return C.hostPortServer=D,{params:p,properties:o,config:i,resolvedAuthority:{host:hc,port:S,connectionToken:_,extensionHostEnv:A},tunnelInformation:p.isLocalContainer?Op(t):{},dockerParams:n,dockerContainerId:t.Id,serverDownloaded:U}}function tu(t){let e=t.Config.Labels||{},n=e[uw]||e[fw];return n||void 0}function UG(t){return(t.Config.Labels||{})[Zf]||void 0}function vc(t){let e=(t.Config.Labels||{})[Wp];return e||void 0}function o_(t){let e=(t.Config.Labels||{})[Zk];return e||void 0}function MG(t){let e=(t.Config.Labels||{})[Hp];return e||void 0}function $G(t){let e=(t.Config.Labels||{})[Qk];return e||void 0}function jk(t,e){throw t.write(ot(e)),new Error(e)}function wc(t){return!!(t!=null&&t.startsWith("tunnel+"))}function HG(t){let e=/^tunnel\+(.*)$/.exec(t);return e?{tunnelName:e[1]}:void 0}var BG=Y(require("path"));async function WG(t,e,n,r,o,i){let s,a=new Promise(p=>s=p),c=new Bx,l=[],u=await iG("vscode-remote-containers",async(p,g)=>{let h=await sG(p),v=[];if(h.type==="poll")try{v=await c.dequeue(6e4)}catch{}else if(h.type==="reply"){let C=l[h.sequence];C&&(C(h.reply),delete l[h.sequence])}else h.type==="done"&&s?s():h.type==="log"&&r.event(h.event);g.write(JSON.stringify(v)),g.end()});u.server.unref();let f=BG.join(n,"dist","shutdown","shutdownMonitorProcess"),m=[u.ipcHandlePath,t,nr[e],o||"",i.getTime().toString()];r.write(`Forking shutdown monitor: ${f} ${m.join(" ")}\r
`);let d=iY(f,m,{stdio:["ignore","ignore","ignore","ipc"],detached:!0,execArgv:[]});return d.on("error",p=>{console.error(p)}),d.unref(),{queue:c,sequence:0,replies:l,done:a}}async function i_(t,e,n){let r=t.sequence++,o=new Promise(s=>t.replies[r]=s);return t.queue.push({type:"configure",sequence:r,options:e}),await o}async function jG({queue:t,done:e}){t.push({type:"cleanup"}),await e}var YG=require("net"),qG=require("util");var li="__UNIQUE__",hc="127.0.0.1";async function bG(t,e){if(t.scheme==="file"&&e.type==="wsl"){let{stdout:n}=await X({exec:e.exec,cmd:"wslpath",args:["-u",t.fsPath],output:Fe});return n.toString().trim()}return _e(t,e.platform)}async function td(t,e){let n=!t.env.SSH_AUTH_SOCK&&await UR(t)?Av:t.type==="wsl"?t.env.SSH_AUTH_SOCK:void 0,r={DOCKER_CONTEXT:"default"};return e&&("context"in e?r.DOCKER_CONTEXT=e.context:(e.host&&(e.host.startsWith("ssh://")&&t.type==="remote"?r.VSCODE_DOCKER_HOST=e.host:r.DOCKER_HOST=e.host),e.certPath&&(r.DOCKER_CERT_PATH=e.certPath),e.tlsVerify&&(r.DOCKER_TLS_VERIFY=e.tlsVerify))),n&&(r.SSH_AUTH_SOCK=n),r}function dr(t){let e;if(t.DOCKER_CONTEXT&&t.DOCKER_CONTEXT!=="default")e={context:t.DOCKER_CONTEXT};else{e={};let n=t.VSCODE_DOCKER_HOST||t.DOCKER_HOST;n&&(e.host=n),t.DOCKER_CERT_PATH&&(e.certPath=t.DOCKER_CERT_PATH),t.DOCKER_TLS_VERIFY&&(e.tlsVerify=t.DOCKER_TLS_VERIFY),Object.keys(e).length||(e=void 0)}return e}function s_(t,{parentAuthority:e,settings:n}){e&&t.write(`Host authority: ${e}\r
`),n&&("context"in n&&n.context&&t.write(`Context: ${n.context}\r
`),"host"in n&&n.host&&t.write(`Host: ${n.host}\r
`),"certPath"in n&&n.certPath&&t.write(`CertPath: ${n.certPath}\r
`),"tlsVerify"in n&&n.tlsVerify&&t.write(`TLSVerify: ${n.tlsVerify}\r
`))}function ru(t,e){return(!t||t.startsWith("wsl+"))&&!e.VSCODE_DOCKER_HOST&&!e.DOCKER_HOST&&(!e.DOCKER_CONTEXT||e.DOCKER_CONTEXT==="default"||e.DOCKER_CONTEXT==="desktop-linux")}function Bp(t,e){var r,o;let n;return wc(t)?n=(r=HG(t))==null?void 0:r.tunnelName:Ml(t)?n=(o=Bv(t))==null?void 0:o.hostName:e&&("context"in e||e.host)&&(n="context"in e?e.context:e.host),n?` @ ${n}`:""}function yc(t){let{Name:e}=t;return e[0]==="/"?e.substring(1):e}async function ai(t,e){try{return await si(t,e)}catch{return}}async function a_(t,e=!0){let{common:n}=t,{output:r}=n,o="Check Docker is running",i=r.start(o);try{let{stdout:s}=await eN(t,t.common.loadNativeModule,e,"version"),a=s.toString();if(a.toLowerCase().indexOf("cannot connect")!==-1)throw new Error(a)}catch(s){console.error(s);let a=jp.t("Docker returned an error. Make sure the Docker daemon is running and select an option how to proceed."),c=s&&(s.stderr?s.stderr.toString().toLowerCase():s.message)||"";throw c.indexOf("permission denied")!==-1?c.indexOf("ssh")!==-1?a=jp.t("Cannot connect to Docker daemon using 'ssh'. Make sure public/private keys are set up for connecting without keyboard interaction."):a=jp.t("Current user does not have permission to run 'docker'. Try adding the user to the 'docker' group."):c.indexOf("ENOENT")!==-1&&(a=jp.t("The 'docker' command was not found. Make sure Docker is installed.")),new pe({description:a,originalError:`Docker returned an error code ${s.code}, message: ${s.message}`})}finally{r.stop(o,i)}}async function eN(t,e,n,...r){let o={...Bi(t),print:"continuous"};try{return await et(o,...r)}catch(i){if(!VG(i)||!n)throw i;let s="cliHost"in t?t.cliHost:t.common.cliHost,a="output"in t?t.output:t.common.output;if(s.type==="wsl"&&(s=await Gr(process.cwd(),e,a)),s.platform==="linux")throw i;if(s.platform==="darwin"&&await s.isFolder("/Applications/Docker.app"))await X({exec:s.exec,cmd:"open",args:["-g","-a","Docker"],env:{ELECTRON_RUN_AS_NODE:""},output:a,print:"continuous"});else{let c=jue(s);if(s.platform==="win32"&&await s.isFile(c))await X({exec:s.exec,cmd:c,env:{ELECTRON_RUN_AS_NODE:""},output:"output"in t?t.output:t.common.output,print:"continuous"});else throw i}for(let c=6;c>0;c--){await Wt(5e3);try{return await et(o,...r)}catch(l){if(c===1||!VG(l))throw l}}throw i}}function jue(t){return t.path.join(t.env.ProgramW6432||"C:\\Program Files","Docker\\Docker\\Docker Desktop.exe")}function VG(t){let e=Buffer.concat([t==null?void 0:t.stdout,t==null?void 0:t.stderr].filter(Boolean)).toString().toLowerCase();return e.includes("cannot connect to the docker daemon")||e.includes("docker daemon is not running")||e.includes("internal server error for api route and version")||e.includes("activate the wsl integration")}function un(t){return t.hostPath!==void 0}function lo(t){return t.repositoryPath!==void 0}function ed(t){return!lo(t)&&!!t.folder}function dw(t){return!lo(t)&&!ed(t)&&t.volumeName!==void 0}function uo(t){let e=zG("dev-container",t);if(e)return"unparsedConfig"in e?{parentAuthority:e.parentAuthority,hostPath:e.unparsedConfig}:("repositoryPath"in e&&e.configFile&&(e.configFile=Ce.revive(e.configFile)),"repositoryPath"in e?e.dockerHost?{parentAuthority:e.parentAuthority,repositoryPath:e.repositoryPath,settings:{host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`},cloneInfo:e.cloneInfo}:e:("hostPath"in e&&e.configFile&&(e.configFile=Ce.revive(e.configFile)),"hostPath"in e&&e.dockerHost?{parentAuthority:e.parentAuthority,hostPath:e.hostPath,settings:{host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`}}:e))}function hw(t,e,n,r,o,i){t=rd(t);let s=r||i?JSON.stringify({hostPath:e,localDocker:o,settings:r,configFile:i}):e;return`vscode-remote://dev-container+${Buffer.from(s,"utf8").toString("hex")}${t?`@${t}`:""}${n}`}function Wi(t,e,n,r,o,i,s,a){if(t=rd(t),e){let l=ci(e);if(!n){let f=JSON.stringify({repositoryPath:e,settings:i,cloneInfo:s,inspectVolume:o,configFile:a});return`vscode-remote://dev-container+${Buffer.from(f,"utf8").toString("hex")}${t?`@${t}`:""}${l.getOldWorkspacePath(e)}`}let u=JSON.stringify({repositoryPath:e,volumeName:n,folder:r,settings:i,cloneInfo:s,inspectVolume:o,configFile:a});return`vscode-remote://dev-container+${Buffer.from(u,"utf8").toString("hex")}${t?`@${t}`:""}${l.workspaceFolder(r)}`}if(r){let l={volumeName:n,folder:r,settings:i};return`vscode-remote://dev-container+${Buffer.from(JSON.stringify(l),"utf8").toString("hex")}${t?`@${t}`:""}${lw(r)}`}let c=JSON.stringify({volumeName:n,settings:i});return`vscode-remote://dev-container+${Buffer.from(c,"utf8").toString("hex")}${t?`@${t}`:""}${Zx}`}function nd(t){let e=zG("attached-container",t);if(e)return"unparsedConfig"in e?{parentAuthority:e.parentAuthority,containerId:e.unparsedConfig}:(e.dockerHost&&(e.settings={host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`},delete e.dockerHost),e)}function GG(t,e,n,r){t=rd(t);let o=JSON.stringify({containerName:e,settings:n,cwd:r});return`attached-container+${Buffer.from(o,"utf8").toString("hex")}${t?`@${t}`:""}`}function zG(t,e){try{let n=ou(e);if(!n)return;let{name:r,config:o,parentAuthority:i}=n,s=r===t&&o?Buffer.from(o,"hex").toString("utf8"):void 0;if(!s)return;if(!s.startsWith("{"))return{parentAuthority:i,unparsedConfig:s};let a=JSON.parse(s);return a.parentAuthority=i,a}catch(n){console.warn(n);return}}function ou(t){let e=t==null?void 0:t.match(/^(?<name>[^@+]+)\+(?<config>[^@]+)(?:@(?<parentAuthority>.*))?$/);if(!e)return;let{name:n,config:r,parentAuthority:o}=e.groups;return{name:n,config:r,parentAuthority:o}}function iu(t,e){return Rn(e.startsWith("/")?"linux":"win32",Ce.parse(`vscode-remote://${t}`),e)}function rd(t){if(t){if(Ml(t)){let e=t.indexOf("@");if(e!==-1&&t.indexOf("+",e)===-1){let r=Bv(t);return VR(r)}return t}if(wc(t))return t}}async function KG(t,e,n){return await Tv(t,e,n)||e}function JG(t,e,n){let r=t.path.relative(t.path.dirname(e),n);return`/workspaces/${t.platform==="win32"?r.replace(/\\/g,"/"):r}`}function nG(t,e){return t.with({path:nu.posix.resolve(t.path,e)})}async function Yx(t,e,n,r,o,i){let{common:s,onRemoveOnShutdownChanged:a}=t,c=s.output.start("Setup shutdown monitor"),l=await WG(r,s.getLogLevel(),s.extensionPath,s.output,s.logFilePath?nu.dirname(s.logFilePath):void 0,s.sessionStart);i_(l,o,s.output).catch(d=>console.error(d)),a&&a(async d=>{o.rebuild=!!d,o.delay=0,await i_(l,o,s.output)}),s.onDidChangeLogLevel(async d=>{o.logLevel=d,await i_(l,o,s.output)});let u={},f=async()=>{let d=jG(l);u.hostPortServer&&await(0,qG.promisify)(u.hostPortServer.close.bind(u.hostPortServer))(),await d};s.shutdowns.push(f);let m=t.common.hostConfig.canRebuildContainer&&i?$x(t.configurationTracking,e,n,i).catch(console.error):Promise.resolve();return s.output.stop("Setup shutdown monitor",c),{monitor:l,shutdownArgs:u,doneWithDocuments:m}}function Op(t){return{environmentTunnels:t.Ports.filter(e=>!!e.PublicPort).map(e=>{let n=e.IP,r=(0,YG.isIPv4)(n)?n==="0.0.0.0"?"127.0.0.1":n:n==="::"?"[::1]":"["+n+"]";return{remoteAddress:{port:e.PrivatePort,host:"0.0.0.0"},localAddress:r+":"+e.PublicPort}})}}async function Up(t,e,n,r,o){var y;let{common:i}=t,s="Inspecting container",a=i.output.start(s),c=await si(t,e);i.output.stop(s,a);let l=r||c.Config.User||"root",[,u,,f]=/([^:]*)(:(.*))?/.exec(l),m=Vue(c.Config.Env),d=ys(t,e,l),p=await na(t,e,l,i.loadNativeModule),g=ys(t,e,"root"),h=c.Mounts.find(S=>S.Type==="volume"&&S.Name==="vscode"),v=c.Mounts.find(S=>S.Type==="bind"&&S.Source===i.localCacheFolder),C=h&&nu.posix.join(h.Destination,/^\.*(.*)$/.exec(i.product.serverDataFolderName)[1])||(v==null?void 0:v.Destination),w=(y=c.Mounts.find(S=>S.Type==="bind"&&S.Destination.startsWith("/tmp/vscode-wayland-")))==null?void 0:y.Destination;return Ix({params:i,createdAt:c.Created,startedAt:c.State.StartedAt,sharedDataFolder:C,sharedDataFolderIsLocalCacheFolder:!h&&!!v,remoteWorkspaceFolder:n,containerUser:u==="0"?"root":u,containerGroup:f,containerEnv:m,remoteExec:d,remotePtyExec:p,remoteExecAsRoot:g,rootShellServer:o,remoteWaylandSocket:w})}function Vue(t){return(t||[]).reduce((e,n)=>{let r=n.indexOf("=");return r!==-1&&(e[n.substr(0,r)]=n.substr(r+1)),e},{})}async function XG(t){let{common:e,dockerCLI:n,dockerComposeCLI:r,dockerComposePath:o,dockerEnv:i}=t,{cliHost:s,output:a}=e;return{cliHost:s,dockerCLI:n,dockerComposeCLI:r,dockerComposePath:o,env:i,output:a}}async function ZG(t,e){return t.type==="local"&&e?t.path.join(e,"data"):t.path.join(await t.homedir(),".vscode-remote-containers","data")}function Mp(t,e,n,r,o,i,s,a,c){let l=!s;return async(u,f,m,d,p)=>{let{common:g}=t,{cliHost:h}=e,{dotfilesConfiguration:v}=g,C=d.getDotfileConfiguration("dotfiles.repository")||v.repository,w=d.getDotfileConfiguration("dotfiles.installCommand")||v.installCommand,y=d.getDotfileConfiguration("dotfiles.targetPath")||v.targetPath;l&&C&&(l=!1,await OY(n));let S={...e.env,...fr(e.env)},D={cliHost:e.cliHost,dockerPath:e.dockerCLI,dockerComposePath:e.dockerComposePath,env:S,extensionPath:g.extensionPath,appRoot:g.appRoot,package:g.package,postCreate:g.postCreate,output:g.postCreate.output},_=g.postCreate.output.dimensions||g.output.dimensions,A=await ii(D,["run-user-commands",...e.cliHost.type==="local"&&g.persistedFolder?["--user-data-folder",g.persistedFolder]:[],...e.dockerCLI!=="docker"?["--docker-path",e.dockerCLI]:[],...e.dockerComposePath!=="docker-compose"?["--docker-compose-path",e.dockerComposePath]:[],...g.containerSessionDataFolder?["--container-session-data-folder",g.containerSessionDataFolder]:[],...s?["--container-data-folder",Mi(t.common.product.serverDataFolderName)]:[],...s?["--container-system-data-folder",bx(t.common.product.serverDataFolderName)]:[],...r?["--workspace-folder",r]:[],...(o||[]).map(U=>["--id-label",U]).flat(),"--container-id",i,"--log-level",ro(g.getLogLevel()),"--log-format","json",...a?["--config",_e(a,h.platform)]:[],...c?["--override-config",_e(c,h.platform)]:[],"--default-user-env-probe",g.defaultUserEnvProbe,"--skip-non-blocking-commands",String(u),...g.skipPostAttach?["--skip-post-attach"]:[],"--prebuild",String(m),"--stop-for-personalization",String(f),...[].concat(...Object.keys(p).map(U=>["--remote-env",`${U}=${p[U]}`])),"--mount-workspace-git-root",...t.useExperimentalMountGitWorktreeCommonDir?["--mount-git-worktree-common-dir"]:[],..._?["--terminal-columns",String(_.columns),"--terminal-rows",String(_.rows)]:[],...C?["--dotfiles-repository",C]:[],...w?["--dotfiles-install-command",w]:[],...y?["--dotfiles-target-path",y]:[]]);if((A==null?void 0:A.outcome)!=="success")throw new pe({description:jp.t("devcontainer command failed: {0}",JSON.stringify(A))});return A.result}}async function QG(t,e,n,r,o,i,s,a,c){let{cliHost:l,output:u}=t,f=await ii(t,["read-configuration",...t.dockerPath!=="docker"?["--docker-path",t.dockerPath]:[],...t.dockerComposePath!=="docker-compose"?["--docker-compose-path",t.dockerComposePath]:[],...e?["--workspace-folder",e]:[],...(i||[]).map(m=>["--id-label",m]).flat(),...s?["--container-id",s]:[],"--log-level",ro(r),"--log-format","json",...n?["--config",_e(n,l.platform)]:[],...a?["--override-config",_e(a,l.platform)]:[],"--include-merged-configuration","--mount-workspace-git-root",...c?["--mount-git-worktree-common-dir"]:[],...u.dimensions?["--terminal-columns",String(u.dimensions.columns),"--terminal-rows",String(u.dimensions.rows)]:[],...Object.keys(o).length>0?["--additional-features",JSON.stringify(o)]:[]]);return f.configuration.configFilePath=f.configuration.configFilePath&&Ce.revive(f.configuration.configFilePath).with({scheme:l.type==="local"?"file":Ke.scheme}),f}async function qx(t,e,n,r,o){let{output:i}=t;if(e&&r)try{i.write(`safe.directory: Looking up root folder for workspace folder '${r}'.`);let s=n.Mounts.find(a=>lf(nu.posix,a.Destination,r,!0));if((s==null?void 0:s.Type)==="bind"){let a;try{let{stdout:u}=await o.shellServer.exec(`command -v git >/dev/null 2>&1 && ROOT_FOLDER="$(git -C '${r}' rev-parse --show-toplevel)" && test "$(stat -c %u "$ROOT_FOLDER")" != "$(id -u)" && echo -n "$ROOT_FOLDER"`);a=u.trim()}catch(u){a=u!=null&&u.stderr?(/dubious ownership in repository at '([^']+)'/.exec(u.stderr)||[])[1]:void 0}if(!a||!lf(nu.posix,s.Destination,a,!0)){i.write(`safe.directory: Checking host ownership of root folder${a?` '${a}'`:""} at mount point '${s.Destination}' skipped.`);return}i.write(`safe.directory: Checking host ownership of root folder '${a}' at mount point '${s.Destination}'.`);let c=nu.posix.relative(s.Destination,a),l=t.cliHost.path.join(s.Source,t.cliHost.platform==="win32"?c.replace(/\//g,"\\"):c);if(t.cliHost.platform==="win32"){let u;try{u=(await X({exec:t.cliHost.exec,cmd:"powershell",args:["-NoProfile","-NonInteractive","-Command","(Get-Acl .).Owner"],cwd:l,env:ao(),output:i,print:!0})).stdout.toString().trim()}catch(m){i.write(`safe.directory: Failed to get host owner for '${l}': ${m==null?void 0:m.message}`);return}let f;try{f=(await X({exec:t.cliHost.exec,cmd:"powershell",args:["-NoProfile","-NonInteractive","-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],cwd:l,env:ao(),output:i,print:!0})).stdout.toString().trim()}catch(m){i.write(`safe.directory: Failed to get current user ('${l}' owned by '${u}'): ${m==null?void 0:m.message}`);return}if(i.write(`safe.directory: '${l}' owned by '${u}', current user is '${f}'.`),u!==f)return}else await X({exec:t.cliHost.exec,cmd:"/bin/sh",args:["-c",`cd '${l}' && test "$(stat -${t.cliHost.platform==="darwin"?"f":"c"} %u .)" = "$(id -u)"`],output:i});if(o.launchRootShellServer){i.write(`safe.directory: Root folder '${a}' owned by current user on host but not owned by remote user in container. Adding to safe directory list in Git system config.`),await(await o.launchRootShellServer()).exec(`git config --system --get-all safe.directory | grep -x '${a}' || git config --system --add safe.directory '${a}'`);return}else return i.write(`safe.directory: Root folder '${a}' owned by current user on host but not owned by remote user in container. Later adding to safe directory list in Git global config.`),async()=>{await o.shellServer.exec(`git config --global --get-all safe.directory | grep -x '${a}' || git config --global --add safe.directory '${a}'`)}}}catch{}}var $t=Y(require("vscode")),xi=require("vscode");var K=Y(require("vscode")),hm=Y(require("path"));var Vp=Y(require("vscode")),c_=Y(require("path")),n3=require("stream");var Yue=VS();async function Xr(t,e,n,r,o,i,s,a,c,l,u){return t?que(t,n,s,a,c,l):qR(e,n,r,o,i,s,a,c,l,u)}async function que({server:t,authority:e},n,r,o,i,s){var A,U,k,E,x,b,I,T;let a="Loading environment from ExecServer",c=i.start(a),l=await t.env();i.stop(a,c),i.write(`Host OS: ${l.osPlatform}${l.osRelease?` ${l.osRelease}`:""}`),i.write(`Host CWD: ${n}`);let u=Gue(()=>t,void 0),f=l.osPlatform,{homeFolder:m,localEnv:d}=await Yn(f,{posix:async()=>{let R=await jt(u,i,void 0,f,"Host"),L=f==="darwin"?(await X({exec:u,cmd:"/bin/sh",args:["-c","echo ~"],output:i})).stdout.toString().trim():(await R.exec("echo ~")).stdout.trim(),N=f==="darwin"?(await X({exec:u,cmd:"/bin/sh",args:["-c","id -un"],output:i})).stdout.toString().trim():await Fl(R),B=await Uf(R,N),W=(B==null?void 0:B.shell)||"/bin/sh",z=await Bf({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:i},{shell:W,remoteExec:u});return R.process.terminate(),{homeFolder:L,localEnv:z}},win32:async()=>(i.write(`USERPROFILE: ${l.env.USERPROFILE}`),i.write(`PATH: ${l.env.PATH}`),{homeFolder:l.env.USERPROFILE,localEnv:l.env})})(),p=async R=>u({...R,env:{...d,...R.env}}),g=async R=>{if(!t.fs){let L=await t.fsStat(R);return L.exists&&L.type==="file"}try{return(await t.fs.stat(R)).type===Vp.FileType.File}catch(L){if((L==null?void 0:L.code)==="FileNotFound"||(L==null?void 0:L.code)==="FileNotADirectory"||L!=null&&L.message.toLowerCase().includes("file not found"))return!1;throw L}},h=l.osPlatform==="win32",v=h?c_.win32:c_.posix,C=v.join(m,".vscode-remote-containers"),w=await oq({localCacheFolder:r,output:i,alternateDownload:s,exec:p,env:d,isFile:g,userDataFolder:C,homeFolder:m,product:o,platform:f}),y=WV(w,p,i),S=n||m,D,_;return{type:"remote",authority:e,platform:f,exec:p,ptyExec:oY(p),cwd:S,env:d,path:v,async homedir(){return m},tmpdir:Yn(f,{posix:async()=>d.TMPDIR||"/tmp",win32:async()=>d.TEMP}),isFile:g,isFolder:async R=>{if(!t.fs){let L=await t.fsStat(R);return L.exists&&L.type==="dir"}try{return(await t.fs.stat(R)).type===Vp.FileType.Directory}catch(L){if((L==null?void 0:L.code)==="FileNotFound"||(L==null?void 0:L.code)==="FileNotADirectory"||L!=null&&L.message.toLowerCase().includes("file not found"))return!1;throw L}},isSocket:async R=>{if(h)return!1;try{return await X({exec:p,cmd:"test",args:["-S",R],output:Fe}),!0}catch(L){if((L==null?void 0:L.code)!==1)throw L;return!1}},readFile:(A=t.fs)!=null&&A.read?async R=>{let L=await t.fs.read(R),N=[];return L.onDidReceiveMessage(B=>N.push(B)),await L.onEnd,Buffer.concat(N)}:R=>zV(p,f,w,R,Fe),writeFile:(U=t.fs)!=null&&U.write?async(R,L)=>{let{stream:N,done:B}=await t.fs.write(R);N.write(L),N.end(),await B}:(R,L)=>KV(p,f,w,R,L,Fe),rename:(k=t.fs)!=null&&k.rename?async(R,L)=>t.fs.rename(R,L):(R,L)=>tx(p,f,R,L,Fe),rm:(E=t.fs)!=null&&E.rm?async R=>t.fs.rm(R):(R,L)=>nx(p,f,R,L||{},Fe),mkdirp:(x=t.fs)!=null&&x.mkdirp?async R=>t.fs.mkdirp(R):R=>rx(p,f,R,Fe),readDir:(b=t.fs)!=null&&b.readdir?async R=>(await t.fs.readdir(R)).map(N=>N.name):R=>JV(p,f,R,Fe),readDirWithTypes:(I=t.fs)!=null&&I.readdir?async R=>(await t.fs.readdir(R)).map(N=>{let B=0;return N.type&Vp.FileType.File&&(B|=1),N.type&Vp.FileType.Directory&&(B|=2),N.type&Vp.FileType.SymbolicLink&&(B|=64),[N.name,B]}):Yn(f,{posix:async R=>{let L={f:1,"*":1,"/":2,"@":64};return(await X({exec:p,cmd:"ls",args:["-aF",R],output:Fe})).stdout.toString().trim().split(`
`).map(N=>"/*@=%|>".indexOf(N[N.length-1])!==-1?[N.substr(0,N.length-1),N[N.length-1]]:[N,"f"]).filter(([N])=>N!=="."&&N!=="..").map(([N,B])=>[N,L[B]||0])},win32:void 0}),getUsername:async()=>(D===void 0&&(D=await Yn(f,{posix:async()=>(await X({exec:p,cmd:"id",args:["-u","-n"],output:Fe})).stdout.toString().trim(),win32:async()=>d.USERNAME})()),D),toCommonURI:()=>Promise.resolve(void 0),connect:Mf((T=t.fs)!=null&&T.connect?R=>{if("port"in R&&!t.tcpConnect)return y(R);let L=(async()=>{let{stream:N}=await("port"in R?t.tcpConnect(R.host,R.port):t.fs.connect(R.socketPath));return Yue.duplex(tN(N,N))})();return{sink:N=>{L.then(B=>B.sink(N),B=>N(B,()=>{})).catch(B=>i.write(`Connection forwarding to sink error: ${(B==null?void 0:B.stack)||(B==null?void 0:B.message)||String(B)}`))},source:(N,B)=>{L.then(W=>W.source(N,B),W=>B(W)).catch(W=>i.write(`Connection forwarding to source error: ${(W==null?void 0:W.stack)||(W==null?void 0:W.message)||String(W)}`))}}}:y,"Exec Server",i),locateCertificatesFile:function(){return _||(_=cx(this,void 0,i))},nodeExecutable:w,reconnect:async R=>{R?R!==t?(i.write("Updating to new ExecServer to reconnect."),t=R):i.write("New ExecServer to reconnect same as old."):i.write("No new ExecServer to reconnect.")}}}function Gue(t,e){return async function(n){let{cmd:r,args:o,output:i}=n,s=t(),a=`Run: ${r} ${(o||[]).join(" ").replace(/\n.*/g,"")}`,c=i.start(a),l=n.cwd||e,u=await s.env(),f=n.env?{...u.env,...n.env}:u.env,m=await s.spawn(r,o||[],{cwd:l,env:f});return{stdin:zue(m.stdin),stdout:e3(m.stdout),stderr:e3(m.stderr),exit:Promise.all([m.onExit,m.stdout.onEnd,m.stderr.onEnd]).then(([{status:d}])=>(i.stop(a,c),{code:d,signal:null})).catch(d=>{throw i.stop(a,c),d!=null&&d.message.includes("NotFound")&&(d.code="ENOENT"),d}),async terminate(){}}}}function e3(t){return tN(void 0,t)}function zue(t){return tN(t,void 0)}function tN(t,e){let n=new n3.Stream,r=!1;if(t&&(n.writable=!0,n.write=function(o,i,s){s=Array.from(arguments).find(c=>typeof c=="function");let a;try{t.write(o)}catch(c){a=c,setImmediate(()=>n.emit("error",c))}return s&&s(a),!0},n.end=function(o,i,s){s=Array.from(arguments).find(a=>typeof a=="function"),typeof o=="function"&&(o=void 0);try{o&&t.write(o),r=!0,t.end()}catch(a){setImmediate(()=>n.emit("error",a))}return s&&s(),this}),e){let c=function(){for(;i.length&&!n.paused;)n.emit("data",i.shift());!n.paused&&o&&n.emit("end")},o=!1;n.readable=!0,n.paused=!0;let i=[];(e.onDidReceiveMessage||e.onData)(l=>{let u=Buffer.from(l);n.paused?i.push(u):n.emit("data",u)}),e.onEnd.then(()=>{o=!0,n.paused||n.emit("end")});let s=n.on.bind(n);n.on=(l,u)=>{let f=s(l,u);return l==="data"&&n.paused&&setImmediate(n.resume.bind(n)),f};let a=n.pipe.bind(n);n.pipe=function(l,u){let f=a(l,u);return n.paused&&n.resume(),f},n.pause=function(){return n.paused=!0,n},n.resume=function(){return n.paused=!1,c(),n}}return n.destroy=function(o){return t&&!r&&(r=!0,n.end()),o&&n.emit("error",o),n.emit("close"),this},n}var $K=Y(require("https")),tg=Y(require("os")),Gy=Y(require("vscode"));var Ome=async(t,e,n)=>{let r=await Promise.resolve().then(()=>(Od(),O6)),o=await Promise.resolve().then(()=>(C4(),y4)),i=new r.AppInsightsCore,s=new o.PostChannel,a={instrumentationKey:t,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[s]]};if(n){a.extensionConfig={};let u={alwaysUseXhrOverride:!0,httpXHROverride:n};a.extensionConfig[s.identifier]=u}let l=e.workspace.getConfiguration("telemetry").get("internalTesting");return i.initialize(a,[]),i.addTelemetryInitializer(u=>{u.ext=u.ext??{},u.ext.web=u.ext.web??{},u.ext.web.consentDetails='{"GPC_DataSharingOptIn":false}',l&&(u.ext.utc=u.ext.utc??{},u.ext.utc.flags=8462029)}),i},E4=async(t,e,n)=>{let r=await Ome(t,e,n);return{logEvent:(s,a)=>{try{r==null||r.track({name:s,baseData:{name:s,properties:a==null?void 0:a.properties,measurements:a==null?void 0:a.measurements}})}catch(c){throw new Error(`Failed to log event to app insights!
`+c.message)}},flush:async()=>{try{return new Promise((a,c)=>{if(!r){a();return}r.flush(!0,l=>{if(!l){c("Failed to flush app 1DS!");return}})})}catch(s){throw new Error(`Failed to flush 1DS!
`+s.message)}},dispose:async()=>new Promise(a=>{if(!r){a();return}r.unload(!1,()=>{a(),r=void 0},1e3)})}};zc();var sm=class t{static applyReplacements(e,n){for(let r of Object.keys(e))for(let o of n)o.lookup.test(r)&&(o.replacementString!==void 0?e[r]=o.replacementString:delete e[r])}static shouldUseOneDataSystemSDK(e){return e.length===74&&e[32]==="-"&&e[41]==="-"&&e[46]==="-"&&e[51]==="-"&&e[56]==="-"&&e[69]==="-"}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"PACKAGE_JSON_VERSION"}}static getInstance(){return t._instance||(t._instance=new t),t._instance}};var UK=async(t,e,n,r,o)=>{let i;try{let a=await Promise.resolve().then(()=>(OK(),FK)),c={};if(r){let f={alwaysUseXhrOverride:!0,httpXHROverride:r};c[EI]=f}let l;t.startsWith("InstrumentationKey=")||(l=t);let u=l?{instrumentationKey:l}:{connectionString:t};i=new a.ApplicationInsights({...u,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,extensionConfig:c})}catch(a){return Promise.reject(a)}return{logEvent:(a,c)=>{let l={...c==null?void 0:c.properties,...c==null?void 0:c.measurements};o!=null&&o.length&&sm.applyReplacements(l,o),i==null||i.track({name:a,data:l,baseType:"EventData",ext:{user:{id:e,authId:e},app:{sesId:n}},baseData:{name:a,properties:c==null?void 0:c.properties,measurements:c==null?void 0:c.measurements}})},flush:async()=>{i==null||i.flush(!1)},dispose:async()=>new Promise(c=>{i==null||i.unload(!0,()=>{c(),i=void 0},1e3)})}};var NI=class{constructor(e,n,r){this.telemetrySender=e,this.vscodeAPI=n,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,r),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,n,r,o){o?this.telemetrySender.sendEventData(e,{properties:n,measurements:r}):this.telemetryLogger.logUsage(e,{properties:n,measurements:r})}sendTelemetryEvent(e,n,r){this.internalSendTelemetryEvent(e,n,r,!1)}sendRawTelemetryEvent(e,n,r){let o={...n};for(let i of Object.keys(o??{})){let s=o[i];typeof i=="string"&&s!==void 0&&(o[i]=new this.vscodeAPI.TelemetryTrustedValue(typeof s=="string"?s:s.value))}this.sendTelemetryEvent(e,o,r)}sendDangerousTelemetryEvent(e,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,n,r,!0)}internalSendTelemetryErrorEvent(e,n,r,o){o?this.telemetrySender.sendEventData(e,{properties:n,measurements:r}):this.telemetryLogger.logError(e,{properties:n,measurements:r})}sendTelemetryErrorEvent(e,n,r){this.internalSendTelemetryErrorEvent(e,n,r,!1)}sendDangerousTelemetryErrorEvent(e,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,n,r,!0)}async dispose(){return await this.telemetrySender.dispose(),this.telemetryLogger.dispose(),Promise.all(this.disposables.map(e=>e.dispose()))}};var el;(function(t){t[t.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",t[t.INSTANTIATING=1]="INSTANTIATING",t[t.INSTANTIATED=2]="INSTANTIATED"})(el||(el={}));var LI=class{constructor(e,n){this._instantiationStatus=el.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=n,this._key=e}sendEventData(e,n){if(!this._telemetryClient){this._instantiationStatus!==el.INSTANTIATED&&this._eventQueue.push({eventName:e,data:n});return}this._telemetryClient.logEvent(e,n)}sendErrorData(e,n){if(!this._telemetryClient){this._instantiationStatus!==el.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:n});return}let r={stack:e.stack,message:e.message,name:e.name};if(n){let o=n.properties||n;n.properties={...o,...r}}else n={properties:r};this._telemetryClient.logEvent("unhandlederror",n)}async flush(){var e;return(e=this._telemetryClient)==null?void 0:e.flush()}async dispose(){this._telemetryClient&&(await this._telemetryClient.dispose(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:n})=>this.sendEventData(e,n)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:n})=>this.sendErrorData(e,n)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===el.NOT_INSTANTIATED&&(this._instantiationStatus=el.INSTANTIATING,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=el.INSTANTIATED,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=el.INSTANTIATED}))}};function MK(){return{sendPOST:(e,n)=>{let r={method:"POST",headers:{...e.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)}};try{let o=$K.request(e.urlString,r,i=>{i.on("data",function(s){n(i.statusCode??200,i.headers,s.toString())}),i.on("error",function(){n(0,{})})});o.write(e.data,i=>{i&&n(0,{})}),o.end()}catch{n(0,{})}}}}var zy=class extends NI{constructor(e,n){let r=s=>UK(s,Gy.env.machineId,Gy.env.sessionId,MK(),n);sm.shouldUseOneDataSystemSDK(e)&&(r=s=>E4(s,Gy,MK()));let o={release:tg.release(),platform:tg.platform(),architecture:tg.arch()},i=new LI(e,r);if(e&&e.indexOf("AIF-")===0)throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(i,Gy,{additionalCommonProperties:sm.getAdditionalCommonProperties(o)})}};var Ku=Y(n5());var r5=Y(require("vscode"));function Mt(t){let e=r5.workspace.getConfiguration(),n=us(t),r=e.get(n),o=Nl(t),i=e.get(o);if(i!=null&&i!==r){let s=e.inspect(n);if(!s||s.globalValue===void 0&&s.workspaceValue===void 0&&s.workspaceFolderValue===void 0)return i}return r}function LF(t,e){return t.affectsConfiguration(us(e))||t.affectsConfiguration(Nl(e))}var Gu=Y(require("path"));var o5=Y(require("os")),Pt=Y(require("vscode")),mm=require("vscode");async function YI(){await Pt.window.showInformationMessage(mm.l10n.t("You need to first save your workspace in a folder containing all its workspace folders."),{modal:!0})}async function Fa(t){var r;let e=t?[t]:(r=Pt.workspace.workspaceFolders)==null?void 0:r.map(o=>o.uri);if(!e)return[];let n=await Promise.all([...e.map(o=>(async()=>{try{let i=o.with({path:Gu.posix.join(o.path,".devcontainer.json")});if((await Pt.workspace.fs.stat(i)).type===Pt.FileType.File)return[i]}catch(i){if((i==null?void 0:i.code)!=="FileNotFound")throw i}return[]})()),...e.map(o=>Pt.workspace.findFiles(new Pt.RelativePattern(o.with({path:Gu.posix.join(o.path,".devcontainer")}),"{devcontainer.json,*/devcontainer.json}")))]);return[].concat(...n)}async function zu(t,e){let n;if(t.length>1){let r=Pt.window.createQuickPick();r.placeholder=mm.l10n.t("Select a devcontainer.json file."),r.busy=!0,r.enabled=!1,r.show(),r.items=(await Promise.all(t.map(async i=>{let s=i.uri,a=i.fileHost.path,c=i.fileHost.platform,l=_e(s,c),u=Me((await i.fileHost.readFile(l)).toString())||{},f,m,d=a.dirname(l),p=a.dirname(d);a.basename(d)===".devcontainer"?(f=mm.l10n.t("Main"),m=p):a.basename(p)===".devcontainer"?(f=a.basename(d),m=a.dirname(p)):(f=mm.l10n.t("Project Root"),m=d);let g=u.name||f,h=i.type==="repositoryConfig"||i.type==="userData"?Jy(c,l,o5.homedir()):a.relative(m,l);return{label:g,description:h+(s.toString()===(e==null?void 0:e.toString())?` ${mm.l10n.t(" (Current)")}`:""),uri:s,buttons:[{iconPath:new Pt.ThemeIcon("go-to-file"),tooltip:mm.l10n.t("Open File")}]}}))).sort((i,s)=>{let a=Gu.posix.dirname(i.uri.path),c=Gu.posix.dirname(s.uri.path);return a!==c?a.localeCompare(c):i.label.localeCompare(s.label)}),r.busy=!1,r.enabled=!0;let o=await new Promise(i=>{r.onDidAccept(()=>i(r.selectedItems[0])),r.onDidHide(()=>i(void 0)),r.onDidTriggerItemButton(({item:s})=>{Pt.commands.executeCommand("vscode.open",s.uri),i(void 0)})});r.dispose(),n=o?Ce.from(o.uri):"cancelled"}else t.length===1&&(n=t[0].uri);return n}function Jy(t,e,n){if(t==="win32")return e;let r=`${Bpe(n,"/")}/`;return(t==="linux"?e.startsWith(r):e.toLowerCase().startsWith(r.toLowerCase()))&&(e=`~/${e.substr(r.length)}`),e}function Bpe(t,e){if(e.length===0)return t;for(;t.endsWith(e);)t=t.substr(0,t.length-e.length);return t}function Oa(t,e){let n=Pt.workspace.fs;return{platform:t,path:t==="win32"?Gu.win32:Gu.posix,async isFile(r){try{return((await n.stat(Rn(t,e,r))).type&Pt.FileType.File)!==0}catch(o){if((o==null?void 0:o.code)==="FileNotFound"||(o==null?void 0:o.code)==="FileNotADirectory")return!1;throw o}},async isFolder(r){try{return((await n.stat(Rn(t,e,r))).type&Pt.FileType.Directory)!==0}catch(o){if((o==null?void 0:o.code)==="FileNotFound"||(o==null?void 0:o.code)==="FileNotADirectory")return!1;throw o}},async readFile(r){try{let o=await n.readFile(Rn(t,e,r));return Buffer.from(o)}catch(o){if((o==null?void 0:o.code)==="FileNotFound"){let i=new Error(`Could not read file: ${r}`);throw i.originalError=o,i.code="ENOENT",i}throw o}},async rename(r,o){try{let i=Rn(t,e,r),s=Rn(t,e,o);await n.rename(i,s)}catch(i){if((i==null?void 0:i.code)==="FileNotFound"){let s=new Error(`Could not rename  ${r} -> ${o}`);throw s.originalError=i,s.code="ENOENT",s}throw i}},async rm(r,o){try{let i=Rn(t,e,r);await n.delete(i,{recursive:o.recursive})}catch(i){if((i==null?void 0:i.code)==="FileNotFound"){let s=new Error(`Could not remove ${r}`);throw s.originalError=i,s.code="ENOENT",s}throw i}},async writeFile(r,o){await n.writeFile(Rn(t,e,r),o)},async readDir(r){return(await n.readDirectory(Rn(t,e,r))).map(i=>i[0])},async readDirWithTypes(r){return n.readDirectory(Rn(t,e,r))},async mkdirp(r){await n.createDirectory(Rn(t,e,r))},async toCommonURI(r){return Rn(t,e,r)}}}var Ky=class{async readDocument(e){try{let n=Pt.workspace.textDocuments.find(o=>o.uri.toString()===e.toString());if(n)return n.getText();let r=await Pt.workspace.fs.readFile(e);return Buffer.from(r).toString()}catch{return}}async applyEdits(e,n,r){let o=Pt.workspace.textDocuments.find(s=>s.uri.toString()===e.toString());if(o){let s=new Pt.WorkspaceEdit;for(let a of n){let c=o.positionAt(a.offset),l=o.positionAt(a.offset+a.length);s.replace(e,new Pt.Range(c,l),a.content)}if(await Pt.workspace.applyEdit(s))return}let i=Io(r,n);await Pt.workspace.fs.writeFile(e,Buffer.from(i))}};function Xy(t){var o,i;let e=((o=/\r?\n/.exec(t))==null?void 0:o[0])||`
`,n=((i=/^\t|^ +/m.exec(t))==null?void 0:i[0])||"	",r=n[0]===" ";return{eol:e,insertSpaces:r,tabSize:r?n.length:void 0}}function Zy(){let t=Mt("logLevel")||"debug";return UC(t)}var He=require("vscode");var i5=Y(require("crypto"));async function qI(t,e,n){let r=await AF(t,e,n);return r?Fa(await t.toCommonURI(r)):[]}var GI=".devcontainer-internal.json";async function AF(t,e,n){let r=FF(t,e,n),o=t.path.basename(r),i=t.path.dirname(r),s=await t.isFolder(i)?await t.readDir(i):[];for(let a of s)if(a===o||a.startsWith(`${o}-`)&&!isNaN(Number(a.substring(o.length+1)))){let c=t.path.join(i,a),l=t.path.join(c,GI);if(await t.isFile(l)){let u=Me((await t.readFile(l)).toString());if((u==null?void 0:u.rootFolder)===e.rootFolderPath)return c}}}function s5(t,e,n){return`${FF(t,e,n)}-${i5.randomUUID()}`}async function a5(t,e,n,r){let o=`// Maintained by the Dev Container extension
${JSON.stringify({rootFolder:e.rootFolderPath},void 0,"	")}`;await t.writeFile(t.path.join(r,GI),Buffer.from(o));let i=FF(t,e,n),s;for(let a=1;;a++)if(s=a>1?`${i}-${a}`:i,!await t.isFolder(s)){await t.rename(r,s);break}return s}function FF(t,e,n){return t.path.join(n,"configs",t.path.basename(e.rootFolderPath))}async function c5(t,e){await t.rm(e,{recursive:!0})}process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";process.env.APPLICATIONINSIGHTS_CONFIGURATION_CONTENT="{}";function l5(t){return t.serverDataFolderName?t.serverDataFolderName:t.quality?t.quality==="stable"?".vscode-server":t.quality==="insider"?".vscode-server-insiders":`.vscode-server-${t.quality}`:".vscode-server-oss"}var it="remote-containers.revealLogTerminal",jF="remote-containers.revealPostCreateTerminal",gm="remote-containers.openDevContainerFile",g5="remote-containers.openRepositoryInVolume",KI="remote-containers.openRepositoryInUniqueVolume",v5="remote-containers.openRepositoryFromRemoteHubWithEditSession",w5="remote-containers.openRepositoryFromGitWithEditSession",y5="remote-containers.openPullRequestInVolume",u5=new FC,Qn={onRemoveOnShutdownChangedEmitter:u5,onRemoveOnShutdownChanged:u5.event,results:new Map},pm,hn=t=>jf(t,K.env.appRoot);function tC(t,e,n,r,o,i){return async(s,a)=>{r(),K.commands.executeCommand("setContext","forwardedPortsViewEnabled",!0);let c=K.env.remoteAuthority;if(a.resolveAttempt>1){let l=n.get(c);if(!l)throw new Error("Reconnect attempt without old result.");let u=He.l10n.t("Reconnection attempt {0}",a.resolveAttempt-1),f=t.log.start(u),{cliHost:m}=l.params;if(m.reconnect){let h=`Reconnecting CLIHost ${a.execServer?"with":"without"} ExecServer.`,v=t.log.start(h);try{await m.reconnect(a.execServer)}catch(C){throw t.log.write(ot(String(C&&(C.stack||C.message)||C))),K.RemoteAuthorityResolverError.TemporarilyNotAvailable(He.l10n.t("Cannot reconnect to remote host."))}finally{t.log.stop(h,v)}}else t.log.write("CLIHost does not need reconnection.");if((await nC(m,t.log)).pauseResolver&&await C5(m,t.log),l.dockerContainerId){let h=await ai(l.dockerParams,l.dockerContainerId);if(!h)throw K.RemoteAuthorityResolverError.NotAvailable(He.l10n.t("Container no longer exists."));if(h.State.Status==="paused")throw K.RemoteAuthorityResolverError.TemporarilyNotAvailable(He.l10n.t("Container is paused."));if(h.State.Status!=="running")throw K.RemoteAuthorityResolverError.NotAvailable(He.l10n.t("Container is no longer running."))}let p=l.resolvedAuthority.port,g=TY(l.params.forwardedPorts,p);if(g){if(g.connections.size){t.log.write(`Destroying ${g.connections.size} leftover connections to forwarded port ${p}.`);for(let h of g.connections)h.destroy()}}else t.log.write(`Forwarded port ${p} not found.`);return t.log.stop(u,f),{...l.resolvedAuthority,isTrusted:l.isTrusted}}else{let l=He.l10n.t("Resolving Remote"),u=t.log.start(l),f=await i(c,a,t,e);return Wpe(f.params,f.properties).catch(m=>{}),n.set(c,f),o(),t.log.stop(l,u),K.window.withProgress({location:K.ProgressLocation.Window,title:uhe,cancellable:!1},async m=>{await sk(f.params.backgroundTasks)}).then(void 0,m=>{t.log.write(ot(String(m&&(m.stack||m.message)||m)))}),{...f.resolvedAuthority,...f.tunnelInformation,isTrusted:f.isTrusted}}}}async function nC(t,e){let n=t.path.join(await t.homedir(),".vscode-remote-containers","config.json");try{let r=Me((await t.readFile(n)).toString())||{},o=r.canConnectToContainer!==!1,i=r.canRebuildContainer!==!1&&o;return await K.commands.executeCommand("setContext","hideConnectCommands",!o),await K.commands.executeCommand("setContext","hideRebuildCommands",!i),{canConnectToContainer:o,canRebuildContainer:i,pauseResolver:!!r.pauseResolver}}catch(r){return r.code!=="ENOENT"&&e.write(`Error reading ${n}: ${(r==null?void 0:r.stack)||(r==null?void 0:r.message)||r}`),{canConnectToContainer:!0,canRebuildContainer:!0,pauseResolver:!1}}}async function C5(t,e){let n=He.l10n.t("Pausing resolver"),r=e.start(n),o=rw(t),i=`
const fs = require('fs');
const path = require('path');
const os = require('os');

const filepath = path.join(os.homedir(), '.vscode-remote-containers', 'config.json');

fs.watch(path.dirname(filepath), (event, filename) => {
	if (filename === path.basename(filepath)) {
		console.log(\`config.json file event: \${event}\`);
		rereadConfig(true);
	}
});
rereadConfig();
setInterval(() => {
	rereadConfig();
}, 5000);
function rereadConfig(event = false) {
	try {
		const text = fs.readFileSync(filepath, 'utf8');
		const config = JSON.parse(text);
		if (!config.pauseResolver) {
			console.log(\`config.json: Continuing... (\${event ? 'event' : 'poll'})\`);
			process.exit();
		}
		if (event) {
			console.log('config.json: Still paused.');
		}
	} catch (err) {
		console.log('config.json: Not a JSON file.');
	}
}
`;try{await X({exec:t.exec,cmd:o.cmd,args:[...o.args,"-e",i],output:sn(e,1),print:"continuous"})}catch(s){e.write(ot((s==null?void 0:s.message)||String(s)))}e.stop(n,r)}async function Wpe(t,e){if(!e.nodeExecutable)return;let n=await at(hm.join(t.extensionPath,"dist","node","remoteCloudGuesser.js"),{encoding:"utf8"}),{stdout:r}=await dc(t,e,[e.nodeExecutable,"-e",n],void 0,{silent:!0}),o=r.toString().trim();t.sendTelemetryEvent("extraInfo",{remoteCloud:o})}var OF;async function JI(t){return OF||(OF=Kl(hm.join(__dirname,"..",".."),vm,t)),OF}var Qy={};async function vm(t,e=!0){var n;if(t.counter&&((n=Qy[t.prompt])==null?void 0:n.from)===t.counter&&delete Qy[t.prompt],!Qy[t.prompt]){if(!e)return"";Qy[t.prompt]={result:Promise.resolve(K.window.showInputBox({prompt:t.prompt||He.l10n.t("Enter password"),password:!0,ignoreFocusOut:!0}).then(r=>r||"")),from:t.counter}}return Qy[t.prompt].result}async function Ze(t,e,n,r=!0,o=JI(e),i=!0){var C;let s=!n;if(s){if(Qn.results.size){let w=[...Qn.results.values()].filter(y=>y.dockerParams)[0];if(w)return XG(w.dockerParams)}if(pm)return pm}s0()&&(e.write(He.l10n.t("Getting Docker parameters for own remote.")),wm()===1&&e.write(new Error().stack,1)),n&&typeof n!="string"&&"scheme"in n&&(n.scheme==="file"?n=n.fsPath:n=Ip(n));let a,c;if(!n){let w=(K.workspace.workspaceFolders||[])[0];if(K.env.remoteName==="wsl")w?n=Ip(w.uri):n={wslDistro:QS(K.env.remoteAuthority),wslPath:"/"};else if(K.env.remoteName==="ssh-remote"){if(c=await K.workspace.getRemoteExecServer(K.env.remoteAuthority),!c){let y=Bv(K.env.remoteAuthority);if(y){let{user:S,hostName:D,port:_}=y;a={host:`ssh://${S?`${S}@`:""}${D}${_?`:${_}`:""}`}}}(c||a)&&(w?n=w.uri.path:n="/")}else K.env.remoteName==="tunnel"?(c=await K.workspace.getRemoteExecServer(K.env.remoteAuthority),w?n=w.uri.path:n="/"):K.env.remoteName==="attached-container"?a=(C=nd(K.env.remoteAuthority))==null?void 0:C.settings:(w==null?void 0:w.uri.scheme)==="file"&&(n=w.uri.fsPath);n||(n=process.cwd())}let l=a&&"host"in a&&a.host||void 0,u=r?ts():{executeInWSL:"never",defaultDistro:void 0},f=await kv(K.env.appRoot),m=Xr(c?{server:c,authority:K.env.remoteAuthority}:void 0,l,n,hn,u,t.extensionPath,await _r(),f,e,Si,{sshAskpassEnv:o,settings:sg()});i&&!await Promise.race([m,Wt(1e3)])&&await K.window.withProgress({location:K.ProgressLocation.Notification,title:`[${He.l10n.t("Setting up Dev Containers (show log)")}](command:${it} "${He.l10n.t("Show details in terminal")}")`,cancellable:!1},async()=>{await m});let d=await m,p=Ms(),g=Ua();if(!a){let w=K.workspace.getConfiguration("containers"),y=K.workspace.getConfiguration("docker"),S=w.get("environment")||{},D=y.get("environment")||{},_=S.DOCKER_CONTEXT||D.DOCKER_CONTEXT||y.get("context")||d.env.DOCKER_CONTEXT;if(!_){let A={cliHost:d,dockerCLI:p,dockerComposeCLI:Cs({exec:d.exec,env:{},output:Fe},p,g),dockerComposePath:g,env:{},output:Fe};_=await kk(A)||"default"}_&&_!=="default"?a={context:_}:(a={...dr(d.env),...["host","certPath","tlsVerify"].reduce((A,U)=>jpe(A,y,U),{}),...dr({...D,...S})},Object.keys(a).length||(a=void 0))}let h={...d.type==="local"?await o:void 0,...await td(d,a)},v={cliHost:d,dockerCLI:p,dockerComposeCLI:Cs({exec:d.exec,env:h,output:e},p,g),dockerComposePath:g,env:h,output:e};return s&&(pm=v,VF(t,f),await nC(v.cliHost,e)),v}async function E5(){if(!K.env.remoteName||K.env.remoteName==="test")return process.platform;if(K.env.remoteName==="ssh-remote"||K.env.remoteName==="tunnel"){let t=await K.workspace.getRemoteExecServer(K.env.remoteAuthority);if(t)return(await t.env()).osPlatform}return"linux"}var zI;function VF(t,e){if(zI)return zI;let n=qpe(t,e);return t.subscriptions.push(n),t.subscriptions.push(n.event(()=>{let r=pm==null?void 0:pm.cliHost;pm=void 0,r!=null&&r.terminate&&r.terminate()})),zI=n.event,zI}function jpe(t,e,n){let r=e.get(n);return r&&(t[n]=r),t}var Vpe=["docker.context","docker.host","docker.certPath","docker.tlsVerify","docker.environment","containers.environment"],Ype=["dockerPath","dockerComposePath","executeInWSL","executeInWSLDistro"];function qpe(t,e){let n=new K.EventEmitter,r=K.workspace.onDidChangeConfiguration(async l=>{(Vpe.some(u=>l.affectsConfiguration(u))||Ype.some(u=>LF(l,u)))&&n.fire()}),o,i,s,a=()=>{(async()=>{i||(i=await Xr(void 0,void 0,process.cwd(),hn,ts(),t.extensionPath,await _r(),e,Fe,Si));let l={cliHost:i,dockerCLI:Ms(),dockerComposeCLI:Cs({exec:i.exec,env:{},output:Fe},Ms(),Ua()),dockerComposePath:Ua(),env:{},output:Fe},u=await kk(l);u===void 0?s=setTimeout(a,120*1e3):(u!==o&&(o!==void 0&&n.fire(),o=u),s=setTimeout(a,2*1e3))})().catch(console.error)};a();let c=n.dispose;return n.dispose=()=>{r.dispose(),s&&clearTimeout(s),c.call(n)},n}function Ju(){let t=K.workspace.workspaceFolders;if((t==null?void 0:t.length)===1){let e=t[0].uri;return YF(e)}return null}function YF(t){if(t&&t.scheme==="vscode-remote"&&/dev-container\+(.*)/.exec(t.authority)){let n=uo(t.authority);if(un(n))return null;if(lo(n)&&n.inspectVolume&&n.inspectVolume===!0)return n}return null}function XI(t){return{getConfigurationState:()=>t.get("configurationState"),updateConfigurationState:async e=>t.update("configurationState",e),containerOutdated:Gpe}}async function Gpe(t){let e="Rebuild",n="Ignore",r=await K.window.showInformationMessage(He.l10n.t("Configuration file(s) changed: {0}. The container might need to be rebuilt to apply the changes.",t.join(", ")),e,n);if(r===e)return K.commands.executeCommand("remote-containers.rebuildContainer");if(r===n)return"ignore"}var UF="remote.defaultExtensionsIfInstalledLocally",f5="dev.containers.defaultExtensionsIfInstalledLocally";async function S5(){let t=K.workspace.getConfiguration(),e=t.get(f5);if(!e)return;let n=t.inspect(UF);if(!(n!=null&&n.globalValue))await t.update(UF,e,K.ConfigurationTarget.Global);else{let r=n.globalValue.slice(),o=n.globalValue.map(i=>i.toLowerCase());for(let i of e){let s=i.toLowerCase();o.includes(s)||r.push(i)}await t.update(UF,r,K.ConfigurationTarget.Global)}await t.update(f5,void 0,K.ConfigurationTarget.Global)}function zpe(t){return t?d5():Array.from(new Set([...Mt("defaultExtensions")||[],...d5()]))}function x5(){return Ju()?{}:Mt("defaultFeatures")||{}}function d5(){let t=K.env.language,e=t.indexOf("-"),n=m5(t)||(e!==-1?m5(t.substr(0,e)):void 0);return n?[n]:[]}function m5(t){let e=t.toLowerCase();return K.extensions.all.filter(n=>{var o;let r=n.packageJSON&&n.packageJSON.contributes;return(o=r==null?void 0:r.localizations)!=null&&o.length?!!r.localizations.find(i=>{var s;return((s=i==null?void 0:i.languageId)==null?void 0:s.toLowerCase())===e}):!1}).map(n=>n.id)[0]}function p5(){return!!K.workspace.getConfiguration().get("workbench.enableExperiments")}function Kpe(){return!!Mt("enableWebAccess")}function ZI(){return Mt("workspaceMountConsistency")||"cached"}async function QI(t,e,n){if(t.type!=="local")try{let r=t.path.join(await t.homedir(),l5(e),"data","Machine","settings.json"),o=await t.readFile(r),i=Me(o.toString());return(i==null?void 0:i["dev.containers.gpuAvailability"])||"detect"}catch(r){return(r==null?void 0:r.code)!=="ENOENT"&&n.write(ot(String(r&&(r.stack||r.message)||r))),"detect"}return Mt("gpuAvailability")||"detect"}function e0(){return Mt("cacheVolume")??!0}function Jpe(){let t=Mt("copyGitConfig");return typeof t=="boolean"?t:!0}function Xpe(){return Mt("gitCredentialHelperConfigLocation")||"global"}function Zpe(){let t=Mt("dockerCredentialHelper");return typeof t=="boolean"?t:!0}function Qpe(){let t=Mt("githubCLILoginWithToken");return typeof t=="boolean"?t:!0}function ehe(){let t=Mt("mountWaylandSocket");return typeof t=="boolean"?t:!0}function Ms(){return Mt("dockerPath")||"docker"}function t0(){return Mt("dockerSocketPath")||"/var/run/docker.sock"}function ts(){return{executeInWSL:qF(),defaultDistro:n0()}}function qF(){return process.platform!=="win32"?"never":Mt("executeInWSL")?"always":"forWSLPath"}function n0(){if(process.platform==="win32")return Mt("executeInWSLDistro")||void 0}function the(){return process.platform==="win32"&&Mt("forwardWSLServices")!==!1}function Ua(){return Mt("dockerComposePath")||"docker-compose"}function r0(){return Mt("experimentalLockfile")||!1}function ig(){return Mt("experimentalMountGitWorktreeCommonDir")||!1}function GF(){let t=Mt("optimisticallyLaunchDocker");return typeof t=="boolean"?t:!0}function wm(){let t=Mt("logLevel")||"debug";return UC(t)}var nhe=t=>K.workspace.onDidChangeConfiguration(e=>{LF(e,"logLevel")&&t(wm())});function rhe(){let t=K.workspace.getConfiguration(),e=n=>(t.get(Nl(n),"")||t.get(n,"")).trim();return{repository:e("dotfiles.repository")||void 0,installCommand:e("dotfiles.installCommand")||void 0,targetPath:e("dotfiles.targetPath")||"~/dotfiles"}}function sg(){let t=K.workspace.getConfiguration();return{executablePath:t.get("remote.SSH.path"),executableArgs:wm()===1?["-v"]:void 0,configFilePath:t.get("remote.SSH.configFile")}}function ns(t,e,n,r,o,i,s,a,c){var m,d;let l={resolver:e,outcome:n};if(o){l.hostType=o.cliHost.type;let p=o.cliHost.authority;if(p){let g=p.indexOf("+");g!==-1&&(l.hostAuthority=p.substring(0,g))}}i&&(l.configProperties=JSON.stringify(Object.keys(i)),l.configExtensions=JSON.stringify(((d=(m=i.customizations)==null?void 0:m.vscode)==null?void 0:d.extensions)||[]),l.configFeatures=JSON.stringify(Object.keys(i.features||{}).map(p=>uf(p))),"image"in i?l.configType="image":Oo(i)?l.configType="dockerfile":"dockerComposeFile"in i&&(l.configType="dockerCompose")),s&&(l.configLocation=s),a&&(l.hardwareId=a.osRelease.hardware,l.osReleaseId=a.osRelease.id,l.osReleaseVersion=a.osRelease.version);let u=c&&c.originalError,f=u&&(u.stack||u.message||String(u))||c&&c.description;f&&(l.errorMessage=f),c!=null&&c.step&&(l.step=c.step),t.sendTelemetryEvent("resolver",l,{sessionTimeInMs:Date.now()-r.getTime()})}var MF=class{constructor(e){this.onClose=e}writeEmitter=new K.EventEmitter;onDidWrite=this.writeEmitter.event;inputEmitter=new K.EventEmitter;onDidInput=this.inputEmitter.event;queue=[];ready=!1;open(){this.ready=!0,this.queue.forEach(e=>this.writeEmitter.fire(e))}close(){this.ready=!1,this.onClose()}write(e){this.queue.push(e),this.ready&&this.writeEmitter.fire(e)}handleInput(e){this.inputEmitter.fire(e)}},eC=class{constructor(e,n,r=void 0){this.sessionStart=n;let o=i=>{this.outputTerminal.write(i),this.revealOnNextOutput&&(this.revealOnNextOutput=!1,this.show())};this.logFilePath=e?hm.join(e,`remoteContainers-${n.toISOString().replace(/:/g,"-")}.log`):void 0,this.log=ohe(o,wm,this.logFilePath,n,r),Object.defineProperty(this.log,"dimensions",{get:()=>{var i;return(i=this._terminal)==null?void 0:i.dimensions}}),this.log.onDidChangeDimensions=i=>K.window.onDidChangeTerminalDimensions(s=>{s.terminal===this._terminal&&i(s.dimensions)})}_terminal;outputTerminal=new MF(()=>this._terminal=void 0);onDidInput=this.outputTerminal.onDidInput;_name=He.l10n.t("Dev Containers");_revealOnNextOutput=!1;log;logFilePath;get name(){return this._name}set name(e){this._name=e}get revealOnNextOutput(){return this._revealOnNextOutput}set revealOnNextOutput(e){this._revealOnNextOutput=e}show(){this._terminal||(this._terminal=K.window.createTerminal({name:this.name,pty:this.outputTerminal})),this._terminal.show()}dispose(){this._terminal&&this._terminal.dispose()}get shown(){return!!this._terminal}};function ohe(t,e,n,r,o=void 0){let i=[];return n&&i.push(K0(n,()=>Math.min(2,e()))),i.push(J0(t,e,r)),i.push(ihe()),sn(z0(i,o))}function ihe(){return{event(t){t.type==="notification"&&K.window.showInformationMessage(t.message,He.l10n.t("Dismiss"))}}}async function zF(t,e){let n=await ai(t,e.Id);if(n&&n.State.Status==="running")try{await et(t,"stop",n.Id)}catch(r){K.window.showErrorMessage(He.l10n.t("Error stopping container: {0}",r.message))}}async function o0(t,e){let n=await ai(t,e.Id);if(n&&n.State.Status!=="running")try{await et(t,"start",n.Id)}catch(r){K.window.showErrorMessage(He.l10n.t("Error starting container: {0}",r.message))}}async function _5(t,e){try{await et(t,"rm",e)}catch(n){K.window.showErrorMessage(He.l10n.t("Error removing container: {0}",n.message))}}async function KF(t,e){try{await et(t,"volume","rm","--force",e)}catch(n){K.window.showErrorMessage(He.l10n.t("Error removing volume: {0}",n.message))}}function she(){return K.env.sessionId!=="someValue.sessionId"?K.env.sessionId:`${K.env.sessionId}_${Date.now()}`}function ahe(t,e){let n=K.workspace.registerResourceLabelFormatter({scheme:"vscode-remote",authority:t.authority,formatting:{label:"${path}",separator:"/",workspaceSuffix:e,tildify:!0}});t.shutdowns.push(n.dispose.bind(n))}async function D5(t,e){if(t.globalState.get("removeOnStartup")===e)return await t.globalState.update("removeOnStartup",null),!0;let n=t.workspaceState.get("removeOnStartup",!1);return n&&await t.workspaceState.update("removeOnStartup",null),n}async function I5(t,e){await t.workspaceState.update("removeOnStartup",e)}async function JF(t,e){await t.globalState.update("removeOnStartup",e)}async function P5(t,e){return t.globalState.get("buildNoCache")===e?(await t.globalState.update("buildNoCache",null),!0):!1}async function rC(t,e){await t.globalState.update("buildNoCache",e)}async function ag(t,e,n,r,o){await t.globalState.update("openEditorsOnStartup",{workspaceFolder:e,fileWithError:n==null?void 0:n.toString(),logFile:r,openLog:o})}async function b5(t){var n;let e=t.globalState.get("openEditorsOnStartup");if(e){await t.globalState.update("openEditorsOnStartup",void 0);let r=(n=K.workspace.workspaceFolders)==null?void 0:n.some(i=>i.uri.fsPath===e.workspaceFolder||i.uri.path===e.workspaceFolder),o=await Ju();if(r||o&&o.repositoryPath===e.workspaceFolder&&(r=!0),r){let i=e.fileWithError?Ce.parse(e.fileWithError):void 0;if(e.openLog==="onTheSide"&&await h5(i),e.openLog&&e.logFile){let s={viewColumn:e.openLog==="onTheSide"?K.ViewColumn.Beside:K.ViewColumn.One,preserveFocus:!0},a=await K.window.showTextDocument(K.Uri.file(e.logFile),s),c=new K.Position(a.document.lineCount-1,0);a.selection=new K.Selection(c,c),a.revealRange(a.selection)}return e.openLog!=="onTheSide"&&await h5(i),!0}}return!1}function T5(t){return[`vscode-remote:/workspaces/${t}/.devcontainer/devcontainer.json`,`vscode-remote:/workspaces/${t}/.devcontainer.json`]}async function h5(t){return t?K.commands.executeCommand("vscode.open",K.Uri.parse(t.toString()),{viewColumn:K.ViewColumn.One}):K.commands.executeCommand("remote-containers.openDevContainerFile",void 0,{viewColumn:K.ViewColumn.One})}async function i0(t,e,n,r){return!r&&Qn.results.size?[...Qn.results.values()].filter(o=>o.config).map(o=>({type:o.configLocationType||"unknown",uri:o.configWorkspaceURI||o.config.configFilePath,fileHost:t})):(await Promise.all([!r||r==="workspace"?Fa().then(o=>o.map(i=>({type:"workspace",uri:i,fileHost:t}))):[],!r||r==="repositoryConfig"?XF(t,e).then(o=>o.map(i=>({type:"repositoryConfig",uri:i,fileHost:Oa(process.platform,i.with({path:hm.posix.dirname(i.path)}))}))):[],n&&(!r||r==="userData")?qI(t,e,n).then(o=>o.map(i=>({type:"userData",uri:i,fileHost:t}))):[]])).flat()}async function XF(t,e){let n=oC();if(n.length){let r=await LS(t,e,Fe);if(r!=null&&r.length){let o=Jx(r,n);return(await Promise.all(o.map(s=>Fa(Ce.file(s))))).flat()}}return[]}function oC(){return Mt("repositoryConfigurationPaths")||[]}async function tl(t,e){if(e.type==="local")return t.globalStoragePath}async function che(t,e,n="localhost"){await K.workspace.openTunnel({remoteAddress:{host:n,port:e}})}function R5(t,e){let n=new eC(void 0,e);n.name=He.l10n.t("Configuring..."),n.revealOnNextOutput=!0;let r=!1;n.onDidInput(()=>{r&&(r=!1,n.dispose())});let o,i={enabled:!0,skipNonBlocking:!1,output:aY(n.log,"postCreate",t),onDidInput:n.onDidInput,done:()=>{n.shown&&(n.log.raw(`\x1B[1m${He.l10n.t("Done. Press any key to close the terminal.")}\x1B[0m`),r=!0),o()},promise:new Promise(s=>o=s)};return{channel:n,postCreate:i}}async function Xu(t){let{authority:e,extensionContext:n,sessionStart:r,progress:o,cliHost:i,env:s,cwd:a,wslSettings:c,isLocalContainer:l,telemetry:u,onDidInput:f,output:m,logFilePath:d,allowSystemConfigChange:p,postCreate:g}=t,h=Kpe(),v=she(),C=await _r(),w;if(i.type!=="wsl"&&the())try{w=await ex(void 0,c,n.extensionPath,C,u.product,hn,m,Si)}catch(S){m.write("Could not connect to WSL."),m.write((S==null?void 0:S.message)||String(S)),S!=null&&S.stdout&&m.write(S.stdout.toString()),S!=null&&S.stderr&&m.write(S.stderr.toString())}let y={computeExtensionHostEnv:!0,...u,appRoot:K.env.appRoot,localCacheFolder:C,containerSessionDataFolder:hm.posix.join("/tmp",`devcontainers-${v}`),extensionPath:n.extensionPath,sessionId:v,sessionStart:r,authority:e,cliHost:i,hostConfig:await nC(i,m),env:s,cwd:a,isLocalContainer:l,getAdditionalExtensionsToInstall:zpe.bind(void 0),additionalFeaturesToInstall:x5(),isCopyGitConfigEnabled:Jpe(),credentialHelperConfigLocation:Xpe(),isDockerCredentialHelperEnabled:Zpe(),isGitHubCLILoginWithTokenEnabled:Qpe(),dotfilesConfiguration:rhe(),progress:mhe(o),onDidInput:f,output:m,logFilePath:d,allowSystemConfigChange:p,defaultUserEnvProbe:"loginInteractiveShell",postCreate:g,getTelemetryLevel:()=>u.getTelemetryLevel(),forwardServerPort:!0,web:h,getLogLevel:wm,onDidChangeLogLevel:nhe,loadNativeModule:hn,shutdowns:[],forwardedPorts:new Set,backgroundTasks:[],setWorkspaceName:S=>ahe(y,S),openTunnel:che,getTunnels:()=>Promise.resolve(K.workspace.tunnels),onAdoptProcess:K.window.onDidOpenTerminal,persistedFolder:await ZG(i,n.globalStoragePath),alternateDownload:Si,skipPostAttach:!1,wslCLIHost:w,localWaylandSocket:l?await lhe(i,w,m):void 0,globalState:n.globalState};return y.hostConfig.pauseResolver&&await C5(i,m),y}async function lhe(t,e,n){if(!ehe())return;let r=await MR(t);if(r)return r;let o=e&&await MR(e);if(o)return GV(e,o,n)}async function Si(t,e){let n=await K.commands.executeCommand("_workbench.downloadResource",K.Uri.parse(t));if(!n)throw new pe({description:He.l10n.t("Downloading the VS Code Server failed. Please try again later.")});await sl(n.fsPath,e)}var Zu=`[${He.l10n.t("Connecting to Dev Container (show log)")}](command:${it} "${He.l10n.t("Show details in terminal")}")`,uhe=`[${He.l10n.t("Configuring Dev Container (show log)")}](command:${jF} "${He.l10n.t("Show details in terminal")}")`,fhe=`[${He.l10n.t("Reading Dev Container Configuration (show log)")}](command:${it} "${He.l10n.t("Show details in terminal")}")`,dhe={0:"",1:He.l10n.t("Cloning Repository"),2:He.l10n.t("Building image"),3:He.l10n.t("Starting container"),4:He.l10n.t("Installing server"),5:He.l10n.t("Starting server"),6:""};function mhe(t){let e=0;return n=>{let r=6-n,o=(100-e)/(r+1);t.report({message:dhe[n],increment:o}),e+=o}}function k5(t,e,n){let{name:r,publisher:o,version:i,aiKey:s}=e;if(!s)return l1(e,n);let a=o?`${o}.${r}`:r,c=new zy(s);t.subscriptions.push(c);let l=new $F(c),u=phe(n),f=p5()?(0,Ku.getExperimentationService)(a,i,u,l,t.globalState):void 0;return{sendTelemetryEvent:l.sendTelemetryEvent.bind(l),isCachedFlightEnabled:async m=>f&&p5()?f.isCachedFlightEnabled(m):!1,product:n,package:e,getTelemetryLevel:()=>c.telemetryLevel}}var $F=class{constructor(e){this.baseReporter=e}sharedProperties={};sendTelemetryEvent(e,n,r){this.baseReporter.sendTelemetryEvent(e,{...this.sharedProperties,...n},r)}setSharedProperty(e,n){this.sharedProperties[e]=n}postEvent(e,n){let r={};for(let[o,i]of n)r[o]=i;this.sendTelemetryEvent(e,r)}};function phe(t){switch(t.quality){case"stable":return Ku.TargetPopulation.Public;case"insider":return Ku.TargetPopulation.Insiders;case"exploration":return Ku.TargetPopulation.Internal;case void 0:return Ku.TargetPopulation.Team;default:return Ku.TargetPopulation.Public}}var iC=He.l10n.t("Opening a folder in a Dev Container may execute arbitrary code both inside and outside the container."),HF="userConfirmedCloneRepositoryInDevContainerRequiresTrust";async function sC(t,e){if(e!=null&&e.toLowerCase().startsWith("https://github.com/microsoft/vscode-remote-try-")||t.globalState.get(HF))return!0;let n=He.l10n.t("Got It"),r=He.l10n.t("Learn More"),o=await K.window.showWarningMessage(He.l10n.t("Cloning a repository in a Dev Container may execute arbitrary code."),{modal:!0,detail:He.l10n.t("Only clone a repository in a Dev Container if you trust its authors.")},n,r);return o===n?(await t.globalState.update(HF,!0),!0):(o===r&&K.env.openExternal(K.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}var BF="userConfirmedAttachToContainerRequiresTrust";async function $s(t){if(t.globalState.get(BF))return!0;let e=He.l10n.t("Got It"),n=He.l10n.t("Learn More"),r=await K.window.showWarningMessage(He.l10n.t("Attaching to a container may execute arbitrary code."),{modal:!0,detail:He.l10n.t("Only attach to a container if you trust its origin.")},e,n);return r===e?(await t.globalState.update(BF,!0),!0):(r===n&&K.env.openExternal(K.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}function N5(t){t.globalState.setKeysForSync([HF,BF,WF])}function L5(){let t=process.env.PATH||"";process.platform==="darwin"&&!/(^|:)\/usr\/local\/bin(:|$)/i.test(t)&&(process.env.PATH=`${t}:/usr/local/bin`)}var WF="updatedToPreRelease2",hhe="2022-01-19T05:14:31.474Z";async function A5(t,e){try{e.quality==="insider"&&e.date&&e.date.localeCompare(hhe)>=0&&!t.globalState.get(WF,!1)&&(await t.globalState.update(WF,!0),await K.commands.executeCommand("workbench.extensions.installExtension","ms-vscode-remote.remote-containers",{installPreReleaseVersion:!0}))}catch(n){console.error(n)}}async function cg(t,e,n,r){try{return await Kx(t,e,n,wm(),void 0,void 0,r,ig())}catch{return}}async function ZF(t,e,n,r){let o=(async()=>{try{return await QG(t,e,n,wm(),x5(),void 0,void 0,r,ig())}catch{return}})(),i=await Promise.race([o,new Promise(s=>setTimeout(()=>s("timeout"),1e3))]);return i!=="timeout"?i:K.window.withProgress({location:K.ProgressLocation.Notification,title:fhe,cancellable:!0},async(s,a)=>Promise.race([o,new Promise(c=>{let l=a.onCancellationRequested(()=>{l.dispose(),c("canceled")})})]))}async function Qu(t){return K.commands.executeCommand("_workbench.addToRecentlyOpened",t)}async function F5(t,e,n,r){try{return await $p(e,t.globalState,n,r),!0}catch(o){if(!(o instanceof pe))throw o;let i=He.l10n.t("Learn More");return await K.window.showWarningMessage(o.description,{modal:!0,detail:o.detail},...o.data.learnMoreUrl?[i]:[])===i&&await K.env.openExternal(K.Uri.parse(o.data.learnMoreUrl)),!1}}async function O5(t,e){let n="";for(let r=ou(K.env.remoteAuthority);r;r=ou(r.parentAuthority)){let o=r.name==="tunnel"?await K.extensions.getExtension("ms-vscode.remote-server"):r.name==="ssh-remote"?await K.extensions.getExtension("ms-vscode-remote.remote-ssh"):void 0;o&&(n+=` over ${o.packageJSON.displayName} ${o.packageJSON.version}`)}return`Dev Containers ${t.version}${n} in VS Code ${K.version} (${e.commit||"out-of-source"}).`}function U5(t){s0()&&(async()=>await Promise.race([t,new Promise(n=>setTimeout(()=>n("timeout"),1e4))])==="timeout"&&await K.window.withProgress({location:K.ProgressLocation.Notification,title:`[${He.l10n.t("Dev Containers waiting for connection request (show log)")}](command:${it} "${He.l10n.t("Show details in terminal")}")`},async()=>t))()}var ghe=["dev-container","attached-container","k8s-container","apple-container"];function s0(){return K.env.remoteName&&ghe.includes(K.env.remoteName)}var nl={id:"openDocumentation",title:xi.l10n.t("Open Documentation"),isLastAction:!1,applicable:(t,e)=>!e,execute:async t=>{await $t.env.openExternal($t.Uri.parse("https://aka.ms/vscode-remote/container/resolve-failed"))}},rl={id:"reloadWindow",title:xi.l10n.t("Reload Window"),isLastAction:!0,applicable:(t,e)=>!e&&t.data.reload!==!1,execute:async t=>{t.manageContainer&&t.dockerParams&&t.containerId&&await et(t.dockerParams,"stop","-t","0",t.containerId),await $t.commands.executeCommand("workbench.action.reloadWindow")}},$5={id:"rebuildContainer",title:xi.l10n.t("Rebuild Container"),isLastAction:!0,applicable:(t,e)=>t.manageContainer&&!!t.dockerParams&&!!t.containerId&&!e&&!(t.params&&"hostConfig"in t.params&&!t.params.hostConfig.canRebuildContainer),execute:async t=>{await Hi(t.dockerParams,t.containerId),await $t.commands.executeCommand("workbench.action.reloadWindow")}},ef={id:"openRecent",title:xi.l10n.t("Open Recent..."),isLastAction:!0,applicable:(t,e)=>!e,execute:async t=>{await $t.commands.executeCommand("workbench.action.openRecent")}},H5={id:"startContainer",title:xi.l10n.t("Start Container"),isLastAction:!0,applicable:t=>!!t.dockerParams&&!!t.containerId&&t.data.start===!0,execute:async t=>{await et(t.dockerParams,"start",t.containerId),await $t.commands.executeCommand("workbench.action.reloadWindow")}},B5={id:"chooseContainer",title:xi.l10n.t("Choose Container"),isLastAction:!0,applicable:t=>t.data.attach===!0,execute:async()=>{await $t.commands.executeCommand("remote-containers.attachToRunningContainer")}},Ma={id:"closeRemote",title:xi.l10n.t("Close Remote"),isLastAction:!0,applicable:(t,e)=>{if(!e)return!1;let n=$t.workspace.workspaceFile;return!(n&&n.scheme==="untitled"||$t.workspace.textDocuments.some(o=>o.isDirty))},execute:async t=>{await $t.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null})}},tf=[{id:"retry",title:xi.l10n.t("Retry"),isLastAction:!0,applicable:(t,e)=>e&&t.data.reload!==!1,execute:rl.execute},{id:"moreActions",title:xi.l10n.t("More Actions..."),isCloseAffordance:!0,isLastAction:!1,applicable:(t,e)=>e,execute:async t=>{}},{id:"learnMore",title:xi.l10n.t("Learn More"),isLastAction:!1,applicable:(t,e)=>e&&!!t.data.learnMoreUrl,async execute(t){await $t.env.openExternal($t.Uri.parse(t.data.learnMoreUrl))}}];async function $a(t,e,n,r=!1,o){var d,p,g,h,v,C;let i=t instanceof pe?t:new pe({description:xi.l10n.t("An error occurred setting up the container."),originalError:t});$t.commands.executeCommand(it);let s=i.originalError&&(i.originalError.stack||i.originalError.message)||i.originalError;if(s!==void 0){o.write(ot(String(s)));let w=(p=(d=i.originalError)==null?void 0:d.stdout)==null?void 0:p.toString().trim();w&&o.write(w);let y=(h=(g=i.originalError)==null?void 0:g.stderr)==null?void 0:h.toString().trim();y&&o.write(ot(y)),(v=i.originalError)!=null&&v.code&&o.write(`Exit code ${(C=i.originalError)==null?void 0:C.code}`)}if(i.data.closeRemote)throw await $t.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),$t.RemoteAuthorityResolverError.NotAvailable(void 0,!1);let a=i.actions;a.length||(a=[nl]);let c=await a.reduce(async(w,y)=>await y.applicable(i,!0)?[...await w,y]:w,Promise.resolve([])),l=await $t.window.showErrorMessage(i.description,{modal:!0,detail:i.detail},...c);if(l&&(M5(n,e,l.id),await l.execute(i)),l&&l.isLastAction){if(r)throw $t.RemoteAuthorityResolverError.NotAvailable(void 0,!0);return}let u=await a.reduce(async(w,y)=>await y.applicable(i,!1)?[...await w,y]:w,Promise.resolve([])),f=u.map(w=>({label:w.title,action:w}));async function m(){let y=await(u.length?$t.window.showQuickPick(f,{ignoreFocusOut:!0,placeHolder:xi.l10n.t("Pick an action to help resolve the problem.")}):Promise.resolve(void 0));y&&(M5(n,e,y.action.id),y.action.execute(i).catch(console.error),y.action.isLastAction||await m())}if(m().catch(console.error),r)throw $t.RemoteAuthorityResolverError.NotAvailable(void 0,!0)}function M5(t,e,n){t.sendTelemetryEvent("errorAction",{resolver:e,action:n})}var gn=Y(require("vscode")),Kt=require("vscode"),Ha=Y(require("path"));var fe=Y(require("vscode")),zt=require("vscode");var i8=Y(DT());function W5(t){var e;return(e=t.options)!=null&&e.version?"version":void 0}var pg=Y(require("path"));async function nf(t){let r=await zx({type:"GET",url:"https://containers.dev/static/devcontainer-index.json",headers:{"user-agent":"devcontainers-vscode",Accept:"application/json"}},t),o=Me(r.toString());return o.collections.find(i=>i.templates.length)||t.write("No container templates retrieved from index.",5),o.collections.find(i=>i.features.length)||t.write("No container features retrieved from index.",5),o}var Lt=Y(require("vscode")),st=require("vscode"),uC=Y(require("os"));var lC=Y(require("path"));var In=Y(require("vscode")),Gt=require("vscode");var j5=Gt.l10n.t("Keep Defaults"),vhe=Gt.l10n.t("Configure Options"),aC={iconPath:new In.ThemeIcon("check-all"),tooltip:Gt.l10n.t("Finish")},QF=["devcontainers","microsoft","github"];async function lg(t,e,n,r=[],o,i=!0,s=!1){if(!e.length)return{};let a={iconPath:new In.ThemeIcon("info"),tooltip:Gt.l10n.t("Open Documentation")},c=t.quickPick.onDidTriggerItemButton(y=>{let S=y.item.feature.documentationURL;In.env.openExternal(In.Uri.parse(S))}),l=await o,u=Gt.l10n.t("Suggested by GitHub Copilot"),f=e.map(y=>{let S=r.indexOf(y)!==-1,D;if(S)D=Gt.l10n.t("$(lock) Feature is included in base image and cannot be removed");else if(y.owner){let A=y.owner==="devcontainers"?"$(verified)":"";D=`${y.owner||Gt.l10n.t("Unknown Publisher")} ${A}`}else D=void 0;let _=l==null?void 0:l.features.includes(y);return{label:_?`$(sparkle) ${y.name}`:y.name,detail:y.description,description:_?D?`${D} ${u}`:u:D,picked:n.indexOf(y)!==-1,buttons:y.documentationURL?[a]:void 0,feature:y,isAlreadyInstalledViaBaseImage:S,kind:In.QuickPickItemKind.Default}}).sort((y,S)=>{if(y.isAlreadyInstalledViaBaseImage!==S.isAlreadyInstalledViaBaseImage)return y.isAlreadyInstalledViaBaseImage?1:-1;let D=l==null?void 0:l.features.includes(y.feature),_=l==null?void 0:l.features.includes(S.feature);return D!==_?D?-1:1:y.label.localeCompare(S.label)}),m,d=t.quickPick,{matchOnDetail:p}=d;try{d.matchOnDetail=!0;let y=[];s&&y.push(In.QuickInputButtons.Back),i&&y.push(aC),m=await Eo(d,f,Gt.l10n.t("Select additional features to install"),Gt.l10n.t("Select Features"),!0,y)}finally{d.matchOnDetail=p}if(c.dispose(),!m)return;if(m.button===In.QuickInputButtons.Back)return"back";let g=m.pick.filter(y=>!y.isAlreadyInstalledViaBaseImage).map(y=>y.feature),h={};if(!g.length)return h;let v=[];for(let y of e){let S=g.indexOf(y)!==-1;h[y.id]=S?{}:!1,S&&QF.indexOf(y.owner)===-1&&v.push(y)}if(t.askForTrust&&v.length){let y=[...new Set(v.map(E=>E.owner))].sort().map(E=>`@${E}`),S=y.length===1?y[0]:`${y.slice(0,-1).join(", ")} and ${y[y.length-1]}`,D={label:Gt.l10n.t("Trust {0}",S),description:Gt.l10n.t("from GitHub"),buttons:[{iconPath:new In.ThemeIcon("info"),tooltip:Gt.l10n.t("Open Documentation")}]},_={label:Gt.l10n.t("Back")},A={label:Gt.l10n.t("Cancel")},U=d.onDidTriggerItemButton(()=>{for(let E of v)In.env.openExternal(In.Uri.parse(E.documentationURL))}),k=await Eo(d,[D,_,A],Gt.l10n.t("Some features are from the {0} GitHub owner/organization(s).",S),void 0,void 0,!0);if(U.dispose(),!k||k===A)return;if(k==="back"||k===_)return lg(t,e,n,r,o,i,s)}return m.button===aC||!i||!g.some(y=>{let S=y.options;return S&&Object.keys(S).some(D=>{let _=S[D];return _.type==="boolean"||_.type==="string"&&("enum"in _&&(_.enum||[]).length>1||"proposals"in _&&(_.proposals||[]).length>1)})})||await In.window.showQuickPick([j5,vhe],{title:Gt.l10n.t("Keep Feature defaults or configure options?"),canPickMany:!1})===j5?h:whe(t,h,g,()=>lg(t,e,n,r,o))}async function whe(t,e,n,r){return(async function o(i,s,a){if(!s.length)return i;let c=s[0],l=i;if(!(c!=null&&c.options))return o(l,s.slice(1),a);let u,f;return u=await yhe(t,l,c),u&&(f=await Che(t,u,c,a)),!u||!f?await a():o(f,s.slice(1),a)})(e,n,r)}async function yhe(t,e,n){let r=n==null?void 0:n.options;if(!r)return e;let i=Object.keys(r).filter(l=>{var u;return((u=r[l])==null?void 0:u.type)==="boolean"}).map(l=>{let u=r[l];return{label:l,description:u.description,key:l,value:!0,picked:!!(u!=null&&u.default)}});if(!i.length)return e;let s=n.id,a=n.name||s,c=await Eo(t.quickPick,i,Gt.l10n.t("Select boolean options for {0}",a),Gt.l10n.t("Select boolean options for '{0}'",a),!0,[In.QuickInputButtons.Back,aC]);if(!(!c||c.button===In.QuickInputButtons.Back))return c.pick.reduce((l,u)=>({...l,[s]:{...l==null?void 0:l[s],[u.key]:u.value}}),e)}async function Che(t,e,n,r){let o=n==null?void 0:n.options;if(!o)return e;let i=n.id,s=n.name||i;return(async function a(c,l,u){if(!l.length)return c;let f=l[0],m=o[f],d=("enum"in m&&m.enum||"proposals"in m&&m.proposals||[]).map(v=>({label:String(v),value:v,description:m.default===v?Gt.l10n.t("(default)"):void 0}));if(d.length===0)return a(c,l.slice(1),u);let p="enum"in m?void 0:v=>{if(!(!v||d.some(C=>C.value===v)))return{label:Gt.l10n.t("Use: {0}",v),value:v,description:Gt.l10n.t("(custom)")}},g=d.length===1?{pick:d[0],button:"ok"}:await Eo(t.quickPick,d,m.description||Gt.l10n.t("Select a value"),Gt.l10n.t("Select options for '{0}'",s),void 0,[In.QuickInputButtons.Back,aC],p);if(!g||g.button===In.QuickInputButtons.Back)return;let h={...c,[i]:{...c==null?void 0:c[i],[f]:g.pick.value}};return g.button===aC?h:a(h,l.slice(1),u)})(e,Object.keys(o).filter(a=>{var c;return((c=o[a])==null?void 0:c.type)==="string"}),r)}var Ehe=["png","md","json","txt","map"],She=["node_modules",".git","bin","out","dist",".vscode-test"],xhe=[{tag:"function.json",pattern:/^function\.json$/i},{tag:"package.json",pattern:/^package\.json$/i},{tag:"sln",pattern:/^.+\.sln$/i},{tag:"project.json",pattern:/^project\.json$/i},{tag:"csproj",pattern:/^.+\.csproj$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"amlignore",pattern:/^.+\.amlignore$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"environment.yml",pattern:/^environment\.yml$/i},{tag:"_config.yml",pattern:/^_config\.yml$/i},{tag:"_config.toml",pattern:/^_config\.toml$/i},{tag:"server.xml",pattern:/^server\.xml$/i},{tag:"web.xml",pattern:/^web\.xml$/i}],V5={"Node.js":["package.json"],".NET Core":["sln","project.json","csproj"],"Azure Functions":["function.json"],"Azure Machine Learning":["azureml","amlignore"],Anaconda:["environment.yml"],Jekyll:["_config.yml","_config.toml"],Tomcat:["server.xml","web.xml"],Dapr:[]},Y5={"C#":["cs"],"C++":["cpp","cxx",".cc","c++"],"F#":["fs"],JavaScript:["js"],TypeScript:["ts"],Java:["java"],Elm:["elm"],Go:["go"],Python:["py","ipynb"],Ruby:["rb"],Perl:["pl"],PHP:["php"],R:["r"],PowerShell:["ps1"],Dart:["dart"],Rust:["rs"],Swift:["swift"],ReasonML:["re"],TerraForm:["tf"]},_he=["ghcr.io/devcontainers/templates/docker-existing-docker-compose","ghcr.io/devcontainers/templates/docker-existing-dockerfile","ghcr.io/devcontainers/templates/codespaces-linux"];function q5(t,e){let n=new Map;for(let r of e)if(r.platforms){if(_he.indexOf(r.id)>-1)continue;let o=0,i=0,s=r.platforms;if(s[0]==="Any")o+=5;else for(let a of s)if(Y5[a]){let c=Y5[a];for(let l of c)t.fileTypes.get(l.toLowerCase())&&(o+=10),t.mostPopularFileType===l&&(o+=10)}else if(V5[a]){let c=V5[a],l=!1;for(let u of c)t.configFiles.get(u)&&(l=!0,i+=20);l||(i-=20)}n.set(r,o+(i<0?-4:i))}return n}async function G5(t,e){return Dhe(t,e.rootFolderPath,She,Ehe)}async function Dhe(t,e,n,r){let o=new Map,i=new Map,s=500;function a(d,p,g,h){let v=[];(t.readDirWithTypes||t.readDir)(d).then(w=>{if(g.count>=s)return g.count+=w.length,g.maxReached=!0,h(v);let y=w.length;if(y===0)return h(v);let S=w;g.count+w.length>s&&(g.maxReached=!0,y=s-g.count,S=w.slice(0,y)),g.count+=w.length;for(let D of S){let _=Array.isArray(D)?D[0]:D;(Array.isArray(D)?Promise.resolve((D[1]&1)!==0):t.isFile(t.path.join(d,_))).then(U=>{U?(v.push(_),--y===0&&h(v)):p.indexOf(_)===-1?a(t.path.join(d,_),p,g,k=>{if(v=v.concat(k),--y===0)return h(v)}):--y===0&&h(v)},()=>{if(--y===0)return h(v)})}},()=>h(v))}let c=d=>{o.has(d)?o.set(d,o.get(d)+1):o.set(d,1)},l=d=>{for(let p of xhe)p.pattern.test(d)&&(i.has(p.tag)?i.set(p.tag,i.get(p.tag)+1):i.set(p.tag,1))},u=d=>{if(d.lastIndexOf(".")>=0){let p=d.split(".").pop();p&&!r.includes(p)&&c(p.toLowerCase())}l(d)},f=d=>[...d.entries()].reduce((p,g)=>g[1]>p[1]?g:p,["",0])[0],m={count:0,maxReached:!1};return new Promise((d,p)=>{a(e,n,m,async g=>{g.forEach(u),d({configFiles:i,fileTypes:o,fileCount:m.count,mostPopularFileType:f(o)})})})}var _i=Y(require("vscode")),a0=require("vscode");var cC={"ghcr.io/devcontainers/templates/anaconda":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/kubernetes-helm":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/docker-outside-of-docker","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/kubectl-helm-minikube"],"ghcr.io/devcontainers/templates/alpine":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/docker-outside-of-docker-compose":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/docker-outside-of-docker","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/jekyll":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/ruby"],"ghcr.io/devcontainers/templates/docker-outside-of-docker":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/docker-outside-of-docker","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/docker-in-docker":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/docker-in-docker","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/go":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/go","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/dotnet-fsharp":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/debian":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/rust-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/rust"],"ghcr.io/devcontainers/templates/universal":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/conda","ghcr.io/devcontainers/features/docker-in-docker","ghcr.io/devcontainers/features/dotnet","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/git-lfs","ghcr.io/devcontainers/features/github-cli","ghcr.io/devcontainers/features/go","ghcr.io/devcontainers/features/hugo","ghcr.io/devcontainers/features/java","ghcr.io/devcontainers/features/kubectl-helm-minikube","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/oryx","ghcr.io/devcontainers/features/php","ghcr.io/devcontainers/features/python","ghcr.io/devcontainers/features/ruby","ghcr.io/devcontainers/features/sshd"],"ghcr.io/devcontainers/templates/python":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/python"],"ghcr.io/devcontainers/templates/markdown":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/dotnet-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/rust":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/rust"],"ghcr.io/devcontainers/templates/java-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/java","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/java":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/java","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/anaconda-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/php":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/dotnet":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/powershell":["ghcr.io/devcontainers/features/common-utils"],"ghcr.io/devcontainers/templates/kubernetes-helm-minikube":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/docker-in-docker","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/kubectl-helm-minikube"],"ghcr.io/devcontainers/templates/postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/python"],"ghcr.io/devcontainers/templates/ruby-rails-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/ruby"],"ghcr.io/devcontainers/templates/cpp-mariadb":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/cpp":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/dotnet-mssql":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/miniconda-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/python"],"ghcr.io/devcontainers/templates/typescript-node":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/javascript-node-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/ubuntu":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/php-mariadb":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/miniconda":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/python"],"ghcr.io/devcontainers/templates/ruby":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/ruby"],"ghcr.io/devcontainers/templates/go-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/go","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/javascript-node":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/javascript-node-mongo":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"]};async function K5(t,e,n,r,o){var u;let i=await eO(t,e,n);if(i.type==="cancelled")return;if(i.type==="failure"){let f=a0.l10n.t("OK");return await _i.window.showInformationMessage(_i.l10n.t("Something went wrong. Please pick a Dev Container configuration yourself."),{modal:!0,detail:i.message},f)===f||void 0}if(!i.template){let f=a0.l10n.t("OK");return await _i.window.showInformationMessage(_i.l10n.t("GitHub Copilot did not have enough contextual information. Please pick a Dev Container configuration yourself."),{modal:!0},f)===f||void 0}let s=i.template,a=await tO(t,{id:s,name:s},void 0),c=new Set(cC[s]||[]);a.features=((u=i.features)==null?void 0:u.filter(f=>!c.has(f)).map(f=>({id:f,copilotSuggested:!0,options:{}})))||[];let l=await ug(t,e,r,o,a);return l&&Jo(t.telemetry,"copilot",a,o),l}var J5="github.copilot.devcontainer.generateDevContainerConfig",z5=6e3;async function eO(t,e,n){var i,s;let r={index:{templates:((i=t.index)==null?void 0:i.collections.filter(a=>a.sourceInformation.repository==="https://github.com/devcontainers/templates").map(a=>a.templates).flat().filter(a=>!fg.includes(a.id)).map(({id:a,name:c,description:l})=>({id:a,name:c,description:l})))||[],features:((s=t.index)==null?void 0:s.collections.filter(a=>a.sourceInformation.repository==="https://github.com/devcontainers/features").map(a=>a.features).flat().filter(a=>!a.deprecated).map(({id:a,name:c,description:l})=>({id:a,name:c,description:l})))||[]},rootUri:_i.Uri.parse((await e.toCommonURI(n.rootFolderPath)).toString())},o=new _i.CancellationTokenSource;try{return await Promise.race([_i.commands.executeCommand(J5,r,o.token),Wt(z5).then(()=>(o.cancel(),{type:"failure",message:a0.l10n.t("Timeout after {0} seconds.",z5/1e3)}))])}catch(a){return{type:"failure",message:(a==null?void 0:a.message)||String(a)}}finally{o.dispose()}}async function X5(){return(await _i.commands.getCommands()).includes(J5)}var nO=lC.default.join(__dirname,"..",".."),Z5=Lt.env.appRoot,Ihe=t=>jf(t,Z5);async function mg(t,e){let{fileHost:n,output:r}=t;r.write("Entering createDevContainerConfig_v2");let o=await o8();if(o){let i=_e(o,n.platform),s=It(n.path,i),a=await TS(n,s);if(a){let l=st.l10n.t("Continue");if(await Lt.window.showInformationMessage(st.l10n.t("The workspace could fail to open in a container: {0}",a),{modal:!0},l)!==l)return!1}let c=await iO(t,s,void 0,void 0,e);if(c){let l=await n.toCommonURI(c);l&&Lt.window.showTextDocument(Lt.Uri.parse(l.toString()))}return!!c}return!1}async function ug(t,e,n,r,o,i=(s,a)=>a){return Lt.window.withProgress({location:Lt.ProgressLocation.Notification,title:st.l10n.t("Adding Dev Container Configuration Files..."),cancellable:!1},async()=>oO(t,e,n,r,o,i))}async function Q5(t){let{output:e}=t,n={executeInWSL:"forWSLPath",defaultDistro:void 0},r=await _r(),o=process.cwd();return{cliHost:await Xr(void 0,void 0,o,Ihe,n,nO,r,t.telemetry.product,e,void 0,void 0),dockerPath:"",dockerComposePath:"",extensionPath:nO,appRoot:Z5,output:e,package:await cr(nO)}}async function oO(t,e,n,r,o,i=(s,a)=>a){let{output:s}=t;s.write(`Preparing to apply Template '${o==null?void 0:o.id}'`);let a=lC.default.join(uC.tmpdir(),`tmp-output-dir-${Date.now()}`),c=lC.default.join(uC.tmpdir(),`tmp-dir-${Date.now()}`);t.quickPick.busy=!0,t.quickPick.enabled=!1;let l=await Q5(t),u;try{u=await ii(l,["templates","apply","--workspace-folder",a,"--template-id",o.id,"--template-args",o.options?JSON.stringify(o.options):"{}","--features",o.features?JSON.stringify(o.features):"[]","--tmp-dir",c,"--log-level",ro(Zy()),"--omit-paths",o.omitPaths?JSON.stringify(o.omitPaths):"[]"])}catch{let d=st.l10n.t("Show Log");await Lt.window.showErrorMessage(st.l10n.t("Application of the template failed."),{modal:!0},...t.showLogCommandId?[d]:[])===d&&Lt.commands.executeCommand(t.showLogCommandId);return}let f=st.l10n.t("Skip"),m;for(let d of u.files){s.write(`Copying file '${d}'`,1);let p=e.path.join(n,d);if(await e.isFile(p)){let v=r==="userData"?Jy(e.platform,p,uC.homedir()):d,C=await Lt.window.showInformationMessage(st.l10n.t("File '{0}' already exists, overwrite?",v),{modal:!0},f,st.l10n.t("Overwrite"));if(!C)return;if(C===f)continue}await e.mkdirp(e.path.dirname(p));let g=await at(lC.default.join(a,d)),h=i(d,g);await e.writeFile(p,h),!m&&ew(e.path,d)&&(m=p)}return s.write("Cleaning up...",1),await cl(a,{recursive:!0,force:!0}),await cl(c,{recursive:!0,force:!0}),t.quickPick.busy=!1,t.quickPick.enabled=!0,m}async function iO(t,e,n,r,o){let{fileHost:i,telemetry:s}=t,a=await sO(t,n,!1);if(r){Jo(await s,"existsMissingImageInfo");let d=_e(r,i.platform);if(!await Lt.window.showWarningMessage(st.l10n.t("Dev Container configuration '{0}' file is missing image information. You can add this manually or overwrite with a template.",i.path.relative(e.configFolderPath,d)),{modal:!0},st.l10n.t("Use Template"))){let g=await i.toCommonURI(d);g&&Lt.window.showTextDocument(Lt.Uri.parse(g.toString()));return}}let c,l,u="workspace";if(t.userDataFolderForConfigurations){c=await AF(i,e,t.userDataFolderForConfigurations);let d=c&&await Gf(i,c),p={label:st.l10n.t("Add configuration to user data folder"),description:d?st.l10n.t("Configuration already exists"):void 0,detail:st.l10n.t("This avoids having outgoing changes in your workspace folder")},g=await Gf(i,e.configFolderPath),h={label:st.l10n.t("Add configuration to workspace"),description:g?st.l10n.t("Configuration already exists"):void 0,detail:st.l10n.t("This allows you to share the configuration with others via source control")},v=await Eo(a.quickPick,[h,p],st.l10n.t("Where would you like to create your container configuration?"));if(!v)return;v===p&&(l=c||s5(i,e,t.userDataFolderForConfigurations),u="userData")}else if(!r){let d=await l0(i,e);if(d){Jo(await s,"exists");let p=_e(d.uri,i.platform);if(!await Lt.window.showWarningMessage(st.l10n.t("Dev Container configuration '{0}' file already exists.",i.path.relative(e.configFolderPath,p)),{modal:!0},st.l10n.t("Continue"))){let h=await i.toCommonURI(p);h&&Lt.window.showTextDocument(Lt.Uri.parse(h.toString()));return}}}let f=l||e.configFolderPath,m;if((o==null?void 0:o.picker)==="copilot"){let d=await K5(a,i,e,f,u);d===!0&&(d=await dg(a,i,e,f,u,void 0)),m=d}else m=await dg(a,i,e,f,u,void 0);if(m&&l&&!c){let d=await a5(i,e,t.userDataFolderForConfigurations,l);m=i.path.resolve(d,i.path.relative(l,m))}return a.quickPick.hide(),m}async function sO(t,e,n){let r=Lt.window.createQuickPick();r.ignoreFocusOut=!0,e&&(r.title=e);let o=await nf(t.output);return{existingFilesLearnMoreLink:n8,predefinedDefinitionsLearnMoreLink:r8,...t,quickPick:r,replaceExistingConfig:!0,existingConfig:void 0,telemetry:await t.telemetry,index:o,skipOptions:n}}async function e8(t,e,n,r,o,i,s){if(!t.index)return;let c=await c0(t,e,n,i);if(!c)return;if(c==="back")return s?s():void 0;let l=await ug(t,e,r,o,c);return l&&Jo(t.telemetry,"definition",c,o),l}var fg=["ghcr.io/devcontainers/templates/docker-existing-docker-compose","ghcr.io/devcontainers/templates/docker-existing-dockerfile"];async function c0(t,e,n,r){let{index:o}=t,i=((o==null?void 0:o.collections.map(l=>l.templates).flat())||[]).filter(l=>!fg.includes(l.id));if(!(i!=null&&i.length))return;let s=()=>c0(t,e,n,r),a=await Phe(t,e,n,i);if(!(a!=null&&a.length))return rO(t,[],i,r,s);let c=[{label:st.l10n.t("Show All Templates..."),detail:st.l10n.t("Show all available predefined container templates."),alwaysShow:!0,type:"showAll"}];return rO(t,c,a,r,s)}async function Phe(t,e,n,r){r=r.filter(a=>a.owner==="devcontainers");let o=t.stats||e&&n&&(t.stats=await G5(e,n));if(!(o!=null&&o.mostPopularFileType.length))return;let i=q5(o,r);return r.filter(a=>(i.get(a)||0)>0).sort(bhe.bind(null,i))}function bhe(t,e,n){let r=t.get(n)||0,o=t.get(e)||0;return r-o}async function rO(t,e,n,r,o){let{index:i,predefinedDefinitionsLearnMoreLink:s,telemetry:a}=t,c={iconPath:new Lt.ThemeIcon("info"),tooltip:st.l10n.t("Open Documentation")},l=t.quickPick.onDidTriggerItemButton(p=>{let g=p.item.template.documentationURL;Lt.env.openExternal(Lt.Uri.parse(g))}),u=(async()=>{let p=await r,g=n;p!=null&&p.template&&n.indexOf(p.template)===-1&&(g=[p.template,...n]);let h=st.l10n.t("Suggested by GitHub Copilot"),v=g.map(w=>{let y;if(w.owner){let D=(w==null?void 0:w.owner)==="devcontainers"?"$(verified)":"";y=`${((w==null?void 0:w.owner)==="microsoft"&&w.id.includes("microsoft/vscode-dev-containers")?st.l10n.t("community"):w==null?void 0:w.owner)||st.l10n.t("Unknown Publisher")} ${D}`}let S=w===(p==null?void 0:p.template);return{label:S?`$(sparkle) ${w.name}`:w.name,picked:n.indexOf(w)!==-1,detail:w==null?void 0:w.description,description:S?y?`${y} ${h}`:h:y,buttons:[c],template:w}}).sort((w,y)=>w===y?0:w.template===(p==null?void 0:p.template)?-1:y.template===(p==null?void 0:p.template)?1:w.label.localeCompare(y.label));return[...e,...s?[cO]:[],...v]})(),f=p=>{let g=p.trim();if(/^\S+(\/\S+){2,}$/.test(g))return{label:st.l10n.t("Use '{0}' as template...",g),detail:st.l10n.t("Apply this custom template instead of one of the listed templates."),templateId:g}},m=st.l10n.t("Select a container configuration template or enter a custom template id"),d=await Eo(t.quickPick,u,m,void 0,void 0,void 0,f);if(l.dispose(),!d){Jo(a,"canceled");return}if(d.type==="help"){Jo(a,"help"),Lt.env.openExternal(s);return}if(d.type==="showAll"){let p=((i==null?void 0:i.collections.map(g=>g.templates).flat())||[]).filter(g=>!fg.includes(g.id));return rO(t,[],p,r,o)}if(d.template)return ym(t,d.template,r.then(p=>{var v,C;if(!p)return;let g=((i==null?void 0:i.collections.map(w=>w.features).flat())||[]).filter(w=>!w.deprecated),h=new Set([...p.features,...p.template&&((v=cC[p.template.id])==null?void 0:v.map(w=>g.find(y=>y.id===w)).filter(w=>!!w))||[]]);return(((C=cC[d.template.id])==null?void 0:C.map(w=>g.find(y=>y.id===w)).filter(w=>!!w))||[]).forEach(w=>h.delete(w)),{template:p.template,features:Array.from(h)}}),o);if(d.templateId)return ym(t,{id:d.templateId,name:d.templateId},r,o)}async function tO(t,e,n){if(!e.version){let r=await The(t,e.id);r&&(e={...r,id:e.id})}return{id:e.id,options:{},features:[],omitPaths:[],metadata:{template:e,features:[],copilotSuggestion:n}}}async function The(t,e){let{output:n}=t;n.write(`Attempting metadata fetch for Template '${e}' from remote manifest`,3);let r=await Q5(t);try{return await ii(r,["templates","metadata",e,"--log-level",ro(Zy())])}catch{n.write(`Metadata for '${e}' not cached on manifest. Some features will be unavailable.`,1),n.write(`Ask the Template owner to republish '${e}' to populate the data`,1);return}}async function ym(t,e,n,r){let o=await tO(t,e,await n),i={...o.metadata.template};if(t.skipOptions)return o;if(!i.options){let u=await aO(t,o,[],n,r);return u?u==="back"?r():u:void 0}let s=i.options,a=[],c=[];for(let u in s){let f=s[u];f.name=u,f.type==="boolean"?a.push(f):f.type==="string"&&c.push(f)}let l=await khe(t,c,o,async()=>"back",(u,f)=>t8(t,a,i.name,u,n,f));if(l==="back")return r();if(l)return l}async function Rhe(t,e,n,r){var o;if((o=e.optionalPaths)!=null&&o.length){let i=e.optionalPaths.map(l=>({label:l,picked:!1})),s=st.l10n.t("Optional Files/Directories"),a=st.l10n.t("Include the following optional files/directories"),c=await Eo(t.quickPick,i,a,s,!0,!0);if(c==="back")return r();c&&(n.omitPaths=i.filter(l=>!c.includes(l)).map(l=>l.label))}return n}async function khe(t,e,n,r,o){let i=e.map(s=>{let a=[];s.proposals&&s.proposals.length>0?a=s.proposals:s.enum&&s.enum.length>0?a=s.enum:s.default&&(a=[s.default]);let c=s.default,l=a.map(f=>({label:f,description:f===c?st.l10n.t("(default)"):void 0,value:f})),u=l.findIndex(f=>f.value===c);return u!==-1&&l.unshift(...l.splice(u,1)),{placeholder:s.description||s.name,name:s.name,default:s.default,enum:"enum"in s,items:l}});return(async function s(a,c,l){if(!a.length)return o(c,l);let u=a[0],f=u.enum?void 0:p=>{if(!(!p||u.items.some(g=>g.value===p)))return{label:st.l10n.t("Use: {0}",p),value:p,description:st.l10n.t("(custom)")}},m=await Eo(t.quickPick,u.items,u.placeholder,void 0,void 0,!0,f);if(!m)return;if(m==="back")return l();let d={...c.options};return d[u.name]=m.value,c.options={...d},s(a.slice(1),c,()=>s(a,c,l))})(i,n,r)}async function t8(t,e,n,r,o,i){let s=r,a=e.map(u=>{let f=u.default==="true";return{label:u.description||u.name,picked:f,name:u.name,default:f}}),c=a.length?await Eo(t.quickPick,a,st.l10n.t("Select the options for the '{0}' dev container",n),void 0,!0,!0):[];if(!c)return r;if(c==="back")return i();for(let u of a){let f=c.indexOf(u)!==-1,m={...r.options};m[u.name]=f.toString(),r.options={...m}}let l=await aO(t,r,[],o,()=>e.length>0?t8(t,e,n,s,o,i):i());if(l)return l==="back"?i():l}async function aO(t,e,n,r,o){let{quickPick:i,telemetry:s,output:a,index:c,askForTrust:l}=t,u=c==null?void 0:c.collections.reduce((g,h)=>g.concat(h.features),[]).filter(g=>!g.deprecated);if(!(u!=null&&u.length))return e;let m=await lg({quickPick:i,askForTrust:l,telemetry:s,output:a},u,n,[],r,!0,!0);if(!m)return;if(m==="back")return o();let d=[],p=[];for(let g in m)if(m[g]){let h=u.find(v=>v.id===g);if(h){p.push(h);let v=h.majorVersion||"latest",C={id:`${g}:${v}`,options:m[g]};d.push(C)}}return e.features=d,e.metadata.features=p,await Rhe(t,e.metadata.template,e,()=>aO(t,e,p,r,o))}function s8(t){return{provideCompletionItems(e,n,r){let o=o1(e.getText(),e.offsetAt(n)),i=e.getWordRangeAtPosition(n)||new fe.Range(n,n);if(o.path[0]==="extensions"||o.path[0]==="vscode"&&o.path[1]==="extensions"){let s=Me(e.getText());return s.configFilePath=e.uri,Nhe(s,i)}if(o.path[0]==="features"){let s=Me(e.getText());s.configFilePath=e.uri;try{return Lhe(t,s,o,i)}catch(a){console.error(a)}}return[]}}}function Nhe(t,e){var r,o;let n=((t==null?void 0:t.extensions)||[]).concat(((o=(r=t==null?void 0:t.customizations)==null?void 0:r.vscode)==null?void 0:o.extensions)||[]);if(Array.isArray(n)){let i=fe.extensions.all.filter(s=>!(s.id.startsWith("vscode.")||s.id==="Microsoft.vscode-markdown"||n.indexOf(s.id)>-1));if(i.length)return i.map(s=>{let a=new fe.CompletionItem(s.id),c=`"${s.id}"`;return a.kind=fe.CompletionItemKind.Value,a.insertText=c,a.range=e,a.filterText=c,a})}}async function Lhe(t,e,n,r){var i;let o=e&&e.features||{};if(typeof o=="object"){if(e.configFilePath.scheme==="vscode-remote"&&t.fileHost.type==="local"){e={...e,configFilePath:e.configFilePath.with({scheme:Ke.scheme,authority:""})};let c=fe.env.remoteName&&fe.env.remoteName!=="test"?"linux":process.platform,l=((i=(fe.workspace.workspaceFolders||[])[0])==null?void 0:i.uri)||Ce.file(process.cwd());t={...t,fileHost:await Oa(c,l)}}let s=await nf(t.output),a=(s==null?void 0:s.collections.map(c=>c.features).flat().filter(c=>!c.deprecated))||[];if(n.path.length===2)if(n.isAtPropertyKey){let c=a.filter(l=>!(l.id in o));if(c.length)return c.map(l=>{let u=new fe.CompletionItem(l.id),f=`"${l.id}": `;return u.kind=fe.CompletionItemKind.Property,u.insertText=f,u.range=r,u.filterText=f,u})}else{let c=n.path[1].toString(),l=a.find(u=>u.id===c||c.startsWith(`${u.id}:`));if(l){let u=W5(l),f=u&&(l.options||{})[u]||{type:"boolean",description:zt.l10n.t("Set to true to install.")},m=(f.type==="string"?("enum"in f&&f.enum||"proposals"in f&&f.proposals||[""]).map(d=>`"${d}"`):["true","false"]).map(d=>({label:d,text:d}));return m.push({label:"{}",text:new fe.SnippetString(`{
	$1
}$0`)}),m.map(({label:d,text:p},g)=>{let h=new fe.CompletionItem(d);return h.kind=fe.CompletionItemKind.Value,h.insertText=p,h.range=r,h.sortText=`${g}_${d}`,h})}}else if(n.path.length===3){let c=n.path[1].toString(),l=a.find(u=>u.id===c||c.startsWith(`${u.id}:`));if(l){let u=l.options||{};if(n.isAtPropertyKey)return Object.keys(u).filter(f=>!(f in(o[c]||{}))).map(f=>{let m=new fe.CompletionItem(f),d=`"${f}": `;return m.kind=fe.CompletionItemKind.Property,m.insertText=d,m.range=r,m.filterText=d,m.detail=u[f].description,m});{let f=n.path[2],m=u[f];if(m)return(m.type==="string"?("enum"in m&&m.enum||"proposals"in m&&m.proposals||[""]).map(p=>`"${p}"`):["true","false"]).map((p,g)=>{let h=new fe.CompletionItem(p),v=p;return h.kind=fe.CompletionItemKind.Value,h.insertText=v,h.range=r,h.filterText=v,h.sortText=`${g}_${p}`,h})}}}}}async function a8(t){let e=await uO(t);if((e==null?void 0:e.scheme)===Ke.scheme){let n=_e(e,t.fileHost.platform);e=await t.fileHost.toCommonURI(n)}e&&await fe.window.showTextDocument(fe.Uri.parse(e.toString()))}async function uO(t){let e=await t.findDevContainerFiles();if(!e.length){let r=zt.l10n.t("Add Files...");await fe.window.showInformationMessage(zt.l10n.t("No container configuration file found."),{modal:!0},r)===r&&await mg(t)&&(e=await t.findDevContainerFiles())}let n=await zu(e);return n!=="cancelled"?n:void 0}async function c8(t,e){var r,o,i,s,a,c,l;let n=await uO(t);if(n){let u=ur(t.fileHost);n.scheme==="file"&&!await Cr(n.fsPath)?await $i(gs,n,[],pc):(n.scheme==="file"||n.scheme==="vscode-remote")&&(u=new Ky);let f=await u.readDocument(n);if(f){let m=!/\.?devcontainer\.json/.test(pg.default.posix.basename(n.path)),d=Me(f),p=!m&&(((o=(r=d.customizations)==null?void 0:r.vscode)==null?void 0:o.extensions)||!d.extensions),g=(p?(s=(i=d.customizations)==null?void 0:i.vscode)==null?void 0:s.extensions:d.extensions)||[],h=t.openConfigurationCommandId?`[${zt.l10n.t("Dev Container configuration")}](command:${t.openConfigurationCommandId})`:zt.l10n.t("Dev Container configuration");if((d.extensions||[]).concat(((c=(a=d.customizations)==null?void 0:a.vscode)==null?void 0:c.extensions)||[]).indexOf(e)===-1){g.push(e);let v,C=Xy(f);p?(l=d.customizations)!=null&&l.vscode?v=bn(f,["customizations","vscode","extensions"],g,{formattingOptions:C}):d.customizations?v=bn(f,["customizations","vscode"],{extensions:g},{formattingOptions:C}):v=bn(f,["customizations"],{vscode:{extensions:g}},{formattingOptions:C}):v=bn(f,["extensions"],g,{formattingOptions:C}),await u.applyEdits(n,v,f),await fe.window.showInformationMessage(zt.l10n.t("Extension has been added to the {0}.",h))}else await fe.window.showInformationMessage(zt.l10n.t("Extension is already included in the {0}.",h))}}}async function l8(t,e){let n=await fe.commands.executeCommand("remote.tunnel.label",e);if(n===void 0)return;let r=n.label,o=n.port,i=await uO(t);if(i){let s=ur(t.fileHost);i.scheme==="file"&&!await Cr(i.fsPath)?await $i(gs,i,[],pc):(i.scheme==="file"||i.scheme==="vscode-remote")&&(s=new Ky);let a=await s.readDocument(i);if(a){let l=Me(a).portsAttributes??{},u=l[`${o}`]??{},f=t.openConfigurationCommandId?`[${zt.l10n.t("Dev Container configuration")}](command:${t.openConfigurationCommandId})`:zt.l10n.t("Dev Container configuration");if(l&&u&&u.label===r)await fe.window.showInformationMessage(zt.l10n.t("Port attributes are already included in the {0}.",f));else{u.label=r,l[`${o}`]=u;let m=Xy(a),d=bn(a,["portsAttributes"],l,{formattingOptions:m});await s.applyEdits(i,d,a),await fe.window.showInformationMessage(zt.l10n.t("Port attributes have been added to the {0}.",f))}}}}function u8(t,e){let n=fe.languages.createDiagnosticCollection("devcontainer"),r=fe.window.activeTextEditor;r&&lO(r.document,n,e.output),t.subscriptions.push(fe.workspace.onDidChangeTextDocument(async o=>{lO(o.document,n,e.output)})),t.subscriptions.push(fe.workspace.onDidOpenTextDocument(async o=>{lO(o,n,e.output)})),t.subscriptions.push(fe.workspace.onDidCreateFiles(async o=>{await Promise.all(o.files.filter(i=>/\.?devcontainer\.json/.test(pg.default.posix.basename(i.path))).map(i=>fe.workspace.openTextDocument(i)))})),t.subscriptions.push(fe.workspace.onDidDeleteFiles(o=>{o.files.forEach(i=>n.forEach(s=>{s.toString().startsWith(i.toString())&&n.delete(s)}))})),t.subscriptions.push(fe.workspace.onDidRenameFiles(async o=>{o.files.forEach(i=>n.forEach(s=>{s.toString().startsWith(i.oldUri.toString())&&n.delete(s)})),await Promise.all(o.files.filter(i=>/\.?devcontainer\.json/.test(pg.default.posix.basename(i.newUri.path))).map(i=>fe.workspace.openTextDocument(i.newUri)))})),(async()=>{let o=await Fa().catch(i=>[]);await Promise.all(o.map(i=>fe.workspace.openTextDocument(i)))})().catch(o=>{e.output.write(`Error opening dev container configurations: ${(o==null?void 0:o.stack)||(o==null?void 0:o.message)||String(o)}`)}),t.subscriptions.push(n)}function f8(t,e,n){let r=async(s,a,c)=>{let l=pg.default.basename(s.uri.fsPath);if(/\.?devcontainer\.json/.test(l)){let u=cf(s.getText());if(!u)return;if((AC(u)||{}).features){let m=s.getText(s.getWordRangeAtPosition(a,/"[^"]*"/)).replace(/"/g,""),d=Fhe(m,e.output,await n());if(d)return{contents:[d],range:s.getWordRangeAtPosition(a,/"[^"]*"/)}}}},o=fe.languages.registerHoverProvider({pattern:"**/devcontainer.json"},{provideHover:r}),i=fe.languages.registerHoverProvider({pattern:"**/.devcontainer.json"},{provideHover:r});return t.subscriptions.push(o),t.subscriptions.push(i),[o,i]}function lO(t,e,n){let r=pg.default.basename(t.uri.fsPath);if(/\.?devcontainer\.json/.test(r)){let o=cf(t.getText());if(!o)return;let i=[...Ohe(t,o,n),...Uhe(o,t)];e.set(t.uri,i)}}function Ahe(t,e){let n=new RegExp("^[a-zA-Z0-9_-]*$");if(!t)return{type:void 0,tooltip:zt.l10n.t("Empty feature id")};let r={};if(!t.includes("/")&&!t.includes("\\")&&n.test(t)){let s=["fish","homebrew"].indexOf(t)>-1;return{...r,type:"local-cache",isLegacy:!0,tooltip:s?zt.l10n.t("Legacy feature not supported. Please check https://containers.dev/features for replacements."):void 0,code:s?{target:fe.Uri.parse("https://containers.dev/features"),value:"legacy-feature"}:void 0,level:fe.DiagnosticSeverity.Error}}if(t.startsWith("http://"))return{...r,type:void 0,tooltip:zt.l10n.t("Direct tarball references must be served over HTTPS."),level:fe.DiagnosticSeverity.Error};if(t.startsWith("https://"))try{return fe.Uri.parse(t,!0).scheme==="https"?{...r,type:"direct-tarball",level:void 0}:{...r,type:void 0,level:fe.DiagnosticSeverity.Error,tooltip:zt.l10n.t("Failed to parse scheme of URI")}}catch{return{...r,type:void 0,level:fe.DiagnosticSeverity.Error,tooltip:zt.l10n.t("Invalid URI")}}if(t.startsWith("/"))return{...r,type:void 0,tooltip:zt.l10n.t("Absolute file paths are not allowed.  Local file path must be indicated relative to the devcontainer.json."),level:fe.DiagnosticSeverity.Error};if(t.startsWith("./")||t.startsWith("../"))return{...r,type:"file-path"};if(t.split("/").length===3&&t.length>=5&&!t.includes("."))return new RegExp("^[a-zA-Z0-9_/@-]*$").test(t)?{...r,type:"github-repo",isLegacy:!0,level:fe.DiagnosticSeverity.Warning}:{...r,type:void 0,tooltip:zt.l10n.t("GitHub release feature id contains invalid characters"),level:fe.DiagnosticSeverity.Error};let i=t.split("/");return t.includes(".")&&i.length>1&&i[1].length>=1?new RegExp("^[a-zA-Z0-9_/:.-]*$").test(t)?i[1]==="devcontainers-contrib"?{...r,type:"oci",level:fe.DiagnosticSeverity.Warning,tooltip:zt.l10n.t("Replace the reference to the discontinued `devcontainers-contrib` with `devcontainers-extra`")}:{...r,type:"oci"}:{...r,type:void 0,level:fe.DiagnosticSeverity.Error,tooltip:zt.l10n.t("OCI Feature id contains invalid characters")}:{...r,type:void 0,level:fe.DiagnosticSeverity.Error,tooltip:zt.l10n.t("Failed to parse feature identifier.")}}function Fhe(t,e,n){var i;if(!n){e.write("No index found.",5);return}let o=(n==null?void 0:n.collections.map(s=>s.features).flat()).find(s=>t===s.id||t.startsWith(`${s.id}:`));if(o){let s=`${o.name}
`,a=o.description?`
${o.description}
`:"",c=o.documentationURL?`
${o.documentationURL}
`:"",l="";if(o.majorVersion){let u=t.split(":");if(u.length===2){let f=u[1];if(f&&f!=="latest")try{let m=(i=i8.parse(f,{loose:!0}))==null?void 0:i.major,d=Number.parseInt(o.majorVersion),p=`
${zt.l10n.t("New major version '{0}' published.",d)}
`;if(m&&m<d)l=p;else{let g=Number.parseInt(f);g!==void 0&&g<d&&(l=p)}}catch{}}}return new fe.MarkdownString(`${s}${a}${c}${l}`)}}function Ohe(t,e,n){var i;let r=rs(e,["features"]),o=[];for(let s of(r==null?void 0:r.children)||[])if(s.type==="property"){let a=(i=s.children)==null?void 0:i[0].value,c=Ahe(a,n);if(c.hint){let l=t.positionAt(s.offset),u=t.positionAt(s.offset+s.length),f=new fe.Diagnostic(new fe.Range(l,u),c.hint,fe.DiagnosticSeverity.Hint);o.push(f)}if(c.level!==void 0&&c.tooltip){let l=t.positionAt(s.offset),u=t.positionAt(s.offset+s.length),f=new fe.Diagnostic(new fe.Range(l,u),c.tooltip,c.level);f.code=c.code||{target:fe.Uri.parse("https://containers.dev/implementors/features/#referencing-a-feature"),value:"referencing-a-feature"},o.push(f)}}return o}function Uhe(t,e){return["extensions","settings","devPort"].filter(n=>rs(t,[n])&&rs(t,["vscode",n])).map(n=>{var s,a;let r=(((a=(s=rs(t,[n]))==null?void 0:s.parent)==null?void 0:a.children)||[])[0],o=e.positionAt(r.offset),i=e.positionAt(r.offset+r.length);return new fe.Diagnostic(new fe.Range(o,i),zt.l10n.t('Legacy "{0}" property when "{0}" property under "vscode" is also present.',n),fe.DiagnosticSeverity.Warning)})}var hg=Y(require("vscode")),fO=require("vscode");async function d8(t,e){let n=await Mhe(t);if(!n)return t.output.write("Failed to find configuration.  Cannot configure container features.",5),!1;let r=await $he(t,n,(e==null?void 0:e.preInstalledInBaseImageFeatureIds)||[]);if(!r)return!1;let o=await t.fileHost.toCommonURI(r);return o&&hg.window.showTextDocument(hg.Uri.parse(o.toString())),!!o}async function Mhe(t){let e=await t.findDevContainerFiles();if(e.length){let n=await zu(e);if(!n||n==="cancelled")return;let r=n.scheme==="file"?Oa(process.platform,zf(n)):t.fileHost,o=r.path.dirname(_e(n,r.platform)),i=r.path.basename(o)===".devcontainer"?r.path.dirname(o):o,s=It(r.path,i),a=await l0(r,s,n);if(a)return{fileHost:r,workspace:s,config:a}}else{let n=fO.l10n.t("Add Files...");await hg.window.showInformationMessage(fO.l10n.t("No container configuration file found."),{modal:!0},n)===n&&await mg(t)}}async function $he(t,e,n){var d;let{fileHost:r,workspace:o,config:i}=e,s=hg.window.createQuickPick();s.ignoreFocusOut=!0;let a={workspace:o,quickPick:s,telemetry:await t.telemetry,output:t.output},l=(await nf(t.output)).collections.reduce((p,g)=>p.concat(g.features),[]).filter(p=>!p.deprecated),u=l.filter(p=>n.includes(p.id)),f=[];if(i.object.features&&Object.entries(i.object.features).length>0){let p=Object.keys(i.object.features);f=l.filter(g=>p.some(h=>h.split(":")[0]===g.id))}let m=await lg(a,l,f,u,Promise.resolve(void 0),!0,!1);if(m)try{let p=i.text,g=i.text,h=Xy(i.text);for(let v of l){let C=[],w=v.majorVersion?`${v.id}:${v.majorVersion}`:v.id,y=["features",w];if(!m[v.id]&&((d=i.object.features)!=null&&d[w]))C=C.concat(bn(g,y,void 0,{formattingOptions:h}));else if(m[v.id]){let D=m[v.id];C=C.concat(bn(g,y,D,{formattingOptions:h}))}C.length&&(g=Io(g,C))}return p!==g&&await ur(r,r).applyEdits(i.uri,[{content:g,offset:0,length:i.text.length}],i.text),s.dispose(),_e(i.uri,r.platform)}catch(p){t.output.write(`Error in selecting dev container features: ${p}`,5),console.log("Error in selecting dev container features: ",p),s.dispose();return}}var bt=Y(require("vscode")),p8=Y(require("crypto")),u0=Y(require("path")),Cm=require("vscode");var m8={features:{}};function h8(t,e){let n=new Set,r=Promise.resolve(m8),o,a=e.codespaces?"codespaces.editDevContainerJSON":"remote-containers.editDevContainerJSON";t.subscriptions.push(bt.commands.registerCommand(a,async u=>u()),bt.languages.registerCodeLensProvider([{pattern:"**/devcontainer.json"},{pattern:"**/.devcontainer.json"}],{async provideCodeLenses(u,f){var p;let m=Object.keys(((p=Me(u.getText()))==null?void 0:p.features)||{}).sort();m.some(g=>!n.has(g))&&(n=new Set(m),r=c(u,m));let d=await r;if(!f.isCancellationRequested)return l(u,d)}}));async function c(u,f){o||(o=await Whe(t,e));let m=u.uri;if(m.scheme!=="file"){let d=o.path.join(await o.tmpdir(),`dev-container-tmp-${p8.randomUUID()}`);await o.mkdirp(d);let p=o.path.join(d,".devcontainer.json");await o.writeFile(p,Buffer.from(JSON.stringify({features:f.reduce((v,C)=>(v[C]={},v),{})})));let g=u0.posix.basename(m.path)===".devcontainer.json",h=m.with({path:u0.posix.join(u0.posix.dirname(m.path),g?".devcontainer-lock.json":"devcontainer-lock.json")});try{let v=await bt.workspace.fs.readFile(h),C=o.path.join(d,".devcontainer-lock.json");await o.writeFile(C,Buffer.from(v))}catch(v){if((v==null?void 0:v.code)!=="FileNotFound")throw v}m=bt.Uri.file(p)}try{return jhe(t,o,o.cwd,m,e.output)}catch(d){return e.output.write(`Error fetching version info: ${(d==null?void 0:d.message)||d}`),m8}}function l(u,f){let m=cf(u.getText());if(!m)return;let d=rs(m,["features"]);if(!(d!=null&&d.children)||d.type!=="object")return;let p=[];for(let g of d.children)if(g.type==="property"&&g.children){let S=function(_,A){return async()=>{let U=h.value.substring(0,C.length)+_;n.add(U),A&&!f.features[U]&&(f.features[U]=A);let k=bt.window.activeTextEditor;await(k==null?void 0:k.edit(E=>{E.replace(new bt.Range(k.document.positionAt(w),k.document.positionAt(w+y)),_)}))}},D=function(){return async()=>{let _={title:Cm.l10n.t("Remove")};if(await bt.window.showInformationMessage(Cm.l10n.t("The feature was not found either because it is no longer available or because of insufficient permissions to access it."),{modal:!0,detail:Cm.l10n.t("If this is permanent you may want to remove it from your configuration.")},_)!==_)return;let U=bt.window.activeTextEditor;await(U==null?void 0:U.edit(k=>{let E=g.parent,x=E.children,b=x.indexOf(g),I=x[b+1];if(I)k.delete(new bt.Range(U.document.positionAt(g.offset),U.document.positionAt(I.offset)));else{let T=x[b-1];T?k.delete(new bt.Range(U.document.positionAt(T.offset+T.length),U.document.positionAt(g.offset+g.length))):k.delete(new bt.Range(U.document.positionAt(E.offset+1),U.document.positionAt(g.offset+g.length)))}}))}},h=g.children[0],v=f.features[h.value],C=Bhe(h.value),w=h.offset+1+C.length,y=h.length-2-C.length;if(v!=null&&v.wanted&&v.current!==v.wanted){let _=new bt.CodeLens(new bt.Range(u.positionAt(h.offset),u.positionAt(h.offset+h.length)),{title:Cm.l10n.t("Update to {0}",v.wanted),command:a,arguments:[S(`:${v.wanted}`,{current:v.wanted,wanted:v.wanted,latest:v.latest})]});p.push(_)}if(v!=null&&v.latest&&v.current!==v.latest){let _=new bt.CodeLens(new bt.Range(u.positionAt(h.offset),u.positionAt(h.offset+h.length)),{title:Cm.l10n.t("Update to latest {0}",v.latest),command:a,arguments:[S(`:${v.latest}`)]});p.push(_)}if(v&&!v.latest){let _=new bt.CodeLens(new bt.Range(u.positionAt(h.offset),u.positionAt(h.offset+h.length)),{title:Cm.l10n.t("Not found..."),command:a,arguments:[D()]});p.push(_)}}return p}}var Hhe=/[:@][^/]*$/;function Bhe(t){let e=Hhe.exec(t);return e?t.substring(0,e.index):t}async function Whe(t,e){let n={executeInWSL:"forWSLPath",defaultDistro:void 0},r=await _r(),o=process.cwd();return Xr(void 0,void 0,o,s=>jf(s,bt.env.appRoot),n,t.extensionPath,r,(await e.telemetry).product,e.output,void 0,void 0)}async function jhe(t,e,n,r,o){let i={cliHost:e,dockerPath:"",dockerComposePath:"",extensionPath:t.extensionPath,appRoot:bt.env.appRoot,output:o,package:await cr(t.extensionPath)};return await ii(i,["outdated","--workspace-folder",n,...r?["--config",_e(r,e.platform)]:[],"--output-format","json","--log-level",ro(Zy()),"--log-format","json",...o.dimensions?["--terminal-columns",String(o.dimensions.columns),"--terminal-rows",String(o.dimensions.rows)]:[]])}var n8=gn.Uri.parse("https://aka.ms/vscode-remote/containers/folder-setup"),r8=gn.Uri.parse("https://aka.ms/vscode-dev-containers");function v8(t,e){let{output:n}=e;n.write("Internal initialization of dev container support package...");let r,o=()=>r||(r=nf(e.output));return{async openConfiguration(){return a8(e)},async createConfiguration(i){return mg(e,i)},async addExtensionToConfiguration(i){return c8(e,i)},async addPortLabelToConfiguration(i){return l8(e,i)},async configureContainerFeatures(i){return d8(e,i)},createCompletionItemProvider(){return s8(e)},startCodeLensProvider(){h8(t,e)},startHoverProvider(){f8(t,e,o)},startDiagnosticsCollection(){u8(t,e)}}}async function o8(){let t=gn.workspace.workspaceFile,e=gn.workspace.workspaceFolders,n;if(t){if(t.scheme==="untitled"){await YI();return}n=t}else if(e&&e.length)if(e.length>1){let r=await gn.window.showWorkspaceFolderPick({placeHolder:Kt.l10n.t("Select a folder to create a container configuration for")});r&&(n=r.uri)}else n=e[0].uri;return n}function Eo(t,e,n,r,o,i,s){if(t.value="",t.title=r||t.title||Kt.l10n.t("Add Dev Container Configuration Files"),t.placeholder=n,t.canSelectMany=!!o,Array.isArray(e))if(t.items=e,o)t.selectedItems=e.filter(m=>m.picked);else{let m=e.find(d=>d.picked);m&&(t.activeItems=[m])}t.buttons=i?Array.isArray(i)?i:[gn.QuickInputButtons.Back]:[];let a=[],c=t.items,l=c.filter(m=>m.isAlreadyInstalledViaBaseImage===!0),u={kind:gn.QuickPickItemKind.Separator,label:Kt.l10n.t("pre-installed features")};l.length&&(t.items=t.items.slice(0,c.length-l.length).concat(u).concat(t.items.slice(c.length-l.length)));let f=new Promise((m,d)=>{if(Array.isArray(e)||(t.busy=!0,e.then(p=>{if(t.busy=!1,t.items=p,o)t.selectedItems=p.filter(g=>g.picked);else{let g=p.find(h=>h.picked);g&&(t.activeItems=[g])}},p=>{t.busy=!1,d(p)})),a.push(t.onDidAccept(()=>{let p=o?t.selectedItems.slice():t.selectedItems[0];m(Array.isArray(i)?{pick:p,button:"ok"}:p),a.forEach(g=>g.dispose())})),a.push(t.onDidChangeSelection(p=>{if(!o)return;let g=l.filter(h=>!t.selectedItems.includes(h));g.length&&(t.selectedItems=t.selectedItems.concat(g))})),t.buttons.length&&a.push(t.onDidTriggerButton(p=>{let g=o?t.selectedItems.slice():t.activeItems[0];m(i===!0?"back":{pick:g,button:p}),a.forEach(h=>h.dispose())})),a.push(t.onDidHide(()=>{a.forEach(p=>p.dispose()),t.dispose(),m(void 0)})),s){let p;a.push(t.onDidChangeValue(g=>{let h=s(g);if(h||p){let v=t.items.filter(C=>C!==p);h&&v.push(h),p=h,t.items=v}}))}});return t.show(),f}var cO={label:Kt.l10n.t("Learn More"),description:Kt.l10n.t("Documentation on predefined container templates"),alwaysShow:!0,type:"help"};async function f0(t,e,n,r){return iO(t,e,n,r)}async function dg(t,e,n,r,o,i){var U;let{telemetry:s,existingFilesLearnMoreLink:a,index:c}=t,u=(o!=="userData"&&await((U=t.findDevContainerFiles)==null?void 0:U.call(t,"userData"))||[]).reduce((k,E)=>k&&k.uri.path.length<E.uri.path.length?k:E,void 0),f=(u==null?void 0:u.uri.scheme)==="file"?[{iconPath:new gn.ThemeIcon("go-to-file"),tooltip:Kt.l10n.t("Open File")}]:[],m=u?{label:Kt.l10n.t("Copy existing configuration to workspace"),detail:Kt.l10n.t("Copy the configuration from your user data folder to the workspace folder"),type:"userDataConfig",buttons:f}:void 0,d=c==null?void 0:c.collections.find(k=>k.sourceInformation.ociReference==="ghcr.io/devcontainers/templates"),p=d==null?void 0:d.templates.find(k=>k.id==="ghcr.io/devcontainers/templates/docker-existing-docker-compose"),g=d==null?void 0:d.templates.find(k=>k.id==="ghcr.io/devcontainers/templates/docker-existing-dockerfile"),h=await e.readDir(n.rootFolderPath),v=p?h.filter(k=>/(docker.*)?compose.*\.ya?ml$/i.test(k)).map(k=>e.path.join(n.rootFolderPath,k)):[],C=g?h.filter(k=>/dockerfile/i.test(k)).map(k=>e.path.join(n.rootFolderPath,k)):[],w=C.map(k=>{let E=e.path.basename(k);return{label:Kt.l10n.t("From '{0}'",E),description:g8(e,k),dockerfile:E,dockerfilePath:k,detail:Kt.l10n.t("Refer to the existing '{0}' in the container configuration",E),type:"dockerfile"}}),y=v.map(k=>{let E=e.path.basename(k);return{label:Kt.l10n.t("From '{0}'",E),description:g8(e,k),dockerComposeFile:E,dockerComposePath:k,detail:Kt.l10n.t("Refer to the existing '{0}' in the container configuration",E),type:"dockerComposeFile"}}),S=m||C.length>0||v.length>0,D={label:Kt.l10n.t("From a predefined container configuration template..."),detail:Kt.l10n.t("Use a base configuration from the container template registry"),alwaysShow:!0,type:"predefined"},_=t.quickPick.onDidTriggerItemButton(async()=>{await gn.commands.executeCommand("vscode.open",u.uri),t.quickPick.hide()}),A=S?await Eo(t.quickPick,[D,...m?[m]:[],...w,...y,...a?[cO]:[]],Kt.l10n.t("How would you like to create your container configuration?")):D;if(_.dispose(),!A){Jo(s,"canceled");return}if(A.type==="help"){Jo(s,"help"),gn.env.openExternal(a);return}if(A.type==="userDataConfig")return Vhe(e,n,u);if(i||(i=e&&n&&await X5()?eO(t,e,n).then(k=>{if(k.type!=="success")return;let E=((c==null?void 0:c.collections.map(b=>b.templates).flat())||[]).filter(b=>!fg.includes(b.id)),x=((c==null?void 0:c.collections.map(b=>b.features).flat())||[]).filter(b=>!b.deprecated);return{template:E.find(b=>b.id===k.template),features:(k.features||[]).map(b=>x.find(I=>I.id===b)).filter(b=>!!b)}}):Promise.resolve(void 0)),A.type==="predefined")return e8(t,e,n,r,o,i,()=>dg(t,e,n,r,o,i));if(A.type==="dockerComposeFile")return qhe(t,e,r,o,A.dockerComposePath,p,i,()=>dg(t,e,n,r,o,i));if(A.type==="dockerfile")return Yhe(t,e,r,o,A.dockerfilePath,g,i,()=>dg(t,e,n,r,o,i))}function g8(t,e){let n=gn.workspace.workspaceFolders||[];if(n.length<2)return;let r=n.find(o=>t.platform==="win32"?e.toLowerCase().startsWith(o.uri.fsPath.toLowerCase()):e.startsWith(o.uri.fsPath));return r&&r.name}async function Vhe(t,e,n){let r=Kt.l10n.t("Skip"),o=n.fileHost,i=_e(n.uri,o.platform),s;if(o.path.basename(i)===".devcontainer.json")s=o.path.dirname(i);else for(let d=i;o.path.basename(d);d=o.path.dirname(d))if(o.path.basename(d)===".devcontainer"){s=o.path.dirname(d);break}if(!s)throw new Error(`Unexpected user config path: ${i}`);let a=o.readDirWithTypes||o.readDir,c=await a(s);for(;c.length;){let d=c.shift();if(d===GI)continue;let p=typeof d=="string"?d:d[0],g=o.path.join(s,p);if(typeof d=="string"?await o.isFile(g):(d[1]&1)!==0){let v=o.path.sep===t.path.sep?p:p.replaceAll(o.path.sep,t.path.sep),C=t.path.join(e.configFolderPath,v);if(await t.isFile(C)){let y=await gn.window.showInformationMessage(Kt.l10n.t("File '{0}' already exists, overwrite?",v),{modal:!0},r,Kt.l10n.t("Overwrite"));if(!y)return;if(y===r)continue}await t.mkdirp(t.path.dirname(C));let w=await o.readFile(g);await t.writeFile(C,w)}else(typeof d=="string"?await o.isFolder(g):(d[1]&2)!==0)&&c.push(...(await a(g)).map(C=>typeof C=="string"?o.path.join(p,C):[o.path.join(p,C[0]),C[1]]))}let l=Kt.l10n.t("Delete");await gn.window.showInformationMessage(Kt.l10n.t("Delete the configuration from the user data folder?"),{modal:!0},Kt.l10n.t("Keep"),l)===l&&await c5(o,s);let f=o.path.relative(s,i),m=o.path.sep===t.path.sep?f:f.replaceAll(o.path.sep,t.path.sep);return t.path.join(e.configFolderPath,m)}async function Yhe(t,e,n,r,o,i,s,a){let{telemetry:c}=t,l=await ym(t,i,s,async()=>{});if(!l){Jo(c,"canceled");return}if(l==="back")return a();let u=await ug(t,e,n,r,l,(f,m)=>{if(!ew(e.path,f))return m;let d=e.path.sep!==Ha.sep?f.replace(Ha.sep===Ha.win32.sep?/\\/g:/\//g,e.path.sep):f,p=e.path.resolve(n,d),g=e.path.relative(e.path.dirname(p),o),h=e.platform==="win32"?g.replace(/\\/g,"/"):g,v=m.toString(),C="dockerFile"in Me(v)?["dockerFile"]:["build","dockerfile"],w=bn(v,C,h,{formattingOptions:{}}),y=Io(v,w);return Buffer.from(y)});return u&&Jo(c,"dockerFile"),u}async function qhe(t,e,n,r,o,i,s,a){let{telemetry:c}=t,l=(await e.readFile(o)).toString(),u=Zv(l);if(!u){await gn.window.showErrorMessage(Kt.l10n.t("Invalid docker-compose file '{0}'",o),{modal:!0});return}let f=u.version,m=Object.keys(u&&u.services||{}),d=m.length<2?m[0]||"":await Eo(t.quickPick,m.map(v=>({label:v,type:"service"})),Kt.l10n.t("Select a service"),void 0,void 0,!0);if(d==="back")return a();if(d===void 0){Jo(c,"canceled");return}let p=typeof d=="string"?d:d.label,g=await ym(t,i,s,async()=>{});if(!g)return;if(g==="back")return a();let h=await ug(t,e,n,r,g,(v,C)=>{if(ew(e.path,v)){let w=e.path.sep!==Ha.sep?v.replace(Ha.sep===Ha.win32.sep?/\\/g:/\//g,e.path.sep):v,y=e.path.resolve(n,w),S=e.path.relative(e.path.dirname(y),o),D=e.platform==="win32"?S.replace(/\\/g,"/"):S,_=C.toString(),A=Me(_).dockerComposeFile,U=Array.isArray(A)?A.slice(1):[],k=[D,...U],E=bn(_,["dockerComposeFile"],k,{formattingOptions:{}}),x=Io(_,E),b=bn(x,["service"],p,{formattingOptions:{}}),I=Io(x,b);return Buffer.from(I)}if(/compose.*\.ya?ml$/.test(Ha.posix.basename(v))){let w=C.toString(),y=Zv(w);y.version&&f&&y.version!==f&&(w=w.replace(new RegExp(`^(version:.*)(${Wf(y.version)})`,"m"),`$1${f}`));let S=Object.keys(y&&y.services||{});return S.length&&(w=w.replace(new RegExp(`\\b${S[0]}\\b`),p)),Buffer.from(w)}return C});return h&&Jo(c,"dockerComposeFile"),h}function Jo(t,e,n,r){var i;let o={outcome:e};if(n){o.definitionName=uf(n.metadata.template.id);let s=n.metadata.copilotSuggestion,a=(i=s==null?void 0:s.template)==null?void 0:i.id;a&&(o.copilotSuggested=uf(a)),o.features=n.metadata.features.map(l=>uf(l.id)).join(",");let c=s==null?void 0:s.features.map(l=>uf(l.id)).join(",");c&&(o.copilotFeatures=c),a&&(o.copilotUsed="true")}r&&(o.targetLocation=r),t.sendTelemetryEvent("createConfiguration",o)}async function l0(t,e,n){if(n||(n=await Gf(t,e.configFolderPath)),!n)return;let r=await ur(t,t).readDocument(n);if(!r)return;let o=Me(r);return{uri:n,text:r,object:o}}async function w8(t,e,n,r,o,i,s){let a=uo(n);if(un(a)&&!await Ue.workspace.requestWorkspaceTrust({message:iC}))return xr(a.hostPath)?(await Ue.window.showInformationMessage(Ar.l10n.t("The WSL folder is currently not trusted."),{modal:!0,detail:Ar.l10n.t("Trust is required to build a dev container from it. The folder will now reopen in WSL.")}),await Ue.commands.executeCommand("remote-containers.reopenInWSL")):(await Ue.window.showInformationMessage(Ar.l10n.t("The local folder is currently not trusted."),{modal:!0,detail:Ar.l10n.t("Trust is required to build a dev container from it. The folder will now reopen locally.")}),await Ue.commands.executeCommand("remote-containers.reopenLocally")),new Promise(()=>{});let c=lo(a);if(c&&!await sC(t,a.repositoryPath))return await Ue.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{});let l=ed(a);return{...await Ghe(a,t,i,s,e,n,r,o),isTrusted:c||l||void 0}}async function Ghe(t,e,n,r,o,i,s,a){let{log:c,logFilePath:l}=n,u="hostPath"in t&&xr(t.hostPath)&&!!Ue.extensions.getExtension("ms-vscode-remote.remote-wsl");u&&Ue.commands.executeCommand("setContext","canReopenInWSL",!0);let f=t.settings,m="localDocker"in t&&t.localDocker,d=Ml(t.parentAuthority)||Ul(f)&&!m,p=d&&(!!Ue.extensions.getExtension("ms-vscode-remote.remote-ssh")||!!Ue.extensions.getExtension("ms-vscode-remote.remote-ssh-nightly"));p&&Ue.commands.executeCommand("setContext","canReopenInSSH",!0);let g=wc(t.parentAuthority)&&!!Ue.extensions.getExtension("ms-vscode.remote-server");g&&Ue.commands.executeCommand("setContext","canReopenInTunnel",!0);let h=!d&&!wc(t.parentAuthority);h&&Ue.commands.executeCommand("setContext","canReopenLocally",!0);let v;return Ue.window.withProgress({location:Ue.ProgressLocation.Notification,title:Zu,cancellable:!1},async C=>{if(t.parentAuthority&&!s.execServer)throw new Error(`Parent authority found without ExecServer: ${i}`);let w=ts(),y=Kl(e.extensionPath,vm,c),{cliHost:S,originalCwd:D}=await Khe(s.execServer,t,w,e.extensionPath,await _r(),y,o.product,c),_={...S.type==="local"?await y:void 0,...await td(S,t.settings)},A={...S.env,..._},U=await Xu({authority:i,extensionContext:e,sessionStart:n.sessionStart,progress:C,cliHost:S,env:A,cwd:S.cwd,wslSettings:w,isLocalContainer:ru(t.parentAuthority,_),telemetry:o,onDidInput:n.onDidInput,output:c,logFilePath:l,allowSystemConfigChange:!0,postCreate:r}),k={async createConfiguration(E,x){return f0({fileHost:x,userDataFolderForConfigurations:un(t)?await tl(e,S):void 0,telemetry:o,output:c,openConfigurationCommandId:gm,showLogCommandId:it},It(fC.posix,E))},async showError(E,...x){return await Ue.window.showErrorMessage(E,{modal:!0},...x)}};v={common:U,parsedAuthority:t,dockerCLI:Ms(),dockerComposePath:Ua(),dockerComposeCLI:Cs({exec:U.cliHost.exec,env:{..._,...fr(_)},output:U.output},Ms(),Ua()),dockerSocketPath:t0(),dockerEnv:_,workspaceMountConsistencyDefault:ZI(),gpuAvailability:await QI(S,o.product,c),cacheMount:e0()?"volume":"none",configurationTracking:XI(e.workspaceState),removeOnStartup:await D5(e,i),buildNoCache:await P5(e,i),onRemoveOnShutdownChanged:a,userRepositoryConfigurationPaths:oC(),originalCwd:D,configProvider:k,development:e.extensionMode===Ue.ExtensionMode.Development,watch:async(E,x)=>{let b=Ue.workspace.createFileSystemWatcher(new Ue.RelativePattern(E,"*"));return b.onDidChange(x),b.onDidCreate(x),b.onDidDelete(x),b},ensureNoDisallowedFeatures:(E,x,b)=>$p(E,e.globalState,x,b),useExperimentalLockfile:r0(),useExperimentalMountGitWorktreeCommonDir:ig()},await a_(v);try{return await Fk(v)}catch(E){return zhe(v,E)}}).then(C=>(a(async w=>{await I5(e,w&&C.dockerContainerId||!1),await rC(e,w==="rebuildNoCache"?i:!1)}),ns(o,dO(t),"success",n.sessionStart,v==null?void 0:v.common,C.config,C.configLocationType,C.properties),C),C=>{var k;let w=C instanceof pe?C:new pe({description:Ar.l10n.t("An error occurred setting up the container."),originalError:C});lo(t)&&(w.volumeName=t.volumeName,w.repositoryPath=t.repositoryPath,w.folderPath=t.folder),ns(o,dO(t),"failure",n.sessionStart,v==null?void 0:v.common,w.config,void 0,w.containerProperties,w);let y="onTheSide",S=(k=w.data)==null?void 0:k.fileWithError;!S&&(v!=null&&v.parsedAuthority)&&un(v.parsedAuthority)&&v.parsedAuthority.configFile&&(S=_e(v.parsedAuthority.configFile,v.common.cliHost.platform));let D=S&&(v==null?void 0:v.common.cliHost.path.basename(S))||"devcontainer.json",_=un(t)?[{id:"openFileWithErrorLocally",title:Ar.l10n.t("Edit {0} Locally",D),isLastAction:!0,applicable:async(E,x)=>h&&!(x&&u),async execute(){let E=v==null?void 0:v.common.cliHost,x=S?E.type==="wsl"?await E.toCommonURI(S):Ce.file(S):void 0;await ag(e,t.hostPath,x,l,y);let b=Ue.Uri.file(t.hostPath);await Ue.commands.executeCommand("vscode.openFolder",b)}},{id:"openFileWithErrorinWSL",title:Ar.l10n.t("Edit {0} in WSL",D),isLastAction:!0,applicable:async()=>u,async execute(){let E=Ue.Uri.parse((await Dp(t.hostPath,c)).toString()),x=S?Rn(S.startsWith("/")?"linux":"win32",E,S):void 0;await ag(e,E.path,x,l,y),await Ue.commands.executeCommand("vscode.openFolder",E)}},{id:"openFileWithErrorinSSH",title:Ar.l10n.t("Edit {0} in SSH",D),isLastAction:!0,applicable:async()=>p,async execute(){let E=t.settings,x=Ul(E)?Hv(E.host,t.hostPath):iu(t.parentAuthority,t.hostPath),b=Ue.Uri.parse(x.toString()),I=S?Rn(S.startsWith("/")?"linux":"win32",b,S):void 0;await ag(e,b.path,I,l,y),await Ue.commands.executeCommand("vscode.openFolder",b)}},{id:"openFileWithErrorinTunnel",title:Ar.l10n.t("Edit {0} in Tunnel",D),isLastAction:!0,applicable:async()=>g,async execute(){let E=Ue.Uri.parse(iu(t.parentAuthority,t.hostPath).toString()),x=S?Rn(S.startsWith("/")?"linux":"win32",E,S):void 0;await ag(e,E.path,x,l,y),await Ue.commands.executeCommand("vscode.openFolder",E)}}]:[],A=lo(t)?t.inspectVolume?[Ma]:[{id:"reopenInRecoveryContainer",title:Ar.l10n.t("Edit {0} in Recovery Container",D),isLastAction:!0,applicable:(E,x)=>!0,execute:async E=>{await ag(e,t.repositoryPath,S?Ce.file(S).with({scheme:"vscode-remote"}):void 0,l,y);let x=ci(E.repositoryPath),b=await Uo(v),I=Xk(x,E.volumeName,b);await Ue.commands.executeCommand("remote-containers.inspectVolume",I,E.repositoryPath,E.folderPath)}},Ma,{id:"openRepository",title:Ar.l10n.t("Open Repository"),isLastAction:!1,applicable:(E,x)=>!x,async execute(){Ue.env.openExternal(Ue.Uri.parse(t.repositoryPath))}}]:[],U=dw(t)?[Ma]:[];return w.actions=[...tf,rl,$5,..._,...A,...U,ef,nl],Jhe(w),$a(w,dO(t),o,!0,n.log)})}async function zhe(t,e){let{common:n}=t,{output:r}=n,o=((e==null?void 0:e.originalError)&&(e.originalError.cmdOutput||e.originalError.message)||"").toLowerCase();if(n.localWaylandSocket&&o.includes(`path does not exist: ${n.localWaylandSocket}`.toLowerCase())){n.localWaylandSocket=void 0;let i=await Fk(t);return(async()=>{let s=us("mountWaylandSocket");for(await Wt(3e3);Ue.workspace.getConfiguration().get(s,!0);){try{await Ue.workspace.getConfiguration().update(s,!1,Ue.ConfigurationTarget.Global)}catch{}await Wt(3e3)}r.write("Wayland socket mount disabled in user settings.")})().catch(s=>{r.write(ot(s&&(s.stack||s.message)||String(s)))}),i}throw e}async function Khe(t,e,n,r,o,i,s,a){let{settings:c}=e,l=c&&"host"in c&&c.host||void 0;if(un(e)){let u=It(fC,e.hostPath),f=u.rootFolderPath,m=await Xr(t?{server:t,authority:e.parentAuthority}:void 0,l,u.rootFolderPath,hn,n,r,o,s,a,Si,{sshAskpassEnv:i,settings:sg(),localDocker:e.localDocker});return m.cwd!==u.rootFolderPath&&(u=It(m.path,u.isWorkspaceFile?m.path.join(m.cwd,fC.basename(e.hostPath)):m.cwd)),a.write(`Setting up container for folder or workspace: ${u.workspaceOrFolderPath}\r
`),s_(a,e),e.localDocker&&a.write(`Local Docker: ${e.localDocker}\r
`),{cliHost:m,originalCwd:f}}else{let u=await Xr(t?{server:t,authority:e.parentAuthority}:void 0,l,void 0,hn,n,r,o,s,a,Si,{sshAskpassEnv:i,settings:sg()});return{cliHost:u,originalCwd:await u.homedir()}}}function dO(t){return un(t)?"config":lo(t)?t.inspectVolume?"volume":"repository":"volume"}function Jhe(t){let e=(t.originalError&&(t.originalError.cmdOutput||t.originalError.message)||"").toLowerCase();e&&e.indexOf("drive has not been shared")!==-1?t.description=Ar.l10n.t("The drive of the workspace folder is not shared. Share it in the Docker settings first."):e&&(e.indexOf("port is already allocated")!==-1||e.indexOf("address already in use")!==-1)?t.description=Ar.l10n.t("A port the container is setup to bind to is already in use. See the Dev Containers terminal for details."):e&&e.indexOf('invalid mount config for type "bind"')!==-1?t.description=Ar.l10n.t("A mount config is invalid. Make sure it has the right format and a source folder that exists on the machine where the Docker daemon is running."):e&&e.indexOf("deb.debian.org/debian/dists/jessie-updates")!==-1&&(t.description=Ar.l10n.t("The base image references the obsolete Debian 8 update repository."),t.actions.push({id:"learnMore",title:Ar.l10n.t("Learn More"),isLastAction:!1,applicable:(n,r)=>r,async execute(){Ue.env.openExternal(Ue.Uri.parse("https://aka.ms/vscode-remote/containers/troubleshooting/jessie"))}}))}var Wa=Y(require("vscode")),gg=require("vscode");var d0=Y(Mr());var C8=require("util");var Ba=Y(require("path")),E8=Y(require("crypto"));async function S8(t,e,n,r){var p,g;let{dockerCLI:o,dockerComposeCLI:i,dockerComposePath:s,common:a}=t,{cliHost:c,extensionPath:l,appRoot:u,postCreate:f,output:m}=a,d;try{let{commit:h}=a.product;if(!h)throw new pe({description:d0.t("Cannot attach without commit id for the remote extension host.")});let v=r?n.configFilePath:void 0;if((v==null?void 0:v.scheme)==="file"&&c.type!=="local"){let R=c.path.join(await c.tmpdir(),`devcontainer-config-${E8.randomUUID()}.json`);await c.writeFile(R,await at(v.fsPath)),v=Ce.from({scheme:Ke.scheme,path:R})}let C={...a.env,...fr(a.env)},w={cliHost:c,dockerPath:o,dockerComposePath:s,env:C,extensionPath:l,appRoot:u,package:a.package,postCreate:f,output:m},y=a.postCreate.output.dimensions||m.dimensions,S=await ii(w,["set-up","--container-id",e.Id,...c.type==="local"&&a.persistedFolder?["--user-data-folder",a.persistedFolder]:[],...t.dockerCLI!=="docker"?["--docker-path",t.dockerCLI]:[],...a.containerSessionDataFolder?["--container-session-data-folder",a.containerSessionDataFolder]:[],"--log-level",ro(a.getLogLevel()),"--log-format","json",...v?["--config",_e(v,c.platform)]:[],"--default-user-env-probe",a.defaultUserEnvProbe,"--skip-post-create",...y?["--terminal-columns",String(y.columns),"--terminal-rows",String(y.rows)]:[],"--include-configuration","--include-merged-configuration"]);if((S==null?void 0:S.outcome)!=="success")throw new pe({description:d0.t("devcontainer command failed: {0}",JSON.stringify(S))});S.configuration.configFilePath=S.mergedConfiguration.configFilePath=S.configuration.configFilePath&&Ce.revive(S.configuration.configFilePath).with({scheme:c.type==="local"?"file":Ke.scheme});let D=S.mergedConfiguration,_=D.remoteUser;d=await Up(t,e.Id,D.workspaceFolder,_);let A={cliHost:c,dockerCLI:o,dockerComposeCLI:i,dockerComposePath:s,env:C,output:f.output},U=((g=(((p=D.customizations)==null?void 0:p.vscode)||[]).slice().reverse().find(R=>typeof R.devPort=="number"))==null?void 0:g.devPort)||jl,{hostOrContainerPort:k,hostPortServer:E,connectionToken:x,remoteEnv:b,serverDownloaded:I}=await Vl(a,d,n,D,U,Mp(t,A,d,void 0,void 0,e.Id,!1,v,void 0)),T=ur(a.cliHost,d.shellServer);if(Xhe(a,d,T,n.configFilePath),Qhe(a,d,T,n.configFilePath),E){let R=async()=>{await(0,C8.promisify)(E.close.bind(E))()};a.shutdowns.push(R)}return{params:a,properties:d,config:n,resolvedAuthority:{host:hc,port:k,connectionToken:x,extensionHostEnv:b},tunnelInformation:a.isLocalContainer?Op(e):{},dockerParams:t,dockerContainerId:e.Id,serverDownloaded:I}}catch(h){let v=h instanceof pe?h:new pe({description:d0.t("An error occurred attaching to the container."),originalError:h});throw e&&(v.manageContainer=!1,v.params=t.common,v.containerId=e.Id,v.dockerParams=t),d&&(v.containerProperties=d),v.config=n,v}}function Xhe(t,e,n,r){e.installFolder&&x8(t,e,n,r).catch(console.error)}async function x8(t,e,n,r){try{await dc(t,e,["/bin/sh","-c",`# Watch installed extensions
			trap "exit 0" 15
			old=\`ls -A --full-time\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
			exit 2
		`],KY(e),{print:"off"});return}catch(o){(o==null?void 0:o.code)===1?await Zhe(t,e,n,r):(o==null?void 0:o.code)!==2&&await Wt(6e4)}return x8(t,e,n,r)}async function Zhe(t,e,n,r){let o=await JY(t,e);await Sk(r,async()=>{var s,a;let i=await m0(t.cliHost,n,r,e.remoteWorkspaceFolder);if(!tge(((a=(s=i.config.customizations)==null?void 0:s.vscode)==null?void 0:a.extensions)||[],o)){let c=bn(i.text,["extensions"],o,{formattingOptions:{}});await $i(n,r,c,i.text)}})}function Qhe(t,e,n,r){_8(t,e,n,r).catch(console.error)}async function _8(t,e,n,r){try{let o=Px(e),i=Ba.posix.dirname(o),s=Ba.posix.basename(o);await dc(t,e,["/bin/sh","-c",`# Watch machine settings
			trap "exit 0" 15
			old=\`ls -A --full-time ${s} 2>/dev/null || true\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time ${s} 2>/dev/null || true\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
			exit 2
		`],i,{print:"off"});return}catch(o){(o==null?void 0:o.code)===1?await ege(t.cliHost,e,n,r):(o==null?void 0:o.code)!==2&&await Wt(6e4)}return _8(t,e,n,r)}async function ege(t,e,n,r){let{stdout:o}=await e.shellServer.exec(`cat ${Px(e)}`),i=Me(o)||{};await Sk(r,async()=>{var a,c;let s=await m0(t,n,r,e.remoteWorkspaceFolder);if(JSON.stringify(((c=(a=s.config.customizations)==null?void 0:a.vscode)==null?void 0:c.settings)||{})!==JSON.stringify(i)){let l=bn(s.text,["settings"],i,{formattingOptions:{}});await $i(n,r,l,s.text)}})}function tge(t,e){let n=new Set(t),r=new Set(e);return n.size===r.size&&t.every(o=>r.has(o))}async function D8(t,e){let n=h0(t,e),r=await y8(n);return r||(n=b8(t,e.Config.Image),r=await y8(n)),r}async function I8(t,e,n,r,o){let i=Ce.file(h0(n,r)),s=await m0(t,e,i,o);return s.exists||(i=Ce.file(b8(n,r.Config.Image)),s=await m0(t,e,i,o)),s}function p0(t){return Ba.join(t,"nameConfigs")}function h0(t,e){return Ba.join(p0(t),`${R8(yc(e))}.json`)}async function P8(t){try{let e=p0(t);return(await al(e)).filter(r=>r.endsWith(".json")).map(r=>({name:k8(r.substr(0,r.length-5)),uri:Ce.file(Ba.join(e,r))}))}catch(e){if(e&&e.code==="ENOENT")return[];throw e}}function g0(t){return Ba.join(t,"imageConfigs")}function b8(t,e){return Ba.join(g0(t),`${R8(e)}.json`)}async function T8(t){try{let e=g0(t);return(await al(e)).filter(r=>r.endsWith(".json")).map(r=>({image:k8(r.substr(0,r.length-5)),uri:Ce.file(Ba.join(e,r))}))}catch(e){if(e&&e.code==="ENOENT")return[];throw e}}function R8(t){return t.replace(/[:/%]/g,e=>`%${e.charCodeAt(0).toString(16)}`)}function k8(t){return t.replace(/%([0-9a-f]{2})/g,(e,n)=>String.fromCharCode(parseInt(n,16)))}async function y8(t){if(!await Cr(t))return;let e=await at(t),n=Me(e.toString())||{},r=nw(n);return r.configFilePath=Ce.file(t),r}async function m0(t,e,n,r){let o=await e.readDocument(n),i=o||pc,s=Me(i)||{},a=nw(s),c=wx({platform:t.platform,configFile:n,env:t.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:r},a);return c.configFilePath=n,{exists:!!o,text:i,config:c}}async function N8(t,e,n,r,o,i){return await $s(t)?{...await nge(t,e,n,r,o,i),isTrusted:!0}:(await Wa.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function nge(t,e,n,r,o,i){let s,a;return Wa.window.withProgress({location:Wa.ProgressLocation.Notification,title:Zu,cancellable:!1},async c=>{var l,u;try{let f=nd(n);if(f.parentAuthority&&!r.execServer)throw new Error(`Parent authority found without ExecServer: ${n}`);let{settings:m}=f,d="containerName"in f?f.containerName:f.containerId;o.log.write(`Setting up container: ${d}\r
`),s_(o.log,f);let p=m&&"host"in m&&m.host||void 0,g=ts(),h=Kl(t.extensionPath,vm,o.log),v=await Xr(r.execServer?{server:r.execServer,authority:f.parentAuthority}:void 0,p,f.cwd,hn,g,t.extensionPath,await _r(),e.product,o.log,Si,{sshAskpassEnv:h,settings:sg()}),C=Ms(),w={...v.type==="local"?await h:void 0,...await td(v,m)},y=Cs({exec:v.exec,env:{...w,...fr(w)},output:o.log},Ms(),Ua()),S={...v.env,...w},D=await ai({cliHost:v,dockerCLI:C,dockerComposeCLI:y,dockerComposePath:Ua(),env:S,output:o.log},"containerName"in f?f.containerName:f.containerId);if(!D)throw new pe({description:gg.l10n.t("Cannot attach to the container with name/id {0}, it no longer exists.",d),data:{reload:!1,attach:!0}});let _=(u=(l=(Wa.workspace.workspaceFolders||[void 0])[0])==null?void 0:l.uri)==null?void 0:u.path,A=await I8(v,gs,t.globalStoragePath,D,_);if(_&&A.config.workspaceFolder!==_){let x=bn(A.text,["workspaceFolder"],_,{formattingOptions:{}});await $i(gs,A.config.configFilePath,x,A.text)}s={common:await Xu({authority:n,extensionContext:t,sessionStart:o.sessionStart,progress:c,cliHost:v,env:S,cwd:f.cwd||await v.homedir(),wslSettings:g,isLocalContainer:ru(f.parentAuthority,w),telemetry:e,onDidInput:o.onDidInput,output:o.log,logFilePath:o.logFilePath,allowSystemConfigChange:!1,postCreate:i}),parsedAuthority:f,dockerCLI:C,dockerComposePath:Ua(),dockerComposeCLI:y,dockerSocketPath:t0(),dockerEnv:w,workspaceMountConsistencyDefault:ZI(),gpuAvailability:await QI(v,e.product,o.log),cacheMount:e0()?"volume":"none",configurationTracking:XI(t.workspaceState),userRepositoryConfigurationPaths:[],development:t.extensionMode===Wa.ExtensionMode.Development,ensureNoDisallowedFeatures:(x,b,I)=>$p(x,t.globalState,b,I),useExperimentalLockfile:r0(),useExperimentalMountGitWorktreeCommonDir:ig()},await a_(s);let U=Bp(f.parentAuthority,m),k=yc(D),E=gg.l10n.t("Container {0} ({1}){2}",D.Config.Image,k,U);if(s.common.setWorkspaceName(E),D.State.Status!=="running")throw new pe({description:gg.l10n.t("Cannot attach to the container {0} ({1}){2}, it is not running.",D.Config.Image,k,U),params:s.common,containerId:D.Id,dockerParams:s,data:{reload:!1,start:!0}});return await S8(s,D,A.config,A.exists)}catch(f){let m=f instanceof pe?f:new pe({description:gg.l10n.t("An error occurred attaching to the container."),originalError:f});throw m.actions=[H5,B5,...tf,rl,Ma,ef,nl],m}}).then(c=>(ns(e,"attach","success",o.sessionStart,s==null?void 0:s.common,a,void 0,c.properties),c),c=>{let l=c instanceof pe?c:new pe({description:gg.l10n.t("An error occurred attaching to the container."),originalError:c});return ns(e,"attach","failure",o.sessionStart,s==null?void 0:s.common,a,void 0,l.containerProperties,l),$a(l,"attach",e,!0,o.log)})}var lt=Y(require("vscode")),We=require("vscode");var rn=Y(require("vscode")),ja=require("vscode"),A8=Y(require("path")),Em=Y(require("os")),dC=Y(require("fs")),F8=Y(require("child_process")),O8=Y(require("crypto")),U8=Y(jC());async function w0(t){ige()?await new mO().downloadAndInstallDocker(t):M8()?await new pO().downloadAndInstallDocker(t):await rn.env.openExternal(rn.Uri.parse("https://aka.ms/download-docker-linux-vscode"))}var v0=class{async downloadAndInstallDocker(e){if(await this.preInstallCheck(e)){let r=ja.l10n.t("Downloading Docker installer..."),o=ja.l10n.t("The Docker Desktop installation is started. Complete the installation and then start Docker Desktop."),i;try{i=await rn.window.withProgress({location:rn.ProgressLocation.Notification,title:r},async()=>this.downloadInstaller())}catch(a){let c=ja.l10n.t("Downloading the Docker Desktop installer failed. Do you want to manually download and install?"),l=ja.l10n.t("Download");throw this.handleError(c,l,this.downloadUrl),a}let s=this.getInstallCommand(i);rn.window.showInformationMessage(o);try{await this.install(i,s,e)}catch(a){let c=ja.l10n.t("Docker Desktop installation failed. ({0})",String(a==null?void 0:a.message)),l=ja.l10n.t("Install Instruction");throw this.handleError(c,l,"https://aka.ms/AA37qtj"),a}}}async preInstallCheck(e){let n=!0;if(await new hO(e).isDockerInstalledRealTimeCheck()){let r=ja.l10n.t("Docker Desktop is already installed. Would you like to reinstall?"),o=ja.l10n.t("Reinstall");n=await rn.window.showInformationMessage(r,{modal:!0},o)!==void 0}return n}async downloadInstaller(){let e=`${oge()}.${this.fileExtension}`;return await age(this.downloadUrl,e),e}handleError(e,n,r){rn.window.showErrorMessage(e,{title:n}).then(o=>{o&&rn.env.openExternal(rn.Uri.parse(r))})}},mO=class extends v0{downloadUrl="https://aka.ms/download-docker-windows-vscode";fileExtension="exe";getInstallCommand(e){return`"${e}"`}async install(e,n,r){try{r.write(`Executing command ${n}`),await $8(n,r)}finally{try{await dC.promises.stat(e),await dC.promises.unlink(e)}catch{}}}},pO=class extends v0{downloadUrl=`https://aka.ms/download-docker-mac${process.arch==="arm64"?"-arm64":""}-vscode`;fileExtension="dmg";getInstallCommand(e){return`chmod +x '${e}' && open '${e}'`}async install(e){let n=ja.l10n.t("Docker Install"),r=this.getInstallCommand(e);await sge(r,n,{addDockerEnv:!1})}},rge=0;function oge(){return A8.join(Em.tmpdir(),`${rn.env.sessionId}-${rge++}.tmp`)}function ige(){return Em.platform()==="win32"}function M8(){return Em.platform()==="darwin"}async function sge(t,e,n){var a,c;let r;n=n??{},n.addDockerEnv&&(r={});let o=new rn.Task({type:"shell"},n.workspaceFolder??rn.TaskScope.Workspace,e,"Docker",new rn.ShellExecution(t,{cwd:n.cwd||((c=(a=n.workspaceFolder)==null?void 0:a.uri)==null?void 0:c.fsPath)||Em.homedir(),env:r}),[]);n.alwaysRunNew&&(o.definition.idRandomizer=O8.randomUUID()),n.focus&&(o.presentationOptions={focus:!0});let i=await rn.tasks.executeTask(o);return new Promise((l,u)=>{let f=rn.tasks.onDidEndTaskProcess(m=>{m.execution===i&&(f.dispose(),m.exitCode&&n.rejectOnError&&u(m.exitCode),l())})})}var hO=class{constructor(e){this.output=e;this.isDockerInstalledLazy=new vO(async()=>{let n=await this.isDockerInstalledRealTimeCheck();return n&&this.isDockerInstalledLazy.cacheForever(),n},this.maxCacheTime)}maxCacheTime=3e4;isDockerInstalledLazy;async isDockerInstalled(){return await this.isDockerInstalledLazy.getValue()}async isDockerInstalledRealTimeCheck(){try{let e=await ni("docker");return await $8(`${e} -v`,this.output),!0}catch{return!1}}};async function age(t,e){await new Promise((n,r)=>{let o=dC.createWriteStream(e);U8.https.get(t,s=>{if(s.statusCode<200||s.statusCode>299){r(new Error(`Failed to download Docker (${t}): HTTP ${s.statusCode} - ${s.statusMessage}`));return}s.on("error",r),s.pipe(o),s.on("end",n)}).on("error",r)})}var L8=10*1024;async function $8(t,e,n,r){let o=Buffer.alloc(n&&n.maxBuffer||L8),i=Buffer.alloc(n&&n.maxBuffer||L8);return await cge(t,e,n,r,o,r,i),{stdout:gO(o),stderr:gO(i)}}async function cge(t,e,n,r,o,i,s,a){return await new Promise((c,l)=>{let u,f=0,m=0;n=n||{},n.shell=!0,lge(n,e);let d=F8.spawn(t,n);d.on("error",p=>(u&&(u.dispose(),u=void 0),l(p))),d.on("close",(p,g)=>{if(u&&(u.dispose(),u=void 0),a&&a.isCancellationRequested)return l(new Error("User canceled"));if(p){let h=`Process '${t.length>50?`${t.substring(0,50)}...`:t}' exited with code ${p}`;s&&(h+=`
Error: ${gO(s)}`);let v=new Error(h);return v.code=p,v.signal=g,v.stdErrHandled=i!==null,l(v)}return c()}),n!=null&&n.stdin&&(d.stdin.write(n.stdin),d.stdin.end()),(r||o)&&d.stdout.on("data",p=>{let g=p.toString();r&&r(g,d),o&&(f+=o.write(g,f))}),(i||s)&&d.stderr.on("data",p=>{let g=p.toString();i&&i(g,d),s&&(m+=s.write(g,m))}),a&&(u=a.onCancellationRequested(()=>{d.kill()}))})}function lge(t,e){var n;M8()&&(/(?<=^|:)\/usr\/local\/bin(?=$|:)/i.test(((n=t==null?void 0:t.env)==null?void 0:n.PATH)||process.env.PATH||"")||(t=t??{},t.env=t.env??{...process.env},e.write("WARNING: Adding '/usr/local/bin' to the PATH because it is missing."),t.env.PATH=`${t.env.PATH}:/usr/local/bin`))}function gO(t){return t.toString().replace(/[\x00-\x09\x0B-\x0C\x0E-\x1F]|\r?\n$/g,"")}var vO=class{constructor(e,n){this.valueFactory=e;this._valueLifetime=n}_isValueCreated=!1;_value;_valuePromise;get isValueCreated(){return this._isValueCreated}cacheForever(){this._valueLifetime=void 0}clear(){this._isValueCreated=!1,this._valuePromise=void 0}async getValue(){if(this._isValueCreated)return this._value;let e=this._valuePromise===void 0;e&&(this._valuePromise=this.valueFactory());let n=await this._valuePromise;if(e&&(this._value=n,this._valuePromise=void 0,this._isValueCreated=!0),this._valueLifetime&&e){let r=setTimeout(()=>{this._valueLifetime&&this._valuePromise===void 0&&(this._isValueCreated=!1,this._value=void 0),clearTimeout(r)},this._valueLifetime)}return n}};var H8=Y(require("os")),vg=Y(require("crypto")),B8=Y(require("net")),W8=Y(require("path")),Jt=Y(require("vscode")),on=require("vscode");var j8=require("string_decoder");var V8="done",y0="devcontainers";async function E0(t,e,n,r){return Jt.commands.executeCommand(it),Jt.window.withProgress({location:Jt.ProgressLocation.Notification,title:"Installing Docker in WSL"},async o=>{let i={},s={};try{await uge(t,e,n,o,i,s)}catch(a){i.outcome="error",i.errorMessage=a==null?void 0:a.message,e.write(`Failed with error: ${(a==null?void 0:a.message)||a}`)}finally{r.sendTelemetryEvent("installDockerInWSL",i,s)}return i.outcome===V8})}async function Y8(t){if(process.platform!=="win32")return!1;let e=G8();if(t.write(`Windows build number: ${e}`),e<mC)return t.write(`WSL version 2 is required to run Docker and that is only available since Windows build ${mC}.`),!1;let n=await Gr(process.cwd(),hn,t);return!await C0(n,e,t)&&e<q8?(t.write(`WSL is not installed and can only be installed automatically since Windows build ${mC}.`),!1):!0}async function uge(t,e,n,r,o,i){let s=G8();if(e.write(`Windows build number: ${s}`),s<mC)return o.outcome="wsl2NotAvailableForWindowsBuild",Jt.window.showInformationMessage(on.l10n.t("WSL version 2 is required to run Docker and that is only available since Windows build {0}.",mC),{modal:!0});let a=await Gr(process.cwd(),hn,e);if(r.report({message:on.l10n.t("Checking if WSL is installed.")}),!await C0(a,s,e)){if(s<q8)return o.outcome="wslInstallerNotAvailableWithWindowsBuild",Jt.window.showInformationMessage(on.l10n.t("WSL is not installed. Please install WSL manually and retry."),{modal:!0});if(r.report({message:on.l10n.t("Installing WSL.")}),await dge(a,t.extensionPath,e,n))return o.outcome="rebootRequiredAfterWSLInstall",Jt.window.showInformationMessage(on.l10n.t("Please reboot your machine to finalize the WSL setup."),{modal:!0});if(!await C0(a,s,e)&&(await new Promise(_=>setTimeout(_,3e3)),!await C0(a,s,e)))return o.outcome="wslNotFoundAfterInstall",Jt.window.showInformationMessage(on.l10n.t("WSL not found after install."),{modal:!0})}r.report({message:on.l10n.t("Checking WSL version.")}),o.wslVersion=await mge(a,e),r.report({message:on.l10n.t("Listing installed WSL distributions.")});let l=await wO(a,e);if(!l.length){if(r.report({message:on.l10n.t("Installing WSL distribution.")}),await hge(a,e,n))return o.outcome="featureMissingDuringDistroInstall",Jt.window.showInformationMessage(on.l10n.t("A required feature is missing. Please reboot your machine to finalize the WSL setup if you haven't done so yet."),{modal:!0});if(l=await wO(a,e),!l.length&&(await new Promise(S=>setTimeout(S,3e3)),l=await wO(a,e),!l.length))return o.outcome="noDistroAfterInstall",Jt.window.showInformationMessage(on.l10n.t("No WSL distro found after install."),{modal:!0})}i.wslDistros=l.length;let u=l.find(y=>y.isDefault);if(!u&&l.length===1&&(u=l[0]),!u)return o.outcome="noDefaultDistro",Jt.window.showInformationMessage(on.l10n.t("No default WSL distro found."),{modal:!0});if(o.isDefaultDistro=String(u.isDefault),u.version!=="2")return o.outcome="defaultDistroNotVersion2",Jt.window.showInformationMessage(on.l10n.t("Default distro is not using WSL version 2."),{modal:!0});r.report({message:on.l10n.t("Reading distribution information.")});let f=Hf("wsl",["-u","root","-e"],void 0),m=await jt(f,e,void 0,"linux","Host"),{stdout:d}=await m.exec("cat /etc/os-release || cat /usr/lib/os-release || true"),p=gge(d);if(o.distro=p.ID,p.ID!=="debian"&&p.ID!=="ubuntu")return o.outcome="distroNotSupported",Jt.window.showInformationMessage(p.NAME?on.l10n.t("Unsupported WSL distribution: {0}",p.NAME):on.l10n.t("Unsupported WSL distribution."),{modal:!0});let g=Hf("wsl",["-e"],void 0),h=await jt(g,e,void 0,"linux","Host"),v=await Fl(h);if(v==="root"){try{await m.exec(`id ${y0}`)}catch{await m.exec(`useradd --create-home --shell /usr/bin/bash --user-group --groups adm,dialout,cdrom,floppy,sudo,audio,dip,video,plugdev,netdev --password '${vg.randomUUID()}' ${y0}`)}if(await m.exec(`cat >>/etc/wsl.conf <<'wslConf'
[user]
default=${y0}
wslConf
`),await X({exec:a.exec,cmd:"wsl",args:["--terminate",u.name],output:e,print:"continuous"}),m=await jt(f,e,void 0,"linux","Host"),h=await jt(g,e,void 0,"linux","Host"),await Fl(h)==="root")return o.outcome="failedToSwitchUser",Jt.window.showInformationMessage(on.l10n.t("Default user in WSL is root, requiring a regular user."),{modal:!0})}let C=await yO(h,"docker")||await yO(m,"docker")||await yO(m,"dockerd");if(C){await m.exec(`usermod -aG docker ${v}`).catch(()=>{});let y=on.l10n.t("Reinstall");if(await Jt.window.showInformationMessage(on.l10n.t("Docker is already installed in WSL."),{modal:!0,detail:on.l10n.t("Path: {0}",C)},y)!==y){o.outcome="dockerAlreadyInstalled";return}}r.report({message:on.l10n.t("Installing Docker.")}),await m.exec("export DEBIAN_FRONTEND=noninteractive"),await m.exec("apt update && apt -y install --no-install-recommends apt-transport-https ca-certificates curl gnupg2"),await m.exec(`curl -fsSL https://download.docker.com/linux/${p.ID}/gpg | tee /etc/apt/trusted.gpg.d/docker.asc`),await m.exec(`echo "deb [arch=$(dpkg --print-architecture)] https://download.docker.com/linux/${p.ID} ${p.VERSION_CODENAME} stable" | tee /etc/apt/sources.list.d/docker.list`),await m.exec("apt update && apt -y install --no-install-recommends docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin"),await m.exec(`usermod -aG docker ${v}`),r.report({message:on.l10n.t("Updating Settings.")});let w=Jt.workspace.getConfiguration();await w.update(us("executeInWSL"),!0,Jt.ConfigurationTarget.Global),await w.update(us("executeInWSLDistro"),u.isDefault?void 0:u.name,Jt.ConfigurationTarget.Global),o.outcome=V8}var mC=18917,q8=20262;function G8(){let t=H8.release(),e=process.platform==="win32"&&t&&/(\d+)\.(\d+)\.(\d+)/g.exec(t);return e&&e.length===4?parseInt(e[3]):0}async function C0(t,e,n){if(t.platform!=="win32")return!1;if(e>=22e3)try{return await X({exec:t.exec,cmd:"wsl",args:["--status"],output:n,print:"continuous"}),!0}catch{return n.write("WSL feature installed: false (wsl --status failed)"),!1}else{let r=fge(t);if(r){let o=await t.isFile(r);return n.write(`WSL feature installed: ${o} (dll path: ${r})`),o}return n.write("WSL feature installed: false (no dll path)"),!1}}function fge(t){let e=t.env.SystemRoot;if(e){let n=t.env.PROCESSOR_ARCHITEW6432;return t.path.join(e,n?"Sysnative":"System32","lxss","LxssManager.dll")}}async function dge(t,e,n,r){let{wrappedOutput:o,wrappedInput:i}=z8(n,r);try{let s=t.path.join(await t.tmpdir(),`wsl-install-${vg.randomUUID()}.js`);await t.writeFile(s,await at(W8.join(e,"dist/extension/runAsMain.js")));let a=`\\\\.\\pipe\\wsl-install-${vg.randomUUID()}-sock`,c=t.path.join(await t.tmpdir(),`wsl-install-${vg.randomUUID()}.bat`),l=rw(t),u=await _k({cliHost:t,env:{RUN_AS_CMD:await ni("wsl"),RUN_AS_ARGS:JSON.stringify(["--install"]),...n.dimensions?{RUN_AS_COLS:String(n.dimensions.columns),RUN_AS_ROWS:String(n.dimensions.rows)}:{},RUN_AS_SOCKET:a,ELECTRON_RUN_AS_NODE:"1"},appRoot:Jt.env.appRoot},l.cmd)||{},f=`@echo off

${Object.keys(u).map(g=>`set ${g}=${u[g]}`).join(`
`)}
"${l.cmd}" ${l.args.map(g=>`"${g}"`).join(" ")} "${s}"
`;await t.writeFile(c,Buffer.from(f.replaceAll(/\r?\n/g,`\r
`)));let m="",d=new B8.Server(g=>{d.close();let h=new j8.StringDecoder;g.on("data",v=>{let C=h.write(v);o.raw(C),m+=C}),i.event(v=>g.write(v))});return d.listen(a),await Fi({ptyExec:t.ptyExec,cmd:"powershell.exe",args:["Start-Process","-FilePath",`'${c}'`,"-Verb","RunAs","-WindowStyle","Hidden","-Wait"],env:ao(),output:o,onDidInput:i.event}),m.replace(Vs,"").replaceAll(/\s/g,"").indexOf("untilthesystemisrebooted")!==-1}finally{i.dispose()}}async function mge(t,e){try{let{stdout:n}=await X({exec:t.exec,cmd:"wsl",args:["--version"],output:e,print:"continuous"});return n.toString("utf16le").match(/^.*$/m)[0]}catch{return"unknown"}}async function wO(t,e){try{let{stdout:n}=await X({exec:t.exec,cmd:"wsl",args:["-l","-v"],output:e,print:"continuous"});return pge(n.toString("utf16le"))}catch{return[]}}function pge(t){let e=/\r\n/.test(t)?`\r
`:`
`,n=t.split(e),r=/^(?<default>\*|\s)\s*(?<name>[a-zA-Z0-9\.\-_]+)\s+(?<state>\w+)\s+(?<version>\d)/,o=[];for(let i=1;i<n.length;i++){let s=r.exec(n[i]);if(s!=null&&s.groups){let a=s.groups.name,c=s.groups.version,l=i===1;o.push({name:a,isDefault:l,version:c})}}return o}async function hge(t,e,n){await X({exec:t.exec,cmd:"wsl",args:["--set-default-version","2"],output:e,print:"continuous"});let{wrappedOutput:r,wrappedInput:o}=z8(e,n);try{let{cmdOutput:i}=await Fi({ptyExec:t.ptyExec,cmd:"wsl",args:["--install","-d","Ubuntu"],output:r,onDidInput:o.event});return i.replace(Vs,"").replaceAll(/\s/g,"").indexOf("0x80370114")!==-1}finally{o.dispose()}}function z8(t,e){let n=e(a=>r.fire(a)),r=new js(n),o="",i=vg.randomUUID();return{wrappedOutput:sn({...t,get dimensions(){return t.dimensions},event:a=>{if(t.event(a),a.type==="text"||a.type==="raw"){o+=a.text;let c=o.replace(Vs,"");/Enter new UNIX username:\s*$/.test(c)?r.fire(`${y0}\r`):/(New|Retype new) password:\s*$/.test(c)?r.fire(`${i}\r`):/any key to continue\.*\s*$/.test(c)?r.fire("\r"):/Installation successful!/.test(c)&&r.fire("exit\r")}}}),wrappedInput:r}}function gge(t){return t.split(`
`).reduce((e,n)=>{let r=n.indexOf("=");return r!==-1&&(e[n.substring(0,r)]=n.substring(r+1)),e},{})}async function yO(t,e){try{let{stdout:n}=await t.exec(`command -v ${e}`);return n.trim()}catch{return}}var vge={reopenInContainer:We.l10n.t("Do you want to continue with reopening the folder in a container?"),openInContainer:We.l10n.t("Do you want to continue with opening a folder in a container?"),cloneInVolume:We.l10n.t("Do you want to continue with cloning a repository in a Docker volume?"),attachToContainer:We.l10n.t("Do you want to continue with attaching to a container?"),checkoutPRInVolume:We.l10n.t("Do you want to continue with checking out a pull-request in a Docker volume?"),createDevContainer:We.l10n.t("Do you want to continue with creating a Dev Container?"),inspectVolume:We.l10n.t("Do you want to continue with inspecting a Docker volume?"),trySample:We.l10n.t("Do you want to continue with trying a sample Dev Container?")},wge=`[${We.l10n.t("Starting Docker (show log)")}](command:${it} "${We.l10n.t("Show details in terminal")}")`;async function no(t,e,n,r,o,i){var f;let s=await Ze(t,e,i),a=(f=(lt.workspace.workspaceFolders||[])[0])==null?void 0:f.uri;a&&(a.scheme==="file"&&xr(a.fsPath)||Ip(a))&&(s=await Ze(t,s.output,a));let c=hC(s,r),l=await Promise.race([c,new Promise(m=>setTimeout(()=>m("timeoutOrCanceled"),2e3))]);if(l==="timeoutOrCanceled"&&(l=await lt.window.withProgress({location:lt.ProgressLocation.Notification,title:wge,cancellable:!0},async(m,d)=>Promise.race([c,new Promise(p=>{let g=d.onCancellationRequested(()=>{g.dispose(),p("timeoutOrCanceled")})})])),l==="timeoutOrCanceled"))return!1;let u=await c;if(u==="permission")return await lt.window.showErrorMessage(We.l10n.t("Current user does not have permission to run 'docker'."),{modal:!0,detail:We.l10n.t("Try adding the user to the 'docker' group.")},We.l10n.t("Documentation"))&&lt.env.openExternal(lt.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079224")),!1;if(u==="ssh")return await lt.window.showErrorMessage(We.l10n.t("Cannot connect to Docker daemon using 'ssh'."),{modal:!0,detail:We.l10n.t("Make sure public/private keys are set up for connecting without keyboard interaction.")},We.l10n.t("Show Log"))&&lt.commands.executeCommand(it),!1;if(u==="daemon")return await lt.window.showErrorMessage(We.l10n.t("Docker returned an error."),{modal:!0,detail:We.l10n.t("Make sure the Docker daemon is running.")},We.l10n.t("Show Log"))&&lt.commands.executeCommand(it),!1;if(u==="cwd")return await lt.window.showErrorMessage(We.l10n.t("Workspace folder does not exist.",s.cliHost.cwd),{modal:!0,detail:s.cliHost.cwd},We.l10n.t("Show Log"))&&lt.commands.executeCommand(it),!1;if(u==="command"&&(s.cliHost.type==="local"||s.cliHost.type==="wsl")&&await Y8(s.output)){let m=We.l10n.t("Install");if(await lt.window.showInformationMessage(We.l10n.t("Dev Containers require Docker to run."),{modal:!0,detail:We.l10n.t("Do you want to install Docker in WSL?")},m)===m){if(rf(r,"installInWSL","install"),await E0(t,s.output,n,r)){let g=We.l10n.t("Continue");return await lt.window.showInformationMessage(We.l10n.t("Docker has been installed. {0}",vge[o]),g)===g?(rf(r,"continueAfterInstall","continue"),!0):(rf(r,"continueAfterInstall","cancel"),!1)}return!1}return rf(r,"installInWSL","cancel"),!1}if(!u||u==="command"){if(s.cliHost.type==="wsl")await lt.window.showErrorMessage(We.l10n.t("Docker Desktop WSL 2 backend required."),{modal:!0},We.l10n.t("Read more on docker.com"))&&lt.env.openExternal(lt.Uri.parse("https://docs.docker.com/docker-for-windows/wsl"));else{let m=We.l10n.t("Install"),d=We.l10n.t("License"),p=We.l10n.t("Ignore"),g=[],h=[];u==="command"&&s.dockerCLI!=="docker"&&h.push(We.l10n.t("Command not found: '{0}'.",s.dockerCLI)),s.cliHost.type==="local"&&(g.push(m,d),h.push(We.l10n.t("Check the license for details."))),u===!1&&g.push(p);let v=h.join(" "),C=s.cliHost.type==="remote"?We.l10n.t("Docker version 17.12.0 or later required on remote host."):We.l10n.t("Docker version 17.12.0 or later required."),w=await lt.window.showErrorMessage(C,{modal:!0,detail:v},...g);if(w===m)return w0(s.output).then(console.error),rf(r,"dockerDesktop","install"),!1;if(w===d)return lt.env.openExternal(lt.Uri.parse("https://aka.ms/docker-subscription-service-agreement")),rf(r,"dockerDesktop","license"),!1;if(w===p)return rf(r,"dockerDesktop","ignore"),!0;rf(r,"dockerDesktop","cancel")}return!1}return u==="wsl1"?(await lt.window.showErrorMessage(We.l10n.t("WSL 2 distro required."),{modal:!0,detail:We.l10n.t("The WSL distro is running with WSL 1.")},We.l10n.t("Read more on docker.com"))&&lt.env.openExternal(lt.Uri.parse("https://docs.docker.com/docker-for-windows/wsl")),!1):!0}function rf(t,e,n){t.sendTelemetryEvent("dockerVersionUserChoice",{dialog:e,choice:n})}async function hC(t,e,n=!0){var a,c,l,u;let r;try{r=(await eN(t,hn,n,"version","--format","{{json .}}")).stdout.toString()}catch(f){console.error(f);let m=f&&(f.stderr?f.stderr.toString():f.message)||"";pC(e,"error",void 0,m);let d=m.toLowerCase();return d.indexOf("permission denied")!==-1?d.indexOf("ssh")!==-1?"ssh":"permission":d.indexOf("enoent")!==-1||d.indexOf("not found")!==-1||d.indexOf("notfound")!==-1?await t.cliHost.isFolder(t.cliHost.cwd)?(t.output.write(`CLI host's PATH: ${t.cliHost.env.PATH}`),"command"):"cwd":t.cliHost.type==="wsl"&&((l=(c=(a=f==null?void 0:f.stdout)==null?void 0:a.toString())==null?void 0:c.toLowerCase())==null?void 0:l.indexOf("wsl 1"))!==-1?"wsl1":"daemon"}let o;try{let f=Me(r);o=(u=f==null?void 0:f.Server)==null?void 0:u.ApiVersion}catch{}let i=o&&fx(o);if(!i&&r.toLowerCase().indexOf("error during connect")!==-1)return pC(e,"error",void 0,r),"daemon";if(!i)return pC(e,"unparsed",r),!0;let s=!dx(i,[1,35]);return!s&&await lG(t)?(pC(e,"podman",r),!0):(pC(e,s?"success":"failure",r),s)}function pC(t,e,n,r){let o={outcome:e};n&&(o.version=n),r&&(o.errorMessage=r),t.sendTelemetryEvent("dockerVersion",o)}async function K8(t){try{let e=Bi(t,await t.dockerComposeCLI());return await sw({...e,print:!0},"version","--short"),!0}catch(e){return(e==null?void 0:e.code)==="ENOENT"?await lt.window.showErrorMessage(We.l10n.t("Docker Compose required"),{modal:!0,detail:t.dockerComposePath!=="docker-compose"?We.l10n.t("Command not found: '{0}'.",t.dockerComposePath):void 0},We.l10n.t("Documentation"))&&lt.env.openExternal(lt.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079610")):await lt.window.showErrorMessage(We.l10n.t("Docker Compose returned an error."),{modal:!0},We.l10n.t("Show Log"))&&lt.commands.executeCommand(it),!1}}var wg=Y(require("vscode"));var S0=class{constructor(e){this.fileHost=e}async provideDocumentLinks(e,n){let r=[],o=cf(e.getText());if(!o)return r;let i=AC(o)||{};return i.configFilePath=e.uri,Oo(i)&&this._linksForDockerfile(r,i,o,e),"dockerComposeFile"in i&&await this._linksForDockerCompose(r,i,o,e),r}_tryAddDocumentLinkToBucket(e,n,r,o,i){let s=e.positionAt(n),a=e.positionAt(r);s.compareTo(a)!==0&&i.push(new wg.DocumentLink(new wg.Range(s,a),o))}_linksForDockerfile(e,n,r,o){let i=rs(r,["build","dockerfile"])||rs(r,["dockerFile"]);i&&i.type==="string"&&this._tryAddDocumentLinkToBucket(o,i.offset+1,i.offset+i.length-1,Kf(this.fileHost,n),e)}async _linksForDockerCompose(e,n,r,o){let s=(await zl(this.fileHost,n)).map(c=>wg.Uri.file(c).path),a=rs(r,["dockerComposeFile"]);if(s.length>0&&a)if(a.type==="array"&&a.children)for(let c=0;c<a.children.length;c++)this._tryAddDocumentLinkToBucket(o,a.children[c].offset+1,a.children[c].offset+a.children[c].length-1,o.uri.with({path:s[c]}),e);else a.type==="string"&&this._tryAddDocumentLinkToBucket(o,a.offset+1,a.offset+a.length-1,o.uri.with({path:s[0]}),e)}};var Z=Y(require("vscode")),Ae=require("vscode"),Eg=Y(require("path"));var yg=require("vscode"),J8=Y(require("path"));function x0(t){let e=tu(t);if(e)return`${J8.basename(e)}`;{let n=aw(t);if(n)return n;let r=vc(t);if(r)return Jk(r);let o=Ql(t);return o?o.volumeName:t.Config.Image}}function _0(t,e=!1){let n=yc(t);return e?`${n} (${CO(t)})`:n}function CO(t){let e="",n=t.State.Status,r=new Date(t.State.StartedAt),o=new Date(t.State.FinishedAt);if(r.getFullYear()>1&&o.getFullYear()>1){let i=new Date,s=new Date(r>o?t.State.StartedAt:t.State.FinishedAt);e=` ${xO(i,s)}`+(n.endsWith("ing")?"":" ago")}return`${n.charAt(0).toUpperCase()+n.slice(1)}`+e}function D0(t){let e=t.Name;if(t.Labels&&Cg(t)){let r=P0(t);r&&r.gitUrlInfo.repository!=="unknown"&&(e=r.gitUrlInfo.fullRepositoryName)}return e}function I0(t){let e="";if(t.Labels&&Cg(t)){let r=P0(t);if(r&&r.gitUrlInfo.repository!=="unknown"){let o=EO(t),i=SO(t);i?e=`#${i}`:o&&(e=`${o}`)}}return e}function Cg(t){let e=t.Labels;if(e){let n=e["vsch.local.repository.unique"];if(n&&n==="true")return!0}return!1}function EO(t){let e=t.Labels;if(e&&Cg(t)&&e["vsch.local.repository.branch"])return e["vsch.local.repository.branch"]}function SO(t){let e=t.Labels;if(e&&Cg(t)&&e["vsch.local.repository.pullRequestId"])return e["vsch.local.repository.pullRequestId"]}function P0(t){let e=t.Labels;if(e){let n=e["vsch.local.repository.unique"];if(n&&n==="true"){let r=e["vsch.local.repository"];return ci(r)}}}var X8=1e3,Z8=X8*60,Q8=Z8*60,e9=Q8*24,yge=e9*365;function xO(t,e){let n,r=t.getTime()-e.getTime();return(n=Math.round(r/yge))>0?n===1?"1 year":yg.l10n.t("{0} years",n):(n=Math.round(r/e9))>0?n===1?"1 day":yg.l10n.t("{0} days",n):(n=Math.round(r/Q8))>0?n===1?"1 hour":yg.l10n.t("{0} hours",n):(n=Math.round(r/Z8))>0?n===1?"1 minute":yg.l10n.t("{0} minutes",n):(n=Math.round(r/X8),n===1?"1 second":yg.l10n.t("{0} seconds",n))}var gC=Y(require("vscode")),vC=require("vscode");async function t9(t){let e=(await Promise.all([uw,fw,Wp,Hp,Xx].map(async o=>{let{stdout:i}=await et(t,"ps","-a","-q","--filter","status=exited","--filter",`label=${o}`);return i.toString().split(/\r?\n/).filter(s=>!!s)}))).flat(),n;if(e.length){let i=(await ws(t,e)).map(a=>({label:x0(a),description:_0(a,!0),container:a}));i.sort((a,c)=>a.label.localeCompare(c.label));let s=await gC.window.showQuickPick(i,{canPickMany:!0,placeHolder:vC.l10n.t("Select stopped dev containers to delete")});if(!s)return;s.length&&(n=new Set(await Xl(t)),await et(t,"rm",...s.map(a=>a.container.Id)))}let r=await r9(t,n);(!e.length||r==="none")&&await gC.window.showInformationMessage(vC.l10n.t("There are no stopped dev containers or unused dev volumes to delete."),{modal:!0})}async function n9(t){await r9(t)==="none"&&await gC.window.showInformationMessage(vC.l10n.t("There are no unused dev volumes to delete."),{modal:!0})}async function r9(t,e){let n=[...new Set([...e?(await Xl(t)).filter(r=>!e.has(r)&&r!=="vscode"):[],...await Xl(t,[zk]),...await Xl(t,[r_])])];if(n.length){let o=(await Jf(t,n)).map(s=>({label:D0(s),description:I0(s),volume:s}));o.sort((s,a)=>s.label.localeCompare(a.label));let i=await gC.window.showQuickPick(o,{canPickMany:!0,placeHolder:vC.l10n.t("Select unused dev volumes to delete")});if(!i)return"cancel";i.length&&await et(t,"volume","rm",...i.map(s=>s.volume.Name))}return n.length?"done":"none"}var o9=Ae.l10n.t("Stop Container"),i9=Ae.l10n.t("Reopen Folder locally"),s9=Ae.l10n.t("Close Workspace");var wr=class{static isGroupItem(e){return!!e&&e.type==="Group"}static isContainerItem(e){return!!e&&e.type==="Container"}static isFolderItem(e){return!!e&&e.type==="Folder"}};var b0=class extends wr{constructor(n,r){super();this.label=n;this.groupType=r}type="Group";async asTreeItem(n,r,o,i){return new Z.TreeItem(this.label,Z.TreeItemCollapsibleState.Expanded)}},Sg=class extends wr{constructor(n,r=[],o,i=!1){super();this.container=n;this.folders=r;this.parent=o;this.isDevContainer=i}type="Container";async asTreeItem(n,r,o,i){let s=new Z.TreeItem(this.getContainerLabel(),this.getCollapsibleState());s.description=_0(this.container);let a=this.getContextBase();s.iconPath=R0(r,xge),s.contextValue="exited"+a;let c=!1;return o&&this.container.Id===o.Id?(s.iconPath=R0(r,Sge),s.contextValue="active"+a,c=!0):n&&await this.setTreeItemIconAndContext(n,a,s),s.tooltip=this.getHover(c,s.iconPath instanceof Z.ThemeIcon?s.iconPath:new Z.ThemeIcon("vm"),s.label),this.folders.length===1&&this.isDevContainer&&(s.contextValue+="Folder"),s}getContextBase(){return(this.isDevContainer?"Dev":"")+"Container"}getCollapsibleState(){return this.folders.length>1?Z.TreeItemCollapsibleState.Expanded:Z.TreeItemCollapsibleState.None}async setTreeItemIconAndContext(n,r,o){switch(this.container.State.Status){case"created":{o.iconPath=new Z.ThemeIcon("vm"),o.contextValue="exited"+r;break}case"paused":{o.iconPath=new Z.ThemeIcon("vm-outline"),o.contextValue="running"+r;break}case"restarting":{o.iconPath=new Z.ThemeIcon("vm-outline"),o.contextValue="exited"+r;break}case"exited":{o.iconPath=new Z.ThemeIcon("vm"),o.contextValue="exited"+r;break}case"running":{o.iconPath=new Z.ThemeIcon("vm-running"),o.contextValue="running"+r;break}}}getTimeElapsed(n){return n?CO(n):""}getContainerLabel(){return x0(this.container)}getHover(n,r,o){let i=new Z.MarkdownString(void 0,!0);if(i.appendMarkdown(`$(${r.id}) ${o} (${yc(this.container)})  
`),this.repository){let a=this.repository.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)";i.appendMarkdown(`${a} [${this.repository.fullRepositoryName}](${this.repository.gitUrlInfo.repositoryUrl})  
`)}let s=o_(this.container);return s&&i.appendMarkdown(`$(file-symlink-directory) ${s}  
`),n?i.appendMarkdown(Ae.l10n.t("$(remote) Connected")):i.appendMarkdown(`$(history) ${this.getTimeElapsed(this.container)}`),i}_repository;_alreadyCheckedRepository=!1;get repository(){if(!this._alreadyCheckedRepository){let n=vc(this.container);n&&(this._repository=ci(n)),this._alreadyCheckedRepository=!0}return this._repository}inspect(n){return si(n,this.container.Id)}},ol=class extends wr{constructor(n,r,o){super();this.container=n;this.folder=r;this.isDevContainer=o}type="Folder";async asTreeItem(n,r,o,i){let s=new Z.TreeItem(Eg.basename(this.folder.path),Z.TreeItemCollapsibleState.None);return s.description=this.folder.path,s.iconPath=R0(r,Dge),s.contextValue="attachedFolder",this.isDevContainer&&!vc(this.container)&&!Ql(this.container)&&(s.contextValue="devFolder"),o&&this.container.Id===o.Id&&i===this.folder.path&&(s.iconPath=R0(r,_ge),s.tooltip=Ae.l10n.t("Active Folder {0}",String(s.label)),s.contextValue=`active${s.contextValue}`),s}};function Cge(t,e,n,r){if(!(!Z.env.remoteName||Z.env.remoteName!=="attached-container"&&Z.env.remoteName!=="dev-container"))return a9(t,e,n,r)}function a9(t,e,n,r){Z.commands.executeCommand("setContext","remote-containers:showDetails",!0);let o=new bO(t,e,r,e.output),i=Z.window.createTreeView("detailsContainers",{treeDataProvider:o});return o.setTitle=s=>{i.title=s},t.subscriptions.push(n.onDidChangeActiveContainer(s=>o.refresh(s))),o}function Ege(t,e){let n=[o9];return t&&t.Id===e.Id&&Z.workspace.workspaceFolders&&Z.workspace.workspaceFolders.length>0&&(n.push(s9),Z.workspace.workspaceFolders[0].uri.authority.startsWith("dev-container")&&n.push(i9)),n}var _O=class{constructor(e,n){this.dockerParams=e;this.containerId=n}writeEmitter=new Z.EventEmitter;onDidWrite=this.writeEmitter.event;destroyables=[];open(){let{cliHost:e,env:n,output:r}=this.dockerParams;e.exec({cmd:Ms(),args:["logs","-f",this.containerId],env:n,output:r}).then(o=>{this.destroyables.push(o.stdout.on("data",i=>{this.write(i.toString())})),this.destroyables.push(o.stderr.on("data",i=>{this.write(i.toString())}))}).catch(console.error)}close(){this.writeEmitter.dispose(),this.destroyables.forEach(e=>{e.destroy()})}write(e){this.writeEmitter.fire(e.replace(/\n/g,`\r
`))}},T0=class{constructor(e,n,r,o,i,s){this.targetsTreeData=e;this.detailsTreeData=n;this.devVolumesTreeData=r;this.dockerParams=o;this.context=i;this.telemetry=s}updateDockerParameters(e){this.dockerParams=e}registerCommands(){let e=[];return e.push(Z.commands.registerCommand("remote-containers.stopContainer",this.commandStopContainer,this)),e.push(Z.commands.registerCommand("remote-containers.removeContainer",this.commandRemoveContainer,this)),e.push(Z.commands.registerCommand("remote-containers.startContainer",this.commandStartContainer,this)),e.push(Z.commands.registerCommand("remote-containers.removeRecentFolder",this.commandRemoveRecentFolder,this)),e.push(Z.commands.registerCommand("remote-containers.showDetails",this.commandShowDetails,this)),e.push(Z.commands.registerCommand("remote-containers.explorerDetailsRefresh",this.commandExplorerDetailsRefresh,this)),e.push(Z.commands.registerCommand("remote-containers.attachToContainerInCurrentWindow",this.commandAttachToContainerInCurrentWindow,this)),e.push(Z.commands.registerCommand("remote-containers.attachToContainerInNewWindow",this.commandAttachToContainerInNewWindow,this)),e.push(Z.commands.registerCommand("remote-containers.inspectDockerResource",this.commandInspectDockerResource,this)),e.push(Z.commands.registerCommand("remote-containers.openInformationAboutMountPerformance",this.openInformationAboutMountPerformance,this)),e.push(Z.commands.registerCommand("remote-containers.inspectInBasicDevContainer",this.commandInspectInBasicDevContainer,this)),e.push(Z.commands.registerCommand("remote-containers.cloneInVolume",this.commandCloneInVolume,this)),e.push(Z.commands.registerCommand("remote-containers.removeVolume",this.commandRemoveVolume,this)),e.push(Z.commands.registerCommand("remote-containers.explorerVolumesRefresh",this.commandExplorerVolumesRefresh,this)),e.push(Z.commands.registerCommand("remote-containers.openFolderInContainerInCurrentWindow",n=>this.commandStartAndOpenFolder(n,{forceReuseWindow:!0}),this)),e.push(Z.commands.registerCommand("remote-containers.openFolderInContainerInNewWindow",n=>this.commandStartAndOpenFolder(n,{forceNewWindow:!0}),this)),e.push(Z.commands.registerCommand("remote-containers.showContainerLog",this.commandShowContainerLog,this)),e}async commandStopContainer(e){if(!wr.isContainerItem(e))return;let n=this.targetsTreeData.currentContainer&&this.targetsTreeData.currentContainer.Id===e.container.Id?Ae.l10n.t("Stop active container? This will disconnect your current window."):Ae.l10n.t("Stop {0}?",e.getContainerLabel()),r=await Z.window.showWarningMessage(n,{modal:!0},...Ege(this.targetsTreeData.currentContainer,e.container));await this.targetsTreeData.withProgress(e,async()=>{switch(r){case o9:{await zF(this.dockerParams,e.container),e.container=await si(this.dockerParams,e.container.Id);break}case s9:{await Z.commands.executeCommand("workbench.action.closeFolder");break}case i9:{await Z.commands.executeCommand("remote-containers.reopenLocally");break}}})}async commandRemoveContainer(e){if(!wr.isContainerItem(e))return;let n=await ai(this.dockerParams,e.container.Id);if(!n)return;let r=Ae.l10n.t("Remove"),o=await Z.window.showWarningMessage(Ae.l10n.t("Remove this container?"),{modal:!0,detail:Ae.l10n.t("This action is not reversible and deletes the container permanently.")},r);await this.targetsTreeData.withProgress(e.parent,async()=>{o===r&&(await zF(this.dockerParams,e.container),await _5(this.dockerParams,n.Id),this.detailsTreeData&&await this.detailsTreeData.refresh(void 0),await this.tryRemoveVolume(e.container))})}async tryRemoveVolume(e){let n=o_(e);if(n||(n=MG(e)),n){let r=await Wx(this.dockerParams,n);if((await Xl(this.dockerParams)).indexOf(n)>=0){let s;r!=null&&r.Labels&&r.Labels["vsch.local.repository.unique"]==="true"?s=Ae.l10n.t("The container is using a volume with a cloned repository."):s=Ae.l10n.t("This is the last container using '{0}'.",n);let a=Ae.l10n.t("Remove");await Z.window.showInformationMessage(s,{modal:!0,detail:Ae.l10n.t("Do you want to remove the volume and the data it contains?")},a)===a&&await KF(this.dockerParams,n)}}}async commandExplorerVolumesRefresh(e){return await this.devVolumesTreeData.getDockerParams(),this.devVolumesTreeData.refresh(void 0)}async commandStartContainer(e){wr.isContainerItem(e)&&await this.targetsTreeData.withProgress(e,async()=>{await o0(this.dockerParams,e.container),e.container=await si(this.dockerParams,e.container.Id)})}async commandRemoveRecentFolder(e){wr.isFolderItem(e)&&(await Z.commands.executeCommand("vscode.removeFromRecentlyOpened",e.folder.toString()),await this.targetsTreeData.refresh(void 0))}async commandShowDetails(e){wr.isContainerItem(e)&&(this.detailsTreeData||(this.detailsTreeData=a9(this.context,this.dockerParams,this.targetsTreeData,this.telemetry)),await this.detailsTreeData.refresh(e))}async commandExplorerDetailsRefresh(){this.detailsTreeData&&await this.detailsTreeData.refresh(void 0)}async commandStartAndOpenFolder(e,n){let r,o;wr.isFolderItem(e)?(o=e,r=e.container):Sg.isContainerItem(e)&&(o=e.folders[0],r=e.container),r&&(o&&nd(o.folder.authority)?(await o0(this.dockerParams,r),await wC(this.dockerParams,r,this.context,!!(n!=null&&n.forceNewWindow),o.folder.path)):await Z.commands.executeCommand("remote-containers.openFolder",o,n))}async commandAttachToContainerInCurrentWindow(e){return this.attachToContainerInternal(e,!1)}async commandAttachToContainerInNewWindow(e){return this.attachToContainerInternal(e,!0)}async attachToContainerInternal(e,n){let r;wr.isContainerItem(e)?r=e.container:this.detailsTreeData&&(r=this.detailsTreeData.container),r&&(await o0(this.dockerParams,r),await wC(this.dockerParams,r,this.context,n))}async commandInspectDockerResource(e){let n;(wr.isContainerItem(e)||il.isImageItem(e)||il.isVolume(e)||il.isDevVolume(e))&&(n=await e.inspect(this.dockerParams)),n&&Z.window.showTextDocument(await Z.workspace.openTextDocument({language:"json",content:JSON.stringify(n,null,"	")}))}async openInformationAboutMountPerformance(){await Z.env.openExternal(Z.Uri.parse("https://aka.ms/vscode-remote/containers/open-repo"))}async commandInspectInBasicDevContainer(e){il.isDevVolume(e)&&await e.inspectInBasicDevContainer()}async commandCloneInVolume(e){il.isDevVolume(e)&&await e.cloneRepositoryInVolume()}async commandRemoveVolume(e){il.isDevVolume(e)&&await e.removeVolume(this.dockerParams)}static async commandNewContainer(){var r;let e=[...(r=Z.workspace.workspaceFolders)!=null&&r.length?[{label:Ae.l10n.t("Open Current Folder in Container"),command:"remote-containers.reopenInContainer"}]:[],{label:Ae.l10n.t("Open Folder in Container..."),command:"remote-containers.openFolder"},{label:Ae.l10n.t("Open Workspace in Container..."),command:"remote-containers.openWorkspace"},{label:Ae.l10n.t("New Dev Container..."),command:"remote-containers.createDevContainer"},{label:Ae.l10n.t("Clone Repository in Container Volume..."),command:"remote-containers.openRepositoryInVolume"},{label:Ae.l10n.t("Clone GitHub Pull Request in Container Volume..."),command:"remote-containers.openPullRequestInVolume"},{label:Ae.l10n.t("Try a Sample..."),command:"remote-containers.trySample"}],n=await Z.window.showQuickPick(e,{placeHolder:Ae.l10n.t("Select an action to create a dev container")});if(n)return Z.commands.executeCommand(n.command)}async commandShowContainerLog(e){if(!wr.isContainerItem(e))return;let n=new _O(this.dockerParams,e.container.Id);Z.window.createTerminal({name:e.container.Config.Image,pty:n}).show()}};function c9(t,e,n,r){Z.commands.executeCommand("setContext","remote-containers:showDetails",!1);let o=new DO(t,e,s,n,r),i=Z.window.createTreeView("targetsContainers",{treeDataProvider:o});o.setMessage=a=>i.message=a,t.subscriptions.push(Z.commands.registerCommand("remote-containers.explorerTargetsRefresh",async()=>(await o.getDockerParams(!0),o.refresh(void 0)))),t.subscriptions.push(Z.commands.registerCommand("remote-containers.newContainer",T0.commandNewContainer)),t.subscriptions.push(Z.commands.registerCommand("remote-containers.pruneVolumes",async()=>{let a=await o.getDockerParams(!0);a&&await n9(a)}));function s(a){let c=Cge(t,a,o,n),l=new RO(t,n,r),u=Z.window.createTreeView("devVolumes",{treeDataProvider:l});t.subscriptions.push(u);let f=new T0(o,c,l,a,t,n);t.subscriptions.push(...f.registerCommands()),t.subscriptions.push(VF(t,n.product)(async()=>{o.refresh(void 0),l.refresh(void 0);let m=await Ze(t,r);c&&c.updateDockerParameters(m),f.updateDockerParameters(m)}))}}var DO=class{constructor(e,n,r,o,i){this.context=e;this.resolverResults=n;this.onFirstReveal=r;this.telemetry=o;this.output=i}_onDidChangeTreeData=new Z.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;_onDidChangeActiveContainer=new Z.EventEmitter;onDidChangeActiveContainer=this._onDidChangeActiveContainer.event;dockerParams;refreshDockerParams=!1;needsSSHCredentials=!1;passiveSSHAskpassEnv;eventsProcess;setTreeMessage=()=>{};_currentContainer;currentFolder;devContainers=[];attachContainers=[];otherContainers=[];recentAttachEntries=new Map;recentAttachDevContainerEntries=new Map;recentDevComposeEntries=new Map;containerItems=new Map;action=Promise.resolve();set setMessage(e){this.setTreeMessage=e}get currentContainer(){return this._currentContainer}async getDockerParams(e=!1){if(!this.dockerParams){this.passiveSSHAskpassEnv||(this.passiveSSHAskpassEnv=Kl(this.context.extensionPath,async n=>(this.needsSSHCredentials=!0,vm(n,!1)),this.output));try{this.dockerParams=await Ze(this.context,this.output,void 0,void 0,e?void 0:this.passiveSSHAskpassEnv,!1);let n=GF();await hC(this.dockerParams,this.telemetry,n)!==!0&&(this.dockerParams=void 0)}catch(n){if(!this.needsSSHCredentials)throw n}}return this.dockerParams}handleDockerEvent(e){try{let n=JSON.parse(e.toString());if(!n.Action)return;let r="exec_create: /root/.vscode-server";if(n.Action==="die"||n.Action==="destroy"||n.Action==="create")this._onDidChangeTreeData.fire();else if(!n.Action.startsWith("exec_create")&&n.Actor&&n.Actor.ID&&this.containerItems.has(n.Actor.ID)){let o=this.containerItems.get(n.Actor.ID);this.dockerParams&&o?(async()=>(o.container=await si(this.dockerParams,o.container.Id),this._onDidChangeTreeData.fire(o)))():this._onDidChangeTreeData.fire(o);return}else if(n.Action.startsWith(r)){this._onDidChangeTreeData.fire();return}}catch{}}async tryEnsureDocker(){let e=await this.getDockerParams();if(e)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await Vx(e,{event:["create","destroy","die","health-status","kill","pause","rename","resize","restart","start","stop","unpause","update","exec_create"]}),this.eventsProcess.stdout.on("data",n=>{this.handleDockerEvent(n)})}catch(n){n.code!=="ENOENT"&&console.log(n),this.dockerParams=void 0}}async getTreeItem(e){return e.asTreeItem(this.dockerParams,this.context,this._currentContainer,this.currentFolder)}needsDockerStartOrInstallContext=void 0;async setDockerStartOrInstallContext(e){(this.needsDockerStartOrInstallContext===void 0||this.needsDockerStartOrInstallContext!==e)&&(this.needsDockerStartOrInstallContext=e,!this.needsDockerStartOrInstallContext&&this.hasContainersContext===!1&&this.setHasContainersContext(!0),await Z.commands.executeCommand("setContext","remote-containers:needsDockerStartOrInstall",!this.needsDockerStartOrInstallContext&&!this.needsSSHCredentials),await Z.commands.executeCommand("setContext","remote-containers:needsSSHCredentials",!this.needsDockerStartOrInstallContext&&this.needsSSHCredentials))}hasContainersContext=void 0;async setHasContainersContext(e){if(this.hasContainersContext===void 0||this.hasContainersContext!==e){this.hasContainersContext=e;let n=Z.workspace.workspaceFolders&&Z.workspace.workspaceFolders.length>0?"remote-containers:noContainersWithFolder":"remote-containers:noContainersWithoutFolder";await Z.commands.executeCommand("setContext",n,!this.hasContainersContext)}}async getDockerOrShowMessage(e){return this.refreshDockerParams&&(this.refreshDockerParams=!1,this.dockerParams=void 0),!this.dockerParams&&(e===void 0&&await this.tryEnsureDocker(),!this.dockerParams)?(this.setDockerStartOrInstallContext(!1),this._onDidChangeActiveContainer.fire(void 0),!1):(this.setDockerStartOrInstallContext(!0),!0)}async getChildGroups(e){this.containerItems.clear(),await this.setCurrents(),await this.setContainerTypes(e);let n=[];return(this.devContainers.length>0||this.attachContainers.length>0)&&n.push(new b0(Ae.l10n.t("Dev Containers"),0)),this.otherContainers.length>0&&n.push(new b0(Ae.l10n.t("Other Containers"),2)),n}async getChildDevContainer(e,n){let r=await this.getWorkspaceFolderFromContainer(e),o=r?[new ol(e,r,!0)]:[],i=tu(e);i&&this.recentAttachDevContainerEntries.has(i)?o.push(...this.recentAttachDevContainerEntries.get(i).map(a=>new ol(e,a,!1))):i&&this.recentAttachEntries.has(e.Id)?o.push(...this.recentAttachEntries.get(e.Id).map(a=>new ol(e,a,!1))):(i=vc(e))&&this.recentAttachDevContainerEntries.has(i)?o.push(...this.recentAttachDevContainerEntries.get(i).map(a=>new ol(e,a,!1))):(i=$k(Ql(e)))&&this.recentAttachDevContainerEntries.has(i)?o.push(...this.recentAttachDevContainerEntries.get(i).map(a=>new ol(e,a,!1))):i===void 0&&this.recentDevComposeEntries.has(e.Id)&&o.push(...this.recentDevComposeEntries.get(e.Id).map(a=>new ol(e,a,!1)));let s=new Sg(e,o,n,!0);return this.setContainerItems(s),s}setContainerItems(e){this.containerItems.set(e.container.Id,e),this._currentContainer&&e.container.Id===this._currentContainer.Id&&this._onDidChangeActiveContainer.fire(e)}async getChildContainers(e){let n;if(e.groupType===0){let r=this.devContainers.map(async o=>this.getChildDevContainer(o,e));r.push(...this.attachContainers.map(async o=>{let i=new Sg(o,this.recentAttachEntries.get(o.Id).map(s=>new ol(o,s,!1)),e);return this.setContainerItems(i),i})),n=await Promise.all(r)}else n=this.otherContainers.map(r=>{let o=new Sg(r,[],e);return this.setContainerItems(o),o});return n.sort((r,o)=>r.getContainerLabel().localeCompare(o.getContainerLabel()))}getChildFolders(e){return e.folders&&e.folders.length>1?e.folders:[]}async getChildItems(e){if(e===void 0){let n=await Jl(this.dockerParams,!0);if(await this.setHasContainersContext(n.length>0),n.length===0)return[];let r=await ws(this.dockerParams,n);return this.getChildGroups(r)}else{if(wr.isGroupItem(e))return this.getChildContainers(e);if(wr.isContainerItem(e))return this.getChildFolders(e)}return[]}async getChildren(e){return await this.action,await this.getDockerOrShowMessage(e)?(this.onFirstReveal&&(this.onFirstReveal(this.dockerParams),this.onFirstReveal=void 0),this.setTreeMessage(void 0),this.getChildItems(e)):[]}async refresh(e){e===void 0&&(this.refreshDockerParams=!0),this._onDidChangeTreeData.fire(e)}async setCurrents(){let e=Z.workspace.workspaceFolders,n;if(this.dockerParams){if(e&&e.length>0){let r=this.resolverResults.get(e[0].uri.authority);r&&r.dockerContainerId&&(n=await ai(this.dockerParams,r.dockerContainerId),this.currentFolder=e[0].uri.path)}else if(this.resolverResults.size>0){let r=[...this.resolverResults.values()][0].dockerContainerId;r&&(n=await ai(this.dockerParams,r))}}n!==this._currentContainer&&(this._currentContainer=n)}addContainerToMap(e){if(tu(e)){this.devContainers.push(e);return}else if(vc(e)){this.devContainers.push(e);return}else if(Ql(e)){this.devContainers.push(e);return}else if(aw(e)&&this.recentDevComposeEntries.has(e.Id)){this.devContainers.push(e);return}else if(this.recentAttachEntries.has(e.Id)){this.attachContainers.push(e);return}this.otherContainers.push(e)}async setContainerTypes(e){return await this.setRecentEntries(e),this.devContainers.length=0,this.attachContainers.length=0,this.otherContainers.length=0,e.forEach(n=>{this.addContainerToMap(n)}),{hasDev:this.devContainers.length>0,hasAttach:this.attachContainers.length>0}}async getWorkspaceFolderFromHostWorkspace(e,n){let{cliHost:r,dockerCLI:o,dockerComposePath:i}=this.dockerParams,s=It(r.path,e),a=n?Ce.from({scheme:Ke.scheme,path:n}):await yG(r,s,oC(),hn),c={cliHost:r,dockerPath:o,dockerComposePath:i,appRoot:Z.env.appRoot,extensionPath:this.context.extensionPath,package:await cr(this.context.extensionPath),output:this.output},l=a&&await cg(c,s.rootFolderPath,a);if(l){let u=dr(this.dockerParams.env);return Z.Uri.parse(hw(r.authority,e,l.workspace.workspaceFolder,u),!0)}}async getWorkspaceFolderFromContainer(e){let n=tu(e);if(n){let r=UG(e);return this.getWorkspaceFolderFromHostWorkspace(n,r)}else{let r=vc(e),o=o_(e),i=$G(e),s=this.dockerParams;if(r){let c=dr(s.env);return Z.Uri.parse(Wi(s.cliHost.authority,r,o,i,!1,c,void 0))}let a=Ql(e);if(a){let c=dr(s.env);return Z.Uri.parse(Wi(s.cliHost.authority,void 0,a.volumeName,a.folder,!1,c,void 0))}}}async getWorkspaceFolderFromHostPath(e){let n=this.dockerParams.cliHost,r=await KG(n,e,this.output),o=JG(n,r,e),i=dr(this.dockerParams.env);return Z.Uri.parse(hw(n.authority,e,o,i),!0)}getWorkspaceFolderFromRepository(e,n,r){let o=this.dockerParams,i=dr(o.env);return Z.Uri.parse(Wi(o.cliHost.authority,e,n,r,!1,i,void 0),!0)}getWorkspaceFolderFromDevContainerInVolume(e,n){let r=this.dockerParams,o=dr(r.env);return Z.Uri.parse(Wi(r.cliHost.authority,void 0,e,n,!1,o,void 0),!0)}async findComposeTargetContainer(e,n){var r;return(r=n.find(o=>tu(o)===e))==null?void 0:r.Id}trySetEntryWithAttachAuthority(e,n,r){let o;if("containerName"in n){let i=r.find(s=>s.Name===n.containerName);i&&(o=i.Id)}else o=n.containerId;o&&(this.recentAttachEntries.has(o)?this.recentAttachEntries.get(o).push(e):this.recentAttachEntries.set(o,[e]))}async trySetEntryWithDevAuthority(e,n,r,o){let i=n.hostPath,s=o[i];if(s||(s=await this.getWorkspaceFolderFromHostPath(n.hostPath),o[i]=s),s.path!==e.path){this.recentAttachDevContainerEntries.has(n.hostPath)?this.recentAttachDevContainerEntries.get(n.hostPath).push(e):this.recentAttachDevContainerEntries.set(n.hostPath,[e]);let a=await this.findComposeTargetContainer(n.hostPath,r);a&&this.recentDevComposeEntries.has(a)?this.recentDevComposeEntries.get(a).push(e):a&&this.recentDevComposeEntries.set(a,[e])}}trySetEntryWithRepoAuthority(e,n){this.getWorkspaceFolderFromRepository(n.repositoryPath,n.volumeName,n.folder).path!==e.path&&(this.recentAttachDevContainerEntries.has(n.repositoryPath)?this.recentAttachDevContainerEntries.get(n.repositoryPath).push(e):this.recentAttachDevContainerEntries.set(n.repositoryPath,[e]))}trySetEntryWithDevContainerInVolumeAuthority(e,n){if(this.getWorkspaceFolderFromDevContainerInVolume(n.volumeName,n.folder).path!==e.path){let o=$k(n);this.recentAttachDevContainerEntries.has(o)?this.recentAttachDevContainerEntries.get(o).push(e):this.recentAttachDevContainerEntries.set(o,[e])}}trySetEntryWithVolumeAuthority(e,n){let r=n.volumeName;r&&(this.recentAttachEntries.has(r)?this.recentAttachEntries.get(r).push(e):this.recentAttachEntries.set(r,[e]))}async trySetEntry(e,n,r){if(!e||!e.folderUri&&!e.workspace.configPath)return;let o=e.folderUri??e.workspace.configPath,i=nd(o.authority);if(i)this.trySetEntryWithAttachAuthority(o,i,n);else{let s=uo(o.authority);s&&(un(s)?await this.trySetEntryWithDevAuthority(o,s,n,r):lo(s)?this.trySetEntryWithRepoAuthority(o,s):ed(s)?this.trySetEntryWithDevContainerInVolumeAuthority(o,s):this.trySetEntryWithVolumeAuthority(o,s))}}async setRecentEntries(e){this.recentAttachEntries.clear(),this.recentAttachDevContainerEntries.clear(),this.recentDevComposeEntries.clear();let n=await Z.commands.executeCommand("_workbench.getRecentlyOpened");if(n&&n.workspaces){let r={};for(let o of n.workspaces)await this.trySetEntry(o,e,r)}}withProgress(e,n){return this.action=this.action.then(()=>n()),this.refresh(e)}};var il=class{constructor(e){this.label=e}detail;context;command;type="Default";static isDetailItem(e){return!!e&&e.label!==void 0&&e.type!==void 0}static isImageItem(e){return!!e&&e.type==="Image"}static isVolume(e){return!!e&&e.type==="Volume"}static isDevVolume(e){return!!e&&e.type==="DevVolume"}},IO=class{constructor(e){this.detail=e}type="Image";context="image";label=Ae.l10n.t("Image");inspect(e){return cG(e,this.detail)}},PO=class{constructor(e,n,r){this.label=e;this.detail=n;this.volumeDetails=r}type="Volume";context="volume";async inspect(e){return Wx(e,this.volumeDetails)}},bO=class{constructor(e,n,r,o){this.context=e;this.dockerParams=n;this.telemetry=r;this.output=o}_onDidChangeTreeData=new Z.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;_container;setTreeTitle=()=>{};updateDockerParameters(e){this.dockerParams=e}set setTitle(e){this.setTreeTitle=e}get container(){return this._container?this._container.container:void 0}getTreeItem(e){let n=new Z.TreeItem(e.label,Array.isArray(e.detail)&&e.detail.length>0?Z.TreeItemCollapsibleState.Expanded:Z.TreeItemCollapsibleState.None);return n.tooltip=e.label,e.detail&&!Array.isArray(e.detail)&&(n.description=e.detail,n.tooltip+=` ${n.description}`),n.contextValue=e.context,n.command=e.command,n}async getAttributes(e,n,r){let o=[];n&&o.push({label:Ae.l10n.t("Workspace"),detail:n});let i=vc(e.container);i&&o.push({label:Ae.l10n.t("Repository"),detail:i});let s=Ql(e.container);return s&&(o.push({label:Ae.l10n.t("Volume"),detail:s.volumeName}),o.push({label:Ae.l10n.t("Folder"),detail:s.folder})),o.push({label:Ae.l10n.t("Name"),detail:e.container.Name}),o.push(new IO(e.container.Config.Image)),r&&o.push({label:Ae.l10n.t("Configuration"),detail:r,command:{title:Ae.l10n.t("Open Dev Container File"),command:"remote-containers.openDevContainerFile",arguments:[r]},context:"devContainer"}),o}async getMounts(e){let n=[];return e&&e.Mounts.forEach(r=>{if(r.Type==="volume"){let o=r.Name,i=new PO(Ae.l10n.t("Volume"),o,o),s={label:Ae.l10n.t("Destination"),detail:r.Destination};n.push({label:Ae.l10n.t("Volume mount"),detail:[i,s]})}else if(r.Type==="bind"){let o={label:Ae.l10n.t("Source"),detail:r.Source},i={label:Ae.l10n.t("Destination"),detail:r.Destination},s=this.dockerParams&&["win32","darwin"].includes(this.dockerParams.cliHost.platform)?[{label:Ae.l10n.t("I/O performance"),detail:Ae.l10n.t("reduced by bridging OSes"),context:"mountPerformanceInfo",command:{command:"remote-containers.openInformationAboutMountPerformance"}}]:[];n.push({label:Ae.l10n.t("Bind mount"),detail:[o,i,...s]})}}),n}async getChildrenFromRoot(e){let n=[],r=tu(e.container),o=(e.container.Config.Labels||{})[Zf];n.push({label:Ae.l10n.t("Attributes"),detail:await this.getAttributes(e,r,o),type:"Title"});let i;this.dockerParams&&(i=await si(this.dockerParams,e.container.Id));let s=await this.getMounts(i);return s.length>0&&n.push({label:Ae.l10n.t("Mounts"),detail:s,type:"Title"}),n}async testContainer(){let e=!0;try{(this.dockerParams?await si(this.dockerParams,this._container.container.Id):void 0)===void 0&&(e=!1)}catch{e=!1}return e||(this._container=void 0,this.setTreeTitle(Ae.l10n.t("Details (Containers)"))),e}async getChildren(e){if(this._container===void 0)return[];let n=[];return e===void 0?await this.testContainer()&&(this.setTreeTitle(this._container.getContainerLabel()),n=await this.getChildrenFromRoot(this._container)):Array.isArray(e.detail)&&n.push(...e.detail),n}async refresh(e){this.dockerParams=await Ze(this.context,this.output),await hC(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0,this._container=void 0),this._container=e||this._container,this._onDidChangeTreeData.fire(void 0)}},TO=class extends il{type="DevVolume";volumeDetails;createdAt;constructor(e){super(e.Name),this.volumeDetails=e,this.createdAt=void 0}async asTreeItem(){let e=this.getLabel(),n=new Z.TreeItem(e,Z.TreeItemCollapsibleState.None);return n.iconPath=this.iconPath,n.description=this.getDescription(),this.isUniqueVolume()?n.contextValue="uniqueDevVolume":n.contextValue="devVolume",n}isUniqueVolume(){return Cg(this.volumeDetails)}getLabel(){return D0(this.volumeDetails)}getDescription(){return I0(this.volumeDetails)}getBranchName(){return EO(this.volumeDetails)}getPullRequestId(){return SO(this.volumeDetails)}getRepository(){return P0(this.volumeDetails)}get iconPath(){return new Z.ThemeIcon("file-symlink-directory")}getTimeElapsed(){if(this.createdAt)return this.createdAt;let e="";if(new Date(this.volumeDetails.CreatedAt).getFullYear()>1){let r=new Date,o=new Date(this.volumeDetails.CreatedAt);e=Ae.l10n.t("{0} ago",xO(r,o))}return this.createdAt=e,e}async inspect(e){return Wx(e,this.volumeDetails.Name)}async inspectInBasicDevContainer(){await Z.commands.executeCommand("remote-containers.inspectVolume",this.volumeDetails.Name)}async cloneRepositoryInVolume(){await Z.commands.executeCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",this.volumeDetails.Name)}async removeVolume(e){if(!((await Xl(e)).indexOf(this.volumeDetails.Name)>=0)){await Z.window.showInformationMessage(Ae.l10n.t("Volume '{0}' is in use and cannot be removed.",this.volumeDetails.Name),{modal:!0});return}let o=Ae.l10n.t("Remove");await Z.window.showInformationMessage(Ae.l10n.t("Are you sure you want to remove volume '{0}'?",this.volumeDetails.Name),{modal:!0},o)===o&&await KF(e,this.volumeDetails.Name)}},RO=class{constructor(e,n,r){this.context=e;this.telemetry=n;this.output=r}dockerParams;_onDidChangeTreeData=new Z.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;eventsProcess;async getTreeItem(e){return e.asTreeItem()}async getDockerParams(){if(!this.dockerParams){this.dockerParams=await Ze(this.context,this.output,void 0,void 0);let e=GF();await hC(this.dockerParams,this.telemetry,e)!==!0&&(this.dockerParams=void 0)}return this.dockerParams}async setHasVolumesContext(e){await Z.commands.executeCommand("setContext","remote-containers:noDevVolumes",e)}async getDockerOrShowMessage(e){return!(!this.dockerParams&&(e===void 0&&await this.tryEnsureDocker(),!this.dockerParams))}async getChildren(e){if(!await this.getDockerOrShowMessage(e))return[];let n=await Ze(this.context,this.output),r=await Uo(n),o=await Jf(n,r),i=a=>!(a.Name==="vscode"||a.Name.length===64&&/^[0-9a-fA-F]+$/.test(a.Name)),s=o.filter(i);return await this.setHasVolumesContext(s.length===0),s.sort((a,c)=>{let l=new Date(a.CreatedAt);return new Date(c.CreatedAt).getTime()-l.getTime()}),s.map(a=>new TO(a))}async resolveTreeItem(e,n){let r=await Ze(this.context,this.output),o=await this.getAssociatedContainers(r,n),i=n.getLabel(),s=n.getRepository(),a=n.getBranchName(),c=n.getPullRequestId(),l=n.getTimeElapsed();return o.length>0?e.tooltip=this.renderMarkdown(i,s,a,c,l,o.join(", ")):e.tooltip=this.renderMarkdown(i,s,a,c,l,Ae.l10n.t("None")),e}async getAssociatedContainers(e,n){let r=[],o=await Jl(e,!0),i=await ws(e,o);for(let s of i)for(let a of s.Mounts)a.Type==="volume"&&a.Name===n.volumeDetails.Name&&r.push(yc(s));return r}renderMarkdown(e,n,r,o,i,s){let a=new Z.MarkdownString(void 0,!0);if(n){let c=n.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)",l=n.gitUrlInfo.repositoryUrl;l.startsWith("http")?(l=n.gitUrlInfo.repositoryUrl.replace(".git",""),a.appendMarkdown(`${c} [${l}](${l})
`)):a.appendMarkdown(`${c} ${l})
`),a.appendMarkdown(`&nbsp;  
`),r&&(n.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-compare) [${r}](${l}/tree/${r})
`):a.appendMarkdown(`$(git-compare) ${r}
`),a.appendMarkdown(`&nbsp;  
`)),o&&(n.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-pull-request-create) [#${o}](${l}/pull/${o})
`):a.appendMarkdown(`$(git-pull-request-create) #${o}
`),a.appendMarkdown(`&nbsp;  
`)),a.appendMarkdown(`$(history) ${i}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`)}else a.appendMarkdown(`$(file-symlink-directory) ${e}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(history) ${i}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`);return a}handleDockerEvent(e){try{let n=JSON.parse(e.toString());if(!n.Action)return;(n.Action==="die"||n.Action==="destroy"||n.Action==="create"||n.Action==="prune")&&this._onDidChangeTreeData.fire()}catch{}}async tryEnsureDocker(){let e=await this.getDockerParams();if(e)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await Vx(e,{event:["destroy","die","kill","create","rename","resize","restart","start","stop","unpause","prune"]}),this.eventsProcess.stdout.on("data",n=>{this.handleDockerEvent(n)})}catch(n){n.code!=="ENOENT"&&console.log(n),this.dockerParams=void 0}}async refresh(e){e===void 0&&(this.dockerParams=void 0),this._onDidChangeTreeData.fire(e)}},Sge="vm-active",xge="vm-default",_ge="folder-active",Dge="folder";function R0(t,e){let n=`${e}.svg`;return{light:Z.Uri.file(t.asAbsolutePath(Eg.join("resources","light",n))),dark:Z.Uri.file(t.asAbsolutePath(Eg.join("resources","dark",n))),highContrast:Z.Uri.file(t.asAbsolutePath(Eg.join("resources","highContrast",n)))}}var BO=require("util");var er=Y(require("vscode")),Va=require("vscode");async function k0(t,e,n,r={},o={}){let i=await Ix({params:t,createdAt:void 0,startedAt:void 0,sharedDataFolderIsLocalCacheFolder:!1,sharedDataFolder:void 0,remoteWorkspaceFolder:"/",containerUser:void 0,containerGroup:void 0,containerEnv:void 0,remoteExec:e,remotePtyExec:n,remoteExecAsRoot:void 0,rootShellServer:void 0,remoteWaylandSocket:void 0}),{hostOrContainerPort:s,connectionToken:a,remoteEnv:c,serverDownloaded:l}=await Vl(t,i,r,o);return{params:t,properties:i,config:void 0,resolvedAuthority:{host:hc,port:s,connectionToken:a,extensionHostEnv:c},tunnelInformation:{},dockerParams:void 0,dockerContainerId:void 0,serverDownloaded:l}}async function kO(t,e,n){var r,o;try{if(!await $s(t))return;let{cliHost:i,env:s,output:a}=e,c;if(!(n!=null&&n.name)){let p=(await X({exec:i.exec,cmd:"kubectl",args:["get","pods","-o","json"],env:s,output:a})).stdout.toString(),g=JSON.parse(p).items;if(!g.length){await er.window.showInformationMessage(Va.l10n.t("No pods found."),{modal:!0},Va.l10n.t("Show Log"))&&er.commands.executeCommand(it);return}if(c=(r=await er.window.showQuickPick(g.map(h=>({label:h.metadata.name,description:h.metadata.namespace,pod:h})),{placeHolder:Va.l10n.t("Select pod")}))==null?void 0:r.pod,!c)return}if(!c){let d=["get","pod",n.name,"-o","json"];n.namespace&&d.push("--namespace",n.namespace);let g=(await X({exec:i.exec,cmd:"kubectl",args:d,env:s,output:a})).stdout.toString();c=JSON.parse(g)}let l=c.spec.containers||[];if(!l.length){await er.window.showInformationMessage(Va.l10n.t("No containers found."),{modal:!0},Va.l10n.t("Show Log"))&&er.commands.executeCommand(it);return}let u=l.length>1?(o=await er.window.showQuickPick(l.map(d=>({label:d.name,description:d.image,container:d})),{placeHolder:Va.l10n.t("Select container")}))==null?void 0:o.container:l[0];if(!u)return;let f=(await X({exec:i.exec,cmd:"kubectl",args:["config","current-context"],env:s,output:a})).stdout.toString().trim(),m={remoteAuthority:Tge(er.env.remoteAuthority,{context:f,podname:c.metadata.name,namespace:c.metadata.namespace,name:u.name,image:u.image})};t.extensionMode===er.ExtensionMode.Development&&(m.reuseWindow=!0),await er.commands.executeCommand("vscode.newWindow",m)}catch(i){e.output.write((i==null?void 0:i.stack)||(i==null?void 0:i.message)||String(i)),er.commands.executeCommand(it),await er.window.showErrorMessage(Va.l10n.t("Error while attaching to Kubernetes container."),{detail:i==null?void 0:i.message,modal:!0})}}async function l9(t,e,n,r,o,i){return await $s(t)?{...await Ige(t,e,n,r,o,i),isTrusted:!0}:(await er.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function Ige(t,e,n,r,o,i){let s;return er.window.withProgress({location:er.ProgressLocation.Notification,title:Zu,cancellable:!1},async a=>{try{let c=Rge(n);if(!c)throw new Error(`Invalid authority: ${n}`);let{options:l,parentAuthority:u}=c;if(u&&!r.execServer)throw new Error(`Parent authority found without ExecServer: ${n}`);let f=process.cwd(),m=ts(),d=await Xr(r.execServer?{server:r.execServer,authority:u}:void 0,void 0,f,hn,m,t.extensionPath,await _r(),e.product,o.log,Si);s=await Xu({authority:n,extensionContext:t,sessionStart:o.sessionStart,progress:a,cliHost:d,env:d.env,cwd:f,wslSettings:m,isLocalContainer:ru(u,{}),telemetry:e,onDidInput:o.onDidInput,output:o.log,logFilePath:o.logFilePath,allowSystemConfigChange:!1,postCreate:i}),s.setWorkspaceName(`${l.name} in ${l.podname} (${l.image})`);let p=Pge(d.exec,l),g=bge(d.ptyExec,l);return await k0(s,p,g)}catch(c){let l=c instanceof pe?c:new pe({description:Va.l10n.t("An error occurred attaching to the container."),originalError:c});throw l.actions=[...tf,rl,Ma,ef,nl],l}}).then(a=>(ns(e,"k8s-container","success",o.sessionStart,s,void 0,void 0,a.properties),a),a=>{let c=a instanceof pe?a:new pe({description:Va.l10n.t("An error occurred attaching to the container."),originalError:a});return ns(e,"k8s-container","failure",o.sessionStart,s,void 0,void 0,c.containerProperties,c),$a(c,"k8s-container",e,!0,o.log)})}function Pge(t,e){return async function(n){return t(u9(e,n))}}function bge(t,e){return async function(n){return t(u9(e,n))}}function u9(t,e){let n=["exec","-it",t.podname];if(t.context&&n.push("--context",t.context),t.namespace&&n.push("--namespace",t.namespace),n.push("--container",t.name,"--"),e.cwd&&n.push("/bin/sh","-c",'cd "$1" && shift && "$@"',"--",e.cwd),e.env){let r=Object.keys(e.env);if(r.length){n.push("env");for(let o of r)n.push(`${o}=${e.env[o]}`)}}return n.push(e.cmd),e.args&&n.push(...e.args),{cmd:"kubectl",args:n,output:e.output}}function Tge(t,e){return t=rd(t),`k8s-container+${Buffer.from(JSON.stringify(e),"utf8").toString("hex")}${t?`@${t}`:""}`}function Rge(t){let e=ou(t);if((e==null?void 0:e.name)!=="k8s-container")return;try{return{parentAuthority:e.parentAuthority,options:JSON.parse(Buffer.from(e.config,"hex").toString("utf8"))}}catch{}let n=e.config.split("+").reduce((r,o)=>{let i=o.indexOf("=");return i!==-1&&(r[o.substring(0,i)]=decodeURIComponent(o.substring(i+1))),r},{});return{parentAuthority:e.parentAuthority,options:n}}var Bn=Y(require("vscode")),Hs=require("vscode");async function f9(t,e){var n;try{if(!await $s(t))return;let{cliHost:r,env:o,output:i}=e;if(process.platform!=="darwin"){await Bn.window.showErrorMessage(Hs.l10n.t("Apple Containerization is only available on macOS."),{modal:!0})&&Bn.commands.executeCommand(it);return}let s;try{await X({exec:r.exec,cmd:"which",args:["container"],env:o,output:i})}catch{await Bn.window.showErrorMessage(Hs.l10n.t("Apple Container command not found."),{modal:!0,detail:Hs.l10n.t("Please ensure that the Apple Container CLI is installed and available in your PATH.")},Hs.l10n.t("Show Log"))&&Bn.commands.executeCommand(it);return}let c=(await X({exec:r.exec,cmd:"container",args:["list","--format","json"],env:o,output:i})).stdout.toString(),l;try{l=JSON.parse(c),Array.isArray(l)||(l=[l])}catch(f){throw i.write(`Failed to parse container list JSON: ${f}`),new Error(`Failed to parse container list: ${f}`)}if(!l.length){await Bn.window.showInformationMessage(Hs.l10n.t("No Apple containers found."),{modal:!0},Hs.l10n.t("Show Log"))&&Bn.commands.executeCommand(it);return}if(s=(n=await Bn.window.showQuickPick(l.map(f=>({label:f.configuration.id,description:`(${f.status})`,container:f})),{placeHolder:Hs.l10n.t("Select Apple container")}))==null?void 0:n.container,!s)return;let u={remoteAuthority:Age(Bn.env.remoteAuthority,{id:s.configuration.id,image:s.configuration.image.reference})};t.extensionMode===Bn.ExtensionMode.Development&&(u.reuseWindow=!0),await Bn.commands.executeCommand("vscode.newWindow",u)}catch(r){e.output.write((r==null?void 0:r.stack)||(r==null?void 0:r.message)||String(r)),Bn.commands.executeCommand(it),await Bn.window.showErrorMessage(Hs.l10n.t("Error while attaching to Apple container."),{detail:r==null?void 0:r.message,modal:!0})}}async function d9(t,e,n,r,o,i){return await $s(t)?{...await kge(t,e,n,r,o,i),isTrusted:!0}:(await Bn.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function kge(t,e,n,r,o,i){let s;return Bn.window.withProgress({location:Bn.ProgressLocation.Notification,title:Zu,cancellable:!1},async c=>{try{let l=Fge(n);if(!l)throw new Error(`Invalid authority: ${n}`);let{options:u,parentAuthority:f}=l;if(f&&!r.execServer)throw new Error(`Parent authority found without ExecServer: ${n}`);let m=process.cwd(),d=ts(),p=await Xr(r.execServer?{server:r.execServer,authority:f}:void 0,void 0,m,hn,d,t.extensionPath,await _r(),e.product,o.log,Si);s=await Xu({authority:n,extensionContext:t,sessionStart:o.sessionStart,progress:c,cliHost:p,env:p.env,cwd:m,wslSettings:d,isLocalContainer:ru(f,{}),telemetry:e,onDidInput:o.onDidInput,output:o.log,logFilePath:o.logFilePath,allowSystemConfigChange:!1,postCreate:i}),s.setWorkspaceName(`${u.id} (${u.image})`);let g=Nge(p.exec,u),h=Lge(p.ptyExec,u);return await k0(s,g,h)}catch(l){let u=l instanceof pe?l:new pe({description:Hs.l10n.t("An error occurred attaching to the Apple container."),originalError:l});throw u.actions=[...tf,rl,Ma,ef,nl],u}}).then(c=>(ns(e,"apple-container","success",o.sessionStart,s,void 0,void 0,c.properties),c),c=>{let l=c instanceof pe?c:new pe({description:Hs.l10n.t("An error occurred attaching to the Apple container."),originalError:c});return ns(e,"apple-container","failure",o.sessionStart,s,void 0,void 0,l.containerProperties,l),$a(l,"apple-container",e,!0,o.log)})}function Nge(t,e){return async function(n){return t(m9(e,n))}}function Lge(t,e){return async function(n){return t(m9(e,n))}}function m9(t,e){let n=["exec","-i"];if(e.env){let r=Object.keys(e.env);if(r.length)for(let o of r)n.push("--env",`${o}=${e.env[o]}`)}return e.cwd&&n.push("-w",e.cwd),n.push(t.id),n.push(e.cmd),e.args&&n.push(...e.args),{cmd:"container",args:n,output:e.output}}function Age(t,e){return t=rd(t),`apple-container+${Buffer.from(JSON.stringify(e),"utf8").toString("hex")}${t?`@${t}`:""}`}function Fge(t){let e=ou(t);if((e==null?void 0:e.name)==="apple-container")try{return{parentAuthority:e.parentAuthority,options:JSON.parse(Buffer.from(e.config,"hex").toString("utf8"))}}catch{return}}var _t=Y(require("vscode")),At=require("vscode"),xm=Y(require("fs")),xg=Y(require("os")),Sm=Y(require("path")),N0=require("child_process"),_g=require("util");function L0(t){switch(t.quality){case"stable":return"";case"insider":return"-insiders";default:return`-${t.quality}`}}async function p9(t,e){let n=t.globalStorageUri,r=Lo.joinPath(n,"cli-bin");await _t.workspace.fs.createDirectory(r);let o="";try{o=(await _t.workspace.fs.readFile(Lo.joinPath(r,"vscode-path"))).toString()}catch(u){if((u==null?void 0:u.code)!=="FileNotFound")throw u}o!==process.execPath&&(await _t.workspace.fs.writeFile(Lo.joinPath(r,"vscode-app-root"),Buffer.from(_t.env.appRoot,"utf-8")),await _t.workspace.fs.writeFile(Lo.joinPath(r,"vscode-quality"),Buffer.from(e.quality??"","utf-8")),await _t.workspace.fs.writeFile(Lo.joinPath(r,"vscode-machine-id"),Buffer.from(_t.env.machineId,"utf-8")),await _t.workspace.fs.writeFile(Lo.joinPath(r,"vscode-path"),Buffer.from(process.execPath,"utf-8")));let i="";try{i=(await _t.workspace.fs.readFile(Lo.joinPath(r,"remote-containers-path"))).toString()}catch(u){if((u==null?void 0:u.code)!=="FileNotFound")throw u}if(i===t.extensionPath)return;let s=Lo.joinPath(t.extensionUri,"dev-containers-user-cli","bin"),a=L0(e),c=`devcontainer${a}`,l=[{source:"devcontainer",destination:c},{source:"devcontainer.cmd",destination:`devcontainer${a}.cmd`}];for(let u of l)await _t.workspace.fs.copy(Lo.joinPath(s,u.source),Lo.joinPath(r,u.destination),{overwrite:!0});process.platform!=="win32"&&await xm.promises.chmod(Lo.joinPath(r,c).fsPath,493),await _t.workspace.fs.writeFile(Lo.joinPath(r,"remote-containers-path"),Buffer.from(t.extensionPath,"utf-8"))}async function Oge(t,e){let n=L0(e),r="";try{let o=await ni("powershell.exe");if(r=(await(0,_g.promisify)(N0.exec)(`"${o}" -NoProfile -NonInteractive -Command "[System.Environment]::GetEnvironmentVariable('PATH', 'User')"`,{env:ao(process.env)})).stdout.toString().trim(),r.indexOf(t)>=0)return await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI is already in your PATH"),{modal:!0,detail:At.l10n.t(`Try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${n}`)}),!0;let s=At.l10n.t("Add"),a=At.l10n.t("Copy CLI Path");switch(await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI needs to be added to your PATH"),{modal:!0},s,a)){case s:let l=(0,_g.promisify)(N0.exec)(`"${o}"  -NoProfile -NonInteractive -Command "[System.Environment]::SetEnvironmentVariable('PATH', '${r};${t}', 'User')`,{env:ao(process.env)}),u=_t.window.showInformationMessage(At.l10n.t("The devcontainer CLI has been added to your PATH"),{modal:!0,detail:At.l10n.t(`Try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${n}`)});await Promise.all([l,u]);break;case a:await _t.env.clipboard.writeText(t),await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI path has been copied to the clipboard"),{modal:!0,detail:At.l10n.t(`After adding to your PATH, try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${n}`)});break}return!0}catch{return!1}}async function Uge(t,e){let r=(process.env.PATH??"").split(":"),o=[Sm.join(xg.homedir(),"bin"),Sm.join(xg.homedir(),".local/bin")],i="/usr/local/bin";xg.platform()==="darwin"&&o.push(i);let s=(0,_g.promisify)(xm.stat);for(let a of o){if(r.findIndex(p=>p===a)<0)continue;try{await s(a)}catch{continue}let c=L0(e),l=Sm.join(a,`devcontainer${c}`);try{let p=await s(l);return console.log(p),await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI is already symlinked in {0}",a),{modal:!0,detail:At.l10n.t(`Try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${c}`)}),!0}catch(p){if((p==null?void 0:p.code)!=="ENOENT")return!1}let u=At.l10n.t("Create"),f=At.l10n.t("Copy CLI Path"),m=await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI needs to be in your PATH"),{detail:At.l10n.t("Create a symlink in {0}?",a),modal:!0},u,f),d=Sm.join(t,`devcontainer${c}`);switch(m){case u:if(a===i){if(!await Mge(d,l))break}else await(0,_g.promisify)(xm.symlink)(d,l);await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI has been symlinked in {0}",a),{modal:!0,detail:At.l10n.t(`Try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${c}`)});break;case f:await _t.env.clipboard.writeText(t),await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI path has been copied to the clipboard"),{modal:!0,detail:At.l10n.t(`After adding to your PATH, try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${c}`)});break}return!0}return!1}async function Mge(t,e){try{return await xm.promises.symlink(t,e),!0}catch(n){if(n.code!=="EACCES"&&n.code!=="ENOENT")throw n;let r=At.l10n.t("OK");if(await _t.window.showInformationMessage(At.l10n.t("This will now prompt with 'osascript' for Administrator privileges to install the shell command."),{modal:!0},r)===r){let s=`"${await ni("osascript")}" -e "do shell script \\"mkdir -p ${Sm.dirname(e)} && ln -sf '${t}' '${e}'\\" with administrator privileges"`;return await(0,_g.promisify)(N0.exec)(s),!0}return!1}}async function h9(t,e){let n=t.globalStorageUri,r=Lo.joinPath(n,"cli-bin").fsPath;switch(xg.platform()){case"win32":if(await Oge(r,e))return;break;case"darwin":case"linux":if(await Uge(r,e))return;break}let o=At.l10n.t("Copy CLI Path");if(await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI needs to be included your PATH"),{modal:!0},o)===o){await _t.env.clipboard.writeText(r);let s=L0(e);await _t.window.showInformationMessage(At.l10n.t("The devcontainer CLI path has been copied to the clipboard"),{modal:!0,detail:At.l10n.t(`After adding to your PATH, try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${s}`)})}}var So=Y(require("vscode")),Fr=require("vscode"),NO=Y(require("path"));var $ge=Fr.l10n.t("Select Dev Container Configuration"),Hge=Fr.l10n.t('[Creating Dev Container (show log)](command:remote-containers.revealLogTerminal "Show details in terminal")'),g9="alpine:3.16.3";async function v9(t,e,n){let r=await Bge(t,e,n);if(!r)return;let{volumeAndFolderName:o}=r,i=dr(e.env),s=So.Uri.parse(Wi(e.cliHost.authority,void 0,o,o,!1,i,void 0));await Qu({uri:s,type:"folder",label:Fr.l10n.t("{0} [Dev Container]",o)}),await So.commands.executeCommand("vscode.openFolder",s)}async function Bge(t,e,n){let{output:r}=e,o=et(e,"pull",g9),i=await sO({telemetry:n,output:r,openConfigurationCommandId:gm,showLogCommandId:it},$ge,!0);i.askForTrust=!0;let s=await Uo(e),a=async()=>{i.skipOptions=!0;let f=await c0(i,void 0,void 0,Promise.resolve(void 0));if(f==="back"||!f)return;let m=f.metadata.template;if(QF.indexOf(m.owner)===-1){let d=`@${m.owner}`,p={label:Fr.l10n.t("Trust {0}",d),description:Fr.l10n.t("from GitHub"),buttons:[{iconPath:new So.ThemeIcon("info"),tooltip:Fr.l10n.t("Open Documentation")}]},g={label:Fr.l10n.t("Back")},h={label:Fr.l10n.t("Cancel")},v=i.quickPick.onDidTriggerItemButton(()=>{So.env.openExternal(So.Uri.parse(m.documentationURL))}),C=await Eo(i.quickPick,[p,g,h],Fr.l10n.t("The {0} is from the {1} GitHub owner/organization.",m.name,d),void 0,void 0,!0);if(v.dispose(),!C||C===h)return;if(C==="back"||C===g)return a()}return w9(i,f,s,Wge(f.id,s),a)},c=await a();if(!c){i.quickPick.dispose();return}let{selectedTemplate:l,volumeName:u}=c;return So.window.withProgress({location:So.ProgressLocation.Notification,title:Hge,cancellable:!1},async()=>{let f;try{await Fp(e,u,[`${r_}=true`]),await o;let{stdout:m}=await et(e,...jge(u,Qf()));f=m.toString().trim();let d=NO.posix.join(Qf(),u),p=ys(e,f,"root"),g=await na(e,f,"root",hn),h=so("container",d,{},p,g,()=>{throw new Error("not implemented")},"node",r);await h.mkdirp(d);let v=It(NO.posix,d),C=await oO(i,h,v.configFolderPath,"workspace",l);return i.quickPick.hide(),C?{volumeAndFolderName:u}:void 0}finally{if(f)try{await Hi(e,f)}catch{}}})}function Wge(t,e){let n,r=(/([^/:]+)(:[^/:]+)?$/.exec(t)||[])[1]||"devcontainer",o=0;do n=`${r}${o++?`-${o}`:""}`;while(e.indexOf(n)!==-1);return n}async function w9(t,e,n,r,o){let{quickPick:i}=t;i.placeholder=Fr.l10n.t("Dev container name"),i.selectedItems=[],i.value=r,i.buttons=[So.QuickInputButtons.Back];let s={label:Fr.l10n.t("Additional Options..."),alwaysShow:!0},a=!1;function c(){a=!1,i.items=[{label:Fr.l10n.t("Create Dev Container"),description:i.value,alwaysShow:!0},s]}function l(d){a=!0,i.items=[{label:d,alwaysShow:!0}]}c();let u=[],f=await new Promise(d=>{u=[i.onDidAccept(()=>{i.value?a||d({volumeName:i.value,options:i.selectedItems[0]===s}):l(Fr.l10n.t("The name cannot be empty."))}),i.onDidHide(()=>d(void 0)),i.onDidChangeValue(p=>{n.indexOf(p)!==-1?l(Fr.l10n.t("A Docker volume with this name already exists.")):p&&!/^[a-zA-Z0-9]/.test(p)?l(Fr.l10n.t("Only alphanumeric characters are allowed as the first character.")):p&&!/^[a-zA-Z0-9][a-zA-Z0-9_.-]*$/.test(p)?l(Fr.l10n.t("Only alphanumeric characters, periods, underscores and hyphens are allowed.")):c()}),i.onDidTriggerButton(()=>d("back"))]});if(u.forEach(d=>d.dispose()),!f)return;if(f==="back")return o();let{volumeName:m}=f;if(f.options){let p=await(async()=>{t.skipOptions=!1;let g=await ym(t,e.metadata.template,Promise.resolve(void 0),async()=>{let h=await w9(t,e,n,m,o);if(h)return m=h.volumeName,h.selectedTemplate});if(!(g==="back"||!g))return g})();if(!p)return;e=p}return i.busy=!0,i.enabled=!1,{volumeName:m,selectedTemplate:e}}function jge(t,e){return["run","-d","--mount",`type=volume,src=${t},dst=${e}`,g9,"sleep","infinity"]}var A0=Y(require("crypto")),C9=require("path"),E9=Y(require("vscode")),LO=typeof __non_webpack_require__<"u"?__non_webpack_require__:require,Vge=["You may install and use any number of copies of the software only with Microsoft Visual Studio,","Visual Studio for Mac, Visual Studio Code, Azure DevOps, Team Foundation Server, and successor Microsoft products","and services (collectively, the \u201CVisual Studio Products and Services\u201D) to develop and test your applications.","The software is licensed, not sold. This agreement only gives you some rights to use the software. Microsoft reserves all other rights.","You may not:","work around any technical limitations in the software that only allow you to use it in certain ways;","reverse engineer, decompile or disassemble the software, or otherwise attempt to derive the source code for the software,","except and to the extent required by third party licensing terms governing use of certain open source components that may be included in the software;","remove, minimize, block, or modify any notices of Microsoft or its suppliers in the software;","use the software in any way that is against the law or to create or propagate malware; or","share, publish, distribute, or lease the software (except for any distributable code, subject to the terms above),","provide the software as a stand-alone offering for others to use, or transfer the software or this agreement to any third party."].join(" "),Yge="aes-192-cbc",S9="SEE  LICENSE.txt",qge=A0.scryptSync(Vge,S9,24),Gge=Buffer.from(S9);var x9={DevContainersOnlyLicensedForMicrosoftVSCode(){var t;return y9(((t=LO.main)==null?void 0:t.paths.map(e=>e+yC("f70715b752c50649525efc24a1d133eb")))??[])||y9([C9.posix.join(E9.env.appRoot,yC("9e4708daf438152c7e63cf9f3b24d92c"))])}};function y9(t){try{let e=LO.resolve(yC("bdf000de72c4f5f5d7cff4fa6dd90b95"),{paths:t}),n=LO(e);return!(!n[yC("0fd50b75eeecb3b44b3932921442f72c")]||!n[yC("80c3ae7905cba507debf9b326fc386ab")])}catch{return!1}}function yC(t){let e=A0.createDecipheriv(Yge,qge,Gge),n=e.update(t,"hex","utf8");return n+=e.final("utf8"),n}O.l10n.bundle&&b9.config({contents:O.l10n.bundle});var OO=class{constructor(e,n,r){this.context=e;this.output=n;this.telemetry=r}handleUri(e){switch(e.path){case"/cloneInVolume":this.cloneInVolume(e)}}async cloneInVolume(e){let n=R9.parse(e.query);if(!n.url){O.window.showErrorMessage(re.l10n.t("Failed to handle the URI '{0}' expected a 'url' query parameter.",e.toString()),{modal:!0});return}let r;if(Array.isArray(n.url)?r=n.url[0]:r=n.url,!await no(this.context,this.output.log,this.output.onDidInput,this.telemetry,"cloneInVolume"))return;let o=await Ze(this.context,this.output.log);if(await dR(o.cliHost,r,o.cliHost.type==="local"?await JI(this.output.log):{},this.output.log)===!1){O.commands.executeCommand(it),await O.window.showErrorMessage(re.l10n.t("Cannot access the repository '{0}'.",r),{modal:!0});return}await O.commands.executeCommand(KI,n.url)}};async function Kge(t){var k;L5();let e=new Date;N5(t);let n,r=new Promise(E=>n=E);U5(r);let o=await cr(t.extensionPath),i=await kv(O.env.appRoot);A5(t,i);let s=k5(t,o,i),a=await O5(o,i),c=new eC(t.logPath,e,a);if(t.subscriptions.push(O.commands.registerCommand(it,()=>c.show())),!x9.DevContainersOnlyLicensedForMicrosoftVSCode()){c.log.write("The Dev Containers extension is supported only in Microsoft versions of VS Code");return}let{channel:l,postCreate:u}=R5(c.log,e);t.subscriptions.push(O.commands.registerCommand(jF,()=>l.show()));let f,m=new Promise(E=>f=E);t.subscriptions.push(O.workspace.registerRemoteAuthorityResolver("dev-container",{resolve:tC(c,u,Qn.results,n,f,async(E,x,b,I)=>w8(t,s,E,x,Qn.onRemoveOnShutdownChanged,b,I)),async getCanonicalURI(E){let x=uo(E.authority);if(x&&un(x)){let{hostPath:b,settings:I}=x;return xr(b)?Dp(b,c.log):Ul(I)?Hv(I.host,b):Ml(x.parentAuthority)?b.startsWith("/")?iu(x.parentAuthority,b):E:wc(x.parentAuthority)?b.startsWith("/")?iu(x.parentAuthority,b):E:O.Uri.file(b)}return E}}),O.workspace.registerRemoteAuthorityResolver("attached-container",{resolve:tC(c,u,Qn.results,n,f,async(E,x,b,I)=>N8(t,s,E,x,b,I))}),O.workspace.registerRemoteAuthorityResolver("k8s-container",{resolve:tC(c,u,Qn.results,n,f,async(E,x,b,I)=>l9(t,s,E,x,b,I))}),O.workspace.registerRemoteAuthorityResolver("apple-container",{resolve:tC(c,u,Qn.results,n,f,async(E,x,b,I)=>d9(t,s,E,x,b,I))}),O.window.registerUriHandler(new OO(t,c,s)));let d=async(E,x,b)=>{if(!await no(t,c.log,c.onDidInput,s,"openInContainer"))return;let I=await Ze(t,c.log),T;if(wr.isFolderItem(E)?T=E.folder:T=E,T.scheme==="vscode-remote"&&T.authority.startsWith("dev-container+"))return O.commands.executeCommand("vscode.openFolder",T,b||{});{let R=It(I.cliHost.path,_e(T,I.cliHost.platform));return CC(t,R,I,c.onDidInput,s,x,b)}};t.subscriptions.push(O.commands.registerCommand("remote-containers.openFolder",async(E,x)=>E?d(E,!1,x):AO(t,!0,s,!1,c.log,c.onDidInput))),t.subscriptions.push(O.commands.registerCommand("remote-containers.openWorkspace",async(E,x)=>E?d(E,!1,x):AO(t,!1,s,!1,c.log,c.onDidInput))),t.subscriptions.push(O.commands.registerCommand(g5,async E=>Dg(t,s,c.log,c.onDidInput,E))),t.subscriptions.push(O.commands.registerCommand(KI,async E=>Dg(t,s,c.log,c.onDidInput,E,li))),t.subscriptions.push(O.commands.registerCommand(w5,async()=>{var L,N,B;let x=(await((L=O.extensions.getExtension("vscode.git"))==null?void 0:L.activate())).getAPI(1);if(x.repositories.length===0)return;let b=x.repositories.reduce((W,z)=>{let V=z.state.remotes.find(q=>{var ce,Be;return q.name===((Be=(ce=z.state.HEAD)==null?void 0:ce.upstream)==null?void 0:Be.remote)});return V!=null&&V.pushUrl&&W.push({repository:z,label:V.pushUrl}),W},[]),I=b[0];if(b.length>1){let W=await O.window.showQuickPick(b,{canPickMany:!1,placeHolder:re.l10n.t("Choose which repository to clone")});if(W===void 0)return;I=W}let T=I.label,R=(B=(N=I.repository.state.HEAD)==null?void 0:N.upstream)==null?void 0:B.name;return Dg(t,s,c.log,c.onDidInput,{url:T,branch:R},li)})),t.subscriptions.push(O.commands.registerCommand(v5,async()=>{var R;let E=O.workspace.workspaceFolders;if(!E)return;let x=E[0].uri;if(E.length>1){let L=await O.window.showOpenDialog({canSelectFolders:!0,canSelectFiles:!1,canSelectMany:!1,title:re.l10n.t("Choose a repository to clone in a Container Volume")});x=L==null?void 0:L[0]}let b,I;try{let L=await O.commands.executeCommand("remoteHub.api.getRepositoryContext",x);if(!L)throw new Error("Unable to get active repository context.");b=L.name,I=L.ref}catch{let B=await(await((R=O.extensions.getExtension("ms-vscode.remote-repositories"))==null?void 0:R.activate())).getMetadata(x);if(!B)throw new Error("Unable to get active repository context.");b=`${B.repo.owner}/${B.repo.name}`,I=(await B.getRevision()).name}let T=`https://github.com/${b}`;return I&&(T=`${T}/tree/${I}`),Dg(t,s,c.log,c.onDidInput,T,li)})),t.subscriptions.push(O.commands.registerCommand(y5,async E=>ave(t,s,c.log,c.onDidInput,E,li))),t.subscriptions.push(O.commands.registerCommand("remote-containers.inspectVolume",async(E,x,b)=>A9(t,E,x,b,s,c.log,c.onDidInput))),t.subscriptions.push(O.commands.registerCommand("remote-containers.inspectVolumeFromViewlet",async E=>cve(t,E,s,c.log,c.onDidInput))),t.subscriptions.push(O.commands.registerCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",async E=>Dg(t,s,c.log,c.onDidInput,void 0,E))),t.subscriptions.push(O.commands.registerCommand("remote-containers.reopenInContainer",()=>p(!1))),t.subscriptions.push(O.commands.registerCommand("remote-containers.rebuildAndReopenInContainer",()=>p(!0))),t.subscriptions.push(O.commands.registerCommand("remote-containers.rebuildNoCacheAndReopenInContainer",()=>p("rebuildNoCache")));let p=async E=>{if(!await O.workspace.requestWorkspaceTrust({message:iC})||!await no(t,c.log,c.onDidInput,s,"reopenInContainer"))return;let b=await Ze(t,c.log),I=O.workspace.workspaceFile;if(I&&I.scheme==="untitled"){await YI();return}let T=O.workspace.workspaceFolders;if(!I&&T&&T.length){let L=T.length>1?await O.window.showWorkspaceFolderPick({placeHolder:re.l10n.t("Pick a folder to reopen in a container.")}):T[0];L&&(I=L.uri)}let R=YF(I);if(R){await EC(t,R.repositoryPath,R.volumeName,R.folder,b);return}if(I){let L;if(b.cliHost.type==="wsl"&&I.scheme==="file"){let B=_e(I,process.platform),W=$f(B)||n0()||await $v(b.output)||(()=>{throw new Error("No default WSL distro found.")})();L=await Ol(W,B,b.output)}else L=_e(I,b.cliHost.platform);let N=It(b.cliHost.path,L);await CC(t,N,b,c.onDidInput,s,E,{forceReuseWindow:!0})}else return AO(t,!0,s,E,c.log,c.onDidInput)};t.subscriptions.push(O.commands.registerCommand("remote-containers.reopenLocally",async()=>{let E=O.workspace.workspaceFolders,x=O.workspace.workspaceFile||E&&E.length&&E[0].uri;if(x&&x.scheme==="vscode-remote"){let b=uo(x.authority);if(b&&un(b)){let I=O.Uri.file(b.hostPath),T={forceReuseWindow:!0};await O.commands.executeCommand("vscode.openFolder",I,T)}else O.window.showInformationMessage(re.l10n.t("'Reopen Locally' not possible in current context."))}})),t.subscriptions.push(O.commands.registerCommand("remote-containers.reopenInWSL",async()=>{let E=O.workspace.workspaceFolders,x=O.workspace.workspaceFile||E&&E.length&&E[0].uri;if(x&&x.scheme==="vscode-remote"){let b=uo(x.authority);if(b&&un(b)&&xr(b.hostPath)){let I=O.Uri.parse((await Dp(b.hostPath,c.log)).toString()),T={forceReuseWindow:!0};await O.commands.executeCommand("vscode.openFolder",I,T)}else O.window.showInformationMessage(re.l10n.t("'Reopen in WSL' not possible in current context."))}})),t.subscriptions.push(O.commands.registerCommand("remote-containers.reopenInSSH",async()=>{let E=O.workspace.workspaceFolders,x=O.workspace.workspaceFile||E&&E.length&&E[0].uri;if(x&&x.scheme==="vscode-remote"){let b=uo(x.authority),I=b==null?void 0:b.settings;if(b&&un(b)&&(Ml(b.parentAuthority)||Ul(I))){let T=Ul(I)?Hv(I.host,b.hostPath):iu(b.parentAuthority,b.hostPath),R={forceReuseWindow:!0};await O.commands.executeCommand("vscode.openFolder",O.Uri.parse(T.toString()),R)}else O.window.showInformationMessage(re.l10n.t("'Reopen in SSH' not possible in current context."))}})),t.subscriptions.push(O.commands.registerCommand("remote-containers.reopenInTunnel",async()=>{let E=O.workspace.workspaceFolders,x=O.workspace.workspaceFile||E&&E.length&&E[0].uri;if(x&&x.scheme==="vscode-remote"){let b=uo(x.authority);if(b&&un(b)&&wc(b.parentAuthority)){let I=O.Uri.parse(iu(b.parentAuthority,b.hostPath).toString()),T={forceReuseWindow:!0};await O.commands.executeCommand("vscode.openFolder",I,T)}else O.window.showInformationMessage(re.l10n.t("'Reopen in Tunnel' not possible in current context."))}}));let g=async E=>{var R;if(!await $s(t))return;let x,b=typeof E=="string"?E:(R=E==null?void 0:E.containerDesc)==null?void 0:R.Id;if(b){if(!await no(t,c.log,c.onDidInput,s,"attachToContainer"))return;let L=await Ze(t,c.log);x=await si(L,b)}else{let L=no(t,c.log,c.onDidInput,s,"attachToContainer");if(x=await gve(t,c.log,L),!x)return}let I=await Ze(t,c.log),T=t.extensionMode===O.ExtensionMode.Development;wC(I,x,t,!T)};t.subscriptions.push(O.commands.registerCommand("remote-containers.attachToRunningContainer",g)),t.subscriptions.push(O.commands.registerCommand("remote-containers.attachToRunningContainerFromViewlet",g)),t.subscriptions.push(O.commands.registerCommand("remote-containers.attachToK8sContainer",async E=>kO(t,await Ze(t,c.log),E))),t.subscriptions.push(O.commands.registerCommand("remote-containers.attachToK8sContainerFromViewlet",async E=>kO(t,await Ze(t,c.log),E))),t.subscriptions.push(O.commands.registerCommand("remote-containers.attachToAppleContainer",async()=>f9(t,await Ze(t,c.log))));let h=async E=>{var b;if(!await no(t,c.log,c.onDidInput,s,"checkoutPRInVolume"))return;let x=(b=E==null?void 0:E.pullRequestModel)==null?void 0:b.html_url;Dg(t,s,c.log,c.onDidInput,x,li)};t.subscriptions.push(O.commands.registerCommand("remote-containers.checkoutPRInVolume",h)),t.subscriptions.push(O.commands.registerCommand("remote-containers.switchContainer",async()=>{var I;if(Qn.results.size){let T=[...Qn.results.values()].filter(L=>L.dockerParams)[0],R=(I=T==null?void 0:T.dockerParams)==null?void 0:I.parsedAuthority;if(R&&lo(R)&&!R.inspectVolume){let L=so("container","/",{},T.properties.remoteExec,T.properties.remotePtyExec,()=>{throw new Error("not implemented")},void 0,T.params.output),N=await Fa().then(q=>q.map(ce=>({type:"workspace",uri:ce,fileHost:L}))),B=await zu(N,T.configWorkspaceURI);if(!B||B==="cancelled")return;let W=Ce.from({scheme:Ke.scheme,path:B.path}),z=O.Uri.parse(Wi(R.parentAuthority,R.repositoryPath,R.volumeName,R.folder,!1,R.settings,R.cloneInfo,W).toString()),V=R.volumeName;V===li&&(V=re.l10n.t("a unique volume")),await Qu({uri:z,type:"folder",label:re.l10n.t("{0} in {1} [Dev Container]",R.folder,V)}),await O.commands.executeCommand("vscode.openFolder",z);return}}let E=await Ze(t,c.log),x=It(E.cliHost.path,E.cliHost.cwd);if((await N9(E.cliHost,x,await tl(t,E.cliHost))).length<2){await O.window.showInformationMessage(re.l10n.t("No other Dev Container configurations found in folder. Did you mean to open another folder in a container?"),{modal:!0},re.l10n.t("Open Folder in Container..."))&&O.commands.executeCommand("remote-containers.openFolder");return}await CC(t,x,E,c.onDidInput,s,!1,void 0,!0)})),t.subscriptions.push(O.commands.registerCommand("remote-containers.rebuildContainer",async()=>{let E=Ju();if(E){let x=await Ze(t,c.log);await EC(t,E.repositoryPath,E.volumeName,E.folder,x,!0);return}return await Promise.all(Qn.onRemoveOnShutdownChangedEmitter.fire(!0)),O.commands.executeCommand("workbench.action.reloadWindow")})),t.subscriptions.push(O.commands.registerCommand("remote-containers.rebuildContainerNoCache",async()=>{let E=Ju();if(E){let x=await Ze(t,c.log);await EC(t,E.repositoryPath,E.volumeName,E.folder,x,"rebuildNoCache");return}return await Promise.all(Qn.onRemoveOnShutdownChangedEmitter.fire("rebuildNoCache")),O.commands.executeCommand("workbench.action.reloadWindow")}));let v=E5(),C=((k=(O.workspace.workspaceFolders||[])[0])==null?void 0:k.uri)||Ce.file(process.cwd()),w=v.then(E=>Oa(E,C)),y,S=()=>y||(y=Ze(t,c.log).then(E=>E.cliHost)),D,_=()=>D||(D=(async()=>{let E=await w,x=await S(),b=O.env.remoteName==="dev-container"&&O.env.remoteAuthority&&uo(O.env.remoteAuthority),T=!b||un(b)?await tl(t,x):void 0;return c.log.write("Initializing configuration support..."),v8(t,{fileHost:E,userDataFolderForConfigurations:T,findDevContainerFiles:async R=>i0(x,It(E.path,_e(C,E.platform)),T,R),telemetry:s,output:c.log,openConfigurationCommandId:gm,showLogCommandId:it})})());async function A(){var E;return(E=O.workspace.workspaceFolders)!=null&&E.length?!0:(await O.window.showInformationMessage(re.l10n.t("Open a folder to create the configuration files in first."),{modal:!0},re.l10n.t("Open Folder"))&&await O.commands.executeCommand(process.platform==="darwin"?"workbench.action.files.openFileFolder":"workbench.action.files.openFolder"),!1)}t.subscriptions.push(O.commands.registerCommand("remote-containers.createDevContainerFile",async()=>{await A()&&await F0(t,await S(),await _(),s,c.log,c.onDidInput)})),t.subscriptions.push(O.commands.registerCommand("remote-containers.createDevContainerFileWithCopilot",async()=>{await A()&&await F0(t,await S(),await _(),s,c.log,c.onDidInput,{picker:"copilot"})})),t.subscriptions.push(O.commands.registerCommand("remote-containers.createDevContainer",async()=>{if(!await no(t,c.log,c.onDidInput,s,"createDevContainer"))return;let E=await Ze(t,c.log);await v9(t,E,s)})),t.subscriptions.push(O.commands.registerCommand("remote-containers.openDevContainerFile",async(E,x)=>{let b,I=await Ze(t,c.log),T;if(typeof E=="string"?b=[{type:"unknown",uri:Ce.file(E),fileHost:Oa(process.platform,Ce.file(ut.dirname(E)))}]:(T=await i0(I.cliHost,It(I.cliHost.path,I.cliHost.cwd),await tl(t,I.cliHost)),b=(await Promise.all(T.map(R=>R.uri.scheme==="file"||R.uri.scheme==="vscode-remote"?R:I.cliHost.toCommonURI(_e(R.uri,I.cliHost.platform)).then(L=>L&&{type:R.type,uri:L})))).filter(R=>!!R)),b.length){let R=await zu(b);if(!R||R==="cancelled")return;let L=Ju();if(L){let N=T5(L.folder);for(let B of N){try{await O.workspace.openTextDocument(O.Uri.parse(B.toString()))}catch{continue}await O.commands.executeCommand("vscode.open",O.Uri.parse(B.toString()),x);return}return}if(R){if(R.scheme==="file"&&await Cr(R.fsPath))return await O.commands.executeCommand("vscode.open",O.Uri.parse(R.toString()),x);if(R.scheme==="file"&&Qn.results.size)return await $i(gs,R,[],pc),await O.commands.executeCommand("vscode.open",O.Uri.parse(R.toString()),x);if(R.scheme==="vscode-remote")return await O.commands.executeCommand("vscode.open",O.Uri.parse(R.toString()),x);if(E===void 0)return await F0(t,await S(),await _(),s,c.log,c.onDidInput)}}else if(E===void 0&&!(T!=null&&T.length))return await F0(t,await S(),await _(),s,c.log,c.onDidInput)})),t.subscriptions.push(O.commands.registerCommand("remote-containers.openAttachConfigByNameFile",async()=>{let{dockerContainerId:E,dockerParams:x}=[...Qn.results.values()][0];if(!E||!x)return O.window.showInformationMessage(re.l10n.t("Named configurations are only available for Docker containers."),{modal:!0});let b=await si(x,E),I=h0(t.globalStoragePath,b),T=O.Uri.file(I);return await Cr(I)?O.commands.executeCommand("vscode.open",T):(await $i(gs,T,[],pc),O.commands.executeCommand("vscode.open",T))})),t.subscriptions.push(O.commands.registerCommand("remote-containers.openAttachDevContainerFile",async()=>{let E=[...(await P8(t.globalStoragePath)).map(b=>({label:b.name,...b})).sort((b,I)=>b.label.localeCompare(I.label)),...(await T8(t.globalStoragePath)).map(b=>({label:b.image,...b})).sort((b,I)=>b.label.localeCompare(I.label))],x=await O.window.showQuickPick(E.length?E:[{label:re.l10n.t("No configuration found.")}],{placeHolder:re.l10n.t("Choose a configuration file")});if(x&&"uri"in x)return O.commands.executeCommand("vscode.open",O.Uri.parse(x.uri.toString()))})),t.subscriptions.push(O.commands.registerCommand("remote-containers.settings",async()=>O.commands.executeCommand("workbench.action.openSettings",`@ext:${I9()}`))),t.subscriptions.push(O.commands.registerCommand("remote-containers.getHelp",async()=>O.env.openExternal(O.Uri.parse("https://aka.ms/vscode-remote/containers")))),t.subscriptions.push(O.commands.registerCommand("remote-containers.getStarted",async()=>O.env.openExternal(O.Uri.parse("https://aka.ms/vscode-remote/containers/getting-started")))),t.subscriptions.push(O.commands.registerCommand("remote-containers.reportIssue",async()=>{let E={extensionId:I9(),issueBody:re.l10n.t("For bug reports please include the complete log output. (In the VS Code window: `F1` > `Dev Containers: Show Container Log`.)")};return O.commands.executeCommand("vscode.openIssueReporter",E)})),t.subscriptions.push(O.commands.registerCommand("remote-containers.provideFeedback",async()=>O.env.openExternal(O.Uri.parse("https://aka.ms/vscode-remote/containers/provide-feedback")))),w.then(E=>{t.subscriptions.push(O.languages.registerDocumentLinkProvider([{pattern:"**/devcontainer.json",language:"jsonc"},{pattern:"**/.devcontainer.json",language:"jsonc"}],new S0(E)))}),t.subscriptions.push(O.commands.registerCommand("remote-containers.trySample",()=>xve(t,c,s))),t.subscriptions.push(O.commands.registerCommand("remote-containers.openLogFile",()=>_ve(t))),t.subscriptions.push(O.commands.registerCommand("remote-containers.openLastLogFile",()=>Dve(t,"remoteContainers",c.logFilePath))),t.subscriptions.push(O.commands.registerCommand("remote-containers.showReopenInContainerNotificationReset",()=>yve(t))),t.subscriptions.push(O.commands.registerCommand("remote-containers.showRecoveryContainerNotificationReset",()=>Xge(t))),t.subscriptions.push(O.commands.registerCommand("remote-containers.installDocker",()=>w0(c.log))),t.subscriptions.push(O.commands.registerCommand("remote-containers.installDockerInWSL",()=>E0(t,c.log,c.onDidInput,s))),t.subscriptions.push(O.commands.registerCommand("remote-containers.cleanUpDevContainers",async()=>t9(await Ze(t,c.log)))),c9(t,Qn.results,s,c.log),p9(t,i).catch(E=>{c.log.write(`Error ensuring user CLI is configured: ${(E==null?void 0:E.stack)||(E==null?void 0:E.message)||String(E)}`)}),t.subscriptions.push(O.commands.registerCommand("remote-containers.installUserCLI",()=>h9(t,i))),t.subscriptions.push(O.commands.registerCommand("remote-containers.testConnection",async()=>{await O.commands.executeCommand(it);let E=[...Qn.results.values()][0];if(!E){c.log.write("Not connected.");return}let{params:x,properties:b}=E;await mx(x,b)})),(async()=>{s0()&&await m;let E=O.env.remoteName,x=!E||["dev-container","attached-container","wsl","ssh-remote","tunnel","exec","k8s-container"].indexOf(E)!==-1?[{pattern:"**/.devcontainer.json"},{pattern:"**/devcontainer.json"}]:[],b=await _();t.subscriptions.push(O.languages.registerCompletionItemProvider([...x,{pattern:ut.join(g0(t.globalStoragePath),"*.json")},{pattern:ut.join(p0(t.globalStoragePath),"*.json")}],b.createCompletionItemProvider())),E!=="codespaces"&&(b.startCodeLensProvider(),b.startHoverProvider(),b.startDiagnosticsCollection()),await b5(t)||await F9(t,await S(),s,c.log,c.onDidInput)})().catch(console.error),Zge(t),t.subscriptions.push(O.commands.registerCommand("remote-containers.addExtensionToConfig",async E=>(await _()).addExtensionToConfiguration(E)),O.commands.registerCommand("remote-containers.configureContainerFeatures",async()=>(await _()).configureContainerFeatures()),O.commands.registerCommand("remote-containers.labelPortAndUpdateConfig",async E=>(await _()).addPortLabelToConfiguration(E))),Ju()&&O.commands.executeCommand("setContext","isRecoveryContainer",!0),await S5()}var D9="showRecoveryContainerNotification",k9="showReopenInContainerNotificationReset",Jge=5e3;function Xge(t){return t.globalState.update(k9,Date.now())}async function Zge(t){setTimeout(async()=>{let e=t.globalState.get(k9);if(HO(t.globalState.get(D9),e))return;if(Ju()){let r=re.l10n.t("This is a recovery container that allows you to edit your Dockerfile. Use 'Reopen in Container' to retry."),o=re.l10n.t("Reopen in Container"),i=re.l10n.t("Don't Show Again"),s=await O.window.showInformationMessage(r,o,i);s===o?O.commands.executeCommand("remote-containers.reopenInContainer"):s===i&&await t.globalState.update(D9,Date.now())}},Jge)}async function Qge(){await Promise.all([...Qn.results.values()].map(t=>Promise.all(t.params.shutdowns.map(e=>{try{e()}catch(n){console.error(n)}}))))}function I9(){let{name:t,publisher:e}=_9();return`${e}.${t}`}async function AO(t,e,n,r,o,i){var m;if(!await no(t,o,i,n,"openInContainer"))return;let s=await Ze(t,o),a,c=O.workspace.workspaceFolders;if(c&&c[0]){let d=c[0].uri;if(d.scheme==="vscode-remote"){let p=uo(d.authority);if(p&&un(p)){let g=It(s.cliHost.path,p.hostPath);a=O.Uri.file(g.rootFolderPath)}else/^(wsl|ssh-remote|tunnel)\+/.test(d.authority)&&(a=d)}else d.scheme==="file"&&(a=d)}a||((m=O.env.remoteName)!=null&&m.match(/^(wsl|ssh-remote|tunnel)$/)?a=O.Uri.from({scheme:"vscode-remote",authority:O.env.remoteAuthority,path:await s.cliHost.homedir()}):a=O.Uri.file(T9.homedir()));let l=e?{defaultUri:a,canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,openLabel:re.l10n.t("Open")}:{defaultUri:a,canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{[re.l10n.t("Code Workspace")]:["code-workspace"]},openLabel:re.l10n.t("Open")},u=await O.window.showOpenDialog(l),f=u&&u[0];if(f){let d=e?f:f.with({path:ut.posix.dirname(f.path)}),p=await Ze(t,s.output,d,qF()==="always"),g;f.scheme==="file"&&p.cliHost.type==="wsl"?g=e?p.cliHost.cwd:p.cliHost.path.join(p.cliHost.cwd,ut.posix.basename(f.path)):g=_e(f,p.cliHost.platform);let h=It(p.cliHost.path,g);await CC(t,h,p,i,n,r)}}async function CC(t,e,n,r,o,i,s,a){try{await eve(t,e,n,r,o,i,s,a)}catch(c){await $a(c,"ui",o,!1,n.output)}}async function eve(t,e,n,r,o,i,s,a){var k;let{cliHost:c}=n;if(xr(e.rootFolderPath)){if(!await no(t,n.output,r,o,"openInContainer",e.rootFolderPath))return;n=await Ze(t,n.output,e.rootFolderPath),c=n.cliHost,e=It(c.path,e.isWorkspaceFile?c.path.join(c.cwd,ut.basename(e.workspaceOrFolderPath)):c.cwd)}let l=await TS(c,e);if(l){let E=re.l10n.t("Continue");if(await O.window.showInformationMessage(re.l10n.t("The workspace could fail to open in a container: {0}",l),{modal:!0},E)!==E)return}let u=await rve(t,c,e);if(u==="cancelled")return;let f=u&&(u.scheme==="file"?await at(u.fsPath):await c.readFile(_e(u,c.platform))).toString(),m=!!(f&&((k=Me(f))!=null&&k.initializeCommand)),{dockerCLI:d,dockerComposePath:p}=n,g={cliHost:c,dockerPath:d,dockerComposePath:p,appRoot:O.env.appRoot,extensionPath:t.extensionPath,package:await cr(t.extensionPath),output:n.output},h=u&&await(m?cg(g,e.rootFolderPath,u):await ZF(g,e.rootFolderPath,u)||cg(g,e.rootFolderPath,u));if(h==="canceled")return;if(!h&&u){let E=_e(u,c.platform),x=await c.toCommonURI(E);x&&O.window.showTextDocument(O.Uri.parse(x.toString()));let b=re.l10n.t("Show Log");await O.window.showErrorMessage(re.l10n.t("Failed to read Dev Container configuration '{0}' file.",c.path.relative(e.configFolderPath,E)),{modal:!0},b)===b&&O.commands.executeCommand(it);return}let v=h&&!Ux(h.configuration);if(!h||v){let E=await f0({fileHost:c,userDataFolderForConfigurations:await tl(t,c),telemetry:o,output:n.output,openConfigurationCommandId:gm,showLogCommandId:it},e,void 0,h==null?void 0:h.configuration.configFilePath);if(!E||(u=Ce.file(E).with({scheme:Ke.scheme}),h=await ZF(g,e.rootFolderPath,u),!h||h==="canceled"))return}if(!await F5(t,n,h.configuration)||!await ive(n,"mergedConfiguration"in h?h.mergedConfiguration:h.configuration))return;let C=h.configuration,w=h.workspace.workspaceFolder,y=c.type==="wsl"?(await c.toCommonURI(e.workspaceOrFolderPath)).fsPath:e.workspaceOrFolderPath,S=(u==null?void 0:u.scheme)===Ke.scheme&&c.type==="wsl"&&!xr(y)&&await c.toCommonURI(_e(u,c.platform))||u;if(Oo(C)){let E=Kf(c,C);if(!C.initializeCommand&&!await ur(c).readDocument(E))return SC(re.l10n.t('"{0}" does not exist.',E.fsPath),c,C.configFilePath);if(C.workspaceFolder&&!ut.posix.isAbsolute(C.workspaceFolder))return SC(re.l10n.t("Workspace folder in devcontainer.json must be an absolute path."),c,C.configFilePath)}else if(!("image"in C))if("dockerComposeFile"in C){let E=c.type==="wsl"?e.isWorkspaceFile?ut.dirname(y):y:e.rootFolderPath;if(!await K8(n)||!await vve(E,S,n,C))return}else{let E=C.configFilePath;return SC(re.l10n.t('Configuration "{0}" not valid.',c.path.relative(e.rootFolderPath,_e(E,c.platform))),c,E)}e.isWorkspaceFile&&(w=ut.posix.join(w,c.path.basename(e.workspaceOrFolderPath)));let D=dr(n.env),_=(c.type==="local"||c.type==="wsl")&&Ul(D),A=a?c.authority:O.env.remoteAuthority,U=O.Uri.parse(hw(A,y,w,D,_,S));await Qu({uri:U,type:e.isWorkspaceFile?"workspace":"folder",label:re.l10n.t("{0} [Dev Container]",`${Jy(c.platform,e.workspaceOrFolderPath,await c.homedir())}${Bp(A,D)}`)}),await JF(t,i?U.authority:!1),await rC(t,i==="rebuildNoCache"?U.authority:!1),await O.commands.executeCommand("vscode.openFolder",U,s||{})}async function N9(t,e,n){let r=await ove(t,e.rootFolderPath),i=(r==null?void 0:r.scheme)==="file"&&process.platform==="win32"&&xr(r.fsPath)&&!O.workspace.getConfiguration("security").get("allowedUNCHosts",[]).includes(r.authority)?nve(t,e):tve(r,t,e);return(await Promise.all([i.then(s=>s.map(a=>({type:"workspace",uri:a,fileHost:t}))),XF(t,e).then(s=>s.map(a=>({type:"repositoryConfig",uri:a,fileHost:Oa(process.platform,a.with({path:ut.posix.dirname(a.path)}))}))),n?qI(t,e,n).then(s=>s.map(a=>({type:"userData",uri:a,fileHost:t}))):[]])).flat()}async function tve(t,e,n){return Promise.all((await Fa(t)).map(async o=>{if(!t){let i=ut.posix.relative(O.workspace.workspaceFolders[0].uri.path,o.path),s=e.platform==="win32"?"/"+n.rootFolderPath.replace(/\\/g,"/"):n.rootFolderPath;return Ce.from({scheme:Ke.scheme,path:ut.posix.join(s,i)})}if(o.scheme===co.scheme)return Ce.from({scheme:Ke.scheme,path:o.path});if(e.type==="wsl"&&o.scheme==="file"){let i=ut.relative(t.fsPath,o.fsPath),s=ut.posix.resolve(n.rootFolderPath,i.replace(/\\/g,"/"));return Ce.from({scheme:Ke.scheme,path:s})}return o}))}async function nve(t,e){let n=t.path.join(e.rootFolderPath,".devcontainer"),r=[...Gl(t.path,e.rootFolderPath),...(await t.readDirWithTypes(n)).filter(([,o])=>(o&2)!==0).map(([o])=>t.path.join(n,o,"devcontainer.json"))];return(await Promise.all(r.map(o=>t.isFile(o).then(i=>i?Ce.from({scheme:Ke.scheme,path:o}):void 0)))).filter(Boolean)}async function rve(t,e,n){let r=await N9(e,n,await tl(t,e)),o;if(O.env.remoteAuthority){let i=uo(O.env.remoteAuthority);i&&un(i)&&(o=i.configFile)}return zu(r,o)}function ove(t,e){switch(t.type){case"local":return Ce.file(e);case"wsl":return O.env.remoteName==="wsl"?Ce.from({scheme:"vscode-remote",authority:O.env.remoteAuthority,path:e}):t.toCommonURI(e);case"remote":return O.env.remoteName==="ssh-remote"||O.env.remoteName==="tunnel"?Rn(t.platform,Ce.from({scheme:"vscode-remote",authority:O.env.remoteAuthority}),e):void 0;default:return}}async function ive(t,{hostRequirements:e}){var r,o;let n=e&&sve(e);if(n&&(n.cpus||n.memory||n.gpu&&n.gpu!=="optional")){let i=await et(t,"info","--format","{{json .}}"),s=JSON.parse(i.stdout.toString()),a=s.NCPU&&n.cpus&&n.cpus>s.NCPU,c=s.MemTotal&&n.memory&&n.memory>s.MemTotal,l=((o=(r=s.Runtimes)==null?void 0:r.nvidia)==null?void 0:o.path)==="nvidia-container-runtime";if(a||c){let u=[];s.NCPU&&u.push(re.l10n.t("CPUs {0}",s.NCPU.toLocaleString())),s.MemTotal&&u.push(re.l10n.t("RAM {0}",FO(s.MemTotal))),l&&u.push(re.l10n.t("GPU"));let f=[];n.cpus&&f.push(re.l10n.t("CPUs {0}",n.cpus.toLocaleString())),n.memory&&f.push(re.l10n.t("RAM {0}",FO(n.memory))),n.storage&&f.push(re.l10n.t("disk {0}",FO(n.storage))),n.gpu&&n.gpu!=="optional"&&f.push(re.l10n.t("GPU"));let m=re.l10n.t(`Docker daemon: {0}
devcontainer.json: {1}`,u.join(", "),f.join(", "));if(!await O.window.showInformationMessage(re.l10n.t("Not all host requirements in devcontainer.json are met by the Docker daemon."),{modal:!0,detail:m},re.l10n.t("Continue")))return!1}}return!0}function sve(t){return{cpus:t.cpus||0,memory:P9(t.memory||"0"),storage:P9(t.storage||"0"),gpu:t.gpu}}function P9(t){let e=/^(\d+)([tgmk]b)?$/.exec(t);if(e){let[,n,r]=e,o=parseInt(n,10),i=r&&{t:2**40,g:2**30,m:2**20,k:2**10}[r[0]]||1;return o*i}return 0}function FO(t){let e=Math.min(Math.floor(Math.log2(Math.max(Math.abs(t),1))/10),4),n=t/Math.pow(2,10*e),r=Math.max(Math.pow(10,2-Math.floor(Math.log10(Math.max(Math.abs(n),1)))),1),o=Math.round(n*r)/r,i=[" bytes","kb","mb","gb","tb"][e];return`${o.toLocaleString()}${i}`}async function Dg(t,e,n,r,o,i){if(!await sC(t))return;let s=null;if(!await no(t,n,r,e,"cloneInVolume"))return;let a=await Ze(t,n);if(typeof o=="string")s=o;else{let c;if(o!==void 0?c=o:c=await O.commands.executeCommand("git-base.api.getRemoteSources",{providerLabel:l=>re.l10n.t("Clone a repository from {0} in a Container Volume",l.name),urlLabel:re.l10n.t("Clone git repository from URL"),branch:!0}),c){s=(typeof c=="string"?c:c.url).trim(),s.split("/").length===2&&s.indexOf(":")===-1&&(s=`https://github.com/${s}`);let l=oa(s);if(await dR(a.cliHost,l.repositoryUrl,a.cliHost.type==="local"?await JI(a.output):{},a.output)===!1){O.commands.executeCommand(it),await O.window.showInformationMessage(re.l10n.t("Cannot access the repository '{0}'.",l.repositoryUrl),{modal:!0});return}typeof c!="string"&&c.branch&&(s=`${s}/tree/${c.branch}`)}}s&&await L9(t,a,s,i)}async function L9(t,e,n,r){if(r||(r=await uve(e)),r){let o=WO(n);r!==li&&(o=await dve(n)),o&&await EC(t,n,r,o,e)}}async function ave(t,e,n,r,o,i){if(!await sC(t))return;let s=/^(?:(?:https:\/\/)?github.com\/)?([^/]+)\/([^/]+?)(?:\/(?:pull\/([0-9]+)))?(?:\/|$)/i;if(!await no(t,n,r,e,"checkoutPRInVolume"))return;let a=await Ze(t,n),c={placeHolder:re.l10n.t("e.g. https://github.com/microsoft/vscode/pull/123"),prompt:re.l10n.t("Enter a GitHub pull request url"),validateInput:f=>s.test(f)?void 0:re.l10n.t("Invalid pull request url")},l;if(o?l=o:l=await O.window.showInputBox(c),!l)return;let u=oa(l);if(u.repository==="unknown"||!u.pullRequestId){await O.window.showInformationMessage(re.l10n.t("Invalid pull request URL '{0}'.",l),{modal:!0});return}await L9(t,a,l,i)}async function A9(t,e,n,r,o,i,s){if(!await no(t,i,s,o,"inspectVolume"))return;let a=await Ze(t,i);e||(e=await lve(a)),e&&(n&&r?await hve(e,n,r,a):await pve(e,a))}async function cve(t,e,n,r,o){await no(t,r,o,n,"inspectVolume")&&await A9(t,e==null?void 0:e.volumeName,void 0,void 0,n,r,o)}var xC=class{get detail(){return""}},UO=class extends xC{get label(){return re.l10n.t("$(plus) Create a new volume...")}get description(){return""}get volumeName(){return""}get detail(){return re.l10n.t("Use this volume to store several cloned repositories.")}get alwaysShow(){return!0}},MO=class extends xC{volume;constructor(e){super(),this.volume=e}get label(){return re.l10n.t("$(folder) {0}",this.volume.Name)}get description(){let e=new Date(this.volume.CreatedAt);return re.l10n.t("created at {0}",e.toDateString())}get volumeName(){return this.volume.Name}},$O=class extends xC{volume;constructor(e){super(),this.volume=e}get label(){return re.l10n.t("$(folder) {0}",this.volume.Name)}get description(){let e=new Date(this.volume.CreatedAt);return re.l10n.t("created at {0}",e.toDateString())}get volumeName(){return this.volume.Name}};async function lve(t){let e=await Uo(t),r=(await Jf(t,e)).map(a=>new $O(a)),o=re.l10n.t("Select the volume to inspect with Visual Studio Code"),i=O.window.createQuickPick();i.items=r,i.placeholder=o,i.show();let s=await new Promise(a=>{i.onDidAccept(()=>a(i.activeItems[0])),i.onDidHide(()=>a(void 0))});return i.hide(),s?s.volume.Name:null}async function uve(t){let e=await Uo(t,["vsch.local.repository.unique=false"]),r=(await Jf(t,e)).map(u=>new MO(u)),o=new UO,i=[o,...r],s=re.l10n.t("Select the volume for the cloned repository"),a=O.window.createQuickPick();a.items=i,a.placeholder=s,a.ignoreFocusOut=!0,a.show();let c=await new Promise(u=>{a.onDidAccept(()=>u(a.activeItems[0])),a.onDidHide(()=>u(void 0))});if(a.hide(),!c)return null;let l=null;return c===o?l=await fve(t):l=c.volumeName,l}async function fve(t){let e="",n="vsc-remote-containers",r=await Uo(t);r.find(s=>s===n)||(e=n);let o={prompt:re.l10n.t("Enter the volume name."),value:e,ignoreFocusOut:!0,validateInput:s=>/^[a-zA-Z0-9][a-zA-Z0-9_.-]+$/i.test(s)?null:s.length<2?re.l10n.t("Volume names should be at least two characters and the first character must be alphanumeric."):re.l10n.t("Only [a-zA-Z0-9_.-] are allowed and the first character must be alphanumeric.")},i=await O.window.showInputBox(o);return i?r.find(s=>s===i)?(await O.window.showErrorMessage(re.l10n.t("Volume already exists"),{modal:!0}),null):i:null}async function dve(t){let e={prompt:re.l10n.t("Enter the target folder name."),value:WO(t),ignoreFocusOut:!0},n=await O.window.showInputBox(e);return n||null}function WO(t){return ci(t).repositoryName}async function mve(){return(await O.authentication.getSession("github",["repo"],{createIfNone:!0})).accessToken}async function EC(t,e,n,r,o,i=!1){let s=dr(o.env),a=n_(e),c;try{c=await a.parseUrl(void 0)}catch(u){if(u instanceof mw){O.window.showErrorMessage(u.description);return}let f=await mve();try{c=await a.parseUrl(f)}catch{O.window.showErrorMessage(re.l10n.t("Cannot access '{0}'.",e),{modal:!0});return}}let l=O.Uri.parse(Wi(o.cliHost.authority,e,n,r,!1,s,c));n===li&&(n=re.l10n.t("a unique volume")),await Qu({uri:l,type:"folder",label:re.l10n.t("{0} in {1} [Dev Container]",r,n)}),await JF(t,i?l.authority:!1),await rC(t,i==="rebuildNoCache"?l.authority:!1),await O.commands.executeCommand("vscode.openFolder",l)}async function pve(t,e){let n=dr(e.env),r=O.Uri.parse(Wi(e.cliHost.authority,void 0,t,void 0,!0,n,void 0));await Qu({uri:r,type:"folder",label:re.l10n.t("Volume {0} [Dev Container]",t)}),await O.commands.executeCommand("vscode.openFolder",r)}async function hve(t,e,n,r){let o=dr(r.env),i=O.Uri.parse(Wi(r.cliHost.authority,e,t,n,!0,o,void 0));await Qu({uri:i,type:"folder",label:re.l10n.t("{0} in {1} [Inspect Dev Container]",n,t)}),await O.commands.executeCommand("vscode.openFolder",i)}async function wC(t,e,n,r,o){var c;if(!await $s(n))return;let i,s=t.cliHost;if(s.type==="wsl"){let l=await s.toCommonURI(s.cwd);l&&l.scheme==="file"&&(i=l.fsPath)}let a=GG(t.cliHost.authority,e.Name,dr(t.env),i);if(o=o||((c=await D8(n.globalStoragePath,e))==null?void 0:c.workspaceFolder),o){let l=O.Uri.parse(`vscode-remote://${a}${o}`),u={};r?u.forceNewWindow=!0:u.forceReuseWindow=!0,await O.commands.executeCommand("vscode.openFolder",l,u)}else{let l={remoteAuthority:a};r||(l.reuseWindow=!0),await O.commands.executeCommand("vscode.newWindow",l)}}async function gve(t,e,n){let r=!0,o=(async()=>{if(!await n)throw new Error("cancel");r=!1;let i=await Ze(t,e),s=await Jl(i),a=await ws(i,s),c=[];if(a.forEach(l=>{l.State.Status==="running"&&c.push({label:l.Name,description:`${l.Config.Image} ${l.Id}`,containerInfo:l})}),c.length===0)throw O.window.showErrorMessage(re.l10n.t("There are no running containers to attach to."),{modal:!0}),new Error("cancel");return c.sort((l,u)=>l.label.localeCompare(u.label))})();try{let i={placeHolder:re.l10n.t("Select the container to attach VS Code")},s=await O.window.showQuickPick(o,i);if(!s&&r){if(!await n)throw new Error("cancel");s=await O.window.showQuickPick(o,i)}return s?s.containerInfo:void 0}catch(i){if(i&&i.message==="cancel")return;throw i}}async function vve(t,e,n,r){if(!r.workspaceFolder)return SC(re.l10n.t("Workspace folder not specified in devcontainer.json."),n.cliHost,r.configFilePath),!1;if(!ut.posix.isAbsolute(r.workspaceFolder))return SC(re.l10n.t("Workspace folder in devcontainer.json must be an absolute path."),n.cliHost,r.configFilePath),!1;if(r.initializeCommand)return!0;let o=await zl(n.cliHost,r,n.cliHost.env,n.cliHost.cwd),i=Ok(t,{buildCLIHost:n.cliHost,configFile:e});return!(await Zl(n,i)&&!await wve(n.cliHost,o))}async function wve(t,e){let n=[];for(let r=0;r<e.length;r++)await t.isFile(e[r])||n.push(e[r]);return n.length>0?(O.window.showErrorMessage(re.l10n.t("The following referenced docker compose files do not exist: {0}",n.join(", ")),{modal:!0}),!1):!0}async function SC(t,e,n){if(await O.window.showErrorMessage(t,{modal:!0},re.l10n.t("Open devcontainer.json"))){let o=_e(n,e.platform),i=await e.toCommonURI(o);i&&O.window.showTextDocument(O.Uri.parse(i.toString()))}}async function F0(t,e,n,r,o,i,s){await n.createConfiguration(s)&&await F9(t,e,r,o,i)}async function F9(t,e,n,r,o){if([void 0,"wsl","ssh-remote","tunnel"].indexOf(O.env.remoteName)===-1)return;let i=O.workspace.workspaceFile,s=O.workspace.workspaceFolders,a=i||s&&s.length&&s[0].uri||void 0;if(a&&a.scheme!=="vscode-vfs"){let c;if(e.type==="wsl"&&a.scheme==="file"){let m=_e(a,process.platform),d=$f(m)||n0()||await $v(r)||(()=>{throw new Error("No default WSL distro found.")})();c=await Ol(d,m,r)}else c=_e(a,e.platform);let l=It(e.path,c),f=(await i0(e,l,await tl(t,e))).sort((m,d)=>{if(m.type!==d.type)return m.type.localeCompare(d.type);let p=ut.posix.dirname(m.uri.path),g=ut.posix.dirname(d.uri.path);return p.localeCompare(g)})[0];f&&(await nC(e,r)).canConnectToContainer&&await Cve(t,f,l,e,n,r,o)}}var O0="showReopenInContainerNotification",O9="showReopenInContainerNotificationReset";function yve(t){return t.globalState.update(O9,Date.now())}async function Cve(t,e,n,r,o,i,s){let a=t.globalState.get(O9);if(HO(t.globalState.get(O0),a)||HO(t.workspaceState.get(O0),a))return;let c=EG(r,n,e.uri),l,u="";if(r.platform!=="linux"&&O.env.remoteName!=="wsl"&&!(r.platform==="win32"&&xr(n.rootFolderPath))&&O.env.remoteName!=="ssh-remote"){let w=await Ze(t,i);if(l=await gj(w.cliHost,n,w.output),l&&c){let y=await Tv(w.cliHost,n.rootFolderPath,w.output);y&&await wj(w.cliHost,n,w.cliHost.path.relative(y,_e(e.uri,w.cliHost.platform)),w.output)||(l=void 0)}if(l){let{cliHost:y,dockerCLI:S,dockerComposePath:D}=w,_={cliHost:y,dockerPath:S,dockerComposePath:D,appRoot:O.env.appRoot,extensionPath:t.extensionPath,package:await cr(t.extensionPath),output:i},A=await cg(_,n.rootFolderPath,e.uri);(!A||!Oo(A.configuration)&&!("image"in A.configuration))&&(l=void 0)}l&&(u=re.l10n.t(" Or: Clone repository in Docker volume for [better I/O performance](https://aka.ms/vscode-remote/containers/open-repo)."))}O.env.remoteName==="wsl"&&n.rootFolderPath.match(/^\/mnt\/[a-z]\//)&&(u=re.l10n.t(" This workspace is on the Windows file system (/mnt/). For best performance, we recommend moving the workspace to the Linux file system (~/home)."));let f;c?n.isWorkspaceFile?f=re.l10n.t("Workspace contains a Dev Container configuration file."):f=re.l10n.t("Folder contains a Dev Container configuration file."):f=re.l10n.t("There is a [Dev Container configuration](command:remote-containers.openDevContainerFile) available for this repository.");let m=re.l10n.t("Reopen in Container"),d=re.l10n.t("Clone in Volume"),p=re.l10n.t("Don't Show Again..."),g=n.isWorkspaceFile?re.l10n.t("{0} Reopen workspace to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).{1}",f,u):re.l10n.t("{0} Reopen folder to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).{1}",f,u),h=l?[m,d,p]:[m,p];Eve(o,e.type);let v=await O.window.showInformationMessage(g,...h);if(Sve(o,v===m?"reopen":v===d?"openRepository":v===p?"dontShowAgain":"cancel",e.type),v===m){if(!await O.workspace.requestWorkspaceTrust({message:iC})||!await no(t,i,s,o,"reopenInContainer"))return;let y=await Ze(t,i);if(y.cliHost.type==="wsl"&&r.platform==="win32"){let{cwd:S}=await jR(n.workspaceOrFolderPath,ts(),i);n=It(y.cliHost.path,S)}await CC(t,n,y,s,o,!1,{forceReuseWindow:!0})}else if(v===d){let w=await Ze(t,i),y=await vj(w.cliHost,n,w.output),S=re.l10n.t("OK"),D=re.l10n.t("Cancel");(!y||S===await O.window.showInformationMessage(re.l10n.t("Local changes not pushed to the Git remote will not be available in the Docker volume."),S,D))&&await O.window.withProgress({location:O.ProgressLocation.Notification,title:re.l10n.t("Clone in Volume")},async(_,A)=>{_.report({message:re.l10n.t("Follow the prompts at the top of the window.")}),await O.commands.executeCommand(KI,l)})}else if(v===p){let w=n.isWorkspaceFile?re.l10n.t("Any Workspace"):re.l10n.t("Any Folder"),y=n.isWorkspaceFile?re.l10n.t("Current Workspace"):re.l10n.t("Current Folder"),S=n.isWorkspaceFile?re.l10n.t("Don't show again for the current workspace or for any workspace?"):re.l10n.t("Don't show again for the current folder or for any folder?"),D=await O.window.showInformationMessage(S,w,y);D===w?await t.globalState.update(O0,Date.now()):D===y&&await t.workspaceState.update(O0,Date.now())}}function Eve(t,e){t.sendTelemetryEvent("reopenNotificationOpen",{location:e})}function Sve(t,e,n){t.sendTelemetryEvent("reopenNotificationResult",{result:e,location:n})}function HO(t,e){return t===!1?t=1:t===void 0&&(t=-1),e===void 0&&(e=0),e<t}async function xve(t,e,n){if(!await no(t,e.log,e.onDidInput,n,"trySample"))return;let r=await Ze(t,e.log),o=[{label:"C++",detail:"https://github.com/Microsoft/vscode-remote-try-cpp"},{label:"Go",detail:"https://github.com/Microsoft/vscode-remote-try-go"},{label:"Java",detail:"https://github.com/Microsoft/vscode-remote-try-java"},{label:".NET",detail:"https://github.com/Microsoft/vscode-remote-try-dotnet"},{label:"Node",detail:"https://github.com/Microsoft/vscode-remote-try-node"},{label:"PHP",detail:"https://github.com/Microsoft/vscode-remote-try-php"},{label:"Python",detail:"https://github.com/Microsoft/vscode-remote-try-python"},{label:"Rust",detail:"https://github.com/Microsoft/vscode-remote-try-rust"}],i={placeHolder:re.l10n.t("Select a sample repository to clone in a container volume")},s=await O.window.showQuickPick(o,i);s&&s.detail&&await EC(t,s.detail,li,WO(s.detail),r)}async function _ve(t){let e=await Promise.all((await U9(t)).map(async r=>{let o=await(0,BO.promisify)(M0.stat)(r.path),i=r.time;return{label:r.prefix,description:`${Ig(i.getFullYear())}-${Ig(i.getMonth()+1)}-${Ig(i.getDate())} ${Ig(i.getHours())}:${Ig(i.getMinutes())}:${Ig(i.getSeconds())} - ${o.size} bytes`,path:r.path}}));e.length||e.push({label:re.l10n.t("No log files found.")});let n=await O.window.showQuickPick(e,{placeHolder:re.l10n.t("Choose a log file")});n&&n.path&&await O.window.showTextDocument(O.Uri.file(n.path))}function Ig(t,e=2){return t.toString().padStart(e,"0")}async function Dve(t,e,n){let r=(await U9(t)).find(o=>o.name.startsWith(e)&&o.path!==n);r?await O.window.showTextDocument(O.Uri.file(r.path)):await O.window.showInformationMessage(re.l10n.t("No previous log file found."),{modal:!0})}async function U9(t){let e=[],n=ut.basename(t.logPath),r=ut.dirname(ut.dirname(ut.dirname(t.logPath))),o=/(\d\d\d\d)(\d\d)(\d\d)T(\d\d)(\d\d)(\d\d)/;o.test(ut.basename(r))&&(r=ut.dirname(r));for(let i of(await U0(r)).sort().reverse()){let s=o.exec(i);if(s){let a=ut.join(r,i);for(let c of await U0(a)){let l=ut.join(a,c),u=c.startsWith("window");for(let f of u?await U0(l):[c]){let m=ut.join(u?l:a,f),d=ut.join(m,n);for(let p of(await U0(d)).sort()){let g=ut.join(d,p),h=/(\d\d\d\d)-(\d\d)-(\d\d)T(\d\d)[:\-](\d\d)[:\-](\d\d)\.(\d\d\d)Z/.exec(p),v=h?new Date(`${h[1]}-${h[2]}-${h[3]}T${h[4]}:${h[5]}:${h[6]}.${h[7]}Z`):new Date(`${s[1]}-${s[2]}-${s[3]}T${s[4]}:${s[5]}:${s[6]}Z`);e.push({name:p,path:g,time:v,prefix:h?p.substr(0,h.index-1):p.substr(0,p.length-4)})}}}}}return e.sort((i,s)=>i.time>s.time?-1:i.time<s.time?1:i.path.localeCompare(s.path)),e}async function U0(t){try{return await(0,BO.promisify)(M0.readdir)(t)}catch{return[]}}0&&(module.exports={activate,attachToContainer,deactivate});
/*! Bundled license information:

@nevware21/ts-utils/dist/es5/mod/ts-utils.js:
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)

@nevware21/ts-async/dist/es5/mod/ts-async.js:
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.1 https://github.com/nodeca/js-yaml @license MIT *)
*/
//# sourceMappingURL=extension.js.map
