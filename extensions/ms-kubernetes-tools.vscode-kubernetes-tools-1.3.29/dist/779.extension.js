"use strict";exports.id=779,exports.ids=[779],exports.modules={84779(e,r,o){o.d(r,{default:()=>_});var t=o(1708),i=o(4573),n=o(76760),a=o(73136),s=o(57975),c=o(31421),m=o(51455),l=o(48161),d=o(73024);let f,p;function u(){return void 0===p&&(p=(()=>{try{return d.statSync("/run/.containerenv"),!0}catch{return!1}})()||(void 0===f&&(f=function(){try{return d.statSync("/.dockerenv"),!0}catch{return!1}}()||function(){try{return d.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}()),f)),p}const w=()=>{if("linux"!==t.platform)return!1;if(l.release().toLowerCase().includes("microsoft"))return!u();try{return!!d.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")&&!u()}catch{return!1}},g=t.env.__IS_WSL_TEST__?w:w(),h=(()=>{const e="/mnt/";let r;return async function(){if(r)return r;const o="/etc/wsl.conf";let t=!1;try{await m.access(o,m.constants.F_OK),t=!0}catch{}if(!t)return e;const i=await m.readFile(o,{encoding:"utf8"}),n=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return n?(r=n.groups.mountPoint.trim(),r=r.endsWith("/")?r:`${r}/`,r):e}})(),v=async()=>g?(async()=>`${await h()}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`)():`${t.env.SYSTEMROOT||t.env.windir||String.raw`C:\Windows`}\\System32\\WindowsPowerShell\\v1.0\\powershell.exe`;function x(e,r,o){const t=o=>Object.defineProperty(e,r,{value:o,enumerable:!0,writable:!0});return Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get(){const e=o();return t(e),e},set(e){t(e)}}),e}const y=(0,s.promisify)(c.execFile),b=(0,s.promisify)(c.execFile);async function S(e){return async function(e,{humanReadableOutput:r=!0,signal:o}={}){if("darwin"!==t.platform)throw new Error("macOS only");const i=r?[]:["-ss"],n={};o&&(n.signal=o);const{stdout:a}=await b("osascript",["-e",e,i],n);return a.trim()}(`tell application "Finder" to set app_path to application file id "${e}" as string\ntell application "System Events" to get value of property list item "CFBundleName" of property list file (app_path & ":Contents:Info.plist")`)}const E=(0,s.promisify)(c.execFile),B={MSEdgeHTM:{name:"Edge",id:"com.microsoft.edge"},MSEdgeBHTML:{name:"Edge Beta",id:"com.microsoft.edge.beta"},MSEdgeDHTML:{name:"Edge Dev",id:"com.microsoft.edge.dev"},AppXq0fevzme2pys62n3e0fbqa7peapykr8v:{name:"Edge",id:"com.microsoft.edge.old"},ChromeHTML:{name:"Chrome",id:"com.google.chrome"},ChromeBHTML:{name:"Chrome Beta",id:"com.google.chrome.beta"},ChromeDHTML:{name:"Chrome Dev",id:"com.google.chrome.dev"},ChromiumHTM:{name:"Chromium",id:"org.chromium.Chromium"},BraveHTML:{name:"Brave",id:"com.brave.Browser"},BraveBHTML:{name:"Brave Beta",id:"com.brave.Browser.beta"},BraveDHTML:{name:"Brave Dev",id:"com.brave.Browser.dev"},BraveSSHTM:{name:"Brave Nightly",id:"com.brave.Browser.nightly"},FirefoxURL:{name:"Firefox",id:"org.mozilla.firefox"},OperaStable:{name:"Opera",id:"com.operasoftware.Opera"},VivaldiHTM:{name:"Vivaldi",id:"com.vivaldi.Vivaldi"},"IE.HTTP":{name:"Internet Explorer",id:"com.microsoft.ie"}};new Map(Object.entries(B));class P extends Error{}const C=(0,s.promisify)(c.execFile);const M=(0,s.promisify)(c.execFile),F=n.dirname((0,a.fileURLToPath)("file:///home/runner/work/vscode-kubernetes-tools/vscode-kubernetes-tools/node_modules/open/index.js")),L=n.join(F,"xdg-open"),{platform:T,arch:A}=t,H=async(e,r)=>{let o;for(const t of e)try{return await r(t)}catch(e){o=e}throw o},O=async e=>{if(e={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...e},Array.isArray(e.app))return H(e.app,r=>O({...e,app:r}));let r,{name:o,arguments:n=[]}=e.app??{};if(n=[...n],Array.isArray(o))return H(o,r=>O({...e,app:{name:r,arguments:n}}));if("browser"===o||"browserPrivate"===o){const r={"com.google.chrome":"chrome","google-chrome.desktop":"chrome","com.brave.Browser":"brave","org.mozilla.firefox":"firefox","firefox.desktop":"firefox","com.microsoft.msedge":"edge","com.microsoft.edge":"edge","com.microsoft.edgemac":"edge","microsoft-edge.desktop":"edge"},a={chrome:"--incognito",brave:"--incognito",firefox:"--private-window",edge:"--inPrivate"},s=g?await async function(){const e=await v(),r=String.raw`(Get-ItemProperty -Path "HKCU:\Software\Microsoft\Windows\Shell\Associations\UrlAssociations\http\UserChoice").ProgId`,o=i.Buffer.from(r,"utf16le").toString("base64"),{stdout:t}=await M(e,["-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand",o],{encoding:"utf8"}),n=t.trim(),a={ChromeHTML:"com.google.chrome",BraveHTML:"com.brave.Browser",MSEdgeHTM:"com.microsoft.edge",FirefoxURL:"org.mozilla.firefox"};return a[n]?{id:a[n]}:{}}():await async function(){if("darwin"===t.platform){const e=await async function(){if("darwin"!==t.platform)throw new Error("macOS only");const{stdout:e}=await y("defaults",["read","com.apple.LaunchServices/com.apple.launchservices.secure","LSHandlers"]),r=/LSHandlerRoleAll = "(?!-)(?<id>[^"]+?)";\s+?LSHandlerURLScheme = (?:http|https);/.exec(e),o=r?.groups.id??"com.apple.Safari";return"com.apple.safari"===o?"com.apple.Safari":o}();return{name:await S(e),id:e}}if("linux"===t.platform){const{stdout:e}=await C("xdg-mime",["query","default","x-scheme-handler/http"]),r=e.trim();return{name:r.replace(/.desktop$/,"").replace("-"," ").toLowerCase().replaceAll(/(?:^|\s|-)\S/g,e=>e.toUpperCase()),id:r}}if("win32"===t.platform)return async function(e=E){const{stdout:r}=await e("reg",["QUERY"," HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice","/v","ProgId"]),o=/ProgId\s*REG_SZ\s*(?<id>\S+)/.exec(r);if(!o)throw new P(`Cannot find Windows browser in stdout: ${JSON.stringify(r)}`);const{id:t}=o.groups,i=B[t];if(!i)throw new P(`Unknown browser ID: ${t}`);return i}();throw new Error("Only macOS, Linux, and Windows are supported")}();if(s.id in r){const t=r[s.id];return"browserPrivate"===o&&n.push(a[t]),O({...e,app:{name:$[t],arguments:n}})}throw new Error(`${s.name} is not supported as a default browser`)}const a=[],s={};if("darwin"===T)r="open",e.wait&&a.push("--wait-apps"),e.background&&a.push("--background"),e.newInstance&&a.push("--new"),o&&a.push("-a",o);else if("win32"===T||g&&!u()&&!o){r=await v(),a.push("-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand"),g||(s.windowsVerbatimArguments=!0);const t=["Start"];e.wait&&t.push("-Wait"),o?(t.push(`"\`"${o}\`""`),e.target&&n.push(e.target)):e.target&&t.push(`"${e.target}"`),n.length>0&&(n=n.map(e=>`"\`"${e}\`""`),t.push("-ArgumentList",n.join(","))),e.target=i.Buffer.from(t.join(" "),"utf16le").toString("base64")}else{if(o)r=o;else{const e=!F||"/"===F;let o=!1;try{await m.access(L,m.constants.X_OK),o=!0}catch{}r=t.versions.electron??("android"===T||e||!o)?"xdg-open":L}n.length>0&&a.push(...n),e.wait||(s.stdio="ignore",s.detached=!0)}"darwin"===T&&n.length>0&&a.push("--args",...n),e.target&&a.push(e.target);const l=c.spawn(r,a,s);return e.wait?new Promise((r,o)=>{l.once("error",o),l.once("close",t=>{!e.allowNonzeroExitCode&&t>0?o(new Error(`Exited with code ${t}`)):r(l)})}):(l.unref(),l)};function k(e){if("string"==typeof e||Array.isArray(e))return e;const{[A]:r}=e;if(!r)throw new Error(`${A} is not supported`);return r}function U({[T]:e},{wsl:r}){if(r&&g)return k(r);if(!e)throw new Error(`${T} is not supported`);return k(e)}const $={};x($,"chrome",()=>U({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}})),x($,"brave",()=>U({darwin:"brave browser",win32:"brave",linux:["brave-browser","brave"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/BraveSoftware/Brave-Browser/Application/brave.exe",x64:["/mnt/c/Program Files/BraveSoftware/Brave-Browser/Application/brave.exe","/mnt/c/Program Files (x86)/BraveSoftware/Brave-Browser/Application/brave.exe"]}})),x($,"firefox",()=>U({darwin:"firefox",win32:String.raw`C:\Program Files\Mozilla Firefox\firefox.exe`,linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"})),x($,"edge",()=>U({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"})),x($,"browser",()=>"browser"),x($,"browserPrivate",()=>"browserPrivate");const _=(e,r)=>{if("string"!=typeof e)throw new TypeError("Expected a `target`");return O({...r,target:e})}}};
//# sourceMappingURL=779.extension.js.map